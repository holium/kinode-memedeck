(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3995],{69854:function(e,t,r){Promise.resolve().then(r.bind(r,64955))},64955:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(57348),l=r(15346),o=r(24645),a=r(8485),s=r(5265),i=r(95478),u=r(71402),c=r(35878);function d(e){var t;let{params:r}=e,{handle:d}=(0,i.u)({params:r,key:"handle"}),{userBookmarks:m,setUserBookmarks:h}=(0,u.useProfile)(),[p,f]=(0,l.useState)(null!==(t=m[d])&&void 0!==t?t:[]),[v,b]=(0,l.useState)(!1),{isFetching:g}=(0,s.M)({feed:p,setFeed:f,hasFetched:v,setHasFetched:b,fetchFn:(e,t)=>{let{start:r,limit:n}=e;return c.P.getSavedMemes({start:r,limit:n,user_handle:d},t)},pageSize:20});return(0,l.useEffect)(()=>{0!==p.length&&h(e=>({...e,[d]:p}))},[p,d,h]),(0,n.jsx)(a.o,{memes:p,hasFetched:v,hasSearched:!1,isFetching:g,renderItem:(e,t)=>(0,n.jsx)(o.Y,{meme:e},"".concat(t,"-").concat(e.id))})}},8485:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});var n=r(57348),l=r(4930),o=r(82896);let a={default:3,1100:3,700:2,500:1},s=e=>{let{memes:t,isFetching:r,hasFetched:s,hasSearched:i,noResultsMessage:u="No memes",className:c="overflow-hidden pl-3 pt-3",breakpoints:d=a,renderItem:m}=e;return(0,n.jsxs)("div",{className:c,children:[!r&&0===t.length&&(s||i)?(0,n.jsx)("div",{className:"text-white-400/75",children:u}):null,r&&0===t.length&&(0,n.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,n.jsx)(l.c,{})}),(0,n.jsx)(o.Z,{breakpointCols:d,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(m)}),r&&t.length>0&&(0,n.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,n.jsx)(l.c,{})})]})}},24645:function(e,t,r){"use strict";r.d(t,{Y:function(){return c}});var n=r(57348),l=r(45155),o=r(15346),a=r(18491),s=r(81254),i=r(96622),u=r(69467);let c=e=>{var t,r,c,d,m,h,p,f,v,b;let{meme:g,isSelected:C,showCreator:w=!1,onClick:y}=e,{onOpenMeme:x}=(0,i.useMemeModal)(),[j,P]=(0,o.useState)((0,u.kl)(g));return(0,n.jsx)("article",{className:"relative w-full cursor-pointer select-none overflow-hidden rounded-lg border-2 ".concat(C?"border-blue-500":"border-transparent"),onClick:()=>y?y():x(g.id),children:(0,n.jsxs)("div",{className:"group flex w-full flex-col",children:["generated"===g.source?(0,n.jsx)(s.g,{type:g.source,src:g.url,alt:g.id,canvasWidth:null!==(c=g.width)&&void 0!==c?c:1024,canvasHeight:null!==(d=g.height)&&void 0!==d?d:1024,imageWidth:null!==(m=g.width)&&void 0!==m?m:1024,imageHeight:null!==(h=g.height)&&void 0!==h?h:1024,topText:null!==(p=null===(t=g.text_overlay)||void 0===t?void 0:t.top_text)&&void 0!==p?p:null,bottomText:null!==(f=null===(r=g.text_overlay)||void 0===r?void 0:r.bottom_text)&&void 0!==f?f:null,centerText:null,className:"z-0 size-full rounded-lg bg-white-400/5 transition-transform group-hover:scale-105"}):(0,n.jsx)(l.default,{className:"z-0 size-full rounded-lg bg-white-400/5 transition-transform group-hover:scale-105",src:g.url,alt:g.id,width:null!==(v=g.width)&&void 0!==v?v:1024,height:null!==(b=g.height)&&void 0!==b?b:1024}),j&&(0,n.jsx)(a.T,{src:g.url,onClickShow:()=>P(!1)}),w&&(0,n.jsx)("div",{className:"absolute inset-0 z-0 flex select-none items-end px-1.5 py-1 opacity-0 transition-opacity hover:opacity-100",children:(0,n.jsx)("div",{className:"flex flex-1 items-center gap-2",children:(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate p-1 text-sm font-semibold drop-shadow-[0.5px_0.5px_1px_rgba(0,0,0,80)]",children:[(0,n.jsx)(l.default,{src:g.creator_avatar||"",alt:g.creator_handle||"",className:"rounded-full hover:scale-105",width:24,height:24}),g.creator_handle]})})})]})})}},5265:function(e,t,r){"use strict";r.d(t,{M:function(){return a}});var n=r(15346),l=r(74859),o=r(76808);let a=e=>{let{feed:t,setFeed:r,hasFetched:a,setHasFetched:s,searchQuery:i,setSearchQuery:u,fetchFn:c,deckId:d,fetchOnLoad:m=!0,pageSize:h=50,ignoreWindowScroll:p=!1,onFetchOnLoad:f}=e,{initialQuery:v,initialInterval:b,initialSortBy:g}=(0,o.x)(),[C,w]=(0,n.useState)(0),[y,x]=(0,n.useState)(!0),[j,P]=(0,n.useState)(!1),[O,k]=(0,n.useState)(b),[_,S]=(0,n.useState)(g),N=(0,n.useCallback)(async(e,t)=>{let n=await c(e,t);return r(t=>n.length>0&&Number(e.start)>0?[...t,...n]:n),P(!1),s(!0),x(n.length===h),n},[c,h,r,s]),M=(0,n.useMemo)(()=>(0,l.k)(N,1e3),[N]),E=(0,n.useCallback)(async(e,t)=>{var r,n,l,o,a;return P(!0),s(!1),M({search:null!==(r=e.search)&&void 0!==r?r:i,start:null!==(n=e.start)&&void 0!==n?n:C,limit:null!==(l=e.limit)&&void 0!==l?l:h,interval:null!==(o=e.interval)&&void 0!==o?o:O,sort_by:null!==(a=e.sort_by)&&void 0!==a?a:_,...d?{deck_id:d}:{}},t)},[M,d,h,O,i,_,s,C]),I=(0,n.useCallback)(e=>{if(!a||!y||j)return;let t=null!=e?e:C+h;w(t),E({start:t})},[a,y,j,C,h,E]),D=(0,n.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&I()},[I]),A=(0,n.useCallback)((e,t,r)=>{let n=new URL(window.location.href);e.length>0?n.searchParams.set("query",e):n.searchParams.delete("query"),t?n.searchParams.set("interval",t):n.searchParams.delete("interval"),r?n.searchParams.set("sort_by",r):n.searchParams.delete("sort_by"),window.history.pushState({},"",n.toString())},[]),F=(0,n.useCallback)(async(e,t,r)=>{null==u||u(e),u&&A(e,t,r),w(0),x(!0),E({search:e,start:0,limit:h,interval:t,sort_by:r})},[E,h,u,A]),z=(0,n.useCallback)(e=>{r([]),k(e),F("",e,_)},[F,_,r]),R=(0,n.useCallback)(e=>{r([]),S(e),F("",O,e)},[F,O,r]);return(0,n.useEffect)(()=>{if(!p)return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[D,p]),(0,n.useEffect)(()=>{let e=new AbortController;if(!a&&!(t.length>0)&&m&&!j)return E({search:v,start:0,limit:h,interval:b,sort_by:g},e.signal).then(f),()=>{!e.signal.aborted&&j&&e.abort()}},[t.length,E,m,a,v,b,j,f,h,g]),(0,n.useEffect)(()=>(v&&(null==u||u(v)),b&&k(b),g&&S(g),()=>{r([]),null==u||u(""),s(!1)}),[b,v,g,r,s,k,u,S]),{feed:t,setFeed:r,setHasMore:x,onSearch:F,searchInterval:O,onSelectInterval:z,searchSortBy:_,onSelectSortBy:R,isFetching:j,hasMore:y,setIsFetching:P,setHasFetched:s,onReachedEnd:I}}},76808:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var n=r(16189),l=r(41973);let o=()=>{var e,t,r;let o=(0,n.useSearchParams)();return{initialQuery:null!==(e=o.get("query"))&&void 0!==e?e:"",initialInterval:null!==(t=o.get("interval"))&&void 0!==t?t:l.u.Week,initialSortBy:null!==(r=o.get("sort_by"))&&void 0!==r?r:l.a.Hot}}},77623:function(e,t,r){"use strict";r.d(t,{T:function(){return o}});var n=r(16189),l=r(93276);let o=()=>{let e=(0,n.useRouter)(),t=(0,n.usePathname)(),r=(0,n.useSearchParams)(),o=e=>{let n=encodeURIComponent(e.replace("meme:",""));if(["/home","/trending"].includes(t))return"".concat(t,"/").concat(n);{let e=new URLSearchParams(r.toString());return e.set("memeId",n),(0,l.wS)(t,e)}};return{openMemeModal:t=>{let r=o(t);e.push(r,{scroll:!1})},getMemeModalPath:o}}},95478:function(e,t,r){"use strict";r.d(t,{u:function(){return l}});var n=r(16189);let l=e=>{var t;let{key:r,index:l,params:o}=e,a=(0,n.usePathname)(),s=null!==(t=a&&a.split("/")[l||2])&&void 0!==t?t:"",i=o[r]||s;return{[r]:i}}},82896:function(e,t,r){"use strict";var n=r(15346);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class s extends n.Component{componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let r=1/0,n=t.default||2;for(let l in t){let o=parseInt(l);o>0&&e<=o&&o<r&&(r=o,n=t[l])}n=Math.max(1,parseInt(n)||1),this.state.columnCount!==n&&this.setState({columnCount:n})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),r=n.Children.toArray(this.props.children);for(let n=0;n<r.length;n++){let l=n%e;t[l]||(t[l]=[]),t[l].push(r[n])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:r}=this.props,o=this.itemsInColumns(),s="".concat(100/o.length,"%"),i=r;i&&"string"!=typeof i&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===i&&(i="my-masonry-grid_column"));let u=a(a(a({},e),t),{},{style:a(a({},t.style),{},{width:s}),className:i});return o.map((e,t)=>n.createElement("div",l({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:r,columnClassName:o,columnAttrs:a,column:s,className:i}=e,u=function(e,t){if(null==e)return{};var r,n,l=function(e,t){if(null==e)return{};var r,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(l[r]=e[r]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=i;return"string"!=typeof i&&(this.logDeprecated('The property "className" requires a string'),void 0===i&&(c="my-masonry-grid")),n.createElement("div",l({},u,{className:c}),this.renderColumns())}constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}}s.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=s},96622:function(e,t,r){"use strict";r.r(t),r.d(t,{MemeModalProvider:function(){return c},useMemeModal:function(){return d}});var n=r(57348),l=r(16189),o=r(15346),a=r(13214),s=r(77623),i=r(93276);let u=(0,o.createContext)({}),c=e=>{var t;let{children:r}=e,o=(0,l.useRouter)(),c=(0,l.usePathname)(),d=(0,l.useSearchParams)();(0,l.useParams)();let m=0===c.search(/\/home\/[0-9a-zA-Z]{5,}_[0-9a-zA-Z_]{10,}/)?c.replace(/^\/home\//,"").split("/")[0].split("?")[0]:decodeURIComponent(null!==(t=d.get("memeId"))&&void 0!==t?t:""),h=new URLSearchParams(d.toString()),{openMemeModal:p}=(0,s.T)(),f=()=>{h.delete("memeId");let e=0===h.toString().length?"/".concat(c.split("/")[1]):(0,i.wS)(c,h);o.push(e,{scroll:!1})};return(0,n.jsxs)(u.Provider,{value:{onOpenMeme:p,onCloseMeme:f},children:[r,m&&(0,n.jsx)(a.k,{memeId:m,onClose:f})]})},d=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useFeed must be used within MemeModalProvider");return e}}},function(e){e.O(0,[7398,2221,4175,454,2872,9154,3881,7686,1133,6440,312,4822,6378,9581,5878,5073,3214,937,7114,1744],function(){return e(e.s=69854)}),_N_E=e.O()}]);