(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3804],{8549:function(e,t,n){Promise.resolve().then(n.bind(n,3418))},3418:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(57348),l=n(15346),s=n(72320),a=n(8485),o=n(5265),i=n(95478),u=n(71402),c=n(35878),d=n(41973);function m(e){let{params:t}=e,{handle:n}=(0,i.u)({params:t,key:"handle"}),{profile:m}=(0,u.useProfile)(),[h,f]=(0,l.useState)([]),[p,y]=(0,l.useState)(!1),{isFetching:g}=(0,o.M)({feed:h,setFeed:f,hasFetched:p,setHasFetched:y,fetchFn:(e,t)=>{let{start:r,limit:l}=e;return c.P.getDecks({start:r,limit:l,interval:d.u.AllTime,user_handle:n},t)},pageSize:20});return(0,r.jsx)(a.o,{memes:h,noResultsMessage:"No decks",hasFetched:p,hasSearched:!1,isFetching:g,renderItem:e=>{var t;return(0,r.jsx)(s.B,{deckId:e.id,thumbnail:e.cover_photo,name:e.title,ranking:e.rank,totalPosts:null!==(t=e.total_posted)&&void 0!==t?t:0,w:"min-w-full w-full",isAdmin:(null==m?void 0:m.twitter_profile.screen_name)===n},e.id)}})}},8485:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(57348),l=n(4930),s=n(82896);let a={default:3,1100:3,700:2,500:1},o=e=>{let{memes:t,isFetching:n,hasFetched:o,hasSearched:i,noResultsMessage:u="No memes",className:c="overflow-hidden pl-3 pt-3",breakpoints:d=a,renderItem:m}=e;return(0,r.jsxs)("div",{className:c,children:[!n&&0===t.length&&(o||i)?(0,r.jsx)("div",{className:"text-white-400/75",children:u}):null,n&&0===t.length&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(l.c,{})}),(0,r.jsx)(s.Z,{breakpointCols:d,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(m)}),n&&t.length>0&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(l.c,{})})]})}},72320:function(e,t,n){"use strict";n.d(t,{B:function(){return u}});var r=n(57348),l=n(45155),s=n(13881),a=n(89765),o=n(81727),i=n(93276);let u=e=>{let{deckId:t,thumbnail:n,name:u,ranking:c,totalPosts:d,isAdmin:m,w:h="min-w-28 w-28 md:min-w-48 md:w-48"}=e;return(0,r.jsx)(s.default,{href:(0,i.o4)(t),className:"scale-img-on-hover select-none",children:(0,r.jsxs)("div",{className:"relative cursor-pointer overflow-hidden flex flex-col justify-center bg-black-400 hover:bg-black-200 rounded-lg shadow-lg hover:shadow-2xl ".concat(h),children:[(0,r.jsx)("div",{className:"size-full aspect-square overflow-hidden bg-black-100/25",children:n&&(0,r.jsx)(l.default,{src:n,alt:u,width:256,height:256,className:"size-full object-cover object-center"})}),(0,r.jsxs)("footer",{className:"flex flex-col gap-1 pl-3 pr-1 py-3",children:[(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between truncate",children:[(0,r.jsxs)("h3",{className:"flex gap-2 font-semibold text-sm md:text-base tracking-wide w-full truncate",children:[(0,r.jsx)("span",{className:"text-white-400 truncate",children:u}),c&&(0,r.jsxs)("span",{className:"text-white-400/70",children:["#",c]})]}),m&&(0,r.jsx)(a.g,{deckId:t,onDelete:()=>{window.location.reload()}})]}),(0,r.jsxs)("span",{className:"flex gap-1 text-sm",children:[(0,r.jsx)("span",{className:"text-white-400 font-medium",children:d}),(0,r.jsx)("span",{className:"text-white-400/75",children:(0,o._6)(d,"meme","memes")})]})]})]})})}},89765:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},g:function(){return g}});var r,l,s=n(57348),a=n(53350),o=n(22094),i=n(54611),u=n(4930),c=n(67425),d=n(22596),m=n(58484),h=n(16189),f=n(12465),p=n(15346),y=n(35878);(r=l||(l={})).Edit="edit",r.Delete="delete";let g=e=>{let{deckId:t,size:n="sm",variant:r="light",itemsToRender:l=["edit","delete"],isLoading:g,onDelete:v}=e,w=(0,h.useRouter)(),[b,C]=(0,p.useState)(!1),x=(0,p.useCallback)(()=>{w.push("/deck/".concat(t,"/edit"))},[w,t]),k=(0,p.useCallback)(async e=>{e.stopPropagation(),e.preventDefault();try{C(!0),await y.P.deleteDeck(t),v()}catch(e){console.error("Failed to delete deck",e),(0,f.yv)("Failed to delete deck",{variant:"error"}),C(!1)}},[t,v]),j=(0,p.useMemo)(()=>[{key:"edit",label:"Edit",color:"default",startContent:(0,s.jsx)(a.JO,{className:"size-5",icon:"mdi:edit"}),onClick:x},{key:"delete",label:"Delete",color:"danger",startContent:(0,s.jsx)(a.JO,{className:"size-5",icon:"tabler:trash"}),onClick:k}],[x,k]);return(0,s.jsxs)(o.F,{classNames:{content:"min-w-0 w-auto"},children:[(0,s.jsx)(i.S,{children:b||g?(0,s.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,s.jsx)(u.c,{size:"sm"})}):(0,s.jsx)(c.A,{isIconOnly:!0,size:n,variant:r,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,s.jsx)(a.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,s.jsx)(d.a,{children:j.filter(e=>l.includes(e.key)).map(e=>(0,s.jsx)(m.W,{color:e.color,startContent:e.startContent,onClick:e.onClick,children:e.label},e.key))})]})}},5265:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var r=n(15346),l=n(74859),s=n(76808);let a=e=>{let{feed:t,setFeed:n,hasFetched:a,setHasFetched:o,searchQuery:i,setSearchQuery:u,storeUrlParams:c=!0,fetchFn:d,deckId:m,fetchOnLoad:h=!0,pageSize:f=50,ignoreWindowScroll:p=!1,onFetchOnLoad:y}=e,{initialQuery:g,initialInterval:v,initialSortBy:w}=(0,s.x)(),[b,C]=(0,r.useState)(0),[x,k]=(0,r.useState)(!0),[j,S]=(0,r.useState)(!1),[N,P]=(0,r.useState)(v),[K,O]=(0,r.useState)(w),_=(0,r.useCallback)(async(e,t)=>{let r=await d(e,t);return n(t=>r.length>0&&Number(e.start)>0?[...t,...r]:r),S(!1),o(!0),k(r.length===f),r},[d,f,n,o]),D=(0,r.useMemo)(()=>(0,l.k)(_,1e3),[_]),M=(0,r.useCallback)(async(e,t,n)=>{var r,l,s,a,u;S(!0),o(!1);let c={search:null!==(r=e.search)&&void 0!==r?r:i,start:null!==(l=e.start)&&void 0!==l?l:b,limit:null!==(s=e.limit)&&void 0!==s?s:f,interval:null!==(a=e.interval)&&void 0!==a?a:N,sort_by:null!==(u=e.sort_by)&&void 0!==u?u:K,...m?{deck_id:m}:{}};return n?_(c,t):D(c,t)},[D,m,_,f,N,i,K,o,b]),E=(0,r.useCallback)(e=>{if(!a||!x||j)return;let t=null!=e?e:b+f;C(t),M({start:t})},[a,x,j,b,f,M]),A=(0,r.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&E()},[E]),T=(0,r.useCallback)((e,t,n)=>{let r=new URL(window.location.href);e.length>0?r.searchParams.set("query",e):r.searchParams.delete("query"),t?r.searchParams.set("interval",t):r.searchParams.delete("interval"),n?r.searchParams.set("sort_by",n):r.searchParams.delete("sort_by"),window.history.pushState({},"",r.toString())},[]),F=(0,r.useCallback)(async(e,t,n)=>{null==u||u(e),c&&T(e,t,n),C(0),k(!0),M({search:e,start:0,limit:f,interval:t,sort_by:n})},[M,f,u,c,T]),z=(0,r.useCallback)(e=>{n([]),P(e),F(null!=i?i:"",e,K)},[F,i,K,n]),I=(0,r.useCallback)(e=>{n([]),O(e),F("",N,e)},[F,N,n]);return(0,r.useEffect)(()=>{if(!p)return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[A,p]),(0,r.useEffect)(()=>{let e=new AbortController;if(!a&&!(t.length>0)&&h&&!j)return M({search:g,start:0,limit:f,interval:v,sort_by:w},e.signal,!0).then(y),()=>{!e.signal.aborted&&j&&e.abort()}},[t.length,M,h,a,g,v,j,y,f,w]),(0,r.useEffect)(()=>(g&&(null==u||u(g)),v&&P(v),w&&O(w),()=>{n([]),null==u||u(""),o(!1)}),[v,g,w,n,o,P,u,O]),{feed:t,setFeed:n,setHasMore:k,onSearch:F,searchInterval:N,onSelectInterval:z,searchSortBy:K,onSelectSortBy:I,isFetching:j,hasMore:x,setIsFetching:S,setHasFetched:o,onReachedEnd:E}}},76808:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var r=n(16189),l=n(41973);let s=()=>{var e,t,n;let s=(0,r.useSearchParams)();return{initialQuery:null!==(e=s.get("query"))&&void 0!==e?e:"",initialInterval:null!==(t=s.get("interval"))&&void 0!==t?t:l.u.Week,initialSortBy:null!==(n=s.get("sort_by"))&&void 0!==n?n:l.a.Hot}}},95478:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(16189);let l=e=>{var t;let{key:n,index:l,params:s}=e,a=(0,r.usePathname)(),o=null!==(t=a&&a.split("/")[l||2])&&void 0!==t?t:"",i=s[n]||o;return{[n]:i}}},82896:function(e,t,n){"use strict";var r=n(15346);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class o extends r.Component{componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let n=1/0,r=t.default||2;for(let l in t){let s=parseInt(l);s>0&&e<=s&&s<n&&(n=s,r=t[l])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),n=r.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){let l=r%e;t[l]||(t[l]=[]),t[l].push(n[r])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:n}=this.props,s=this.itemsInColumns(),o="".concat(100/s.length,"%"),i=n;i&&"string"!=typeof i&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===i&&(i="my-masonry-grid_column"));let u=a(a(a({},e),t),{},{style:a(a({},t.style),{},{width:o}),className:i});return s.map((e,t)=>r.createElement("div",l({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:n,columnClassName:s,columnAttrs:a,column:o,className:i}=e,u=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=i;return"string"!=typeof i&&(this.logDeprecated('The property "className" requires a string'),void 0===i&&(c="my-masonry-grid")),r.createElement("div",l({},u,{className:c}),this.renderColumns())}constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}}o.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=o},71402:function(e,t,n){"use strict";n.r(t),n.d(t,{ProfileProvider:function(){return a},useProfile:function(){return o}});var r=n(57348),l=n(15346);let s=(0,l.createContext)(void 0),a=e=>{let{children:t}=e,[n,a]=(0,l.useState)(null),[o,i]=(0,l.useState)({}),[u,c]=(0,l.useState)({}),[d,m]=(0,l.useState)([]),[h,f]=(0,l.useState)([]),[p,y]=(0,l.useState)([]),[g,v]=(0,l.useState)(!1),[w,b]=(0,l.useState)(!1),[C,x]=(0,l.useState)(!1);return(0,r.jsx)(s.Provider,{value:{profile:n,setProfile:a,userMemes:o,setUserMemes:i,userBookmarks:u,setUserBookmarks:c,topDecks:d,setTopDecks:m,topDecksWeekly:h,setTopDecksWeekly:f,recommendedFollows:p,setRecommendedFollows:y,isSignupModalOpen:g,setIsSignupModalOpen:v,isPostingMemes:w,setIsPostingMemes:b,isHovering:C,setIsHovering:x},children:t})},o=()=>{let e=(0,l.useContext)(s);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},74859:function(e,t,n){"use strict";n.d(t,{D:function(){return r},k:function(){return l}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,l=Array(r),s=0;s<r;s++)l[s]=arguments[s];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...l);return n=null,t},t)}},l=(e,t)=>{let n=null;return function(){for(var r=arguments.length,l=Array(r),s=0;s<r;s++)l[s]=arguments[s];return new Promise((r,s)=>{let a=async()=>{n&&clearTimeout(n);try{let t=await e(...l);r(t)}catch(e){s(e)}n=null};n&&clearTimeout(n),n=setTimeout(a,t)})}}},81727:function(e,t,n){"use strict";n.d(t,{Df:function(){return a},Po:function(){return s},RL:function(){return o},Wb:function(){return c},_6:function(){return u},qr:function(){return d},uZ:function(){return i}});var r=n(97102),l=n(41973);let s=e=>{let t=new Date(e/1e6),n=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(n/60),l=Math.round(r/60);return n<60?"".concat(n,"s ago"):r<60?"".concat(r,"m ago"):l<24?"".concat(l,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},a=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),o="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function i(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function u(e,t,n){return 1===e?t:n}function c(e){return"/deck/".concat(e.id.replace("deck:",""))}function d(e){switch(e){case l.u.Today:return"Today";case l.u.Week:return"This Week";case l.u.Month:return"This Month";case l.u.Year:return"This Year";case l.u.AllTime:return"of All Time"}}},93276:function(e,t,n){"use strict";function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function l(e){return"/deck/".concat(e.replace("deck:",""))}function s(e){return"/home/".concat(e.replace("meme:",""))}n.d(t,{Wi:function(){return s},o4:function(){return l},wS:function(){return r}})},97481:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(3501),l=n(15346);function s(e){let t=(0,r.d)(e),[n,s]=(0,l.useState)(null),[a,o]=(0,l.useState)([]),i=()=>{o([]),t.close()};return{focusStrategy:n,...t,open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;s(e),t.open()},toggle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;s(e),t.toggle()},close(){i()},expandedKeysStack:a,openSubmenu:(e,t)=>{o(n=>t>n.length?n:[...n.slice(0,t),e])},closeSubmenu:(e,t)=>{o(n=>n[t]===e?n.slice(0,t):n)}}}},75490:function(e,t,n){"use strict";n.d(t,{D:function(){return u}});class r{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){let t=[...this.getKeys()];return this.getItem(t[e])}constructor(e,{expandedKeys:t}={}){let n;this.keyMap=new Map,this.iterable=e,t=t||new Set;let r=e=>{if(this.keyMap.set(e.key,e),e.childNodes&&("section"===e.type||t.has(e.key)))for(let t of e.childNodes)r(t)};for(let t of e)r(t);let l=0;for(let[e,t]of this.keyMap)n?(n.nextKey=e,t.prevKey=n.key):(this.firstKey=e,t.prevKey=void 0),"item"===t.type&&(t.index=l++),(n=t).nextKey=void 0;this.lastKey=null==n?void 0:n.key}}var l=n(37548),s=n(2724),a=n(15346),o=n(9852),i=n(73129);function u(e){let{onExpandedChange:t}=e,[n,u]=(0,i.z)(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),c=(0,l.q)(e),d=(0,a.useMemo)(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),m=(0,o.K)(e,(0,a.useCallback)(e=>new r(e,{expandedKeys:n}),[n]),null);return(0,a.useEffect)(()=>{null==c.focusedKey||m.getItem(c.focusedKey)||c.setFocusedKey(null)},[m,c.focusedKey]),{collection:m,expandedKeys:n,disabledKeys:d,toggleKey:e=>{let t;u(((t=new Set(n)).has(e)?t.delete(e):t.add(e),t))},setExpandedKeys:u,selectionManager:new s.Z(m,c)}}}},function(e){e.O(0,[7398,2221,4175,454,2872,9154,3881,7686,9394,3520,5878,937,7114,1744],function(){return e(e.s=8549)}),_N_E=e.O()}]);