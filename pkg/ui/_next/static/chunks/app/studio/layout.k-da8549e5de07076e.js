(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5914],{14042:function(e,t,n){Promise.resolve().then(n.bind(n,13108)),Promise.resolve().then(n.bind(n,87140))},87140:function(e,t,n){"use strict";n.r(t),n.d(t,{DiffusionConfigProvider:function(){return o},useDiffusionConfig:function(){return s}});var r=n(57348),i=n(15346),u=n(55771);let a=(0,i.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{u.p.getConfig().then(o)},[]),(0,r.jsx)(a.Provider,{value:{config:n},children:t})},s=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useDiffusionConfig must be used within EditDeckProvider");return e}},35971:function(e,t,n){"use strict";n.r(t),n.d(t,{FeedProvider:function(){return o},useFeed:function(){return s}});var r=n(57348),i=n(15346),u=n(71402);let a=(0,i.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,i.useState)([]),[s,c]=(0,i.useState)(!1),[d,l]=(0,i.useState)({}),[f,m]=(0,i.useState)(""),[g,h]=(0,i.useState)([]),[p,v]=(0,i.useState)(!1),[_,w]=(0,i.useState)(""),[S,b]=(0,i.useState)([]),[A,k]=(0,i.useState)(!1),{userMemes:y,setUserMemes:x}=(0,u.useProfile)(),[C,P]=(0,i.useState)(""),[E,j]=(0,i.useState)([]),[D,I]=(0,i.useState)(!1),[M,R]=(0,i.useState)([]),[U,T]=(0,i.useState)(!1),[L,z]=(0,i.useState)([]),[B,F]=(0,i.useState)(!1),O=(0,i.useCallback)(e=>n.find(t=>(t.post_type,t.post.id===e))||E.find(t=>t.id===e)||L.find(t=>t.id===e)||M.find(t=>t.id===e)||g.find(t=>t.id===e)||S.find(t=>t.id===e)||Object.values(y).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0),[n,E,L,M,g,S,y]),N=(0,i.useCallback)((e,t,r,i)=>{let u=n.findIndex(e=>e.post.id===t),a=E.findIndex(e=>e.id===t),s=M.findIndex(e=>e.id===t),c=L.findIndex(e=>e.id===t),d=g.findIndex(e=>e.id===t),l=S.findIndex(e=>e.id===t),f=Object.values(y).reduce((e,n)=>{let r=n.findIndex(e=>e.id===t);return -1!==r?r:e},-1);if(-1===u&&-1===a&&-1===s&&-1===c&&-1===d&&-1===l&&-1===f)return;let m=(t,n)=>{let u={...n[t]},a={react:i,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===r?"upvote"===i?(u.votes.up.push(a),u.votes.down=u.votes.down.filter(t=>t.by!==e)):(u.votes.down.push(a),u.votes.up=u.votes.up.filter(t=>t.by!==e)):"upvote"===i?u.votes.up=u.votes.up.filter(t=>t.by!==e):u.votes.down=u.votes.down.filter(t=>t.by!==e),[...n.slice(0,t),u,...n.slice(t+1)]};-1!==u&&o(e=>m(u,e)),-1!==a&&j(e=>m(a,e)),-1!==s&&R(e=>m(s,e)),-1!==c&&z(e=>m(c,e)),-1!==d&&h(e=>m(d,e)),-1!==l&&b(e=>m(l,e)),-1!==f&&x(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=m(f,n[r]),n):e})},[S,n,E,L,g,x,M,y]),G=(0,i.useCallback)((e,t)=>{o(n=>0===n.length?n:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...n])},[]),Q=(0,i.useCallback)((e,t)=>{o(n=>0===n.length?n:n.map(n=>{if("meme"in n&&n.post.id===e){let e=n.post;return{...n,post:{...e,...t}}}return n}))},[]),Z=(0,i.useCallback)(e=>{o(t=>t.filter(t=>t.post.id!==e))},[]),H=(0,i.useCallback)(e=>{E.length>0&&j(t=>[e,...t]),M.length>0&&R(t=>[e,...t])},[E.length,M.length]);return(0,r.jsx)(a.Provider,{value:{feed:n,setFeed:o,hasFetchedFeed:s,setHasFetchedFeed:c,feedActions:d,setFeedActions:l,appendMemesToFeed:G,removeItemFromFeed:Z,updateMemeInFeed:Q,searchQuery:f,setSearchQuery:m,searchResults:g,setSearchResults:h,hasFetchedSearchResults:p,setHasFetchedSearchResults:v,deckQuery:_,setDeckQuery:w,deckResults:S,setDeckResults:b,hasFetchedDeckResults:A,setHasFetchedDeckResults:k,librarySearchQuery:C,setLibrarySearchQuery:P,library:E,setLibrary:j,hasFetchedLibrary:D,setHasFetchedLibrary:I,uploads:M,setUploads:R,hasFetchedUploads:U,setHasFetchedUploads:T,saved:L,setSaved:z,hasFetchedSaved:B,setHasFetchedSaved:F,onUploadMeme:H,getItem:O,voteOnItem:N},children:t})},s=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},71402:function(e,t,n){"use strict";n.r(t),n.d(t,{ProfileProvider:function(){return a},useProfile:function(){return o}});var r=n(57348),i=n(15346);let u=(0,i.createContext)(void 0),a=e=>{let{children:t}=e,[n,a]=(0,i.useState)(null),[o,s]=(0,i.useState)({}),[c,d]=(0,i.useState)({}),[l,f]=(0,i.useState)([]),[m,g]=(0,i.useState)([]),[h,p]=(0,i.useState)([]),[v,_]=(0,i.useState)(!1),[w,S]=(0,i.useState)(!1),[b,A]=(0,i.useState)(!1);return(0,r.jsx)(u.Provider,{value:{profile:n,setProfile:a,userMemes:o,setUserMemes:s,userBookmarks:c,setUserBookmarks:d,topDecks:l,setTopDecks:f,topDecksWeekly:m,setTopDecksWeekly:g,recommendedFollows:h,setRecommendedFollows:p,isSignupModalOpen:v,setIsSignupModalOpen:_,isPostingMemes:w,setIsPostingMemes:S,isHovering:b,setIsHovering:A},children:t})},o=()=>{let e=(0,i.useContext)(u);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},55771:function(e,t,n){"use strict";n.d(t,{p:function(){return a},s:function(){return i}});var r=n(54167);let i=()=>r.cm?"wss://staging-api.memedeck.xyz/v1/generation/ws":r.BB||r.j7?"wss://api.memedeck.xyz/v1/generation/ws":"ws://127.0.0.1:8080/v1/generation/ws";class u{async getConfig(){return fetch("".concat(u.BASE_URL,"/generation/config")).then(e=>e.json())}async getRandomPrompt(){return fetch("".concat(u.BASE_URL,"/generation/prompt")).then(e=>e.json())}}u.BASE_URL=r.cm?"https://staging-api.memedeck.xyz/v1":r.BB||r.j7?"https://api.memedeck.xyz/v1":"http://127.0.0.1:8080/v1";let a=new u},74859:function(e,t,n){"use strict";n.d(t,{D:function(){return r},k:function(){return i}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...i);return n=null,t},t)}},i=(e,t)=>{let n=null;return function(){for(var r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];return new Promise((r,u)=>{let a=async()=>{n&&clearTimeout(n);try{let t=await e(...i);r(t)}catch(e){u(e)}n=null};n&&clearTimeout(n),n=setTimeout(a,t)})}}},81727:function(e,t,n){"use strict";n.d(t,{Df:function(){return u},Po:function(){return i},RL:function(){return a},Wb:function(){return c},_6:function(){return s},uZ:function(){return o}});var r=n(97102);let i=e=>{let t=new Date(e/1e6),n=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(n/60),i=Math.round(r/60);return n<60?"".concat(n,"s ago"):r<60?"".concat(r,"m ago"):i<24?"".concat(i,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},u=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),a="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function o(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function s(e,t,n){return 1===e?t:n}function c(e){return"/deck/".concat(e.id.replace("deck:",""))}},93276:function(e,t,n){"use strict";function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function i(e){return"/deck/".concat(e.replace("deck:",""))}function u(e){return"/home/".concat(e.replace("meme:",""))}n.d(t,{Wi:function(){return u},o4:function(){return i},wS:function(){return r}})},94787:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},15667:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[7398,2221,4175,454,5878,3108,937,7114,1744],function(){return e(e.s=14042)}),_N_E=e.O()}]);