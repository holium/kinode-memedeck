"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3746],{91475:function(e,t,s){s.d(t,{N:function(){return o}});var l=s(62284),i=s(46231),n=s(23405),a=s(59297),r=s(12010);let o=e=>{let{contest:t,textSize:s="text-[12px] leading-4",textColor:o="text-white-400/75",iconSize:c="size-4 min-w-4",iconColor:d="text-white-400/75",hideIcon:u=!1}=e,{timeLeft:m}=(0,r.h)({contest:t}),h=(0,a.useMemo)(()=>{let{days:e,hours:s,minutes:l,seconds:i}=m,n=[e?"".concat(e,"d"):"",e||s?"".concat(s,"h"):"",e||s||l?"".concat(l,"m"):"","".concat(i,"s")].filter(Boolean).join(" ");switch(t.status){case"active":default:return n;case"ended":return new Date(t.end_time).toLocaleDateString("en-US",{month:"short",day:"numeric"})}},[t.end_time,t.status,m]),x=(0,a.useMemo)(()=>{switch(t.status){case"active":return"Ends in ";case"ended":return"Ended ";default:return"Starts in "}},[t.status]),f=(0,a.useMemo)(()=>{switch(t.status){case"active":return"ph:clock-countdown";case"upcoming":return"ph:clock";default:return"akar-icons:calendar"}},[t.status]);return(0,l.jsxs)("div",{className:"flex gap-1 items-center truncate",children:[!u&&(0,l.jsx)(i.JO,{icon:f,className:(0,n.cn)(c,d)}),(0,l.jsxs)("p",{className:(0,n.cn)("truncate text-left",s,o),children:[(0,l.jsx)("span",{children:x}),(0,l.jsx)("span",{className:"truncate",children:h})]})]})}},69734:function(e,t,s){s.d(t,{E:function(){return a}});var l=s(62284),i=s(46231),n=s(23405);let a=e=>{let{prize:t,textSize:s="text-[12px] leading-4",textColor:a="text-white-400/75",iconSize:r="size-4 min-w-4",iconColor:o="text-white-400/75",hideIcon:c=!1}=e;return(0,l.jsxs)("div",{className:"flex gap-1 items-center",children:[!c&&(0,l.jsx)(i.JO,{icon:"healthicons:money-bag",className:(0,n.cn)(r,o)}),(0,l.jsxs)("p",{className:(0,n.cn)("text-left",s,a),children:[t.token_amount," ",t.ticker]})]})}},14464:function(e,t,s){s.d(t,{O:function(){return a}});var l=s(62284),i=s(23405),n=s(2793);let a=e=>{let{src:t,alt:s,id:a,margin:r="m-2",w:o="w-3.5",onClick:c}=e;return(0,l.jsx)("button",{id:a,className:(0,i.cn)("flex size-9 min-w-9 items-center justify-center rounded-full hover:bg-white-400/10",r),onClick:c,children:(0,l.jsx)(n.default,{priority:!0,src:t,alt:s,className:(0,i.cn)("opacity-85",o)})})}},45780:function(e,t,s){s.d(t,{I:function(){return m}});var l=s(62284),i=s(46231),n=s(50935),a=s(88938),r=s(23405),o=s(77618),c=s(59297),d=s(56984),u=s(81255);let m=e=>{var t;let{postId:s,user:m,deckPageId:h,profilePageHandle:x,initialVotes:f,size:p="sm",border:v="",isActiveContest:g=!1,readOnly:j=!1,bindToKeyboard:w=!1,postVoteApi:b,deleteVoteApi:N,onClickOverride:y}=e,{voteSum:k,hasUpvoted:_,hasDownvoted:C}=(0,d.u)(null!==(t=null==m?void 0:m.id)&&void 0!==t?t:"",f),z=(0,c.useMemo)(()=>(0,u.D)(N,100),[N]),D=(0,c.useMemo)(()=>(0,u.D)(b,100),[b]),I=(0,c.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),y)return y();m&&(_?z({postId:s,user:m,deckPageId:h,profilePageHandle:x}):D({postId:s,user:m,vote:!0,deckPageId:h,profilePageHandle:x}))},[h,z,_,y,s,D,x,m]),M=(0,c.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),y)return y();m&&(C?z({postId:s,user:m,deckPageId:h,profilePageHandle:x}):D({postId:s,user:m,vote:!1,deckPageId:h,profilePageHandle:x}))},[h,z,C,y,s,D,x,m]);(0,c.useEffect)(()=>{if(!w)return;let e=e=>{"ArrowUp"===e.key?I(e):"ArrowDown"===e.key&&M(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[w,M,I]);let S=g?(0,r.cn)(_&&"bg-violet-600","hover:!bg-violet-700"):(0,r.cn)(_&&"bg-blue-600"),A=(0,r.cn)(g&&_&&"border-violet-600");return(0,l.jsxs)(n.g,{size:p,isDisabled:j,children:[(0,l.jsxs)(a.A,{variant:"ghost",color:_?"primary":"default",isIconOnly:0===k||g,className:(0,r.cn)(v,S,A,"border-r-1"),onClick:I,children:[(0,l.jsx)(i.JO,{icon:"majesticons:arrow-up",width:20,color:"white"}),0===k||g?null:(0,l.jsx)(o.E.div,{initial:{opacity:0,y:k<0?10:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:0,transition:{duration:.1}},transition:{duration:.2},children:(0,l.jsx)("span",{className:"text-base font-semibold text-white-400",children:k})},k)]}),(0,l.jsx)(a.A,{variant:"ghost",color:C?"warning":"default",isIconOnly:!0,className:(0,r.cn)(C?"bg-warning-400":"",v,"border-l-1"),onClick:M,children:(0,l.jsx)(i.JO,{icon:"majesticons:arrow-down",color:C?"black":"white",width:20})})]})}},89895:function(e,t,s){s.d(t,{e:function(){return ei}});var l=s(62284),i=s(59297),n=s(46231),a=s(63006),r=s(88938),o=s(15219);let c=e=>{let{image:t,onClose:s}=e,[i,{isLoading:c}]=(0,o.ug)();return(0,l.jsx)(a.e,{content:"Delete",placement:"bottom",motionProps:{variants:{exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}},enter:{opacity:1,transition:{duration:.15,ease:"easeOut"}}}},children:(0,l.jsx)(r.A,{isIconOnly:!0,size:"md",radius:"full",variant:"ghost",color:"danger",isLoading:c,onClick:()=>i(t.id).then(s),children:(0,l.jsx)(n.JO,{icon:"fluent:delete-24-regular",width:18})})})};var d=s(4680);let u=e=>{let{image:t}=e;return t.prompt?(0,l.jsx)("div",{className:"flex flex-col gap-3",children:(0,l.jsx)(d.R,{prompt:t.prompt})}):null};var m=s(91942),h=s(40720);let x=e=>{let{meme:t,image:s,isExpanded:i}=e,n=(null==t?void 0:t.search_text)||(null==s?void 0:s.caption);return(0,l.jsx)(m.d,{defaultExpandedKeys:i?["2"]:[],itemClasses:{subtitle:"text-sm text-white-400/50",trigger:"text-base font-semibold",indicator:"text-lg",content:"pt-0 text-small"},variant:"shadow",selectionMode:"multiple",children:n?(0,l.jsx)(h.G,{title:"Extracted text",classNames:{base:"pb-2 pt-0",trigger:"pt-4 pb-2 text-base font-semibold",content:"pb-2 pt-0"},children:(0,l.jsx)("p",{className:"text-sm",children:n})},"2"):(0,l.jsx)(h.G,{title:"Extracted text",classNames:{base:"pb-2 pt-0",trigger:"pt-4 pb-2 text-base font-semibold",content:"pb-2 pt-0"},subtitle:"No text was extracted","aria-label":"No extracted text",hideIndicator:!0,isDisabled:!0},"2")})};var f=s(57102);let p=e=>{let{imageId:t,onClose:s}=e,{data:i}=(0,o.BE)(t),{data:n}=(0,o.iS)();return i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"my-2 flex flex-col gap-5",children:(0,l.jsx)(f.s,{poster:i.by,createdAt:i.created_at,publishedAt:i.updated_at,isActiveContestEntry:!1})}),"uploaded"===i.source&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(x,{image:i,isExpanded:!0})}),"generated"===i.source&&(0,l.jsx)(u,{image:i}),"faceswap"===i.source&&(0,l.jsx)("p",{children:"Faceswap image"}),(0,l.jsx)("footer",{className:"flex justify-between gap-2 md:gap-3 pb-6 md:p-0",children:i.by.id===(null==n?void 0:n.id)&&(0,l.jsx)(c,{image:i,onClose:s})})]}):null};var v=s(65474),g=s(2793),j=s(45780),w=s(44443),b={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/info.333102d7.svg",height:24,width:24,blurWidth:0,blurHeight:0},N=s(81255);let y=e=>{var t;let{meme:s,setMeme:n}=e,[r]=(0,o.KV)(),c=(0,i.useMemo)(()=>(0,N.k)(r,1e3),[r]),d=(0,i.useCallback)(async e=>{if(s){n({...s,extracted_text:e});try{await c({meme_id:s.id,extracted_text:e})}catch(e){n(s)}}},[s,n,c]);return s?(0,l.jsx)("div",{className:"flex flex-col gap-3",children:(0,l.jsx)(w.Y,{label:(0,l.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Extracted text"}),(0,l.jsx)(a.e,{placement:"bottom",content:(0,l.jsx)("div",{className:"w-52",children:"This is AI extracted text from the meme image. You can correct it if needed here."}),children:(0,l.jsx)(g.default,{src:b,width:19,height:19,alt:"Info"})})]}),placeholder:"This is AI extracted text from the meme image. You can correct it if needed here.",classNames:{base:"p-0 hover:outline-1 border-transparent",mainWrapper:"p-0",inputWrapper:"px-0 py-4 gap-2 bg-content1 hover:bg-content2",label:"flex px-4 text-lg !text-white-400 font-semibold",innerWrapper:"px-4",input:"text-white-400/50"},value:null!==(t=s.search_text)&&void 0!==t?t:"",onValueChange:d})}):null};var k=s(70240);let _=e=>{var t;let{meme:s}=e,i=Object.values(null!==(t=s.panels)&&void 0!==t?t:{}),n=i.filter(e=>"prompt"in e.panel_config).map(e=>({prompt:e.panel_config.prompt,index:e.idx})),a=i.filter(e=>"faceswap"===e.panel_type&&e.panel_config);return(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[a.map((e,t)=>(0,l.jsx)(k.Z,{panelData:e.panel_config},t)),n.map((e,t)=>prompt?(0,l.jsx)(d.R,{index:e.index,showPanel:i.length>1,prompt:e.prompt},t):null)]})};var C=s(46902),z=s(37630),D=s(7602),I=s(56049),M=s(21797),S=s(47777),A=s(77249);let P=e=>{var t,s;let{post:i}=e,{appearsIn:n,isAddingToDeck:a,selectedDeckId:r,onSelectDeck:o}=(0,A.l)(i);return(0,l.jsxs)(C.w,{classNames:{base:"pb-1 min-h-0"},children:[(0,l.jsxs)(z.u,{className:"flex items-center gap-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Appears In"}),n.length>0&&(0,l.jsx)(D.z,{size:"sm",variant:"flat",children:n.length})]}),(0,l.jsxs)(I.G,{className:"gap-3 pt-0",children:[(0,l.jsx)("div",{className:"size-full flex flex-col gap-1.5 min-h-0 max-h-80 overflow-y-auto",children:0===n.length?(0,l.jsx)("p",{className:"text-sm text-white-400/50",children:"No decks yet"}):n.map(e=>(0,l.jsx)(M.D,{deck:e,hideActiveState:!0},e.id))}),(0,l.jsx)(S.Z,{maxW:"max-w-full",memeId:null===(t=i.meme)||void 0===t?void 0:t.id.replace("meme:",""),imageId:null===(s=i.image)||void 0===s?void 0:s.id.replace("image:",""),isLoading:a,selectedDeck:r,onSelectDeck:o,alreadySelected:n})]})]})};var E=s(7722);let O=e=>{let{post:t,onClose:s}=e,{deletePost:i,isDeleting:o}=(0,E.Z)();return(0,l.jsx)(a.e,{content:"Delete",placement:"bottom",motionProps:{variants:{exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}},enter:{opacity:1,transition:{duration:.15,ease:"easeOut"}}}},children:(0,l.jsx)(r.A,{isIconOnly:!0,size:"md",radius:"full",variant:"ghost",color:"danger",isLoading:o,onClick:()=>i({postId:t.id}).then(s),children:(0,l.jsx)(n.JO,{icon:"fluent:delete-24-regular",width:18})})})};var R=s(65104),F=s(91475),L=s(69734),W=s(91250);let Z=e=>{var t;let{post:s}=e,i=null===(t=s.meme)||void 0===t?void 0:t.contest,{onClickOpenContestInfo:n}=(0,W.Y)(i);return i?(0,l.jsxs)(C.w,{classNames:{base:"pb-1 min-h-0"},children:[(0,l.jsx)(z.u,{className:"flex items-center gap-3",children:(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Submitted To"})}),(0,l.jsx)(I.G,{className:"gap-3 pt-0",children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5 leading-6 truncate",children:[(0,l.jsx)(R.O,{className:"cursor-pointer",onClick:n,children:(0,l.jsx)("h4",{className:"text-white-400 truncate leading-6 font-semibold mb-[3px]",children:i.title})}),i.prize&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-white-400/50 text-[10px]",children:"•"}),(0,l.jsx)(L.E,{textSize:"text-[12px] leading-6",prize:i.prize,hideIcon:!0})]}),(0,l.jsx)("div",{className:"text-white-400/50 text-[10px]",children:"•"}),(0,l.jsx)(F.N,{textSize:"text-[12px] leading-6",contest:i,hideIcon:!0})]})})]}):null};var B=s(4988),G=s(74651),J=s(44135);let V=e=>{var t,s;let{postId:a,onClose:c}=e,{onClosePost:d}=(0,G.h)(),{data:m}=(0,o.iS)(),{data:h}=(0,o.yD)(a),[x]=(0,o.NU)(),[p]=(0,o.Rp)(),[v,w]=(0,i.useState)(!1),{isRemixing:b,onClickRemix:N}=(0,B.o)(),k=(0,i.useMemo)(()=>{var e,t;return(null==h?void 0:null===(t=h.meme)||void 0===t?void 0:null===(e=t.contest)||void 0===e?void 0:e.status)==="active"},[null==h?void 0:null===(s=h.meme)||void 0===s?void 0:null===(t=s.contest)||void 0===t?void 0:t.status]);return h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"my-2",children:(0,l.jsx)(f.s,{poster:h.by,createdAt:h.created_at,publishedAt:h.updated_at,isActiveContestEntry:k})}),(0,l.jsx)(Z,{post:h}),(0,l.jsx)(P,{post:h}),(0,l.jsxs)("div",{className:"flex flex-col gap-3 min-h-0 overflow-y-auto",children:[h.meme&&(0,l.jsx)(l.Fragment,{children:v?(0,l.jsx)(y,{meme:h.meme,setMeme:()=>{}}):(0,l.jsx)(_,{meme:h.meme})}),h.image&&(0,l.jsx)(u,{image:h.image})]}),(0,l.jsxs)("footer",{className:"flex justify-between gap-2 md:gap-3",children:[v?(0,l.jsx)(O,{post:h,onClose:c}):(0,l.jsx)(j.I,{size:"md",postId:h.id,user:m,deckPageId:"feed",initialVotes:null==h?void 0:h.votes,onClickOverride:m?void 0:d,postVoteApi:x,deleteVoteApi:p,isActiveContest:k}),(0,l.jsxs)("div",{className:"flex gap-3",children:[h.is_creator&&v&&(0,l.jsx)(r.A,{variant:"solid",color:"primary",onClick:()=>w(!1),children:"Done"}),h.is_creator&&!v&&(0,l.jsx)(r.A,{variant:"solid",onClick:()=>w(!0),children:"Edit"}),!v&&(0,l.jsx)(r.A,{variant:"solid",color:"primary",startContent:(0,l.jsx)(g.default,{src:J.Z,alt:"Remix",className:"size-4"}),isDisabled:b,onClick:()=>N(h),children:"Remix"})]})]}),k&&(0,l.jsxs)("section",{className:"flex gap-1 -mt-1",children:[(0,l.jsx)(n.JO,{icon:"material-symbols:info-outline",className:"text-white-400/30 size-3.5"}),(0,l.jsx)("p",{className:"text-white-400/35 text-xs",children:"Vote count and poster will be revealed when the contest ends."})]}),(0,l.jsx)("div",{className:"pb-6"})]}):null},U=e=>{let{postId:t,imageId:s,onClose:i}=e;return(0,l.jsxs)(v.K,{children:[t&&(0,l.jsx)(V,{postId:t,onClose:i}),s&&(0,l.jsx)(p,{imageId:s,onClose:i})]})};var Y=s(23405),T=s(74027),H=s(68880),K=s(14751),q=s(82258);let X=e=>{let{imageId:t}=e,{isFetching:s,data:i}=(0,o.BE)(t);return s?(0,l.jsx)(H.c,{}):i?(0,l.jsx)($,{image:i}):null},$=e=>{var t,s;let{image:n}=e,a=(0,i.useMemo)(()=>(0,q.LA)(n),[n]),{description:r}=(0,K.sw)(n,n.by);return(0,l.jsx)("div",{style:{aspectRatio:n.width/n.height},className:(0,Y.cn)("w-full max-w-full min-h-0 max-h-full","lg:w-[".concat(n.width,"px] lg:h-[").concat(n.height,"px]")),children:(0,l.jsx)("div",{id:"lightbox-image",className:"size-full flex items-center justify-center",children:(0,l.jsx)(g.default,{style:{aspectRatio:n.width/n.height},width:null!==(t=n.width)&&void 0!==t?t:1152,height:null!==(s=n.height)&&void 0!==s?s:1152,quality:100,src:a,alt:r,className:"size-full object-contain max-h-canvas"})})})};var Q=s(5239),ee=s(71303);let et=e=>{var t;let{postId:s}=e,{isFetching:i,data:n}=(0,o.yD)(s);if(i)return(0,l.jsx)(H.c,{});if(!n)return;let a=(0,K.zD)(n);return(null===(t=n.meme)||void 0===t?void 0:t.contest)?(0,l.jsx)(ee.S,{src:a.url,alt:a.description,width:a.width,height:a.height,memeId:n.meme.id,contest:n.meme.contest}):(0,l.jsx)(Q.V,{src:a.url,alt:a.description,width:a.width,height:a.height})},es=e=>{let{postId:t,imageId:s,onClose:i}=e;return(0,l.jsx)(T.V,{onClose:i,children:(0,l.jsxs)("div",{className:(0,Y.cn)("flex items-center justify-center","size-full max-h-full min-h-0 gap-3 overflow-hidden","px-0 lg:gap-6 lg:p-3"),children:[t&&(0,l.jsx)(et,{postId:t}),s&&(0,l.jsx)(X,{imageId:s})]})})};var el=s(35976);let ei=e=>{let{postId:t,imageId:s,onClose:n}=e;return(0,el.y)({locked:!0}),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n]),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex size-full items-center justify-center bg-black-400/75 sm:overflow-y-auto md:overflow-hidden xs:overflow-y-auto",onClick:e=>{let t=e.target;t.closest("#modal-aside")||t.closest("#modal-footer")||t.closest("#lightbox-image")||n()},onDragOver:e=>(e.preventDefault(),e.stopPropagation(),!1),children:(0,l.jsxs)("div",{className:"flex size-full flex-1 flex-col sm:overflow-y-auto md:flex-row",children:[(0,l.jsx)(es,{postId:t,imageId:s,onClose:n}),(0,l.jsx)(U,{postId:t,imageId:s,onClose:n})]})})}},74027:function(e,t,s){s.d(t,{V:function(){return r}});var l=s(62284),i=s(23405),n=s(14464),a=s(61737);let r=e=>{let{maxWidth:t="max-w-4xl",children:s,footer:r,onClose:o}=e;return(0,l.jsxs)("main",{className:(0,i.cn)("bg-black-400 md:bg-transparent","relative flex max-h-full flex-1 flex-col md:min-h-full md:overflow-hidden lg:overflow-hidden"),children:[(0,l.jsx)(n.O,{src:a.Z,alt:"Close",onClick:o}),(0,l.jsx)("div",{className:"relative flex min-h-0 min-w-0 max-w-full flex-1 items-center justify-center md:m-3",children:(0,l.jsx)("div",{className:(0,i.cn)("relative flex size-full max-h-full min-h-0 min-w-0 items-center justify-center",t),children:s})}),r]})}},5239:function(e,t,s){s.d(t,{V:function(){return a}});var l=s(62284),i=s(23405),n=s(2793);let a=e=>{let{src:t,alt:s,width:a,height:r,children:o,className:c}=e;return(0,l.jsx)("div",{style:{aspectRatio:a/r},className:(0,i.cn)("w-full max-w-full min-h-0 max-h-full","lg:w-[".concat(a,"px] lg:h-[").concat(r,"px]"),"lg:rounded-sm bg-black-400",c),children:(0,l.jsxs)("div",{id:"lightbox-image",className:"relative size-full flex items-center justify-center",children:[(0,l.jsx)(n.default,{style:{aspectRatio:a/r},width:null!=a?a:1152,height:null!=r?r:1152,quality:100,src:t,alt:s,className:"size-full object-contain max-h-canvas"}),o]})})}},71303:function(e,t,s){s.d(t,{S:function(){return c}});var l=s(62284),i=s(46231),n=s(23405),a=s(5239),r=s(91250),o=s(15219);let c=e=>{var t;let{src:s,alt:c,width:d,height:u,memeId:m,contest:h}=e,{isActive:x}=(0,r.Y)(h),{data:f}=(0,o.My)(h.id),p=null==f?void 0:null===(t=f.winner)||void 0===t?void 0:t.post_id,v=p&&m&&p===m;return(0,l.jsx)(a.V,{src:s,alt:c,width:d,height:u,className:(0,n.cn)(x?"border border-violet-500":"",v?"border border-yellow-400":""),children:v&&(0,l.jsx)(i.JO,{icon:"mdi:prize",className:"absolute top-1 right-1 text-yellow-400 size-7"})})}},65474:function(e,t,s){s.d(t,{K:function(){return n}});var l=s(62284),i=s(23405);let n=e=>{let{children:t,p:s="p-3"}=e;return(0,l.jsx)("aside",{id:"modal-aside",className:(0,i.cn)("max-w-full flex-1 flex flex-col gap-3","border-l border-white-400/10 bg-black-400","sm:min-w-96 md:min-h-full md:max-w-96 md:flex-none xs:h-auto",s),children:t})}},70240:function(e,t,s){var l=s(62284),i=s(46902),n=s(37630),a=s(56049),r=s(6064);s(59297),t.Z=e=>{let{panelData:t}=e,{faceswap:{base_image:s,face_image:o,faceswap_strength:c,base_width:d,base_height:u}}=t;return(0,l.jsxs)(i.w,{className:"w-full max-w-md mx-auto",children:[(0,l.jsx)(n.u,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"FaceSwap Details"})}),(0,l.jsx)(a.G,{className:"gap-6",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm text-white-400/50 font-medium mb-2",children:"Base Image"}),s?(0,l.jsx)("img",{src:s,width:d,height:u,alt:"Base",className:"w-full h-40 object-cover rounded"}):(0,l.jsx)("p",{className:"text-gray-500",children:"No base image uploaded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm text-white-400/50 font-medium mb-2",children:"Face Image"}),o?(0,l.jsx)("img",{src:o,alt:"Face",width:160,height:160,className:"w-full size-full object-cover rounded"}):(0,l.jsx)("p",{className:"text-gray-500",children:"No face image uploaded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm text-white-400/50 font-medium mb-2",children:"Faceswap Strength"}),(0,l.jsx)(r.W,{value:100*c,className:"w-full"}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(100*c).toFixed(0),"%"]})]})]})})]})}},4680:function(e,t,s){s.d(t,{R:function(){return o}});var l=s(62284),i=s(46902),n=s(37630),a=s(56049),r=s(2621);let o=e=>{var t;let{prompt:s,index:r=0,showPanel:o=!1}=e;if(!s)return null;let d=s.character.replace("ai_character:",""),u=null===(t=s.aesthetic)||void 0===t?void 0:t.replace("aesthetic:","");return(0,l.jsxs)(i.w,{classNames:{base:"pb-1"},children:[(0,l.jsx)(n.u,{className:"text-lg font-semibold pb-1 z-1",children:o?"Panel ".concat(r+1," Generation Details"):"Generation Details"}),(0,l.jsxs)(a.G,{className:"gap-6",children:[(0,l.jsx)(c,{title:"Positive Prompt",content:s.user_positive_prompt}),(0,l.jsx)(c,{title:"Negative Prompt",content:s.user_negative_prompt}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)(c,{title:"Aesthetic",content:u,hideCopyButton:!0}),(0,l.jsx)(c,{title:"Character",content:d,hideCopyButton:!0}),(0,l.jsx)(c,{title:"Aspect Ratio",content:s.aspect_ratio,hideCopyButton:!0}),(0,l.jsx)(c,{title:"Seed",content:s.seed.toString()}),(0,l.jsx)(c,{title:"CFG Scale",content:s.cfg_scale.toString(),hideCopyButton:!0})]})]})]})},c=e=>{let{title:t="",content:s="",hideCopyButton:i=!1}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"text-xs text-white-400/50 font-medium",children:t}),(0,l.jsx)(r.Z,{hideSymbol:!0,hideCopyButton:i||!s,classNames:{base:"bg-[#27292C] min-h-[44px]",pre:"whitespace-pre-wrap max-w-full"},children:s||(0,l.jsx)("span",{className:"text-white-400/50 select-none",children:"N/A"})})]})}},21797:function(e,t,s){s.d(t,{D:function(){return m},h:function(){return h}});var l=s(62284),i=s(8836),n=s(7602),a=s(23405),r=s(28403),o=s(92449),c=s(59297),d=s(72363),u=s(82258);let m=e=>{var t;let{deck:s,newPosts:m=0,hideActiveState:h=!1}=e,x=(0,o.useRouter)(),f=(0,r.usePathname)(),p=(0,c.useMemo)(()=>(0,u.o4)(s.id).split("?")[0],[s.id]),v=(0,c.useMemo)(()=>{let e=f.split("?")[0];return e.length>5&&p===e},[p,f]),g=(0,c.useMemo)(()=>v&&!h?"bg-white-400/10":"",[h,v]),j=(0,c.useCallback)(()=>{if(s.has_active_contest){let e=(0,u.o4)(s.id,{sort_by:d.a.Contest});return x.push(e)}if(0===m){let e=(0,u.o4)(s.id,{sort_by:d.a.Hot});return x.push(e)}let e=(0,u.o4)(s.id,{sort_by:d.a.Recent});x.push(e)},[s.id,s.has_active_contest,m,x]);return(0,l.jsxs)("div",{className:(0,a.cn)("flex items-center px-1.5 justify-between rounded-md gap-6 h-8 min-h-8 cursor-pointer",g,"tap-highlight-transparent outline-none data-[focus-visible=true]:z-10 data-[focus-visible=true]:outline-2 data-[focus-visible=true]:outline-focus data-[focus-visible=true]:outline-offset-2 text-medium text-primary no-underline hover:opacity-80 active:opacity-disabled transition-opacity"),onClick:j,children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-1 truncate",children:[(0,l.jsx)(i.h,{size:"sm",radius:"sm",src:null!==(t=s.cover_photo)&&void 0!==t?t:"",className:(0,a.cn)("max-w-5 max-h-5 rounded-sm",s.has_active_contest?"border-1 border-violet-400":"")}),(0,l.jsx)("span",{className:(0,a.cn)("flex-1 gap-1 justify-center truncate","text-sm font-base",s.has_active_contest?"text-violet-400":"text-white-400"),children:s.title})]}),m>0?(0,l.jsxs)(n.z,{size:"sm",classNames:{base:(0,a.cn)("border-1",s.has_active_contest?"text-violet-400 bg-violet-500/25 border-violet-900":"text-blue-300 bg-blue-100/25 border-blue-500/25")},children:["+",m]}):(0,l.jsx)("div",{className:"w-8"})]},s.id)},h=()=>(0,l.jsxs)("div",{className:"w-full h-8 flex items-center px-1.5 gap-2",children:[(0,l.jsx)("div",{className:"size-5 bg-white-400/10 rounded-sm"}),(0,l.jsx)("div",{className:"w-3/5 h-4 bg-white-400/5 rounded-lg"})]})},47777:function(e,t,s){s.d(t,{Z:function(){return m}});var l=s(62284),i=s(46231),n=s(23405),a=s(12863),r=s(8836),o=s(13848),c=s(15837),d=s(59297),u=s(15219);let m=e=>{var t,s;let{memeId:m,imageId:h,selectedDeck:x,onSelectDeck:f,alreadySelected:p,maxW:v="max-w-64",isLoading:g=!1}=e,{data:j,isLoading:w}=(0,u.Ug)({start:0,limit:20,...m?{meme_id:m}:{image_id:h}}),b=(0,d.useCallback)(e=>{var t;return null!==(t=null==p?void 0:p.some(t=>t.id===e.id))&&void 0!==t&&t},[p]),N=(0,d.useMemo)(()=>j?j.filter(e=>b(e)).filter(e=>"internal"!==e.category):[],[j,b]),y=(0,d.useMemo)(()=>j?j.filter(e=>!b(e)).filter(e=>"internal"!==e.category):[],[j,b]);return(0,l.jsx)("div",{className:(0,n.cn)("flex gap-3 justify-between",v),children:(0,l.jsx)("div",{className:"flex gap-1 items-center flex-1",children:(0,l.jsxs)(a.d,{placeholder:"Add to deck",size:"lg",radius:"md",variant:"bordered",fullWidth:!0,isClearable:!1,classNames:{selectorButton:"h-10"},multiple:!0,isLoading:g,disabled:w||g,onSelectionChange:e=>{var t;f(e,null!==(t=y.find(t=>t.id===e))&&void 0!==t?t:null)},selectedKey:null!=x?x:null,startContent:x?(0,l.jsx)(r.h,{className:"min-w-8",src:null!==(s=null===(t=y.find(e=>e.id===x))||void 0===t?void 0:t.cover_photo)&&void 0!==s?s:void 0,size:"sm",radius:"sm"}):(0,l.jsx)("div",{className:"size-8 min-w-8 flex items-center justify-center",children:(0,l.jsx)(i.JO,{className:"size-5 text-white-400/50",icon:"tabler:plus"})}),children:[(0,l.jsx)(o.y,{title:"Matching Decks",children:y.map(e=>{var t;return(0,l.jsx)(c.R,{value:e.id,title:e.title,description:(0,l.jsx)("span",{className:"!text-white-400/50",children:"by @".concat(e.by.handle)}),startContent:(0,l.jsx)(r.h,{src:null!==(t=e.cover_photo)&&void 0!==t?t:void 0,size:"sm",radius:"sm",className:"min-w-8"}),classNames:{title:"font-semibold"}},e.id)})}),(0,l.jsx)(o.y,{title:"Already added",children:N.map(e=>{var t;return(0,l.jsx)(c.R,{value:e.id,title:e.title,isDisabled:!0,isReadOnly:!0,description:(0,l.jsx)("span",{className:"!text-white-400/50",children:"by @".concat(e.by.handle)}),startContent:(0,l.jsx)(r.h,{src:null!==(t=e.cover_photo)&&void 0!==t?t:void 0,size:"sm",radius:"sm",className:"min-w-8"}),endContent:(0,l.jsx)(i.JO,{className:"size-5 min-w-5 text-white-400/75",icon:"tabler:check"}),className:"max-w-full truncate",classNames:{wrapper:"truncate",base:"truncate",title:"font-semibold truncate"}},e.id)})})]})})})}},57102:function(e,t,s){s.d(t,{s:function(){return d}});var l=s(62284),i=s(46231),n=s(2793),a=s(35850),r=s(59297),o=s(76971),c=s(25845);let d=e=>{let{poster:t,createdAt:s,publishedAt:d,isActiveContestEntry:u}=e,m=(0,r.useMemo)(()=>{var e;return null!==(e=t.avatar.replace("_normal",""))&&void 0!==e?e:""},[t.avatar]),h=(0,r.useMemo)(()=>"/u/".concat(t.handle),[t.handle]);return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[u?(0,l.jsx)("div",{className:"size-10 flex items-center justify-center bg-white-400/10 rounded-full",children:(0,l.jsx)(i.JO,{icon:"ooui:user-anonymous",className:"size-5"})}):(0,l.jsx)(a.default,{href:h,children:(0,l.jsx)(n.default,{src:m||"https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png",alt:"@".concat(t.handle),width:48,height:48,className:"size-10 rounded-full bg-black-300"})}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col justify-center",children:[u?(0,l.jsx)("h2",{className:"text-sm font-bold",children:"Contestant"}):(0,l.jsx)(a.default,{href:h,children:(0,l.jsx)(o.a,{poster:t,children:(0,l.jsx)("h2",{className:"text-sm font-bold hover:underline",children:t.name})})}),(0,l.jsx)("h3",{className:"text-xs font-medium text-white-400/75",children:d?"Published ".concat((0,c.Po)(new Date(d))):"Created ".concat((0,c.Po)(new Date(s)))})]})]})}},76971:function(e,t,s){s.d(t,{a:function(){return f}});var l=s(62284),i=s(63006),n=s(68880),a=s(2793),r=s(35850),o=s(59297),c=s(15219),d=s(72363),u=s(21317),m=s(25845),h=s(82258);let x=e=>{let{poster:t}=e,{data:s,isLoading:i}=(0,c.Ug)({start:0,limit:99,user_handle:t.handle}),{data:x,isLoading:f}=(0,c.t$)({sort_by:d.a.Hot,start:0,limit:5,user_handle:t.handle}),p=(0,o.useMemo)(()=>{var e;return null!==(e=t.avatar.replace("_normal",""))&&void 0!==e?e:""},[t.avatar]),v=(0,o.useMemo)(()=>"/u/".concat(t.handle),[t.handle]),g=(0,o.useMemo)(()=>{var e;return null!==(e=null==x?void 0:x.total_memes)&&void 0!==e?e:0},[null==x?void 0:x.total_memes]),j=(0,o.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.length)&&void 0!==e?e:0},[s]);return(0,l.jsxs)("div",{className:"flex flex-col gap-4 p-3 py-5 w-64 min-h-[215px]",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,l.jsxs)("section",{className:"w-full flex gap-3 items-center",children:[(0,l.jsx)(r.default,{href:v,children:(0,l.jsx)(a.default,{className:"size-12 min-w-12 object-contain rounded-full bg-white-400/10",src:p,alt:"@".concat(t.handle),width:48,height:48,quality:100})}),(0,l.jsxs)("div",{className:"flex flex-col truncate",children:[(0,l.jsx)(r.default,{href:v,children:(0,l.jsx)("h4",{className:"text-lg font-bold leading-6 hover:underline truncate",children:t.name})}),(0,l.jsxs)("p",{className:"text-sm text-white-400/50 leading-4 truncate",children:["@",t.handle]})]})]}),f||i?(0,l.jsx)(n.c,{size:"sm"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("section",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("span",{className:"font-bold",children:(0,u.CZ)(g)}),(0,l.jsx)("span",{className:"text-white-400/50",children:(0,m._6)(g,"post","posts")})]}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("span",{className:"font-bold",children:99===j?"99+":j}),(0,l.jsx)("span",{className:"text-white-400/50",children:(0,m._6)(j,"deck","decks")})]})]}),(0,l.jsx)("section",{className:"w-full max-w-full flex gap-1",children:Number(null==x?void 0:x.memes.length)>0?null==x?void 0:x.memes.filter(e=>e.meme||e.image).slice(0,3).map(e=>{var t;let s=null!==(t=e.meme)&&void 0!==t?t:e.image;return s?(0,l.jsx)(r.default,{href:(0,h.GY)(e.id),className:"flex-1",children:(0,l.jsx)(a.default,{className:"size-full rounded-md bg-white-400/10",src:s.url_watermarked||s.url||"",alt:s.created_at,width:64,height:64})},s.id):null}):(0,l.jsx)("div",{className:"text-white-400/50",children:"No posts yet"})})]})]})},f=e=>{let{poster:t,children:s}=e;return(0,l.jsx)(i.e,{delay:500,closeDelay:250,shadow:"lg",className:"xs:hidden",content:(0,l.jsx)(x,{poster:t},t.id),children:s})}},77249:function(e,t,s){s.d(t,{l:function(){return a}});var l=s(66975),i=s(59297),n=s(15219);function a(e){var t;let[s]=(0,n.X_)(),[a,r]=(0,i.useState)(null),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null!==(t=e.appears_in.filter(e=>e.title.length>0))&&void 0!==t?t:[]),m=(0,i.useMemo)(()=>e.id,[e.id]);return{selectedDeckId:a,isAddingToDeck:o,appearsIn:d,onSelectDeck:(0,i.useCallback)(async(e,t)=>{if(r(e),e&&t)try{if(!e)throw Error("Deck ID is missing");if(!m)throw Error("Post ID is missing");c(!0),await s({deck_id:e,post_id:m}),r(null),u(e=>[...e,t])}catch(e){(0,l.yv)("Failed to add meme to deck",{variant:"error"})}finally{c(!1)}},[m,s])}}},35976:function(e,t,s){s.d(t,{y:function(){return i}});var l=s(59297);let i=e=>{let{locked:t=!0}=e;(0,l.useEffect)(()=>{if(t){if(window.innerWidth>1024){let e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=e}{let e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=e}}},[t])}},91250:function(e,t,s){s.d(t,{Y:function(){return c}});var l=s(92449),i=s(59297),n=s(77606),a=s(15219),r=s(96245),o=s(82258);function c(e){var t,s;let c=(0,l.useRouter)(),{data:d}=(0,a.iS)(),u=(0,r.TL)(),[m,h]=(0,i.useState)(!1),x=null==e?void 0:null===(t=e.judges)||void 0===t?void 0:t.some(e=>e.id===(null==d?void 0:d.id)),f=(null==e?void 0:e.status)==="upcoming"||(null==e?void 0:e.status)==="draft",p=(null==e?void 0:e.status)==="active",v=(null==e?void 0:e.status)==="ended";return{isAdmin:x,isApplying:m,isUpcoming:f,isActive:p,isEnded:v,hasWinner:(null==e?void 0:e.status)==="ended"&&(null==e?void 0:null===(s=e.winner)||void 0===s?void 0:s.post_url),onClickApply:(0,i.useCallback)(()=>{if(e){if(!d)return u((0,n.it)());h(!0),c.push((0,o.eT)(e),{scroll:!1})}},[e,u,d,c]),onClickOpenContestInfo:(0,i.useCallback)(()=>{if(e){if(!d)return u((0,n.it)());c.push((0,o.CU)(e),{scroll:!1})}},[e,u,d,c])}}},12010:function(e,t,s){s.d(t,{h:function(){return i}});var l=s(59297);function i(e){let{contest:t,refreshPageWhenFinished:s=!1}=e,i=(0,l.useMemo)(()=>new Date("active"===t.status?t.end_time:t.start_time),[t.end_time,t.start_time,t.status]),n=(0,l.useCallback)(()=>{let e=+new Date(i)-+new Date,t={days:0,hours:0,minutes:0,seconds:0};return e>0&&(t={days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}),t},[i]),[a,r]=(0,l.useState)(n());return(0,l.useEffect)(()=>{let e=setTimeout(()=>{let e=n();r(e),Object.values(e).every(e=>0===e)&&s&&window.location.reload()},1e3);return()=>clearTimeout(e)}),{timeLeft:a}}},7722:function(e,t,s){s.d(t,{Z:function(){return a}});var l=s(28403),i=s(59297),n=s(15219);function a(){let e=(0,l.usePathname)(),[t,{isLoading:s}]=(0,n.jn)();return{deletePost:(0,i.useCallback)(async s=>{let l,i,{postId:n}=s,a=e.startsWith("/deck/"),r=e.startsWith("/u/");a?l=e.split("/")[2]:r&&(i=e.split("/")[2]),t({postId:n,deckPageId:l,profilePageHandle:i})},[t,e]),isDeleting:s}}},4988:function(e,t,s){s.d(t,{o:function(){return r}});var l=s(92449),i=s(59297),n=s(15219),a=s(96690);function r(){let e=(0,l.useRouter)(),[t,s]=(0,i.useState)(!1),[r]=(0,n.xY)();return{isRemixing:t,onClickRemix:(0,i.useCallback)(async t=>{s(!0);try{if(t.meme)e.push("/studio?remix=".concat(t.meme.id.replace("meme:","")));else if(t.image){let{data:s}=await r({panel_layout:a.L.One,panels:[{index:0,panel_type:"image",panel_config:{},image_id:t.image.id}]});if(!s)throw Error("Failed to create meme");e.push("/studio?meme=".concat(s.id.replace("meme:","")))}}catch(e){s(!1)}},[r,e])}}},94548:function(e,t,s){s.d(t,{d:function(){return a}});var l=s(28403),i=s(59297),n=s(72488);let a=e=>{let{key:t,index:s,params:a}=e,r=(0,l.usePathname)(),o=(0,i.useMemo)(()=>{if("postId"===t&&!(0,n.N)(r))return a[t]||"";if("imageId"!==t){var e;let l=null!==(e=r&&r.split("/")[s||2])&&void 0!==e?e:"";return a[t]||l}},[s,t,a,r]);return{[t]:o?decodeURIComponent(o):""}}},56984:function(e,t,s){s.d(t,{u:function(){return i}});var l=s(59297);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{up:[],down:[]},s=(0,l.useMemo)(()=>t.up,[t.up,t.up.length]),i=(0,l.useMemo)(()=>t.down,[t.down,t.down.length]);return{voteSum:(0,l.useMemo)(()=>s.length-i.length,[s,i]),hasUpvoted:(0,l.useMemo)(()=>s.some(t=>t.by===e),[s,s.length,e]),hasDownvoted:(0,l.useMemo)(()=>i.some(t=>t.by===e),[i,i.length,e])}}},74651:function(e,t,s){s.d(t,{PostModalProvider:function(){return d},h:function(){return u}});var l=s(62284),i=s(28403),n=s(59297),a=s(89895),r=s(72488),o=s(94548);let c=(0,n.createContext)({}),d=e=>{let{params:t,children:s}=e,{postId:n}=(0,o.d)({params:t,key:"postId"}),d=(0,i.useSearchParams)().get("postId"),u=n.length>0?n:d,{openLightBox:m,closeLightBox:h}=(0,r.e)();return(0,l.jsxs)(c.Provider,{value:{onOpenPost:e=>m({postId:e}),onClosePost:h},children:[s,u&&(0,l.jsx)(a.e,{postId:u,onClose:h})]})},u=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("usePostModal must be used within PostModalProvider");return e}},99378:function(e,t,s){s.d(t,{h:function(){return l}});async function l(e){let{ctx:t,image:s,targetWidth:l,targetHeight:i,imageWidth:n,imageHeight:a,anchorX:r=0,anchorY:o=0}=e;return new Promise(e=>{let c=Math.max(l/n,i/a),d=n*c,u=a*c;t.save(),t.beginPath(),t.rect(r,o,l,i),t.clip(),t.drawImage(s,r+(l-d)/2,o+(i-u)/2,d,u),t.restore(),e()})}},21317:function(e,t,s){function l(){return Math.floor(1e12*Math.random())}function i(e){let t=atob(e),s=t.length,l=new Uint8Array(new ArrayBuffer(s));for(let e=0;e<s;e++)l[e]=t.charCodeAt(e);return Array.from(l)}function n(e){return e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:9})}function a(e){let t=parseFloat(e.replace(/,/g,""));return isNaN(t)?0:t}function r(e){return e<1e3?e:e<1e6?"".concat((e/1e3).toFixed(1),"k"):"".concat((e/1e6).toFixed(1),"m")}s.d(t,{CG:function(){return a},CZ:function(){return r},RG:function(){return i},_s:function(){return n},qb:function(){return l}})},44135:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/magic.8c74570a.svg",height:18,width:18,blurWidth:0,blurHeight:0}},61737:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}}]);