(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3314],{9189:function(e,t,s){Promise.resolve().then(s.bind(s,82538))},82538:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Y}});var a=s(57348),n=s(4930),i=s(46766),l=s(37734),r=s(15346),c=s(92378),o=s(53350),d=s(51934),u=s(88036),m=s(15800),h=s(12465),x=s(95478),f=s(35878),p=s(41973),g=s(74859);let v=(0,g.k)(f.P.updateDeck,1e3),w=(0,r.createContext)(void 0),j=e=>{var t;let{params:s,children:n}=e,{id:i}=(0,x.u)({params:s,key:"id"}),l=(0,r.useMemo)(()=>decodeURIComponent(i).replace("deck:",""),[i]),[c,o]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[m,g]=(0,r.useState)(""),[j,b]=(0,r.useState)(""),[y,k]=(0,r.useState)(null),[N,C]=(0,r.useState)([]),[_,z]=(0,r.useState)(null),[S,W]=(0,r.useState)(null),[V,P]=(0,r.useState)(null!==(t=null==d?void 0:d.admins)&&void 0!==t?t:[]),[A,D]=(0,r.useState)(null),[O,B]=(0,r.useState)(null),[E,R]=(0,r.useState)(!1),[H,T]=(0,r.useState)(!1),[F,M]=(0,r.useState)(null),[L,q]=(0,r.useState)(!1),I=(0,r.useMemo)(()=>0===m.length||0===j.length||!y&&!(null==d?void 0:d.cover_photo)||L||!!_||!!S||!!A||!!O,[j.length,null==d?void 0:d.cover_photo,y,A,_,O,S,L,m.length]),J=(0,r.useCallback)(async e=>{var t,s;let a=await f.P.getDeck(e,{interval:p.u.AllTime});a&&(u(a),g(a.title),b(null!==(t=a.description)&&void 0!==t?t:""),C(null!==(s=a.external_links)&&void 0!==s?s:[]),P(a.admins),R(a.require_approval),T(a.auto_post),M(a.matching_rules))},[]),U=(0,r.useCallback)(e=>{g(e),q(!0),v(l,{title:e,description:j}).then(()=>q(!1))},[j,l]),Z=(0,r.useCallback)(e=>{b(e),q(!0),v(l,{title:m,description:e}).then(()=>q(!1))},[m,l]),Y=(0,r.useCallback)(async e=>{q(!0),k(e),await v(l,{cover_photo:e?Array.from(e):null}),q(!1)},[l]),G=(0,r.useCallback)(async e=>{let t=[...N,e];z(e),await v(l,{external_links:t}),C(t),z(null)},[N,l]),K=(0,r.useCallback)(async e=>{let t=N.filter(t=>t!==e);W(e),await v(l,{external_links:t}),C(t),W(null)},[N,l]),$=(0,r.useCallback)(async e=>{try{D(e.id),P(t=>[...t,e]),await v(l,{add_admin:e.id})}catch(t){console.error("Failed to add admin",t),(0,h.yv)("Failed to add admin",{variant:"error"}),P(t=>t.filter(t=>t.id!==e.id))}finally{D(null)}},[l]),Q=(0,r.useCallback)(async e=>{try{B(e.id),await v(l,{remove_admin:e.id}),P(t=>t.filter(t=>t.id!==e.id))}catch(e){console.error("Failed to remove admin",e),(0,h.yv)("Failed to remove admin",{variant:"error"})}finally{B(null)}},[l]),X=(0,r.useCallback)(async e=>{R(e),q(!0),await v(l,{require_approval:e}),q(!1)},[l]),ee=(0,r.useCallback)(async e=>{T(e),q(!0),await v(l,{auto_post:e}),q(!1)},[l]),et=(0,r.useCallback)(async e=>{M(t=>{var s,a,n;let i={characters:void 0!==e.characters?e.characters:null!==(s=null==t?void 0:t.characters)&&void 0!==s?s:null,styles:void 0!==e.styles?e.styles:null!==(a=null==t?void 0:t.styles)&&void 0!==a?a:null,keywords:void 0!==e.keywords?e.keywords:null!==(n=null==t?void 0:t.keywords)&&void 0!==n?n:null};return v(l,{matching_rules:i}),i})},[l]);return(0,r.useEffect)(()=>{o(!0),J(l).finally(()=>o(!1))},[J,l]),(0,a.jsx)(w.Provider,{value:{isFetching:c,fetchedDeck:d,name:m,onChangeName:U,description:j,onChangeDescription:Z,onUploadImage:Y,links:N,isAddingLink:_,onClickAddLink:G,isRemovingLink:S,onClickRemoveLink:K,admins:V,isAddingAdmin:A,onClickAddAdmin:$,isRemovingAdmin:O,onClickRemoveAdmin:Q,adminApproval:E,onChangeAdminApproval:X,autoPost:H,onChangeAutoPost:ee,matchingRules:F,onChangeMatchingRules:et,isSaving:L,isDoneDisabled:I},children:n})},b=()=>{let e=(0,r.useContext)(w);if(void 0===e)throw Error("useEditDeck must be used within EditDeckProvider");return e},y=(0,g.k)(f.P.searchUser,1e3),k=()=>{let{admins:e,onClickAddAdmin:t}=b(),[s,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[h,x]=(0,r.useState)([]),f=(0,r.useCallback)(e=>{if(i(e),c(!0),e.length<1){x([]);return}y({search:e,start:0,limit:5}).then(e=>{e&&x(e)}).finally(()=>{c(!1)})},[]);return(0,a.jsx)("div",{className:"flex gap-3 p-3 justify-between",children:(0,a.jsxs)("div",{className:"flex gap-1 items-center flex-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-center size-10 bg-white-400/10 rounded-full",children:l?(0,a.jsx)(n.c,{size:"sm"}):(0,a.jsx)(o.JO,{icon:"tabler:plus",className:"size-5"})}),(0,a.jsx)(d.d,{items:h,placeholder:"Add admin",size:"sm",fullWidth:!0,classNames:{base:"flex-1 max-w-full"},value:s,onValueChange:f,onSelectionChange:e=>{let s=h.find(t=>t.id===e);s&&(t({id:s.id,name:s.screen_name,screen_name:s.twitter_handle,profile_image_url_https:s.profile_image_url,badge_image_url:s.badge_image_url}),i(""),x(t=>t.filter(t=>t.id!==e)))},children:t=>(0,a.jsx)(u.R,{value:t.id,isDisabled:e.some(e=>e.id===t.id),children:(0,a.jsx)(m.W,{avatarSrc:t.profile_image_url,screenName:t.screen_name,userHandle:t.twitter_handle,badgeSrc:t.badge_image_url,p:"p-0"},t.id)},t.id)})]})})};var N=s(22094),C=s(54611),_=s(67425),z=s(22596),S=s(58484);let W=e=>{let{admin:t}=e,{fetchedDeck:s,isAddingAdmin:n,isRemovingAdmin:i,onClickRemoveAdmin:l}=b(),c=(0,r.useMemo)(()=>(null==s?void 0:s.by.id.replace("user:",""))===t.id.replace("user:",""),[t.id,s]);return(0,a.jsxs)("div",{className:"flex gap-3 p-3 items-center justify-between border-b border-white-400/10",children:[(0,a.jsx)(m.W,{avatarSrc:t.profile_image_url_https,badgeSrc:t.badge_image_url,screenName:t.name,userHandle:t.screen_name,p:"p-0"}),(0,a.jsx)("div",{className:"size-8 flex items-center justify-center",children:c?(0,a.jsx)("span",{className:"text-tiny text-white-400/50",children:"Owner"}):(0,a.jsxs)(N.F,{children:[(0,a.jsx)(C.S,{children:(0,a.jsx)(_.A,{isIconOnly:!0,size:"sm",variant:"light",isLoading:n===t.id||i===t.id,children:(0,a.jsx)(o.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,a.jsx)(z.a,{children:(0,a.jsx)(S.W,{color:"danger",startContent:(0,a.jsx)(o.JO,{className:"size-5",icon:"tabler:trash"}),onClick:()=>l(t),children:"Remove admin"},"remove")})]})})]})},V=()=>{let{admins:e}=b();return(0,a.jsx)(c.w,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[e.map(e=>(0,a.jsx)(W,{admin:e},e.id)),(0,a.jsx)(k,{})]})})},P=e=>{let{title:t,description:s}=e;return(0,a.jsxs)("header",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-xl",children:t}),(0,a.jsx)("p",{className:"text-white-400/50 text-sm",children:s})]})};var A=s(98833);let D=e=>{let{title:t,description:s,value:n,onValueChange:i}=e;return(0,a.jsx)(c.w,{children:(0,a.jsxs)("div",{className:"flex gap-3 p-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-base font-semibold",children:t}),(0,a.jsx)("p",{className:"text-white-400/50 text-sm",children:s})]}),(0,a.jsx)(A.i,{color:"primary",classNames:{thumb:"bg-white-400",label:"text-white-400/75"},isSelected:n,onValueChange:i})]})})};var O=s(45155),B=s(56386);let E=()=>{let{links:e,isAddingLink:t,onClickAddLink:s,isRemovingLink:n,onClickRemoveLink:l}=b(),[d,u]=(0,r.useState)(""),m=!d||!(0,B.jv)(d)||e.length>=5||null!==t;return(0,a.jsxs)(c.w,{className:"flex flex-col overflow-hidden",children:[e.map(e=>(0,a.jsxs)("div",{className:"w-full h-[57px] p-3 flex items-center border-b border-b-white-400/10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center size-8 min-w-8 min-h-8",children:(0,a.jsx)(O.default,{alt:"Link icon",src:(0,B.zN)(e),className:"size-5 text-white-400/75"})}),(0,a.jsx)("span",{className:"flex-1 px-1.5 truncate text-sm",children:e}),(0,a.jsxs)(N.F,{children:[(0,a.jsx)(C.S,{children:(0,a.jsx)(_.A,{isIconOnly:!0,size:"sm",variant:"light",isLoading:n===e,children:(0,a.jsx)(o.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,a.jsx)(z.a,{children:(0,a.jsx)(S.W,{color:"danger",startContent:(0,a.jsx)(o.JO,{className:"size-5",icon:"tabler:trash"}),onClick:()=>l(e),children:"Remove link"},"remove")})]})]},e)),(0,a.jsx)(i.Y,{size:"lg",radius:"none",classNames:{inputWrapper:"h-[57px]"},placeholder:"Paste full link",value:d,isDisabled:null!==t||e.length>=5,onValueChange:u,startContent:(0,a.jsx)("div",{className:"flex items-center justify-center size-8 min-w-8 min-h-8",children:(0,a.jsx)(O.default,{alt:"Link icon",src:(0,B.zN)(d),className:"size-5 text-white-400/75"})}),endContent:(0,a.jsx)(_.A,{size:"sm",color:"primary",variant:"solid",isLoading:null!==t,isDisabled:m,onClick:async()=>{await s(d),u("")},children:"Add"}),onKeyPress:async e=>{"Enter"!==e.key||m||(await s(d),u(""))}})]})};var R=s(19783),H=s(86628),T=s(56889),F=s(87140),M=s(71046);let L=()=>{var e;let{isFetching:t,fetchedDeck:s,name:c,onChangeName:o,description:d,onChangeDescription:u,onUploadImage:m,autoPost:h,onChangeAutoPost:x,matchingRules:f,onChangeMatchingRules:p}=b(),{config:g}=(0,F.useDiffusionConfig)(),v=(0,r.useMemo)(()=>{var e;let t=null==f?void 0:null===(e=f.characters)||void 0===e?void 0:e[0];return null==g?void 0:g.characters.find(e=>e.id===t)},[null==g?void 0:g.characters,null==f?void 0:f.characters]),w=(0,r.useMemo)(()=>{var e;let t=null==f?void 0:null===(e=f.styles)||void 0===e?void 0:e[0];return null==g?void 0:g.aesthetics.find(e=>e.id===t)},[null==g?void 0:g.aesthetics,null==f?void 0:f.styles]);return t?(0,a.jsx)("div",{className:"flex justify-center p-4",children:(0,a.jsx)(n.c,{})}):s?(0,a.jsxs)("form",{className:"flex flex-col p-4 pb-20 gap-6",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"size-[128px]",children:(0,a.jsx)(R.U,{imageRef:void 0,initialSrc:s.cover_photo,onParseImage:async e=>{m(e)},onClickDeleteMeme:async()=>{m(null)}})}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 flex-1",children:[(0,a.jsx)(i.Y,{required:!0,placeholder:"Deck name",fullWidth:!0,classNames:{inputWrapper:"bg-black-300"},value:c,onValueChange:o}),(0,a.jsx)(l.Y,{required:!0,placeholder:"Describe what type of memes you want to create",fullWidth:!0,classNames:{inputWrapper:"bg-black-300"},value:d,onValueChange:u})]})]}),(0,a.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,a.jsx)(P,{title:"Links",description:"Feature up to 5 social media links or websites"}),(0,a.jsx)(E,{})]}),(0,a.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,a.jsx)(P,{title:"Admins",description:"Manage admins for your deck"}),(0,a.jsx)(V,{})]}),(0,a.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,a.jsx)(P,{title:"Rules",description:"Manage rules for posting"}),(0,a.jsx)(D,{title:"Auto-post",description:"Any new generation that meets your constraints will be posted to your deck.",value:h,onValueChange:x})]}),(0,a.jsxs)("section",{className:"flex flex-col gap-2",style:{opacity:h?1:.5,pointerEvents:h?"auto":"none",cursor:h?"auto":"not-allowed",userSelect:h?"auto":"none"},children:[(0,a.jsx)(P,{title:"Auto-post constraints",description:"Configure what type of generations should auto-post to your page"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 max-w-sm",children:[(0,a.jsx)(H.d,{selectedAesthetic:w,onSelect:e=>{p({styles:e?[e.id]:null})},hideDescription:!0}),(0,a.jsx)(T.z,{selectedCharacter:v,selectedStyler:M.fP,onSelect:e=>{p({characters:e?[e.id]:null})}}),(0,a.jsx)(i.Y,{label:"Keywords",placeholder:"happy",isClearable:!0,value:null!==(e=null==f?void 0:f.keywords)&&void 0!==e?e:"",onValueChange:e=>{p({keywords:e})}})]})]})]}):(0,a.jsx)("div",{className:"flex p-4",children:(0,a.jsx)("h1",{children:"Deck not found"})})};var q=s(16189),I=s(59602),J=s(89765);let U=()=>{let e=(0,q.useRouter)(),t=(0,q.usePathname)(),s=(0,r.useMemo)(()=>t.slice(0,-5),[t]),{fetchedDeck:n,isDoneDisabled:i,isSaving:l}=b();return(0,a.jsx)("div",{className:"sticky top-0 w-full bg-black-0 z-20",children:(0,a.jsx)(I.y,{title:"Edit Deck",subtitle:(0,a.jsxs)("div",{className:"flex gap-1 items-center truncate",children:[(0,a.jsx)(o.JO,{icon:"ic:outline-info",opacity:.5}),(0,a.jsx)("p",{className:"text-sm text-white-400/60 truncate",children:"Think of a deck like a 4chan board around a certain theme or character"})]}),border:"border-b border-white-400/10",onGoBack:()=>i?e.push("/trending"):e.push(s),endContent:(0,a.jsxs)("div",{className:"flex gap-2 mr-3 items-center",children:[(0,a.jsx)("div",{className:"size-8 flex items-center justify-center",children:n&&(0,a.jsx)(J.g,{deckId:n.id,itemsToRender:[J.Z.Delete],isLoading:l,onDelete:()=>e.push("/trending")})}),(0,a.jsx)(_.A,{size:"sm",variant:"solid",color:"primary",isDisabled:i,onClick:()=>e.push(s),children:"Done"})]})})})};var Z=s(13108);function Y(e){let{params:t}=e;return(0,a.jsx)(Z.Page,{isGated:!0,children:(0,a.jsx)(F.DiffusionConfigProvider,{children:(0,a.jsxs)(j,{params:t,children:[(0,a.jsx)(U,{}),(0,a.jsx)(L,{})]})})})}},80951:function(e,t,s){"use strict";s.d(t,{R:function(){return l}});var a=s(57348),n=s(15346);let i=e=>{let t=new Image;return t.src=e,t.complete},l=e=>{let{src:t,alt:s,width:l,height:r,draggable:c=!0,style:o,noAnimation:d,prefetch:u=!1,initialLoader:m=!1,className:h}=e,[x,f]=(0,n.useState)(!m),p=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(t&&u&&!i(t)){let e=new Image;e.src=t,e.onload=()=>{f(!0)}}},[t,u]),(0,n.useEffect)(()=>{t&&p.current&&p.current.complete&&f(!0)},[p,t]),(0,a.jsxs)("div",{className:"relative flex size-full max-h-full min-h-0 flex-col justify-center",children:[!x&&(0,a.jsx)("div",{className:"absolute left-0 top-0 size-full animate-pulse"}),(0,a.jsx)("img",{ref:p,style:o,src:t,alt:s,width:l,height:r,draggable:c,className:"flex max-h-full min-h-0 select-none ".concat(d?"":"transition-opacity duration-300"," ").concat(x?"opacity-100":"opacity-0","  ").concat(h),onLoad:()=>f(!0)})]})}},15800:function(e,t,s){"use strict";s.d(t,{W:function(){return r}});var a=s(57348),n=s(45155),i=s(13343),l=s(80951);let r=e=>{let{avatarSrc:t,badgeSrc:s,screenName:r,userHandle:c,p:o="px-4 py-2"}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none ".concat(o),children:[(0,a.jsx)("div",{className:"bg-black-400 size-10 rounded-full",children:(0,a.jsx)(l.R,{className:"rounded-full",src:t,alt:c,width:40,height:40})}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 truncate",children:[(0,a.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:r}),s&&(0,a.jsx)(i.E,{content:"Kinode user",children:(0,a.jsx)(n.default,{src:s,alt:c,className:"rounded-sm",width:14,height:14})})]}),(0,a.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",c]})]})]})}},89765:function(e,t,s){"use strict";s.d(t,{Z:function(){return n},g:function(){return g}});var a,n,i=s(57348),l=s(53350),r=s(22094),c=s(54611),o=s(4930),d=s(67425),u=s(22596),m=s(58484),h=s(16189),x=s(12465),f=s(15346),p=s(35878);(a=n||(n={})).Edit="edit",a.Delete="delete";let g=e=>{let{deckId:t,size:s="sm",variant:a="light",itemsToRender:n=["edit","delete"],isLoading:g,onDelete:v}=e,w=(0,h.useRouter)(),[j,b]=(0,f.useState)(!1),y=(0,f.useCallback)(()=>{w.push("/deck/".concat(t,"/edit"))},[w,t]),k=(0,f.useCallback)(async e=>{e.stopPropagation(),e.preventDefault();try{b(!0),await p.P.deleteDeck(t),v()}catch(e){console.error("Failed to delete deck",e),(0,x.yv)("Failed to delete deck",{variant:"error"}),b(!1)}},[t,v]),N=(0,f.useMemo)(()=>[{key:"edit",label:"Edit",color:"default",startContent:(0,i.jsx)(l.JO,{className:"size-5",icon:"mdi:edit"}),onClick:y},{key:"delete",label:"Delete",color:"danger",startContent:(0,i.jsx)(l.JO,{className:"size-5",icon:"tabler:trash"}),onClick:k}],[y,k]);return(0,i.jsxs)(r.F,{classNames:{content:"min-w-0 w-auto"},children:[(0,i.jsx)(c.S,{children:j||g?(0,i.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,i.jsx)(o.c,{size:"sm"})}):(0,i.jsx)(d.A,{isIconOnly:!0,size:s,variant:a,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(l.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,i.jsx)(u.a,{children:N.filter(e=>n.includes(e.key)).map(e=>(0,i.jsx)(m.W,{color:e.color,startContent:e.startContent,onClick:e.onClick,children:e.label},e.key))})]})}},59602:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var a=s(57348),n=s(37824),i=s(13582),l={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0};let r=e=>{let{title:t,subtitle:s,border:r="border-b border-transparent",isLoading:c=!1,endContent:o,onGoBack:d}=e,{goBack:u}=(0,i.useAppHistory)();return(0,a.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(r),children:[(0,a.jsx)(n.O,{src:l,alt:"Back",onClick:null!=d?d:u}),c?(0,a.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,a.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,a.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:t}),s]}),o]})}},37824:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var a=s(57348),n=s(45155);let i=e=>{let{src:t,alt:s,id:i,margin:l="m-2",w:r="w-3.5",onClick:c}=e;return(0,a.jsx)("button",{id:i,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(l),onClick:c,children:(0,a.jsx)(n.default,{priority:!0,src:t,alt:s,className:"opacity-85 ".concat(r)})})}},67733:function(e,t,s){"use strict";s.d(t,{B5:function(){return r},HS:function(){return l},W$:function(){return d},WN:function(){return o},_j:function(){return i},e5:function(){return c},vO:function(){return u}});var a=s(69467),n=s(66353);let i={[a.WV.One]:1,[a.WV.TwoHorizontal]:2,[a.WV.TwoVertical]:2,[a.WV.Four]:4},l={[a.WV.One]:"grid-rows-1 h-fit w-fit",[a.WV.TwoHorizontal]:"grid-cols-2 w-full h-fit",[a.WV.TwoVertical]:"grid-rows-2 w-fit h-full",[a.WV.Four]:"grid-cols-2 grid-rows-2"},r={[a.WV.One]:1,[a.WV.TwoHorizontal]:.75,[a.WV.TwoVertical]:1024/768,[a.WV.Four]:1},c={[n.tB.Square]:[1024,1024],[n.tB.Landscape]:[1024,768],[n.tB.Portrait]:[768,1024]},o={[a.WV.One]:"h-auto w-fit",[a.WV.TwoHorizontal]:"w-full h-fit",[a.WV.TwoVertical]:"w-fit h-full",[a.WV.Four]:"h-auto w-fit"},d={[a.WV.One]:n.tB.Square,[a.WV.TwoHorizontal]:n.tB.Portrait,[a.WV.TwoVertical]:n.tB.Landscape,[a.WV.Four]:n.tB.Square},u=(e,t)=>10>Math.abs(e-t)?n.tB.Square:e>t?n.tB.Landscape:n.tB.Portrait},95478:function(e,t,s){"use strict";s.d(t,{u:function(){return n}});var a=s(16189);let n=e=>{var t;let{key:s,index:n,params:i}=e,l=(0,a.usePathname)(),r=null!==(t=l&&l.split("/")[n||2])&&void 0!==t?t:"",c=i[s]||r;return{[s]:decodeURIComponent(c)}}},13582:function(e,t,s){"use strict";s.r(t),s.d(t,{AppHistoryProvider:function(){return c},useAppHistory:function(){return o}});var a=s(57348),n=s(16189),i=s(12465),l=s(15346);let r=(0,l.createContext)({}),c=e=>{let{children:t}=e,s=(0,n.usePathname)(),c=(0,n.useRouter)(),[o,d]=(0,l.useState)([]),u=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0,s=e;o.length>1&&(s=o[o.length-2],void 0!==t&&s.includes(t)&&(s=e)),"string"!=typeof s&&(s="/home"),c.push(s,{scroll:!1})},[o,c]);return(0,l.useEffect)(()=>{d(e=>e[e.length-1]!==s?[...e,s]:e)},[s]),(0,a.jsxs)(r.Provider,{value:{goBack:u},children:[t,(0,a.jsx)(i.wT,{dense:!0,maxSnack:3})]})},o=()=>{let e=(0,l.useContext)(r);if(void 0===e)throw Error("useFeed must be used within AppHistoryProvider");return e}},71046:function(e,t,s){"use strict";s.d(t,{CJ:function(){return i},M5:function(){return r},U1:function(){return l},ZA:function(){return c},fP:function(){return n},nv:function(){return o}});var a=s(99349);let n={name:"Photorealistic",id:"photorealistic",images:null},i={id:"",src:"",prevSrc:"",width:1024,height:1024,posPrompt:"",negPrompt:"",isExpandedPrompt:!1,seed:(0,a.q)(),seedType:"random",topText:"",bottomText:"",guidanceScale:2.7,selectedAspectRatio:"square",selectedAesthetic:null,selectedCharacter:{name:"Apu Apustaja",id:"apu_apustaja",images:{"hand-drawn":"https://memedeckblob.blob.core.windows.net/ai-characters/hand-drawn-apu-apustaja.png",photorealistic:"https://memedeckblob.blob.core.windows.net/ai-characters/photorealistic-apu-apustaja.png","ms-paint":"https://memedeckblob.blob.core.windows.net/ai-characters/ms-paint-apu-apustaja.png","pixel-art":"https://memedeckblob.blob.core.windows.net/ai-characters/pixel-art-apu-apustaja.png",cinematic:"https://memedeckblob.blob.core.windows.net/ai-characters/cinematic-apu-apustaja.png"}},selectedStyler:n,progress:0,isGenerating:!1,isRandomizing:!1},l={faceImage:"",baseImage:"",baseWidth:void 0,baseHeight:void 0,swappedImage:"",strength:1},r={text:""},c=[{idx:0,id:"0",type:"generated",image:{...i},text:{...r},faceswap:{...l}},{idx:1,id:"1",type:"generated",image:{...i},text:{...r},faceswap:{...l}},{idx:2,id:"2",type:"generated",image:{...i},text:{...r},faceswap:{...l}},{idx:3,id:"3",type:"generated",image:{...i},text:{...r},faceswap:{...l}}],o=(e,t)=>{switch(t.action){case"reset":return e.map(e=>e.idx!==t.idx?e:{...e,image:{...e.image,...i},text:{...e.text,...r},faceswap:{...e.faceswap,...l}});case"blank-slate":return[...c];case"update-panel":return e.map(e=>{var s,a;return e.idx!==t.idx?e:{...e,id:null!==(s=t.id)&&void 0!==s?s:e.id,type:null!==(a=t.type)&&void 0!==a?a:e.type,image:{...e.image,...t.image},text:{...e.text,...t.text},faceswap:{...e.faceswap,...t.faceswap}}});case"delete":return e.filter(e=>e.idx!==t.idx);default:return console.error("Unknown action type"),e}}},55771:function(e,t,s){"use strict";s.d(t,{p:function(){return l},s:function(){return n}});var a=s(54167);let n=()=>a.cm?"wss://staging-api.memedeck.xyz/v1/generation/ws":a.BB||a.j7?"wss://api.memedeck.xyz/v1/generation/ws":"ws://127.0.0.1:8080/v1/generation/ws";class i{async getConfig(){return fetch("".concat(i.BASE_URL,"/generation/config")).then(e=>e.json())}async getRandomPrompt(){return fetch("".concat(i.BASE_URL,"/generation/prompt")).then(e=>e.json())}}i.BASE_URL=a.cm?"https://staging-api.memedeck.xyz/v1":a.BB||a.j7?"https://api.memedeck.xyz/v1":"http://127.0.0.1:8080/v1";let l=new i},69467:function(e,t,s){"use strict";var a,n;s.d(t,{FU:function(){return i},WV:function(){return a},kl:function(){return l}});let i=["generated","composed"];function l(e){return!!e.tags&&e.tags.some(e=>"nsfw"===e.name)}(n=a||(a={})).One="one",n.TwoVertical="two-vertical",n.TwoHorizontal="two-horizontal",n.Four="four-square"},66353:function(e,t,s){"use strict";var a,n;function i(e){return"library"===e?"generated":e}function l(e){switch(e){case"composed":case"upload":return"generated";default:return e}}s.d(t,{JY:function(){return i},fJ:function(){return l},tB:function(){return a}}),(n=a||(a={})).Square="square",n.Landscape="landscape",n.Portrait="portrait"},38857:function(e,t,s){"use strict";async function a(e){let{ctx:t,image:s,targetWidth:a,targetHeight:n,imageWidth:i,imageHeight:l,anchorX:r=0,anchorY:c=0}=e;return new Promise(e=>{let o=Math.max(a/i,n/l),d=i*o,u=l*o;t.save(),t.beginPath(),t.rect(r,c,a,n),t.clip(),t.drawImage(s,r+(a-d)/2,c+(n-u)/2,d,u),t.restore(),e()})}s.d(t,{h:function(){return a}})},56386:function(e,t,s){"use strict";s.d(t,{xM:function(){return u},zN:function(){return d},jv:function(){return h}});var a={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/dexscreener.10175de8.svg",height:16,width:14,blurWidth:0,blurHeight:0},n={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/link.92f1c818.svg",height:16,width:16,blurWidth:0,blurHeight:0},i={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/telegram.43cbd001.svg",height:16,width:16,blurWidth:0,blurHeight:0},l={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.9521bae5.svg",height:16,width:16,blurWidth:0,blurHeight:0};let r=e=>e.includes("twitter.com")||e.includes("t.co")||e.includes("x.com"),c=e=>e.includes("telegram.org")||e.includes("t.me"),o=e=>e.includes("dexscreener.com");function d(e){return r(e)?l:c(e)?i:o(e)?a:n}function u(e){return r(e)?"@".concat(e.split("/")[3]):e.replace(/(https?:\/\/)?(www\.)?/,"")}let m=/^https?:\/\/(www\.)?[a-zA-Z0-9-]+\.[a-zA-Z]{2,}(\/[a-zA-Z0-9-._~:/?#[\]@!$&'()*+,;=]*)?$/;function h(e){return m.test(e)}},99349:function(e,t,s){"use strict";function a(){return Math.floor(1e12*Math.random())}s.d(t,{q:function(){return a}})}},function(e){e.O(0,[7398,2221,4175,454,2872,9154,7686,1133,6440,312,4822,1718,9394,3520,874,5878,412,3108,5439,937,7114,1744],function(){return e(e.s=9189)}),_N_E=e.O()}]);