(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{40471:function(e,t,n){Promise.resolve().then(n.bind(n,11860))},11860:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(91104),l=n(51163),o=n(63137),s=n(61698),a=n(71459),i=n(33968),u=n(41116),c=n(64737);function d(e){var t;let{params:n}=e,{handle:d}=(0,l.u)({params:n,key:"handle"}),{userBookmarks:h,setUserBookmarks:m}=(0,u.useProfile)(),[p,f]=(0,o.useState)(null!==(t=h[d])&&void 0!==t?t:[]),[v,b]=(0,o.useState)(!1),{isFetching:w}=(0,c.M)({feed:p,setFeed:f,hasFetched:v,setHasFetched:b,fetchFn:e=>{let{start:t,limit:n}=e;return i.P.getSavedMemes({start:t,limit:n,user_handle:d})},pageSize:20});return(0,o.useEffect)(()=>{0!==p.length&&m(e=>({...e,[d]:p}))},[p,d,m]),(0,r.jsx)(s.o,{memes:p,hasFetched:v,hasSearched:!1,isFetching:w,renderItem:(e,t)=>(0,r.jsx)(a.Y,{meme:e},"".concat(t,"-").concat(e.id))})}},61698:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var r=n(91104),l=n(41908),o=n(51347);let s={default:3,1100:3,700:2,500:1},a=e=>{let{memes:t,isFetching:n,hasFetched:a,hasSearched:i,className:u="overflow-hidden pl-3 pt-3",breakpoints:c=s,renderItem:d}=e;return(0,r.jsxs)("div",{className:u,children:[!n&&0===t.length&&(a||i)?(0,r.jsx)("div",{className:"text-white-400/75",children:"No memes"}):null,n&&0===t.length&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(l.c,{})}),(0,r.jsx)(o.Z,{breakpointCols:c,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(d)}),n&&t.length>0&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(l.c,{})})]})}},71459:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(91104),l=n(83301),o=n(33120),s=n(21612);let a=e=>{var t,n,a,i,u,c,d,h,m,p;let{meme:f,isSelected:v,showCreator:b=!1,onClick:w}=e,{onOpenMeme:C}=(0,o.useMemeModal)();return(0,r.jsx)("article",{className:"relative w-full cursor-pointer overflow-hidden rounded-lg border-2 ".concat(v?"border-blue-500":"border-transparent"),onClick:()=>w?w():C(f.id),children:(0,r.jsxs)("div",{className:"group flex w-full flex-col",children:["generated"===f.source?(0,r.jsx)(s.g,{type:f.source,src:f.url,alt:f.id,canvasWidth:null!==(a=f.width)&&void 0!==a?a:1024,canvasHeight:null!==(i=f.height)&&void 0!==i?i:1024,imageWidth:null!==(u=f.width)&&void 0!==u?u:1024,imageHeight:null!==(c=f.height)&&void 0!==c?c:1024,topText:null!==(d=null===(t=f.text_overlay)||void 0===t?void 0:t.top_text)&&void 0!==d?d:null,bottomText:null!==(h=null===(n=f.text_overlay)||void 0===n?void 0:n.bottom_text)&&void 0!==h?h:null,centerText:null,className:"z-0 size-full rounded-lg bg-white-400/5 transition-transform group-hover:scale-105"}):(0,r.jsx)(l.default,{className:"z-0 size-full rounded-lg bg-white-400/5 transition-transform group-hover:scale-105",src:f.url,alt:f.id,width:null!==(m=f.width)&&void 0!==m?m:1024,height:null!==(p=f.height)&&void 0!==p?p:1024}),b&&(0,r.jsx)("div",{className:"absolute inset-0 z-0 flex select-none items-end px-1.5 py-1 opacity-0 transition-opacity hover:opacity-100",children:(0,r.jsx)("div",{className:"flex flex-1 items-center gap-2",children:(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate p-1 text-sm font-semibold drop-shadow-[0.5px_0.5px_1px_rgba(0,0,0,80)]",children:[(0,r.jsx)(l.default,{src:f.creator_avatar||"",alt:f.creator_handle||"",className:"rounded-full hover:scale-105",width:24,height:24}),f.creator_handle]})})})]})})}},64737:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var r=n(63137),l=n(29125);let o=e=>{let{feed:t,setFeed:n,hasFetched:o,setHasFetched:s,searchQuery:a,setSearchQuery:i,fetchFn:u,initialQuery:c,fetchOnLoad:d=!0,pageSize:h=50,ignoreWindowScroll:m=!1,onFetchOnLoad:p}=e,[f,v]=(0,r.useState)(0),[b,w]=(0,r.useState)(!0),[C,g]=(0,r.useState)(!1),y=(0,r.useCallback)(async(e,t)=>{let r=await u(e,t);return n(t=>r.length>0&&Number(e.start)>0?[...t,...r]:r),g(!1),s(!0),w(r.length===h),r},[u,h,n,s]),x=(0,r.useMemo)(()=>(0,l.k)(y,1e3),[y]),j=(0,r.useCallback)(async(e,t)=>{var n,r,l;return g(!0),s(!1),x({search:null!==(n=e.search)&&void 0!==n?n:a,start:null!==(r=e.start)&&void 0!==r?r:f,limit:null!==(l=e.limit)&&void 0!==l?l:h},t)},[x,h,a,s,f]),O=(0,r.useCallback)(()=>{if(!o||!b||C)return;let e=f+h;v(e),j({start:e})},[o,b,C,f,h,j]),N=(0,r.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&O()},[O]),k=(0,r.useCallback)(e=>{let t=new URL(window.location.href);e.length>0?t.searchParams.set("query",e):t.searchParams.delete("query"),window.history.pushState({},"",t.toString())},[]),_=(0,r.useCallback)(async e=>{null==i||i(e),i&&k(e),v(0),w(!0),j({search:e,start:0,limit:h})},[j,h,i,k]);return(0,r.useEffect)(()=>{if(!m)return window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)},[N,m]),(0,r.useEffect)(()=>{let e=new AbortController;if(!o&&!(t.length>0)&&d&&!C)return j({search:c,start:0,limit:h},e.signal).then(p),()=>{!e.signal.aborted&&C&&e.abort()}},[t.length,j,d,o,c,C,p,h]),{feed:t,setFeed:n,setHasMore:w,onSearch:_,isFetching:C,hasMore:b,setIsFetching:g,setHasFetched:s,onReachedEnd:O}}},51163:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(26816);let l=e=>{var t;let{key:n,index:l,params:o}=e,s=(0,r.usePathname)(),a=null!==(t=s&&s.split("/")[l||2])&&void 0!==t?t:"",i=o[n]||a;return{[n]:i}}},51347:function(e,t,n){"use strict";var r=n(63137);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class a extends r.Component{componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let n=1/0,r=t.default||2;for(let l in t){let o=parseInt(l);o>0&&e<=o&&o<n&&(n=o,r=t[l])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),n=r.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){let l=r%e;t[l]||(t[l]=[]),t[l].push(n[r])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:n}=this.props,o=this.itemsInColumns(),a="".concat(100/o.length,"%"),i=n;i&&"string"!=typeof i&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===i&&(i="my-masonry-grid_column"));let u=s(s(s({},e),t),{},{style:s(s({},t.style),{},{width:a}),className:i});return o.map((e,t)=>r.createElement("div",l({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:n,columnClassName:o,columnAttrs:s,column:a,className:i}=e,u=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=i;return"string"!=typeof i&&(this.logDeprecated('The property "className" requires a string'),void 0===i&&(c="my-masonry-grid")),r.createElement("div",l({},u,{className:c}),this.renderColumns())}constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}}a.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=a}},function(e){e.O(0,[826,349,223,98,542,915,120,514,171,744],function(){return e(e.s=40471)}),_N_E=e.O()}]);