"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9577],{9577:function(e,t,a){a.r(t),a.d(t,{Page:function(){return g}});var r=a(91104),l=a(63137),s=a(26816),i=a(41116),A=a(33968),c=a(71668),n=a(41908),o={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0},d=a(83301);let m=()=>{let{isBatchUploading:e}=(0,c.useUpload)();return(0,r.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,r.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,r.jsx)(n.c,{}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,r.jsx)(d.default,{src:o,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,r.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})};var u=a(59442);let g=e=>{let{children:t,isGated:a=!0,border:c="xs:border-0 sm:border-x border-white-400/15"}=e,n=(0,s.useRouter)(),[o,d]=(0,l.useState)(!0),{profile:g,setProfile:h,isHovering:f,isPostingMemes:p}=(0,i.useProfile)();return((0,l.useEffect)(()=>{g||(d(!0),A.P.getMe().then(h).catch(console.error).finally(()=>d(!1)))},[a,g,n,h]),g||o||!a)?(0,r.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(c),children:f&&!p?(0,r.jsx)(m,{}):t}):(0,r.jsx)(u.c,{isOpen:!0})}},59442:function(e,t,a){a.d(t,{c:function(){return u}});var r=a(91104),l=a(83301),s=a(57826),i=a(28563);let A=e=>{let{title:t,children:a,isOpen:s,glow:A=!0,hideOnCloseButton:c=!1,onClose:n}=e;return s?(0,r.jsx)("div",{className:"bg-white-100 fixed inset-0 z-50 flex size-full max-h-full min-h-0 items-center justify-center overflow-y-auto overflow-x-hidden p-4",onClick:n,children:(0,r.jsxs)("div",{className:"".concat(A?"glow":""," bg-black-400 relative flex w-full max-w-md flex-col items-center gap-6 rounded-lg px-6 pb-8 pt-6 shadow-lg"),onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("header",{className:"relative flex w-full items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:t}),n&&!c&&(0,r.jsx)("button",{onClick:n,className:"absolute right-0 translate-x-1/4 p-2",children:(0,r.jsx)(l.default,{src:i.Z,alt:"close",className:"w-3"})})]}),(0,r.jsx)("div",{children:a})]})}):null};var c=a(83321),n=a(33968),o=a(51115);let d=[{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/1.8823d877.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAzklEQVR42mPQF9DS4NXgZ5bTVvVV1vRnYOBW41TVF9Bm0OXTchc3mGuac8J75rmkFXsz50RKWBoCJWTZVHI03HcYlmwzqdrn1n4qfnqnZbQ5txaDLr+WtZBeolJAvEFSjmtpTWhFqJyFHo8mg4GQriqnrJWUbbxJZp5XeWF4tSyjrL6gNoMWp5y5qKWjvJe3YVyKR0mQdaQGg6y+kA6Du352pHl5lElOsFV0SlBBsH28GoMMSCLZryfbrzPTu7kgpqUooSsnvNVBz12DQQ4Aeio0BOyoKu8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#2E102A"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/2.185f5c03.png",height:1198,width:1162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA0UlEQVR42mNwiEywCgovzczfOKtvYV97dkY9g1ONqmctg3tSYkxsWKCl7Zym8q0zOqfWVYm51ih61DIEZ5a7hacGmVtH2Ntvas5tiYrR8ayRcq9lMAioZ7AsdNXTs1c3PdRdvLO5msGmSsWzhkHJo0reu8HNMro9NuTYhIqV1fkMLhUqXg0MCu61Mh4NGrbJOT6eDZEhiU72dg4+Xr6ZDM6xJTy6fgxikoY6Zml2tgaaxppqRs6edgyuMZ4KxsoMoopaZq6uLoGaino6lkYWvjYAC7g+Dfv8P9kAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#21487D"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/3.43776601.png",height:880,width:880,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AE1OTiciHykjGBcNBQAAAAAAAF5mbpGjuwA5NSg1LiMTAABMSDqOi3SDgGsJAAA+REwACgAABwAARUAwvbqb2te0z8yrjYpzAAAAAHNwW1xYS4OBbtXTrtTRrqKhiJKQe7SykwDY1a/Qzautq5DV063RzarJxqbHxKPT0KoAb2tWt7SU1tKq0c6nzcqnzMemwLqXY2JOABoPDQAAAJaQfM7Hq7y2lsW+qG1nWiklKwB/dWSqopfQx8HVy8PMwrbXzcbRyMCon5YdSl2c8L4tdAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#D0CCA9"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/4.a25addea.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AKnG0avG0bDJ0rbO1bnQ1bLK0LDIz7DIzwC9zcvAzszH0s+YpKKOnJu/y8XH0szE0MsAzM/E1NXJqqyiNhIAfV9Ls6qew7aszsq/AMzHwc3Jx8O3sOe+mfTKptG5qbSals/GxgC3tcazpa63sL7yzKz+1KbSurGqmKK7tcMAlpOsjoORhXqM3Lib37udtqSpmpKfpJmeAGpdZUZDQ1huTfPNpragjQABKqGJgbipowA6AABEZUhDkG1vg2d+h2kATCG3mISikoczn3nJIi6wxQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#BDB9C3"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/5.622e0a3d.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/APvi2OfQxmplWSkyKTA3LmtlW+zTyf7k2wD649ernJEAAAAiLCQABgoAAAC4ppz95tsA8tzRfHVqAAAACgAAgWpVbWBIdGxm8tvQAPPe1Ih/d1o3B5RnQcetjbamioZ2Z+vSygD549rLubGAYTeyfDzy4cPc0rbGraD33dMA79rS9d7Xm4h8mFgW26qFwaWF4svC9d3SAPfj2smzqzMZEGU1HcCkgsCaf9KrofDe1ACzn5lEMC9wUCx6TS2gh2prQzF3AADEpI9uLGl6mUkPuwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#AF7A43"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/6.b62b0cfc.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AIuZgJKgnWiGpViHsXeYtZirvaOkmbeogwBZiLpGebt6g4KQh1KWjV2Ml4yIqsmBorkAOnK2d4Sax5pP27R+za6Ar5x1gpaqjKvCAFiPuYmYk72pdK6XcMCvi6KUdV57ko6zyABpm7mPoLGnontscladnJSSmKBblLdvpsoAmqisw7OkwLWRvbKnv7G+kKfBfp64kqi6AJCepLqvj7++s627yru7t3iUoa+tqsLEywCRn6GfsKtutdG0wM/WxbB+mqV4oceVsc4HHXVkV3+NuQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#7197BD"}],m=e=>{let{index:t,avatar:a}=e;return(0,r.jsx)(l.default,{src:a.src,draggable:!1,priority:!0,quality:50,style:{background:a.color},alt:"avatar ".concat(t),className:"size-9 rounded-full border-2 border-white-400 ".concat(t>0?"-ml-1":""),width:38,height:38})},u=e=>{let{isOpen:t,onClose:a}=e;return(0,r.jsx)(A,{isOpen:t,hideOnCloseButton:!0,onClose:a,children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("h1",{className:"mb-6 text-center text-3xl font-bold",children:o.K7}),(0,r.jsx)("p",{className:"text-center text-lg text-white-400/75",children:o.vk}),(0,r.jsx)("div",{className:"relative my-6 flex items-center justify-center select-none",children:d.map((e,t)=>(0,r.jsx)(m,{index:t,avatar:e},t))}),(0,r.jsxs)(s.A,{className:"my-6 flex items-center justify-center gap-2 rounded-2xl bg-blue-500 px-5 py-1 text-sm",onClick:()=>{let e=n.P.xGetRedirectUrl();window.location.href=e},children:[(0,r.jsx)("p",{className:"text-lg",children:"Login with"}),(0,r.jsx)(l.default,{src:c.Z,alt:"x",className:"w-5"})]})]})})}},71668:function(e,t,a){a.r(t),a.d(t,{UploadProvider:function(){return p},useUpload:function(){return x}});var r=a(91104),l=a(36623),s=a(63137);let i=e=>{let t=new FileReader;return new Promise((a,r)=>{t.onload=e=>{var t;let l=null===(t=e.target)||void 0===t?void 0:t.result;if(!l){r(Error("Failed to read file"));return}a(new Uint8Array(l))},t.onerror=()=>r(t.error),t.readAsArrayBuffer(e)})};var A=a(57826);let c=e=>{let{text:t,textButton:a,onClick:l}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t,a&&l&&(0,r.jsx)(A.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:l,children:a})]})};var n=a(29125),o=a(41116),d=a(26816),m=a(60402),u=a(33968),g=a(4180),h=a(98127);let f=(0,s.createContext)({}),p=e=>{let{children:t}=e,a=(0,d.useRouter)(),{openMemeModal:A}=(0,h.T)(),{isPostingMemes:p,setIsHovering:x}=(0,o.useProfile)(),{onUploadMeme:b}=(0,m.useFeed)(),[v,w]=(0,s.useState)([]),[k,y]=(0,s.useState)(),[C,S]=(0,s.useState)(!1),j=(0,s.useCallback)(async(e,t)=>{try{(0,l.sy)();let a=e.name.slice(0,20),s=(0,l.yv)("Uploading ".concat(a),{variant:"info",persist:!0});y(s);let n=await i(e),o="";if(void 0!==t){let a=await u.P.postDeckSubmission({deckId:t,filename:(0,g.Df)(e.name),filetype:e.type,bytes:n});if(!a)throw Error("Failed to upload");o=a.meme_id}else{let t=await u.P.postMeme({filename:(0,g.Df)(e.name),filetype:e.type,bytes:n});if(!t)throw Error("Failed to upload");o=t.id;let a={...t,votes:{up:[],down:[]}};w(e=>[a,...e]),b(a)}(0,l.sy)(k),y(void 0);let d=(0,l.yv)((0,r.jsx)(c,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,l.sy)(d),A(o)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),y(void 0),(0,l.sy)(),(0,l.yv)("Failed to upload some memes",{variant:"error"})}},[k,A,b,w]),D=(0,s.useCallback)(async e=>{try{let t=(0,g.Df)(e),a=t.slice(0,20),s=(0,l.yv)("Uploading ".concat(a),{variant:"info",persist:!0});y(s);let i=await u.P.postMeme({filename:t,filetype:"image",source_url:e});if(!i)throw Error("Failed to paste link");w(e=>[i,...e]),b(i),(0,l.sy)(k),y(void 0);let n=(0,l.yv)((0,r.jsx)(c,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,l.sy)(n),A(i.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,l.yv)("Failed to paste link",{variant:"error"})}},[k,A,b]),U=(0,s.useMemo)(()=>(0,n.k)(j,1e3),[j]),R=(0,s.useCallback)(async(e,t)=>{if(void 0===k){if(e.size>33554432){(0,l.yv)("Please upload files 32MB or less",{variant:"error"});return}return U(e,t)}},[U,k]),z=(0,s.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let a=t[e];if(a.type.includes("image")){let e=a.getAsFile();e&&await R(e)}}}},[R]);(0,s.useEffect)(()=>(window.addEventListener("paste",z),()=>{window.removeEventListener("paste",z)}),[z]);let N=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),x(!1),S(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let a=t[e];a.type.includes("image")&&await R(a)}p||a.push("/library")}catch(e){console.error(e)}finally{S(!1)}};return(0,r.jsx)(f.Provider,{value:{uploads:v,setUploads:w,startUpload:R,pasteImageLink:D,isBatchUploading:C},children:(0,r.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&x(!0)},onDragLeave:()=>x(!1),onDrop:N,children:t})})},x=()=>(0,s.useContext)(f)},51115:function(e,t,a){a.d(t,{K7:function(){return s},jG:function(){return l},vk:function(){return i}});var r=a(59458);let l="MemeDeck",s="Meme With Frens",i="Create & discover memes with AI.";"".concat(l," â€“ ").concat(s),new URL(r.j7?"http://localhost:8080":"https://memedeck.xyz")},83321:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}}}]);