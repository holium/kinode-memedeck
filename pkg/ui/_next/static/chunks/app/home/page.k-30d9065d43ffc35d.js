(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[984],{6045:function(e,t,s){Promise.resolve().then(s.bind(s,84304)),Promise.resolve().then(s.bind(s,87221)),Promise.resolve().then(s.bind(s,91239)),Promise.resolve().then(s.bind(s,30977)),Promise.resolve().then(s.bind(s,20100)),Promise.resolve().then(s.bind(s,9577)),Promise.resolve().then(s.bind(s,69936)),Promise.resolve().then(s.bind(s,67409)),Promise.resolve().then(s.bind(s,91173)),Promise.resolve().then(s.bind(s,44815)),Promise.resolve().then(s.bind(s,85972)),Promise.resolve().then(s.bind(s,64650)),Promise.resolve().then(s.bind(s,13033)),Promise.resolve().then(s.bind(s,70672)),Promise.resolve().then(s.bind(s,31147)),Promise.resolve().then(s.bind(s,54234)),Promise.resolve().then(s.bind(s,19055)),Promise.resolve().then(s.bind(s,63097)),Promise.resolve().then(s.bind(s,95963)),Promise.resolve().then(s.bind(s,8917)),Promise.resolve().then(s.bind(s,21452)),Promise.resolve().then(s.bind(s,43266)),Promise.resolve().then(s.bind(s,85993)),Promise.resolve().then(s.bind(s,14993)),Promise.resolve().then(s.bind(s,17466)),Promise.resolve().then(s.bind(s,37257)),Promise.resolve().then(s.bind(s,52761)),Promise.resolve().then(s.bind(s,61736)),Promise.resolve().then(s.bind(s,90020)),Promise.resolve().then(s.bind(s,67928)),Promise.resolve().then(s.bind(s,32617)),Promise.resolve().then(s.bind(s,82530)),Promise.resolve().then(s.bind(s,24537)),Promise.resolve().then(s.bind(s,27373)),Promise.resolve().then(s.bind(s,92845)),Promise.resolve().then(s.bind(s,22545)),Promise.resolve().then(s.bind(s,98615))},26645:function(e,t,s){"use strict";s.d(t,{Ud:function(){return m},hd:function(){return d},Ew:function(){return u},QB:function(){return h}});var l=s(91104),a=s(30027),r=s(83301),i={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo.a86b8f2b.svg",height:256,width:256,blurWidth:0,blurHeight:0},n=s(8748),o=s(51115),c=s(18159);let d=()=>(0,l.jsx)("div",{className:"flex h-16 select-none items-center justify-center lg:px-2 lg:text-left",children:(0,l.jsxs)(a.default,{href:"/home",children:[(0,l.jsxs)("div",{className:"hidden gap-1 items-center lg:flex",children:[(0,l.jsx)(h,{}),(0,l.jsx)(m,{})]}),(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(u,{})})]})}),u=()=>(0,l.jsx)(r.default,{src:i,alt:"".concat(o.jG," Icon"),"aria-label":"".concat(o.jG," - ").concat(o.vk),className:"h-10 w-full select-none"}),h=e=>{let{className:t="h-12 w-auto"}=e;return(0,l.jsx)(r.default,{priority:!0,src:n.Z,alt:"".concat(o.jG," Logo"),"aria-label":"".concat(o.jG," - ").concat(o.vk),className:t,draggable:!1})},m=()=>(0,l.jsx)(c.z,{size:"sm",color:"warning",classNames:{base:"mb-0.5 text-yellow-400 bg-yellow-50 border-1 border-yellow-400/10"},children:"Alpha"})},34260:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});var l=s(91104),a=s(83301);let r=e=>{let{imageUrl:t,priorityLoadImage:s,alt:r="Meme"}=e;return(0,l.jsxs)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:[(0,l.jsx)(a.default,{className:"absolute z-0 inset-0 object-cover blur-lg scale-110 size-full",src:t,alt:"Meme blur",width:400,height:400,quality:1,priority:s}),(0,l.jsx)(a.default,{draggable:!1,className:"absolute z-1 inset-0 size-full object-contain",src:t,alt:r,width:640,height:640,sizes:"640px",quality:50,priority:s})]})}},20100:function(e,t,s){"use strict";s.r(t),s.d(t,{NewFeatures:function(){return d}});var l=s(91104),a=s(33968),r=s(49566),i=s(70127),n=s(57826),o=s(75161),c=s(63137);let d=()=>{let[e,t]=(0,c.useState)();if((0,c.useEffect)(()=>{a.P.getProductUpdates().then(e=>t(e))},[]),!e)return null;let s=new Date(e.date_formatted),d="".concat(s.getMonth()+1,"/").concat(s.getDate(),"/").concat(s.getFullYear());return e&&(0,l.jsxs)(i.w,{className:"border-white-400/5 w-full rounded-lg border pb-4 p-2 bg-[url('https://nextuipro.nyc3.cdn.digitaloceanspaces.com/components-images/abstract-dark-bg4.jpg')] bg-right-bottom",shadow:"sm",children:[(0,l.jsx)(n.A,{isIconOnly:!0,className:"absolute right-2 top-2 z-20",radius:"full",size:"sm",variant:"light",onClick:()=>{a.P.dismissProductUpdate(e.id),t(void 0)},children:(0,l.jsx)(r.JO,{className:"text-default-400",icon:"iconamoon:close-thin",width:24})}),(0,l.jsxs)(o.G,{className:"px-3 pb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,l.jsx)(r.JO,{icon:"ic:sharp-tips-and-updates",className:"size-7 my-2"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-small text-default-500/50",children:d}),(0,l.jsx)("h2",{className:"text-lg font-black",children:(null==e?void 0:e.title)||"Product Updates"})]})]}),(0,l.jsx)("ul",{className:"mt-3",children:Object.entries(null==e?void 0:e.details).sort((e,t)=>e[0]-t[0]).map(e=>(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.JO,{icon:"ic:sharp-check-circle",className:"size-4"}),(0,l.jsx)("p",{className:"text-small text-default-500",children:e[1]})]},"product-update-feature"+e[0].toString()))})]})]})}},9577:function(e,t,s){"use strict";s.r(t),s.d(t,{Page:function(){return m}});var l=s(91104),a=s(63137),r=s(26816),i=s(41116),n=s(33968),o=s(71668),c=s(41908),d={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0},u=s(83301);let h=()=>{let{isBatchUploading:e}=(0,o.useUpload)();return(0,l.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,l.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,l.jsx)(c.c,{}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,l.jsx)(u.default,{src:d,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,l.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})},m=e=>{let{children:t,isGated:s=!0,border:o="xs:border-0 sm:border-x border-white-400/15"}=e,c=(0,r.useRouter)(),{profile:d,setProfile:u,isHovering:m,isPostingMemes:x}=(0,i.useProfile)();return(0,a.useEffect)(()=>{s&&!d&&n.P.getMe().then(u).catch(e=>{console.error(e),c.push("/")})},[s,d,c,u]),(0,l.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(o),children:m&&!x?(0,l.jsx)(h,{}):t})}},69936:function(e,t,s){"use strict";s.r(t),s.d(t,{PeopleToFollow:function(){return d}});var l=s(91104),a=s(63137),r=s(30027),i=s(33968),n=s(41116),o=s(1490),c=s(65511);let d=()=>{let{recommendedFollows:e,setRecommendedFollows:t}=(0,n.useProfile)(),[s,d]=(0,a.useState)(!0),u=(0,a.useCallback)(async()=>{t(await i.P.getRecommendedFollows()),d(!1)},[t]);return((0,a.useEffect)(()=>{0===e.length&&u()},[u,e.length]),s&&0===e.length)?(0,l.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3,4,5].map(e=>(0,l.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,l.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,l.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,l.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):(0,l.jsx)("div",{className:"flex flex-col gap-1",children:e.slice(0,5).map(e=>(0,l.jsxs)(r.default,{href:"/u/".concat(e.screen_name),className:"hover:bg-white-400/5 flex items-center gap-3 px-4 py-2 text-sm",children:[(0,l.jsx)("div",{id:"creator-avatar",className:"bg-black-400 size-10 rounded-full",children:(0,l.jsx)(c.R,{className:"rounded-full",src:e.profile_image_url_https,alt:e.screen_name,width:40,height:40})}),(0,l.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:e.name}),e.badge_image_url&&(0,l.jsx)(o.J,{src:e.badge_image_url,alt:e.screen_name,className:"rounded-sm",width:14,height:14})]}),(0,l.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",e.screen_name]})]})]},e.screen_name))})}},84304:function(e,t,s){"use strict";s.r(t),s.d(t,{TopCharactersAside:function(){return h}});var l=s(91104),a=s(63137),r=s(33968),i=s(41116),n=s(30027),o=s(83301),c=s(4180);let d=e=>{let{character:t}=e;return(0,l.jsxs)(n.default,{href:"/character/".concat(t.character.replace("ai_character:","")),className:"hover:bg-white-400/5 flex items-center gap-3 px-4 py-2 text-sm",children:[(0,l.jsx)("div",{className:"bg-black-400 size-12 rounded-lg overflow-hidden",children:(0,l.jsx)(o.default,{src:t.thumbnail,alt:t.name,width:64,height:64,className:"object-cover object-center size-full"})}),(0,l.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,l.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:t.name}),(0,l.jsx)("div",{className:"text-white-400/50 text-sm",children:"".concat(t.total_generations," ").concat((0,c._6)(t.total_generations,"meme","memes"))})]})]},t.character)};var u=s(21204);let h=()=>{let{topCharactersWeekly:e,setTopCharactersWeekly:t}=(0,i.useProfile)(),[s,n]=(0,a.useState)(!0),o=(0,a.useCallback)(async()=>{n(!0),r.P.getTopCharacters({limit:5,interval:u.u.Week}).then(t).finally(()=>n(!1))},[t]);return((0,a.useEffect)(()=>{0===e.length&&o()},[o,e.length]),s&&0===e.length)?(0,l.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3].map(e=>(0,l.jsxs)("div",{style:{height:"64px"},className:"flex items-center gap-1 px-4 py-2",children:[(0,l.jsx)("div",{className:"bg-white-400/10 size-12 rounded-lg"}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,l.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,l.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):(0,l.jsx)("div",{className:"flex flex-col gap-1",children:e.filter(e=>"ai_character:normal"!==e.character).sort((e,t)=>t.total_generations-e.total_generations).slice(0,3).map(e=>(0,l.jsx)(d,{character:e},e.character))})}},87221:function(e,t,s){"use strict";s.r(t),s.d(t,{SearchBar:function(){return n}});var l=s(91104),a=s(26816),r=s(26645),i=s(18262);let n=e=>{let{value:t,autofocus:s,initialSearch:n,responsiveness:o="",border:c="border-b border-white-400/15",placeholder:d,hideLogo:u=!1,onSearch:h}=e,m=(0,a.useRouter)();return(0,l.jsxs)("div",{className:"sticky top-0 z-10 flex gap-3 h-16 w-full items-center bg-black-0 px-3 ".concat(o," ").concat(c),onClick:()=>{h||m.push("/explore")},children:[!u&&(0,l.jsx)("div",{className:"sm:hidden size-10 max-w-10",children:(0,l.jsx)(r.Ew,{})}),(0,l.jsx)(i.T,{value:t,autofocus:s,initialSearch:n,placeholder:d,onSearch:h})]})}},18262:function(e,t,s){"use strict";s.d(t,{T:function(){return o}});var l=s(91104),a=s(63137),r=s(83301),i=s(87091),n=s(20279);let o=e=>{let{value:t,autofocus:s,initialSearch:o,placeholder:c="Search for memes. (i.e. pepe)",onFocus:d,onSearch:u}=e,h=(0,a.useRef)(null);return(0,l.jsx)(i.Y,{isClearable:!0,onClear:()=>{null==u||u("")},radius:"full",classNames:{input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,l.jsx)(r.default,{priority:!0,src:n.Z,alt:"Dropdown",onClick:e=>{var t;e.preventDefault(),null===(t=h.current)||void 0===t||t.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:h,autoFocus:s,defaultValue:o,placeholder:c,className:"h-10 min-w-24 flex-1 rounded-full border border-white-400/5 bg-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",value:t,onFocus:d,onChange:e=>null==u?void 0:u(e.target.value)})}},91239:function(e,t,s){"use strict";s.r(t),s.d(t,{HomeFeed:function(){return O}});var l=s(91104),a=s(41908),r=s(33968),i=s(63137),n=s(83301),o=s(26816),c=s(36623),d=s(4180),u=s(49141),h=s(1490);let m=e=>{let{badge:t,avatar:s,handle:a,publishedAt:r,submissionCount:i=0,name:n,description:o,onProfileClick:c}=e;return(0,l.jsxs)("header",{className:"flex w-full flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-start gap-1.5 text-sm",children:[(0,l.jsx)(u.z,{classNames:{base:"text-white-400/80 hover:text-white-400/100"},name:(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[a,t&&(0,l.jsx)(h.J,{src:t,alt:"badge",className:"rounded-sm",width:14,height:14})]}),avatarProps:{src:s,className:"w-5 h-5 text-tiny"},onClick:c}),(0,l.jsx)("div",{className:"text-stone-700 text-xs",children:"•"}),(0,l.jsx)("div",{className:"text-white-400/40",children:(0,d.Po)(r)})]}),(n||o)&&(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("h2",{className:"truncate text-lg font-bold tracking-wide",children:n}),(0,l.jsx)("p",{className:"text-sm font-normal text-white-400/75",children:o})]})]})};var x=s(4104),f=s(95928),v=s(80196),g=s(57826),p=s(15849),b=s(25851),j=s(84597),w=s(4470),y=s(49566),N=s(41116),k=s(98127),P=s(34260),C=s(21612),z=s(98644);let _=e=>{var t,s,a,r,i,o,c,d,u,h;let{meme:m,priorityLoadImage:x}=e;return(0,l.jsxs)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:[(0,l.jsx)(n.default,{className:"absolute z-0 inset-0 object-cover blur-lg scale-110 size-full",src:m.url,alt:"Meme blur",width:400,height:400,priority:x,quality:1}),(0,l.jsx)(C.g,{type:(0,z.fJ)(null!==(a=m.source)&&void 0!==a?a:"generated"),src:m.url,alt:(null!==(r=m.tags)&&void 0!==r?r:["Meme"]).join(", "),topText:null!==(i=null===(t=m.text_overlay)||void 0===t?void 0:t.top_text)&&void 0!==i?i:null,bottomText:null!==(o=null===(s=m.text_overlay)||void 0===s?void 0:s.bottom_text)&&void 0!==o?o:null,centerText:null,className:"z-[1]",imageWidth:null!==(c=m.width)&&void 0!==c?c:1024,imageHeight:null!==(d=m.height)&&void 0!==d?d:1024,canvasWidth:null!==(u=m.width)&&void 0!==u?u:1024,canvasHeight:null!==(h=m.height)&&void 0!==h?h:1024})]})};var F=s(61281),S=s(49242);let M=e=>{var t,s;let{meme:a,by_avatar:d,by_badge_image_url:u,by_handle:h,published_at:C,priorityLoadImage:z}=e,M=(0,o.useRouter)(),{isOpen:A,onOpen:D,onClose:E,onOpenChange:O}=(0,v.q)(),{profile:T}=(0,N.useProfile)(),{onOpenMeme:R}=(0,x.useMemeModal)(),{getMemeModalPath:U}=(0,k.T)(),[H,I]=(0,i.useState)(a.is_saved),[L,J]=(0,i.useState)(!1),W=()=>{I(!H),r.P.saveMeme(a.id,H).catch(()=>{I(H)})},B=()=>{let e=U(a.id),t="".concat(window.location.origin).concat(e);navigator.clipboard.writeText(t),E(),(0,c.yv)("Link copied to clipboard",{variant:"success",autoHideDuration:1500})},q=async()=>{try{J(!0);let e=await fetch(a.url);if(!e.ok)throw Error("Network response was not ok.");let t=await e.blob(),s=new File([t],"meme.png",{type:"image/png"});await navigator.share({title:"Share Meme",text:"Check out this meme on Memedeck",files:[s]})}catch(e){console.error("Error sharing:",e)}finally{J(!1)}E()},G=a.width>0&&a.height>0&&a.width<=a.height?a.width/a.height:1024/768;return(0,l.jsxs)("article",{className:"flex min-h-0 min-w-full max-w-full cursor-pointer flex-col items-start justify-start gap-2 overflow-hidden border-b border-white-400/15 p-3 transition-colors hover:bg-black-400",onClick:()=>R(a.id),children:[(0,l.jsx)(m,{badge:u,avatar:d,handle:h,publishedAt:C,onProfileClick:e=>{e.preventDefault(),e.stopPropagation(),M.push("/u/".concat(h))}}),(0,l.jsx)("div",{className:"w-full",style:{aspectRatio:G},children:"generated"===a.source?(0,l.jsx)(_,{meme:a,priorityLoadImage:z}):(0,l.jsx)(P.h,{imageUrl:a.url,alt:null===(t=a.tags)||void 0===t?void 0:t.join(", "),priorityLoadImage:z})},"meme-".concat(a.id)),(0,l.jsxs)("footer",{className:"flex w-full flex-row items-center gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,l.jsx)(f.I,{itemId:a.id,userId:null!==(s=null==T?void 0:T.user.id)&&void 0!==s?s:"",addVoteApi:r.P.createMemeReaction,removeVoteApi:r.P.deleteMemeReaction}),(0,l.jsx)(g.A,{isIconOnly:!0,size:"sm",radius:"full",variant:"ghost",onClick:e=>{e.stopPropagation(),e.preventDefault(),W()},children:(0,l.jsx)(y.JO,{icon:H?"material-symbols:bookmark":"material-symbols:bookmark-outline",width:18})})]}),a.source&&S.F.includes(a.source)&&(0,l.jsx)(g.A,{size:"sm",variant:"bordered",startContent:(0,l.jsx)(n.default,{src:F.Z,alt:"Remix",className:"size-4"}),onClick:()=>{M.push("/studio?remix=".concat(a.id))},children:"Remix"}),(0,l.jsx)(g.A,{isIconOnly:!0,size:"sm",variant:"ghost",className:"flex sm:hidden",onClick:D,children:(0,l.jsx)(y.JO,{icon:"ri:share-2-line",width:18})})]}),(0,l.jsx)(p.R,{isOpen:A,placement:"bottom",hideCloseButton:!0,onOpenChange:O,children:(0,l.jsx)(b.A,{children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(j.I,{className:"flex gap-3 pt-4",children:[(0,l.jsx)(g.A,{variant:"light",className:"flex justify-start",startContent:(0,l.jsx)(y.JO,{icon:"tdesign:link",width:18}),onClick:B,children:"Copy link"}),!!navigator.share&&(0,l.jsx)(g.A,{variant:"light",className:"flex justify-start",startContent:(0,l.jsx)(y.JO,{icon:"ri:share-2-line",width:18}),isLoading:L,onClick:q,children:"Share post via..."})]}),(0,l.jsx)(w.R,{children:(0,l.jsx)(g.A,{variant:"bordered",fullWidth:!0,onPress:e,children:"Cancel"})})]})})})]})},A=e=>{let{index:t,post:s}=e;return"meme"===s.post_type?(0,l.jsx)(M,{...s,meme:s.post,priorityLoadImage:t<2},s.id):null};var D=s(64737),E=s(60402);let O=()=>{let{feed:e,setFeed:t,hasFetchedFeed:s,setHasFetchedFeed:i}=(0,E.useFeed)(),{isFetching:n}=(0,D.M)({feed:e,setFeed:t,hasFetched:s,setHasFetched:i,fetchFn:r.P.getFeed,pageSize:10});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"relative min-w-full max-w-full",children:e.map((e,t)=>(0,l.jsx)(A,{post:e,index:t},"feed--".concat(t)))}),n&&(0,l.jsx)("div",{className:"flex w-full justify-center px-3 py-6",children:(0,l.jsx)(a.c,{})})]})}},30977:function(e,t,s){"use strict";s.r(t),s.d(t,{FeedHeaderMobile:function(){return c}});var l=s(91104),a=s(30027),r=s(83301),i=s(57826),n=s(20279),o=s(26645);let c=()=>(0,l.jsx)("nav",{className:"h-16 border-b border-white-400/10 bg-black-500 sm:hidden xs:block px-3",children:(0,l.jsxs)("div",{className:"flex size-full w-full items-center justify-between gap-3",children:[(0,l.jsx)("div",{className:"size-[40px]"}),(0,l.jsx)("div",{className:"flex flex-1 justify-center items-center",children:(0,l.jsxs)(a.default,{href:"/home",className:"flex items-center gap-1",children:[(0,l.jsx)(o.QB,{className:"w-28"}),(0,l.jsx)(o.Ud,{})]})}),(0,l.jsx)(i.A,{as:a.default,href:"/explore",isIconOnly:!0,variant:"light",radius:"full",children:(0,l.jsx)(r.default,{src:n.Z,alt:"Search",className:"size-6"})})]})})},64737:function(e,t,s){"use strict";s.d(t,{M:function(){return i}});var l=s(63137),a=s(29125),r=s(21204);let i=e=>{let{feed:t,setFeed:s,hasFetched:i,setHasFetched:n,searchQuery:o,setSearchQuery:c,fetchFn:d,initialQuery:u,characterId:h,interval:m=r.u.AllTime,fetchOnLoad:x=!0,pageSize:f=50,ignoreWindowScroll:v=!1,onFetchOnLoad:g}=e,[p,b]=(0,l.useState)(0),[j,w]=(0,l.useState)(!0),[y,N]=(0,l.useState)(!1),k=(0,l.useCallback)(async(e,t)=>{let l=await d(e,t);return s(t=>l.length>0&&Number(e.start)>0?[...t,...l]:l),N(!1),n(!0),w(l.length===f),l},[d,f,s,n]),P=(0,l.useMemo)(()=>(0,a.k)(k,1e3),[k]),C=(0,l.useCallback)(async(e,t)=>{var s,l,a,r;return N(!0),n(!1),P({search:null!==(s=e.search)&&void 0!==s?s:o,start:null!==(l=e.start)&&void 0!==l?l:p,limit:null!==(a=e.limit)&&void 0!==a?a:f,interval:null!==(r=e.interval)&&void 0!==r?r:m,...h&&{character_id:h}},t)},[h,P,m,f,o,n,p]),z=(0,l.useCallback)(()=>{if(!i||!j||y)return;let e=p+f;b(e),C({start:e})},[i,j,y,p,f,C]),_=(0,l.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&z()},[z]),F=(0,l.useCallback)(e=>{let t=new URL(window.location.href);e.length>0?t.searchParams.set("query",e):t.searchParams.delete("query"),window.history.pushState({},"",t.toString())},[]),S=(0,l.useCallback)(async(e,t)=>{null==c||c(e),c&&F(e),b(0),w(!0),C({search:e,start:0,limit:f,interval:t})},[C,f,c,F]);return(0,l.useEffect)(()=>{if(!v)return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[_,v]),(0,l.useEffect)(()=>{let e=new AbortController;if(!i&&!(t.length>0)&&x&&!y)return C({search:u,start:0,limit:f},e.signal).then(g),()=>{!e.signal.aborted&&y&&e.abort()}},[t.length,C,x,i,u,y,g,f]),{feed:t,setFeed:s,setHasMore:w,onSearch:S,isFetching:y,hasMore:j,setIsFetching:N,setHasFetched:n,onReachedEnd:z}}},71668:function(e,t,s){"use strict";s.r(t),s.d(t,{UploadProvider:function(){return g},useUpload:function(){return p}});var l=s(91104),a=s(36623),r=s(63137);let i=e=>{let t=new FileReader;return new Promise((s,l)=>{t.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;if(!a){l(Error("Failed to read file"));return}s(new Uint8Array(a))},t.onerror=()=>l(t.error),t.readAsArrayBuffer(e)})};var n=s(57826);let o=e=>{let{text:t,textButton:s,onClick:a}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[t,s&&a&&(0,l.jsx)(n.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:a,children:s})]})};var c=s(29125),d=s(41116),u=s(26816),h=s(60402),m=s(33968),x=s(4180),f=s(98127);let v=(0,r.createContext)({}),g=e=>{let{children:t}=e,s=(0,u.useRouter)(),{openMemeModal:n}=(0,f.T)(),{isPostingMemes:g,setIsHovering:p}=(0,d.useProfile)(),{onUploadMeme:b}=(0,h.useFeed)(),[j,w]=(0,r.useState)([]),[y,N]=(0,r.useState)(),[k,P]=(0,r.useState)(!1),C=(0,r.useCallback)(async(e,t)=>{try{(0,a.sy)();let s=e.name.slice(0,20),r=(0,a.yv)("Uploading ".concat(s),{variant:"info",persist:!0});N(r);let c=await i(e),d="";if(void 0!==t){let s=await m.P.postDeckSubmission({deckId:t,filename:(0,x.Df)(e.name),filetype:e.type,bytes:c});if(!s)throw Error("Failed to upload");d=s.meme_id}else{let t=await m.P.postMeme({filename:(0,x.Df)(e.name),filetype:e.type,bytes:c});if(!t)throw Error("Failed to upload");d=t.id;let s={...t,votes:{up:[],down:[]}};w(e=>[s,...e]),b(s)}(0,a.sy)(y),N(void 0);let u=(0,a.yv)((0,l.jsx)(o,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,a.sy)(u),n(d)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),N(void 0),(0,a.sy)(),(0,a.yv)("Failed to upload some memes",{variant:"error"})}},[y,n,b,w]),z=(0,r.useCallback)(async e=>{try{let t=(0,x.Df)(e),s=t.slice(0,20),r=(0,a.yv)("Uploading ".concat(s),{variant:"info",persist:!0});N(r);let i=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!i)throw Error("Failed to paste link");w(e=>[i,...e]),b(i),(0,a.sy)(y),N(void 0);let c=(0,a.yv)((0,l.jsx)(o,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,a.sy)(c),n(i.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,a.yv)("Failed to paste link",{variant:"error"})}},[y,n,b]),_=(0,r.useMemo)(()=>(0,c.k)(C,1e3),[C]),F=(0,r.useCallback)(async(e,t)=>{if(void 0===y){if(e.size>33554432){(0,a.yv)("Please upload files 32MB or less",{variant:"error"});return}return _(e,t)}},[_,y]),S=(0,r.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let s=t[e];if(s.type.includes("image")){let e=s.getAsFile();e&&await F(e)}}}},[F]);(0,r.useEffect)(()=>(window.addEventListener("paste",S),()=>{window.removeEventListener("paste",S)}),[S]);let M=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),p(!1),P(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let s=t[e];s.type.includes("image")&&await F(s)}g||s.push("/library")}catch(e){console.error(e)}finally{P(!1)}};return(0,l.jsx)(v.Provider,{value:{uploads:j,setUploads:w,startUpload:F,pasteImageLink:z,isBatchUploading:k},children:(0,l.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&p(!0)},onDragLeave:()=>p(!1),onDrop:M,children:t})})},p=()=>(0,r.useContext)(v)},51115:function(e,t,s){"use strict";s.d(t,{K7:function(){return r},jG:function(){return a},vk:function(){return i}});var l=s(59458);let a="MemeDeck",r="Meme With Frens",i="Create & discover memes with AI.";"".concat(a," – ").concat(r),new URL(l.j7?"http://localhost:8080":"https://memedeck.xyz")},20279:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},8748:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[826,349,223,98,542,653,35,857,42,168,133,915,634,514,171,744],function(){return e(e.s=6045)}),_N_E=e.O()}]);