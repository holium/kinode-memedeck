"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8852],{77623:function(e,t,n){n.d(t,{P:function(){return i},T:function(){return o}});var r=n(16189),a=n(93276);let i=["/home","/trending"],o=()=>{let e=(0,r.useRouter)(),t=(0,r.usePathname)(),n=(0,r.useSearchParams)(),o=e=>{let r=encodeURIComponent(e.replace("meme:",""));if(i.includes(t)){let e=new URLSearchParams(n.toString()),i="".concat(t,"/").concat(r);return(0,a.wS)(i,e)}{let e=new URLSearchParams(n.toString());return e.set("memeId",r),(0,a.wS)(t,e)}},u=()=>{let e=i.some(e=>t.startsWith(e)),r=t;e&&(r=t.split("/").slice(0,-1).join("/"));let o=new URLSearchParams(n.toString());return o.delete("memeId"),(0,a.wS)(r,o)};return{getOpenHref:o,openMemeModal:t=>{let n=o(t);e.push(n,{scroll:!1})},closeMemeModal:()=>{let t=u();e.push(t,{scroll:!1})}}}},35971:function(e,t,n){n.r(t),n.d(t,{FeedProvider:function(){return o},useFeed:function(){return u}});var r=n(57348),a=n(15346);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,a.useState)(null),[u,l]=(0,a.useState)([]),[c,s]=(0,a.useState)(!1),[d,m]=(0,a.useState)(""),[f,p]=(0,a.useState)([]),[h,_]=(0,a.useState)(!1),[g,v]=(0,a.useState)({}),[w,b]=(0,a.useState)({}),[S,y]=(0,a.useState)(""),[A,k]=(0,a.useState)([]),[I,x]=(0,a.useState)(!1),[M,C]=(0,a.useState)(""),[j,P]=(0,a.useState)([]),[T,U]=(0,a.useState)(!1),[R,D]=(0,a.useState)([]),[L,O]=(0,a.useState)(!1),[E,F]=(0,a.useState)([]),[z,G]=(0,a.useState)(!1),W=(0,a.useCallback)(e=>n||u.find(t=>{if("meme"===t.post_type)return t.post.id===e})||j.find(t=>t.id===e)||E.find(t=>t.id===e)||R.find(t=>t.id===e)||f.find(t=>t.id===e)||Object.values(g).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0)||Object.values(w).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0),[u,j,n,E,f,R,w,g]),N=(0,a.useCallback)(e=>{let t=(null==n?void 0:n.id)===e?0:-1,r=u.findIndex(t=>t.post.id===e),a=j.findIndex(t=>t.id===e),i=R.findIndex(t=>t.id===e),o=E.findIndex(t=>t.id===e),l=f.findIndex(t=>t.id===e);return{oneOffMemeIndex:t,feedItemIndex:r,libraryItemIndex:a,uploadsItemIndex:i,savedItemIndex:o,searchResultsItemIndex:l,deckResultsItemIndex:A.findIndex(t=>t.id===e),userMemesItemIndex:Object.values(g).reduce((t,n)=>{let r=n.findIndex(t=>t.id===e);return -1!==r?r:t},-1),userBookmarksItemIndex:Object.values(w).reduce((t,n)=>{let r=n.findIndex(t=>t.id===e);return -1!==r?r:t},-1)}},[A,u,j,n,E,f,R,w,g]),Q=(0,a.useCallback)((e,t,n,r)=>{let{oneOffMemeIndex:a,feedItemIndex:i,libraryItemIndex:u,uploadsItemIndex:c,savedItemIndex:s,searchResultsItemIndex:d,deckResultsItemIndex:m,userMemesItemIndex:f,userBookmarksItemIndex:h}=N(t);if(-1===a&&-1===i&&-1===u&&-1===c&&-1===s&&-1===d&&-1===m&&-1===f&&-1===h)return;let _=(t,a)=>{let i={...a[t]},o={react:r,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===n?"upvote"===r?(i.votes.up.push(o),i.votes.down=i.votes.down.filter(t=>t.by!==e)):(i.votes.down.push(o),i.votes.up=i.votes.up.filter(t=>t.by!==e)):"upvote"===r?i.votes.up=i.votes.up.filter(t=>t.by!==e):i.votes.down=i.votes.down.filter(t=>t.by!==e),[...a.slice(0,t),i,...a.slice(t+1)]};-1!==a&&o(e=>{if(!e)return e;let[t]=_(a,[e]);return t}),-1!==i&&l(e=>_(i,e)),-1!==u&&P(e=>_(u,e)),-1!==c&&D(e=>_(c,e)),-1!==s&&F(e=>_(s,e)),-1!==d&&p(e=>_(d,e)),-1!==m&&k(e=>_(m,e)),-1!==f&&v(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=_(f,n[r]),n):e}),-1!==h&&b(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=_(h,n[r]),n):e})},[N,v]),V=(0,a.useCallback)((e,t)=>{l(n=>0===n.length?n:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...n])},[]),Y=(0,a.useCallback)((e,t)=>{l(n=>0===n.length?n:n.map(n=>{if("meme"in n&&n.post.id===e){let e=n.post;return{...n,post:{...e,...t}}}return n}))},[]),Z=(0,a.useCallback)(e=>{let{feedItemIndex:t,libraryItemIndex:n,uploadsItemIndex:r,savedItemIndex:a,searchResultsItemIndex:i,deckResultsItemIndex:o,userMemesItemIndex:u,userBookmarksItemIndex:c}=N(e);-1!==t&&l(t=>t.filter(t=>t.post.id!==e)),-1!==n&&P(t=>t.filter(t=>t.id!==e)),-1!==r&&D(t=>t.filter(t=>t.id!==e)),-1!==a&&F(t=>t.filter(t=>t.id!==e)),-1!==i&&p(t=>t.filter(t=>t.id!==e)),-1!==o&&k(t=>t.filter(t=>t.id!==e)),-1!==u&&v(t=>{let n={...t},r=Object.keys(t).find(n=>t[n].some(t=>t.id===e));return r?(n[r]=n[r].filter(t=>t.id!==e),n):t}),-1!==c&&b(t=>{let n={...t},r=Object.keys(t).find(n=>t[n].some(t=>t.id===e));return r?(n[r]=n[r].filter(t=>t.id!==e),n):t})},[N,v]),H=(0,a.useCallback)(e=>{j.length>0&&P(t=>[e,...t]),R.length>0&&D(t=>[e,...t])},[j.length,R.length]);return(0,r.jsx)(i.Provider,{value:{oneOffMeme:n,setOneOffMeme:o,feed:u,setFeed:l,hasFetchedFeed:c,setHasFetchedFeed:s,appendMemesToFeed:V,removeItemFromFeed:Z,updateMemeInFeed:Y,searchQuery:d,setSearchQuery:m,searchResults:f,setSearchResults:p,hasFetchedSearchResults:h,setHasFetchedSearchResults:_,userMemes:g,setUserMemes:v,userBookmarks:w,setUserBookmarks:b,deckQuery:S,setDeckQuery:y,deckResults:A,setDeckResults:k,hasFetchedDeckResults:I,setHasFetchedDeckResults:x,librarySearchQuery:M,setLibrarySearchQuery:C,library:j,setLibrary:P,hasFetchedLibrary:T,setHasFetchedLibrary:U,uploads:R,setUploads:D,hasFetchedUploads:L,setHasFetchedUploads:O,saved:E,setSaved:F,hasFetchedSaved:z,setHasFetchedSaved:G,onUploadMeme:H,getMeme:W,voteOnMeme:Q},children:t})},u=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},71402:function(e,t,n){n.r(t),n.d(t,{ProfileProvider:function(){return o},useProfile:function(){return u}});var r=n(57348),a=n(15346);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,a.useState)(null),[u,l]=(0,a.useState)(!0);return(0,r.jsx)(i.Provider,{value:{profile:n,setProfile:o,isFetching:u,setIsFetching:l},children:t})},u=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},99957:function(e,t,n){n.d(t,{cn:function(){return i}});var r=n(79598),a=n(62079);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},74859:function(e,t,n){n.d(t,{D:function(){return r},k:function(){return a}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...a);return n=null,t},t)}},a=(e,t)=>{let n=null;return function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return new Promise((r,i)=>{let o=async()=>{n&&clearTimeout(n);try{let t=await e(...a);r(t)}catch(e){i(e)}n=null};n&&clearTimeout(n),n=setTimeout(o,t)})}}},62568:function(e,t,n){n.d(t,{K7:function(){return i},VU:function(){return l},jG:function(){return a},vk:function(){return o}});var r=n(54167);let a="MemeDeck",i="Meme With Frens",o="Create & discover memes with AI.";function u(e){return e.replace("ai_character:","").replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function l(e){let t="".concat(e.creator_name," (@").concat(e.creator_handle,")"),n="AI Meme",r="View the AI-generated meme by ".concat(t," on MemeDeck.xyz");if("generated"===e.source){let t=e.prompt;t&&(n=u(t.character),r=t.user_positive_prompt)}else if("composed"===e.source){var a;let i=Object.values(null!==(a=e.panels)&&void 0!==a?a:{}),o=i.find(e=>"generated"===e.panel_type&&e.panel_config.prompt),l=i.find(e=>"generated"===e.panel_type&&e.panel_config.meme),c=o?o.panel_config.prompt:null,s=l?l.panel_config.meme:null,d=i.find(e=>"faceswap"===e.panel_type&&e.panel_config.swapped_image),m=d?d.panel_config.swapped_image:null;if(c)n=u(c.character),r=c.user_positive_prompt;else if(s){let e=s.search_text;n=e.length>50?"".concat(e.slice(0,50),"..."):e,r=s.search_text}else m&&(n="Face Swap",r="View the face swap meme by ".concat(t," on MemeDeck.xyz"))}let i="".concat(n," by ").concat(t);return{memeTitle:n,memeTitleWithAttribution:i,memeDescription:r,memeCreator:t}}"".concat(a," â€“ ").concat(i),new URL(r.j7?"http://localhost:8080":"https://memedeck.xyz")},81727:function(e,t,n){n.d(t,{Df:function(){return o},Po:function(){return i},RL:function(){return u},_6:function(){return c},qr:function(){return s},uZ:function(){return l}});var r=n(97102),a=n(41973);let i=e=>{let t=new Date(e/1e6),n=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(n/60),a=Math.round(r/60);return n<60?"".concat(n,"s ago"):r<60?"".concat(r,"m ago"):a<24?"".concat(a,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},o=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),u="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function l(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function c(e,t,n){return 1===e?t:n}function s(e){switch(e){case a.u.Today:return"Today";case a.u.Week:return"This Week";case a.u.Month:return"This Month";case a.u.Year:return"This Year";case a.u.AllTime:return"of All Time"}}},93276:function(e,t,n){function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function a(e,t){let n=new URLSearchParams;return(null==t?void 0:t.sort_by)&&n.set("sort_by",t.sort_by),"/deck/".concat(e.replace("deck:",""),"?").concat(n.toString())}function i(e){return"/home/".concat(e.replace("meme:",""))}n.d(t,{Wi:function(){return i},o4:function(){return a},wS:function(){return r}})},94787:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}}}]);