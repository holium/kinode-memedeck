"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3108],{13108:function(e,t,r){r.r(t),r.d(t,{Page:function(){return m}});var a=r(57348),s=r(75952),i=r(4930),l=r(45155),n=r(82033),A={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0};let c=()=>{let{isBatchUploading:e}=(0,n.useUpload)();return(0,a.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,a.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,a.jsx)(i.c,{}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,a.jsx)(l.default,{src:A,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,a.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})};var o=r(11781),d=r(71402),u=r(64720);(0,s.Cb)("local");let m=e=>{let{children:t,isGated:r=!0,border:s="xs:border-0 sm:border-x border-white-400/15"}=e,{profile:i,isFetching:l}=(0,d.useProfile)(),{isHovering:n}=(0,u.useSidebar)();return i||l||!r?(0,a.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(s),children:n?(0,a.jsx)(c,{}):t}):(0,a.jsx)(o.c,{isOpen:!0})}},11781:function(e,t,r){r.d(t,{c:function(){return m}});var a=r(57348),s=r(67425),i=r(45155);let l=[{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/1.8823d877.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAzklEQVR42mPQF9DS4NXgZ5bTVvVV1vRnYOBW41TVF9Bm0OXTchc3mGuac8J75rmkFXsz50RKWBoCJWTZVHI03HcYlmwzqdrn1n4qfnqnZbQ5txaDLr+WtZBeolJAvEFSjmtpTWhFqJyFHo8mg4GQriqnrJWUbbxJZp5XeWF4tSyjrL6gNoMWp5y5qKWjvJe3YVyKR0mQdaQGg6y+kA6Du352pHl5lElOsFV0SlBBsH28GoMMSCLZryfbrzPTu7kgpqUooSsnvNVBz12DQQ4Aeio0BOyoKu8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#2E102A"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/2.185f5c03.png",height:1198,width:1162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA0UlEQVR42mNwiEywCgovzczfOKtvYV97dkY9g1ONqmctg3tSYkxsWKCl7Zym8q0zOqfWVYm51ih61DIEZ5a7hacGmVtH2Ntvas5tiYrR8ayRcq9lMAioZ7AsdNXTs1c3PdRdvLO5msGmSsWzhkHJo0reu8HNMro9NuTYhIqV1fkMLhUqXg0MCu61Mh4NGrbJOT6eDZEhiU72dg4+Xr6ZDM6xJTy6fgxikoY6Zml2tgaaxppqRs6edgyuMZ4KxsoMoopaZq6uLoGaino6lkYWvjYAC7g+Dfv8P9kAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#21487D"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/3.43776601.png",height:880,width:880,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AE1OTiciHykjGBcNBQAAAAAAAF5mbpGjuwA5NSg1LiMTAABMSDqOi3SDgGsJAAA+REwACgAABwAARUAwvbqb2te0z8yrjYpzAAAAAHNwW1xYS4OBbtXTrtTRrqKhiJKQe7SykwDY1a/Qzautq5DV063RzarJxqbHxKPT0KoAb2tWt7SU1tKq0c6nzcqnzMemwLqXY2JOABoPDQAAAJaQfM7Hq7y2lsW+qG1nWiklKwB/dWSqopfQx8HVy8PMwrbXzcbRyMCon5YdSl2c8L4tdAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#D0CCA9"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/4.a25addea.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AKnG0avG0bDJ0rbO1bnQ1bLK0LDIz7DIzwC9zcvAzszH0s+YpKKOnJu/y8XH0szE0MsAzM/E1NXJqqyiNhIAfV9Ls6qew7aszsq/AMzHwc3Jx8O3sOe+mfTKptG5qbSals/GxgC3tcazpa63sL7yzKz+1KbSurGqmKK7tcMAlpOsjoORhXqM3Lib37udtqSpmpKfpJmeAGpdZUZDQ1huTfPNpragjQABKqGJgbipowA6AABEZUhDkG1vg2d+h2kATCG3mISikoczn3nJIi6wxQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#BDB9C3"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/5.622e0a3d.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/APvi2OfQxmplWSkyKTA3LmtlW+zTyf7k2wD649ernJEAAAAiLCQABgoAAAC4ppz95tsA8tzRfHVqAAAACgAAgWpVbWBIdGxm8tvQAPPe1Ih/d1o3B5RnQcetjbamioZ2Z+vSygD549rLubGAYTeyfDzy4cPc0rbGraD33dMA79rS9d7Xm4h8mFgW26qFwaWF4svC9d3SAPfj2smzqzMZEGU1HcCkgsCaf9KrofDe1ACzn5lEMC9wUCx6TS2gh2prQzF3AADEpI9uLGl6mUkPuwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#AF7A43"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/6.b62b0cfc.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AIuZgJKgnWiGpViHsXeYtZirvaOkmbeogwBZiLpGebt6g4KQh1KWjV2Ml4yIqsmBorkAOnK2d4Sax5pP27R+za6Ar5x1gpaqjKvCAFiPuYmYk72pdK6XcMCvi6KUdV57ko6zyABpm7mPoLGnontscladnJSSmKBblLdvpsoAmqisw7OkwLWRvbKnv7G+kKfBfp64kqi6AJCepLqvj7++s627yru7t3iUoa+tqsLEywCRn6GfsKtutdG0wM/WxbB+mqV4oceVsc4HHXVkV3+NuQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#7197BD"}],n=e=>{let{index:t,avatar:r}=e;return(0,a.jsx)(i.default,{src:r.src,draggable:!1,priority:!0,quality:50,style:{background:r.color},alt:"avatar ".concat(t),className:"size-9 rounded-full border-2 border-white-400 ".concat(t>0?"-ml-1":""),width:38,height:38})};var A=r(99957);let c=e=>{let{children:t,isOpen:r,onClose:s}=e;return r?(0,a.jsx)("div",{className:(0,A.cn)("flex items-center justify-center","fixed inset-0 z-50","bg-white-100 size-full max-h-full min-h-0 overflow-y-auto overflow-x-hidden p-4"),onClick:s,children:(0,a.jsxs)("div",{className:"glow bg-black-400 relative flex w-full max-w-md flex-col items-center gap-6 rounded-lg px-6 pb-8 pt-6 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("header",{className:"relative flex w-full items-center justify-between"}),(0,a.jsx)("div",{children:t})]})}):null};var o=r(94787),d=r(35878),u=r(62568);let m=e=>{let{isOpen:t,onClose:r}=e;return(0,a.jsx)(c,{isOpen:t,onClose:r,children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{className:"mb-6 text-center text-3xl font-bold",children:u.K7}),(0,a.jsx)("p",{className:"text-center text-lg text-white-400/75",children:u.vk}),(0,a.jsx)("div",{className:"relative my-6 flex items-center justify-center select-none",children:l.map((e,t)=>(0,a.jsx)(n,{index:t,avatar:e},t))}),(0,a.jsxs)(s.A,{className:"my-6 flex items-center justify-center gap-2 rounded-2xl bg-blue-500 px-5 py-1 text-sm",onClick:()=>{let e=d.P.xGetRedirectUrl();window.location.href=e},children:[(0,a.jsx)("p",{className:"text-lg",children:"Login with"}),(0,a.jsx)(i.default,{src:o.Z,alt:"x",className:"w-5"})]})]})})}},64720:function(e,t,r){r.r(t),r.d(t,{SidebarProvider:function(){return l},useSidebar:function(){return n}});var a=r(57348),s=r(15346);let i=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)([]),[n,A]=(0,s.useState)([]),[c,o]=(0,s.useState)([]),[d,u]=(0,s.useState)(!0),[m,g]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[p,b]=(0,s.useState)({}),[x,v]=(0,s.useState)(!1),[w,y]=(0,s.useState)(!1);return(0,a.jsx)(i.Provider,{value:{myDecks:m,setMyDecks:g,following:h,setFollowing:f,isFetchingMyDecks:d,setIsFetchingMyDecks:u,newPostCounts:p,setNewPostCounts:b,topDecks:r,setTopDecks:l,topDecksWeekly:n,setTopDecksWeekly:A,recommendedFollows:c,setRecommendedFollows:o,isSignupModalOpen:x,setIsSignupModalOpen:v,isHovering:w,setIsHovering:y},children:t})},n=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useProfile must be used within SidebarProvider");return e}},82033:function(e,t,r){r.r(t),r.d(t,{UploadProvider:function(){return p},useUpload:function(){return b}});var a=r(57348),s=r(16189),i=r(12465),l=r(15346),n=r(67425);let A=e=>{let{text:t,textButton:r,onClick:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t,r&&s&&(0,a.jsx)(n.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:s,children:r})]})};var c=r(77623),o=r(35971),d=r(64720),u=r(35878),m=r(74859);let g=e=>{let t=new FileReader;return new Promise((r,a)=>{t.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;if(!s){a(Error("Failed to read file"));return}r(new Uint8Array(s))},t.onerror=()=>a(t.error),t.readAsArrayBuffer(e)})};var h=r(81727);let f=(0,l.createContext)({}),p=e=>{let{children:t}=e,r=(0,s.useRouter)(),{openMemeModal:n}=(0,c.T)(),{setIsHovering:p}=(0,d.useSidebar)(),{onUploadMeme:b}=(0,o.useFeed)(),[x,v]=(0,l.useState)([]),[w,y]=(0,l.useState)(),[k,S]=(0,l.useState)(!1),C=(0,l.useCallback)(async e=>{try{(0,i.sy)();let t=e.name.slice(0,20),r=(0,i.yv)("Uploading ".concat(t),{variant:"info",persist:!0});y(r);let s=await g(e),l="",c=await u.P.postMeme({filename:(0,h.Df)(e.name),filetype:e.type,bytes:s});if(!c)throw Error("Failed to upload");l=c.id;let o={...c,votes:{up:[],down:[]}};v(e=>[o,...e]),b(o),(0,i.sy)(w),y(void 0);let d=(0,i.yv)((0,a.jsx)(A,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,i.sy)(d),n(l)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),y(void 0),(0,i.sy)(),(0,i.yv)("Failed to upload some memes",{variant:"error"})}},[w,n,b,v]),j=(0,l.useCallback)(async e=>{try{let t=(0,h.Df)(e),r=t.slice(0,20),s=(0,i.yv)("Uploading ".concat(r),{variant:"info",persist:!0});y(s);let l=await u.P.postMeme({filename:t,filetype:"image",source_url:e});if(!l)throw Error("Failed to paste link");v(e=>[l,...e]),b(l),(0,i.sy)(w),y(void 0);let c=(0,i.yv)((0,a.jsx)(A,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,i.sy)(c),n(l.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,i.yv)("Failed to paste link",{variant:"error"})}},[w,n,b]),D=(0,l.useMemo)(()=>(0,m.k)(C,1e3),[C]),B=(0,l.useCallback)(async e=>{if(void 0===w){if(e.size>33554432){(0,i.yv)("Please upload files 32MB or less",{variant:"error"});return}return D(e)}},[D,w]),z=(0,l.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let r=t[e];if(r.type.includes("image")){let e=r.getAsFile();e&&await B(e)}}}},[B]);(0,l.useEffect)(()=>(window.addEventListener("paste",z),()=>{window.removeEventListener("paste",z)}),[z]);let U=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),p(!1),S(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let r=t[e];r.type.includes("image")&&await B(r)}r.push("/library")}catch(e){console.error(e)}finally{S(!1)}};return(0,a.jsx)(f.Provider,{value:{uploads:x,setUploads:v,startUpload:B,pasteImageLink:j,isBatchUploading:k},children:(0,a.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&p(!0)},onDragLeave:()=>p(!1),onDrop:U,children:t})})},b=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}}}]);