"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{8059:function(e,t,a){a.d(t,{g:function(){return o}});var i=a(62284),n=a(88938),l=a(23405),s=a(59297),r=a(15219);let o=e=>{let{deck:t,size:a="md",onClickOverride:o}=e,[c]=(0,r.gJ)(),[d]=(0,r.A6)(),[u,h]=(0,s.useState)(!1),m=(0,s.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),o){o();return}t.is_following?d(t.id):c(t.id)},[t.id,t.is_following,c,o,d]);return t?(0,i.jsx)(n.A,{variant:t.is_following?"ghost":"solid",color:t.is_following&&u?"danger":"primary",size:a,className:(0,l.cn)("rounded-xl","sm"===a?"!h-[26px] px-1":"",t.is_following&&"sm"===a?"w-[89px]":"",t.is_following&&"md"===a?"w-[106px]":""),disableRipple:!0,onClick:m,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,i.jsx)("div",{className:"flex gap-2 items-center justify-center w-full",children:(0,i.jsx)("h4",{className:"md"===a?"text-base":"text-sm",children:t.is_following?u?"Unfollow":"Following":"Follow"})})}):null}},93684:function(e,t,a){a.d(t,{Z:function(){return n},g:function(){return v}});var i,n,l=a(62284),s=a(46231),r=a(81374),o=a(98314),c=a(68880),d=a(88938),u=a(33548),h=a(12967),m=a(5522),x=a(92449),p=a(66975),f=a(59297),g=a(15219);(i=n||(n={})).Edit="edit",i.Delete="delete";let v=e=>{let{deckId:t,size:a="sm",variant:i="light",itemsToRender:n=["edit","delete"],isLoading:v,isDisabled:b,onEdit:j,onDelete:w}=e,y=(0,x.useRouter)(),[k]=(0,g.ez)(),[N,C]=(0,f.useState)(!1),z=(0,f.useCallback)(()=>{y.push("/deck-edit/".concat(t.replace("deck:",""))),null==j||j()},[y,t,j]),_=(0,f.useCallback)(async e=>{e.stopPropagation(),e.preventDefault();try{C(!0),k(t),null==w||w(),y.push("/home")}catch(e){(0,p.yv)("Failed to delete deck",{variant:"error"})}finally{C(!1)}},[t,k,w,y]);return(0,l.jsxs)(r.F,{"aria-label":"Edit Deck",classNames:{content:"min-w-0 w-auto"},children:[(0,l.jsx)(o.S,{children:N||v?(0,l.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,l.jsx)(c.c,{size:"sm"})}):(0,l.jsx)(d.A,{isIconOnly:!0,size:a,variant:i,isDisabled:b,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.jsx)(s.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,l.jsx)(u.a,{children:(0,l.jsxs)(h.d,{title:"Deck Actions",children:[(0,l.jsx)(m.W,{"aria-label":"Edit",textValue:"Edit",color:"default",startContent:(0,l.jsx)(s.JO,{className:"size-5",icon:"mdi:edit"}),onClick:z,children:"Edit"}),(0,l.jsx)(m.W,{"aria-label":"Delete",textValue:"Delete",color:"danger",startContent:(0,l.jsx)(s.JO,{className:"size-5",icon:"tabler:trash"}),onClick:_,children:"Delete"})]})})]})}},57204:function(e,t,a){a.d(t,{F:function(){return p}});var i=a(62284),n=a(46231),l=a(81374),s=a(98314),r=a(68880),o=a(88938),c=a(33548),d=a(12967),u=a(5522),h=a(59297),m=a(7722),x=a(74651);let p=e=>{let{post:t,isLoading:a,isDisabled:p}=e,{onOpenPost:f}=(0,x.h)(),{deletePost:g,isDeleting:v}=(0,m.Z)(),b=(0,h.useCallback)(()=>f(t.id),[f,t]);return(0,i.jsxs)(l.F,{"aria-label":"Edit Post",classNames:{content:"min-w-0 w-auto"},children:[(0,i.jsx)(s.S,{children:v||a?(0,i.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,i.jsx)(r.c,{size:"sm"})}):(0,i.jsx)(o.A,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:p,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(n.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,i.jsx)(c.a,{children:(0,i.jsxs)(d.d,{title:"Post Actions",children:[(0,i.jsx)(u.W,{"aria-label":"Edit",textValue:"Edit",color:"default",startContent:(0,i.jsx)(n.JO,{className:"size-5",icon:"mdi:edit"}),onClick:b,children:"Edit"}),(0,i.jsx)(u.W,{"aria-label":"Delete",textValue:"Delete",color:"danger",startContent:(0,i.jsx)(n.JO,{className:"size-5",icon:"tabler:trash"}),onClick:()=>g({postId:t.id}),children:"Delete"})]})})]})}},49846:function(e,t,a){a.d(t,{i:function(){return j}});var i=a(62284),n=a(53181),l=a(23405),s=a(8836),r=a(7602),o=a(68880),c=a(63006),d=a(2793),u=a(92449),h=a(59297),m=a(57204),x=a(76971),p=a(37579),f=a(29530),g=a(85908),v=a(25845),b=a(82258);let j=e=>{var t,a,j,w;let{post:y,by:k,isLoading:N,onProfileClick:C}=e,z=(0,u.useRouter)(),{characters:_,aesthetics:S}=(0,g.Z)(),M=(0,h.useMemo)(()=>{if(!y)return null;if(y.image)return y.image.prompt;if(y.meme){var e;return(null===(e=Object.values(y.meme.panels).find(e=>"prompt"in e.panel_config))||void 0===e?void 0:e.panel_config).prompt}},[y]),D=(0,h.useMemo)(()=>_.find(e=>e.id.replace("ai_character:","")===(null==M?void 0:M.character.replace("ai_character:",""))),[_,null==M?void 0:M.character]),T=(0,h.useMemo)(()=>(null==D?void 0:D.id)==="normal",[D]),A=(0,h.useMemo)(()=>S.find(e=>{var t;return e.id.replace("aesthetic:","")===(null==M?void 0:null===(t=M.aesthetic)||void 0===t?void 0:t.replace("aesthetic:",""))}),[S,null==M?void 0:M.aesthetic]),I=(0,h.useMemo)(()=>{var e;return null==y?void 0:null===(e=y.contest)||void 0===e?void 0:e.deck},[null==y?void 0:null===(t=y.contest)||void 0===t?void 0:t.deck]),P=(0,h.useCallback)(e=>{D&&(e.preventDefault(),e.stopPropagation(),z.push((0,b.o4)(D.id)))},[D,z]),W=(0,h.useCallback)(e=>{I&&(e.preventDefault(),e.stopPropagation(),z.push((0,b.o4)(I.id)))},[I,z]),E=(null==y?void 0:y.post_type)==="contest_winner"||(null==y?void 0:y.post_type)==="contest_start";return(0,i.jsxs)("header",{className:"flex w-full items-center gap-2 min-h-8 truncate",children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center gap-0.5 sm:gap-1 md:gap-1.5 text-sm truncate",children:[k&&!E&&(0,i.jsx)(n.z,{classNames:{base:"truncate text-white-400/80 hover:text-white-400/100",name:"max-w-full truncate",wrapper:"truncate"},name:(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)(x.a,{poster:k,children:(0,i.jsx)("span",{className:"hover:underline truncate",children:k.handle})}),k.badge_image_url&&(0,i.jsx)(c.e,{content:"Kinode user",children:(0,i.jsx)(d.default,{src:k.badge_image_url,alt:"badge",className:"rounded-sm z-0",width:14,height:14})})]}),avatarProps:{src:k.avatar,className:"min-w-5 w-5 h-5 text-tiny"},onClick:C}),I&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:(0,l.cn)("flex items-center gap-2 truncate","tap-highlight-transparent outline-none data-[focus-visible=true]:z-10 data-[focus-visible=true]:outline-2 data-[focus-visible=true]:outline-focus data-[focus-visible=true]:outline-offset-2 text-medium text-primary no-underline hover:opacity-80 active:opacity-disabled transition-opacity"),onClick:W,children:[(0,i.jsx)(s.h,{size:"sm",radius:"sm",src:null!==(w=I.cover_photo)&&void 0!==w?w:"",className:(0,l.cn)("max-w-5 max-h-5 rounded-sm",I.has_active_contest?"border-1 border-violet-400":"")}),(0,i.jsx)("span",{className:(0,l.cn)("flex-1 gap-1 justify-center truncate","text-sm font-base hover:underline text-white-400/80 hover:text-white-400/100"),children:I.title})]})}),!N&&y&&(0,i.jsxs)(i.Fragment,{children:[D&&!T&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-stone-700 text-xs",children:"•"}),(0,i.jsx)(f.h,{character:D,className:"pl-1 h-5 gap-1 text-white-400/80 hover:text-white-400/100 select-none",onClick:P})]}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-stone-700 text-xs",children:"•"}),(0,i.jsx)(p.M,{aesthetic:A,className:"pl-1 h-5 gap-1 text-white-400/80 select-none"})]}),(0,i.jsx)("div",{className:"text-stone-700 text-xs",children:"•"}),(0,i.jsx)("div",{className:"text-white-400/40",children:(0,v.Po)(new Date(y.created_at))})]}),((null==y?void 0:null===(a=y.meme)||void 0===a?void 0:a.is_nsfw)||(null==y?void 0:null===(j=y.image)||void 0===j?void 0:j.is_nsfw))&&(0,i.jsx)("div",{className:"flex flex-1 flex-row justify-end items-center gap-1",children:(0,i.jsx)(r.z,{color:"danger",size:"sm",classNames:{content:"text-tiny font-medium",base:"py-0 px-0.5 max-h-4"},children:"NSFW"})})]}),N&&(0,i.jsx)("div",{className:"flex items-center justify-center h-8 w-auto gap-4",children:(0,i.jsx)(o.c,{size:"sm"})}),!N&&y&&y.is_creator&&(0,i.jsx)(m.F,{post:y})]})}},25120:function(e,t,a){a.d(t,{Y:function(){return x}});var i=a(62284),n=a(68880),l=a(6064),s=a(23405),r=a(92449),o=a(59297),c=a(49846),d=a(45780),u=a(31610),h=a(15219),m=a(20102);let x=e=>{let{isInGrid:t=!1}=e,a=(0,r.useRouter)(),{data:x}=(0,h.iS)(),{postId:p,isPosting:f,isGenerating:g,activePanel:v,contest:b}=(0,m.C)(),j=(0,o.useCallback)(e=>{x&&(e.preventDefault(),e.stopPropagation(),a.push("/u/".concat(x.handle)))},[x,a]);return!p&&(g||f)?(0,i.jsx)("article",{className:(0,s.cn)("relative min-w-full max-w-full"),children:(0,i.jsxs)("div",{className:(0,s.cn)("flex flex-col items-start justify-start","min-h-0 min-w-full max-w-full cursor-pointer gap-2 overflow-hidden transition-colors",t?"":"px-3 pb-3 pt-2.5",t?"":"border-b border-white-400/15"),children:[x&&!t&&(0,i.jsx)(c.i,{by:x,isLoading:f,onProfileClick:j}),(0,i.jsxs)("div",{className:(0,s.cn)("aspect-square size-full","flex items-center justify-center max-h-full max-w-full min-h-0","overflow-hidden",t?"rounded-md":"rounded-xl",b&&"active"===b.status?"border border-violet-500":""),children:[v?(0,i.jsx)(u.a,{index:0,hideborder:!0,isInGrid:t}):(0,i.jsx)(n.c,{}),t&&f&&(0,i.jsx)(l.W,{className:"w-full absolute top-0 inset-x-0",size:"sm",color:"warning",classNames:{indicator:b&&"active"===b.status?"bg-violet-500":"bg-orange-400"},isIndeterminate:!0,"aria-label":"Loading..."})]}),!t&&(0,i.jsx)("footer",{className:"flex w-full flex-row items-center gap-2",children:(0,i.jsx)(d.I,{postId:"",user:{id:""},deckPageId:"feed",readOnly:!0,postVoteApi:()=>null,deleteVoteApi:()=>null})})]})}):null}},60719:function(e,t,a){a.d(t,{m:function(){return m}});var i=a(62284),n=a(46231),l=a(88938),s=a(65615),r=a(9067),o=a(15382),c=a(98335),d=a(79083),u=a(35850),h=a(59297);let m=e=>{let{className:t="",onClick:a}=e,[m,x]=(0,h.useState)(!1);return(0,i.jsxs)("div",{className:t,children:[(0,i.jsx)(l.A,{variant:"flat",size:"sm",startContent:(0,i.jsx)(n.JO,{icon:"ic:baseline-lightbulb"}),onClick:()=>{x(!0),null==a||a()},children:(0,i.jsx)("h4",{children:"Learn to Throw a Contest"})}),(0,i.jsx)(s.R,{size:"xl",isOpen:m,onOpenChange:x,children:(0,i.jsxs)(r.A,{children:[(0,i.jsxs)(o.k,{className:"flex gap-2 items-center",children:[(0,i.jsx)(n.JO,{icon:"ic:baseline-lightbulb",className:"size-5"}),(0,i.jsx)("h1",{children:"Learn to Throw a Contest"})]}),(0,i.jsxs)(c.I,{children:[(0,i.jsx)("iframe",{className:"w-full",style:{aspectRatio:560/315},src:"https://www.youtube.com/embed/eeEHuW3iaQY?si=xwo3yYYzMaBfnFk9",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}),(0,i.jsx)("p",{className:"text-white-400/75",children:"A contest is a way to put your community to the test. Put up a prize, set a duration, and let the memes flow."})]}),(0,i.jsx)(d.R,{children:(0,i.jsx)(l.A,{as:u.default,href:"/blog/how-to-throw-a-contest",color:"primary",variant:"flat",endContent:(0,i.jsx)(n.JO,{icon:"mdi:arrow-right"}),children:"Read more"})})]})})]})}},14903:function(e,t,a){a.d(t,{T:function(){return s}});var i=a(62284),n=a(88938),l=a(2793);let s=e=>{let{src:t,onClickShow:a}=e;return(0,i.jsxs)("div",{className:"absolute inset-0 bg-black/50 z-2 bg-white-400/10",onClick:e=>{e.stopPropagation(),e.preventDefault()},onMouseEnter:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,i.jsx)(l.default,{src:t,alt:"NSFW",draggable:!1,className:"absolute z-0 inset-0 size-full object-cover blur-xl scale-[3]",width:640,height:640,sizes:"640px",quality:1,priority:!0}),(0,i.jsx)(n.A,{variant:"ghost",color:"danger",size:"sm",className:"p-1 font-medium z-3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 backdrop-blur-sm",onClick:a,children:"Show"})]})}},344:function(e,t,a){a.d(t,{y:function(){return c}});var i=a(62284),n=a(65615),l=a(9067),s=a(15382),r=a(7602),o=a(98335);let c=e=>{let{title:t,count:a,body:c,isOpen:d,onClose:u}=e;return(0,i.jsx)(n.R,{isOpen:d,onOpenChange:u,children:(0,i.jsxs)(l.A,{className:"pb-4",children:[(0,i.jsxs)(s.k,{className:"flex items-center gap-3 px-6",children:[(0,i.jsx)("h3",{children:t}),a?(0,i.jsx)(r.z,{size:"sm",variant:"flat",children:(0,i.jsx)("span",{className:"font-medium",children:a})}):(0,i.jsx)("div",{})]}),(0,i.jsx)(o.I,{className:"max-h-96 overflow-y-auto px-2 py-0",children:c})]})})}},26649:function(e,t,a){a.d(t,{A:function(){return c}});var i=a(62284),n=a(27217),l=a(8836),s=a(23405),r=a(35850),o=a(49804);let c=e=>{let{posters:t,isLoading:a,limit:c,isHorizontal:d}=e;return a?d?(0,i.jsx)("div",{className:"min-w-full w-full max-w-full px-3 py-1 flex justify-start",children:[1,2,3,5,6,7].map(e=>(0,i.jsx)("div",{className:(0,s.cn)("size-10 rounded-full bg-[#1A1A1A] border-2 border-black-0",e>1&&"-ml-3")},"skeleton-avatar-".concat(e)))}):(0,i.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3].map(e=>(0,i.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,i.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,i.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,i.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):0===t.length?(0,i.jsx)("p",{className:"px-4 text-sm text-white-400/50 leading-normal line-clamp-3",children:"No posters yet"}):d?(0,i.jsx)("div",{className:"w-full pl-5 pr-4 py-1",children:(0,i.jsx)(n._,{max:c,children:t.slice(0,c).map(e=>(0,i.jsx)(r.default,{href:"/u/".concat(e.handle),"aria-label":"View @".concat(e.handle,"'s profile"),className:"hover:bg-white-400/10 rounded-md",children:(0,i.jsx)(l.h,{src:e.avatar,name:e.name,size:"md",className:"border-2 border-black-0"},e.handle)},e.handle))})}):(0,i.jsx)("div",{className:"flex flex-col gap-1",children:t.slice(0,c).map(e=>(0,i.jsx)(r.default,{href:"/u/".concat(e.handle),"aria-label":"View @".concat(e.handle,"'s profile"),className:"hover:bg-white-400/10 rounded-md",children:(0,i.jsx)(o.W,{poster:e})},e.handle))})}},37579:function(e,t,a){a.d(t,{M:function(){return l}});var i=a(62284),n=a(7602);let l=e=>{let{aesthetic:t,className:a="select-none"}=e;return(0,i.jsx)(n.z,{size:"sm",radius:"sm",variant:"flat",classNames:{base:a,content:"xs:px-0"},children:t.name},t.id)}},29530:function(e,t,a){a.d(t,{h:function(){return s}});var i=a(62284),n=a(7602),l=a(2793);let s=e=>{var t;let{character:a,className:s="gap-1 pl-2",onClick:r}=e;return(0,i.jsx)(n.z,{size:"sm",radius:"sm",className:s,variant:"flat",startContent:(0,i.jsx)(l.default,{className:"size-4 min-w-4 rounded-sm bg-white-400/10",width:16,height:16,alt:a.name,src:null!==(t=a.thumbnail)&&void 0!==t?t:""}),classNames:{content:"xs:px-0"},onClick:r,children:a.name})}},90241:function(e,t,a){a.d(t,{g:function(){return o}});var i=a(62284),n=a(23405),l=a(2793),s=a(59297),r=a(17179);let o=e=>{let{type:t,src:a,topText:o,bottomText:c,centerText:d,id:u="image-canvas",imageWidth:h=1152,imageHeight:m=1152,canvasWidth:x=1152,canvasHeight:p=1152,alt:f="Generated Image",progress:g=100,className:v=""}=e,b=(0,s.useRef)(new Image),j=(0,s.useRef)(null),w=(0,s.useMemo)(()=>g&&g<100&&g>0,[g]);return(0,s.useEffect)(()=>{let e=b.current,i=j.current;if(i){if(a||d)"image"===t||"faceswap"===t?(e.onload=()=>{(0,r.el)({image:e,canvas:i,topText:o,bottomText:c,centerText:null,canvasWidth:x,canvasHeight:p,imageWidth:h,imageHeight:m})},e.height=m,e.width=h,e.src=a):"text"===t&&(e.height=m,e.width=h,(0,r.el)({image:e,canvas:i,topText:null,bottomText:null,centerText:d,canvasWidth:x,canvasHeight:p,imageWidth:h,imageHeight:m}));else{(0,r.el)({image:e,canvas:i,topText:null,bottomText:null,centerText:null,canvasWidth:1152,canvasHeight:1152,imageWidth:1152,imageHeight:1152});return}}},[c,p,x,d,m,h,a,o,t]),(0,i.jsx)("div",{id:u,className:"size-full transition-all flex items-center justify-center",children:w?(0,i.jsx)(l.default,{draggable:!1,priority:!0,src:a,alt:f,style:{borderRadius:"0px",filter:g<100?"blur(".concat(70/g,"px)"):"none",transition:"filter 0.5s"},className:(0,n.cn)("transition-all object-cover","w-[".concat(h,"px] h-[").concat(m,"px]"),v),width:h,height:m}):(0,i.jsx)("canvas",{ref:j,className:(0,n.cn)("size-full object-cover",v)})})}},31610:function(e,t,a){a.d(t,{a:function(){return p}});var i=a(62284),n=a(35324),l=a(23405),s=a(77618),r=a(90241),o=a(46902),c=a(64392),d=a(2846),u=a(20102);let h={[d.By.WAITING]:"Waiting in queue...",[d.By.STARTED]:"Running...",[d.By.COMPLETED]:"Completed"},m=e=>{let{index:t,isInGrid:a=!1}=e,{activeJobStatus:n,panels:r,contest:d}=(0,u.C)(),m=r[t];if(!m)return null;let{src:x}=m.local;return(0,i.jsx)(s.E.div,{className:(0,l.cn)("absolute w-full flex items-center justify-center",a?"bottom-5":"bottom-10"),initial:{opacity:0,scale:.85},animate:{opacity:x?0:1,scale:x?.9:1,transition:{duration:.3}},exit:{opacity:0,scale:.9},children:(0,i.jsx)(o.w,{shadow:"none",className:(0,l.cn)("w-48 h-12 mx-3 p-2","text-sm flex flex-row justify-center items-center gap-2 rounded-xl border-2",d&&"active"===d.status?"border-violet-400":"border-orange-400"),children:(0,i.jsx)(c.M,{mode:"wait",children:(0,i.jsx)(s.E.h2,{className:(0,l.cn)("truncate select-none",d&&"active"===d.status?"text-violet-400":"text-orange-400"),initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:h[n]},n)})})})};var x=a(30778);let p=e=>{var t;let{index:a,hideborder:o=!1,isInGrid:c=!1}=e,{activePanelIdx:d,panels:h,selectedLayout:p,paneDimensions:f,contest:g,onClickPane:v}=(0,u.C)(),b=h[a],j=d===a;if(!b)return null;let{src:w,progress:y,isGenerating:k}=b.local,N=b.panel_config.image,{top_text:C,bottom_text:z}=null!==(t=b.panel_config.text_overlay)&&void 0!==t?t:{},_=x.WN[p];return(0,i.jsxs)("div",{style:{aspectRatio:f.paneWidth/f.paneHeight},className:(0,l.cn)(_,"relative flex-1 overflow-hidden mx-auto my-0 bg-black-400",o?"border-none":"border-3",j?g&&"active"===g.status?"border-violet-400":"border-orange-400":"border-transparent"),onClick:()=>v(a),children:[k&&!w&&(0,i.jsx)(s.E.div,{className:"size-full flex items-center justify-center backdrop-blur-lg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,i.jsx)(n.X,{className:"size-full opacity-50"})}),k&&(0,i.jsx)(m,{index:a,isInGrid:c}),(0,i.jsx)(s.E.div,{className:"size-full max-h-full flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},children:(0,i.jsx)(r.g,{type:b.panel_type,src:w||N.source_url,topText:null!=C?C:"",progress:k?y:100,bottomText:null!=z?z:"",centerText:b.panel_config.text,imageWidth:N.width,imageHeight:N.height,canvasWidth:f.paneWidth,canvasHeight:f.paneHeight},w)})]})}},62486:function(e,t,a){a.d(t,{Z:function(){return r}});var i=a(62284),n=a(59297),l=a(95279),s=a(20102);let r=e=>{var t;let{lockedAestheticId:a="",isMobile:r=!1,isMiniStudio:o=!1}=e,{activePanel:c,activePanelIdx:d,dispatchPanelAction:u}=(0,s.C)(),h=(0,n.useMemo)(()=>{var e,t;return a||(null!==(t=null==c?void 0:null===(e=c.panel_config.prompt)||void 0===e?void 0:e.aesthetic)&&void 0!==t?t:"")},[null==c?void 0:null===(t=c.panel_config.prompt)||void 0===t?void 0:t.aesthetic,a]),m=(0,n.useCallback)(e=>{var t,a;u({idx:d,action:"update-panel",panel_config:{prompt:{aesthetic:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null}}}),localStorage.setItem("selectedAesthetic",null!==(a=null==e?void 0:e.id)&&void 0!==a?a:"")},[d,u]);return(0,i.jsx)(l.d,{aestheticId:h,onSelect:m,isMobile:r,isSmall:o,hideDescription:o,isDisabled:!!a||!c})}},96260:function(e,t,a){a.d(t,{U:function(){return r}});var i=a(62284),n=a(59297),l=a(25854),s=a(20102);let r=e=>{var t,a;let{lockedCharacterId:r="",isMiniStudio:o=!1}=e,{activePanel:c,activePanelIdx:d,dispatchPanelAction:u}=(0,s.C)(),h=(0,n.useCallback)(e=>{e&&(u({idx:d,action:"update-panel",panel_config:{prompt:{character:e.id}}}),localStorage.setItem("selectedCharacter",e.id))},[d,u]);return(0,i.jsx)(l.z,{characterId:null!==(a=r||(null==c?void 0:null===(t=c.panel_config.prompt)||void 0===t?void 0:t.character))&&void 0!==a?a:"",onSelect:h,showClearButton:!1,isMiniStudio:o,isDisabled:!!r||!c})}},1353:function(e,t,a){a.d(t,{j:function(){return p}});var i=a(62284),n=a(46231),l=a(44443),s=a(88938),r=a(59297),o=a(12688);let c=()=>(0,i.jsxs)("span",{className:"absolute bottom-0.5 text-white-400/35 text-[9px] truncate",children:[(0,i.jsxs)("span",{className:"hidden sm:flex items-center",children:["Pssst. Use"," ",(0,i.jsx)(o.C,{keys:["tab"],className:"bg-transparent opacity-50"})," and"," ",(0,i.jsx)(o.C,{keys:["up","down"],className:"bg-transparent opacity-50"})," ","keys to autocomplete."]}),(0,i.jsxs)("span",{className:"flex sm:hidden items-center gap-1",children:[(0,i.jsx)(n.JO,{icon:"carbon:touch-1-filled",className:"text-white-400/40 size-3"}),"Swipe left for prompt suggestion, swipe right to autocomplete."]})]}),d=["actor","alien","archaeologist","artist","athlete","astronaut","Batman","biologist","Captain America","chef","chemist","cowboy","Darth Vader in Star Wars","detective","doctor","engineer","firefighter","ghost","Harry Potter","historian","homeless person","Indiana Jones","Ironman","James Bond 007","journalist","John Wick","Martial Artist","mathematician","millionaire","Morphius in The Matrix","model in a fashion show","musician","navy seal","ninja","nurse","paramedic","Patrick Bateman in American Psycho","philosopher","physicist","pilot","pirate","police officer","politician","psychologist","robot","Rock Star","samurai","scientist","Sherlock Holmes","Shrek","Spiderman","spy","student","Superman","superhero","supervillain","teacher","The Hulk","The Joker","The Terminator","Thor","Tony Montana in Scarface","Vampire","Vito Corleone in The Godfather","Viking","werewolf","Winny the Pooh","Wolverine","writer","Yoda","zombie"],u=["boxing","computer hacking","cooking a gourmet meal","dancing ballet","hip-hop dancing","defusing a bomb","fighting fires","flying a plane","meditating","navigating treacherous terrain","performing surgery","playing chess","playing guitar","running a marathon","singing","solving a mystery","working out in the gym","writing a novel"],h=["top-tier Michelin restaurant","abandoned warehouse","ancient temple","arid desert","burning building","corporate office","deep canyon","dense forest","flooded area","haunted house","library","medieval castle","outer space","remote island","snowy mountain range","space station","stormy sea","urban cityscape"],m=["in a state of confusion","in a state of panic","in a state of rage","in a state of zen","in euphoria","in the dead of night","laughing uncontrollably","crying uncontrollably","under extreme pressure","wearing a blindfold","wearing a suit and tie","wearing a suit of armor","while being cheered on by a crowd","while being pursued by wild animals","while multitasking","in the middle of a hurricane"];var x=a(20102);let p=e=>{var t;let{keywords:a,contestPrompt:o,...p}=e,{activePanel:f,activePanelIdx:g,isGenerateDisabled:v,promptValue:b,isPromptEmpty:j,onChangePromptValue:w,onClickGenerate:y}=(0,x.C)(),{suggestion:k,onKeyDown:N,nextPrompt:C,autocomplete:z}=function(e,t,a,i){let[n,l]=(0,r.useState)(0),s=(0,r.useMemo)(()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=[];for(let a=0;a<e;a++){let e=Math.floor(Math.random()*d.length),a=d[e],i=Math.floor(Math.random()*u.length),n=u[i],l=Math.floor(Math.random()*h.length),s=h[l],r="aeiou".includes(s[0].toLowerCase())?"an":"a",o=Math.random()>.5,c="As ".concat(a," ").concat(n," in ").concat(r," ").concat(s);if(o){let e=Math.floor(Math.random()*m.length),t=m[e];c+=" ".concat(t)}t.push(c)}return t})(),[]),o=(0,r.useMemo)(()=>s[n],[s,n]),c=(0,r.useCallback)(()=>{l((n+1)%s.length)},[n,s.length]),x=(0,r.useCallback)(()=>{l((n-1+s.length)%s.length)},[n,s.length]),p=(0,r.useCallback)(()=>{t(null!=i?i:s[n])},[i,t,n,s]);return{suggestion:o,onKeyDown:(0,r.useCallback)(t=>{let i=""===e.trim();"Enter"!==t.key||t.shiftKey?"Tab"===t.key&&i?(t.preventDefault(),p()):"ArrowUp"===t.key&&i?(t.preventDefault(),x()):"ArrowDown"===t.key&&i&&(t.preventDefault(),c()):(t.preventDefault(),i?p():a())},[p,a,c,x,e]),nextPrompt:c,autocomplete:p}}(b,w,(0,r.useCallback)(()=>{f&&!v&&y(g,f)},[f,g,v,y]),a),{onTouchStart:_,onTouchMove:S,onTouchEnd:M}=function(e){let{onSwipeLeft:t,onSwipeRight:a}=e,[i,n]=(0,r.useState)(null),[l,s]=(0,r.useState)(null);return{onTouchStart:(0,r.useCallback)(e=>{s(null),n(e.targetTouches[0].clientX)},[]),onTouchMove:(0,r.useCallback)(e=>s(e.targetTouches[0].clientX),[]),onTouchEnd:(0,r.useCallback)(()=>{if(!i||!l)return;let e=i-l;e>50?null==t||t():e<-50&&(null==a||a())},[t,a,l,i])}}({onSwipeLeft:j?C:null,onSwipeRight:j?z:null});return(0,i.jsx)(l.Y,{"aria-label":"Prompt",fullWidth:!0,isMultiline:!0,isRequired:!0,endContent:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A,{isIconOnly:!0,isDisabled:j,style:{display:b?"flex":"none"},size:"sm",radius:"full",variant:"light",className:"absolute top-px right-px",onClick:()=>w(""),children:(0,i.jsx)(n.JO,{icon:"ic:baseline-clear",width:16,className:"text-white-400"})}),a?null:(0,i.jsx)(c,{})]}),placeholder:null!==(t=null!=o?o:a)&&void 0!==t?t:k,value:b,onValueChange:w,onKeyDown:N,onTouchStart:_,onTouchMove:S,onTouchEnd:M,...p})}},85248:function(e,t,a){a.d(t,{MiniStudio:function(){return b}});var i=a(62284),n=a(46231),l=a(88938),s=a(63006),r=a(23405),o=a(59297),c=a(62486),d=a(96260),u=a(1353),h=a(91250),m=a(20520),x=a(15219),p=a(20102);let f=e=>{var t,a,f,g;let v;let{deckId:b,rules:j}=e,{contest:w,activePanel:y,activePanelIdx:k,promptValue:N,isGenerateDisabled:C,onClickGenerate:z}=(0,p.C)(),_=(0,o.useCallback)(()=>{y&&!C&&z(k,y)},[y,k,C,z,w]),{currentData:S}=(0,x.TJ)(b),M=(0,m.Z)()(b,S),{isActive:D}=(0,h.Y)(M),T=(0,o.useMemo)(()=>null==j||!j.keywords||j.keywords.split(",").map(e=>e.trim().toLowerCase()).some(e=>N.toLowerCase().includes(e)),[N,null==j?void 0:j.keywords]);return w&&(v="Contest: ".concat(null!==(f=w.description)&&void 0!==f?f:w.title)),(0,i.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-2 p-3","feed"===b?"border-b border-b-white-400/15":""),children:[y?(0,i.jsx)(u.j,{size:"lg",contestPrompt:v,classNames:{input:"min-h-full max-h-full placeholder:text-white-400/40",inputWrapper:"pb-6 bg-black-300 rounded-xl overflow-hidden"},keywords:null!==(g=null==j?void 0:j.keywords)&&void 0!==g?g:void 0},"mini-studio-prompt"):(0,i.jsx)("div",{className:"w-full h-24 bg-black-300 rounded-xl"}),(0,i.jsxs)("div",{className:"flex gap-2 justify-between min-h-8 max-h-8",children:[(0,i.jsxs)("div",{className:"flex flex-1 gap-1 sm:max-w-[70%] lg:max-w-[50%] truncate",children:[(0,i.jsx)(d.U,{isMiniStudio:!0,lockedCharacterId:null==j?void 0:null===(t=j.characters)||void 0===t?void 0:t[0]}),(0,i.jsx)(c.Z,{isMiniStudio:!0,lockedAestheticId:null==j?void 0:null===(a=j.styles)||void 0===a?void 0:a[0]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(s.e,{content:"Advanced",children:(0,i.jsx)(l.A,{isIconOnly:!0,as:"a",href:"/studio",size:"sm",color:"default",variant:"flat",children:(0,i.jsx)(n.JO,{icon:"material-symbols-light:settings",className:"size-5 text-white-400/75"})})}),(0,i.jsx)(s.e,{content:T?"":"Missing keyword: ".concat(null==j?void 0:j.keywords),children:(0,i.jsx)(l.A,{size:"sm",color:D?"secondary":"primary",className:D?"bg-violet-500":"",isDisabled:C||!y||!T,onClick:_,children:(0,i.jsx)("h4",{children:"Generate"})})})]})]})]})};var g=a(85908),v=a(99555);let b=e=>{let{deckId:t,rules:a,contest:n,children:l}=e,{me:s,config:r}=(0,g.Z)(),{socket:o}=(0,v.s)({showToast:!1});return o&&s&&r&&window.localStorage?(0,i.jsxs)(p.L,{socket:o,history:[],deckPageId:t,deckPageRules:a,isMiniStudio:!0,profile:s,contest:n,queryParams:{memeId:void 0,remixMemeId:void 0,characterId:void 0,aestheticId:void 0,contestId:void 0},children:[(0,i.jsx)(f,{deckId:t,rules:a}),l]}):(0,i.jsx)("div",{className:"w-full h-[161px] p-3 border-b border-b-white-400/10",children:(0,i.jsx)("div",{className:"w-full h-24 bg-white-400/5 rounded-xl"})})}},48108:function(e,t,a){a.d(t,{S:function(){return l}});var i=a(17229),n=a(59297);function l(e){let t=(0,i.a)({dateStyle:"medium",timeStyle:null==e?void 0:e.timeStyle});return{getDateRange:(0,n.useCallback)(e=>t.formatRange(e.start.toDate(),e.end.toDate()),[t])}}},20520:function(e,t,a){a.d(t,{Z:function(){return n}});var i=a(59297);function n(){return(0,i.useCallback)((e,t)=>{if(!t||0===t.length)return;let a=t.find(t=>"active"===t.status&&t.deck_id.replace("deck:","")===e.replace("deck:",""));if(a)return a;let i=t.find(t=>"upcoming"===t.status&&t.deck_id.replace("deck:","")===e.replace("deck:",""));if(i)return i},[])}},99555:function(e,t,a){a.d(t,{s:function(){return m}});var i=a(62284),n=a(68880),l=a(66975),s=a(59297),r=a(71987);let o=()=>r.cm?"wss://staging-generation-api.memedeck.xyz/v2/ws":r.BB||r.j7?"wss://studio.api.memedeck.xyz/v2/ws":"ws://127.0.0.1:8079/v2/ws";var c=a(15219),d=a(81255);let u=()=>(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(n.c,{size:"sm",color:"white"}),"Connecting to server"]}),h=(0,d.D)(()=>{(0,l.yv)((0,i.jsx)(u,{}),{key:"reconnect",variant:"warning",hideIconVariant:!0,preventDuplicate:!0,persist:!0})},1e3),m=e=>{let{showToast:t=!1}=e,{data:a}=(0,c.iS)(),[i,n]=(0,s.useState)(null),r=(0,s.useRef)(!1),d=(0,s.useCallback)(()=>{if(!a)return;let e=new WebSocket("".concat(o(),"/").concat(a.id));return e.onopen=()=>{(0,l.sy)()},e.onclose=()=>{!0!==r.current&&(setTimeout(()=>{d()},2e3),t&&h())},n(e),e},[a,t]);return(0,s.useEffect)(()=>{let e=d();return r.current=!1,()=>{e&&e.close(),r.current=!0,(0,l.sy)()}},[d]),{socket:i}}},96934:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},23628:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/winner.7c11c905.svg",height:33,width:33,blurWidth:0,blurHeight:0}}}]);