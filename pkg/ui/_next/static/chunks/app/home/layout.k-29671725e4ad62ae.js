(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2032,5073,3108],{89165:function(e,t,s){Promise.resolve().then(s.bind(s,11525)),Promise.resolve().then(s.bind(s,23770)),Promise.resolve().then(s.bind(s,48710)),Promise.resolve().then(s.bind(s,83129)),Promise.resolve().then(s.bind(s,13108)),Promise.resolve().then(s.bind(s,95967)),Promise.resolve().then(s.bind(s,78778)),Promise.resolve().then(s.bind(s,91881)),Promise.resolve().then(s.bind(s,74148)),Promise.resolve().then(s.bind(s,93268)),Promise.resolve().then(s.bind(s,91711)),Promise.resolve().then(s.bind(s,22252)),Promise.resolve().then(s.bind(s,98935)),Promise.resolve().then(s.bind(s,76070)),Promise.resolve().then(s.bind(s,58929)),Promise.resolve().then(s.bind(s,18867)),Promise.resolve().then(s.bind(s,95503)),Promise.resolve().then(s.bind(s,23359)),Promise.resolve().then(s.bind(s,31031)),Promise.resolve().then(s.bind(s,20664)),Promise.resolve().then(s.bind(s,2436)),Promise.resolve().then(s.bind(s,28320)),Promise.resolve().then(s.bind(s,79011)),Promise.resolve().then(s.bind(s,93355)),Promise.resolve().then(s.bind(s,73526)),Promise.resolve().then(s.bind(s,83422)),Promise.resolve().then(s.bind(s,46983)),Promise.resolve().then(s.bind(s,46309)),Promise.resolve().then(s.bind(s,71545)),Promise.resolve().then(s.bind(s,3664)),Promise.resolve().then(s.bind(s,90258)),Promise.resolve().then(s.bind(s,88315)),Promise.resolve().then(s.bind(s,18595)),Promise.resolve().then(s.bind(s,75049)),Promise.resolve().then(s.bind(s,68918)),Promise.resolve().then(s.bind(s,40607)),Promise.resolve().then(s.bind(s,3826)),Promise.resolve().then(s.bind(s,81380)),Promise.resolve().then(s.bind(s,64518)),Promise.resolve().then(s.bind(s,952)),Promise.resolve().then(s.bind(s,58804)),Promise.resolve().then(s.bind(s,87088)),Promise.resolve().then(s.bind(s,83062)),Promise.resolve().then(s.bind(s,17748)),Promise.resolve().then(s.t.bind(s,41269,23))},29492:function(e,t,s){"use strict";s.d(t,{Ud:function(){return h},hd:function(){return d},Ew:function(){return u},QB:function(){return m}});var r=s(57348),l=s(52053),i=s(45155),a=s(13881),n={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo.a86b8f2b.svg",height:256,width:256,blurWidth:0,blurHeight:0},o=s(21008),c=s(62568);let d=()=>(0,r.jsx)("div",{className:"flex h-16 select-none items-center justify-center lg:px-2 lg:text-left",children:(0,r.jsxs)(a.default,{href:"/home",children:[(0,r.jsxs)("div",{className:"hidden gap-1 items-center lg:flex",children:[(0,r.jsx)(m,{}),(0,r.jsx)(h,{})]}),(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)(u,{})})]})}),u=()=>(0,r.jsx)(i.default,{src:n,alt:"".concat(c.jG," Icon"),"aria-label":"".concat(c.jG," - ").concat(c.vk),className:"h-10 min-w-10 w-full select-none"}),m=e=>{let{className:t="h-12 w-auto"}=e;return(0,r.jsx)(i.default,{priority:!0,src:o.Z,alt:"".concat(c.jG," Logo"),"aria-label":"".concat(c.jG," - ").concat(c.vk),className:t,draggable:!1})},h=()=>(0,r.jsx)(l.z,{size:"sm",color:"warning",classNames:{base:"mb-0.5 text-yellow-400 bg-yellow-50 border-1 border-yellow-400/10"},children:"Alpha"})},13343:function(e,t,s){"use strict";s.d(t,{E:function(){return a}});var r=s(57348),l=s(81015),i=s(54167);let a=e=>{let{children:t,...s}=e;return i.BB||i.cm?(0,r.jsx)(l.e,{...s,children:t}):(0,r.jsx)(r.Fragment,{children:t})}},83129:function(e,t,s){"use strict";s.r(t),s.d(t,{NewFeatures:function(){return d}});var r=s(57348),l=s(53350),i=s(92378),a=s(67425),n=s(71583),o=s(15346),c=s(35878);let d=()=>{let[e,t]=(0,o.useState)();if((0,o.useEffect)(()=>{c.P.getProductUpdates().then(e=>t(e))},[]),!e)return null;let s=new Date(e.date_formatted),d="".concat(s.getMonth()+1,"/").concat(s.getDate(),"/").concat(s.getFullYear());return e&&(0,r.jsxs)(i.w,{className:"border-white-400/5 w-full rounded-lg border pb-4 p-2 bg-[url('https://nextuipro.nyc3.cdn.digitaloceanspaces.com/components-images/abstract-dark-bg4.jpg')] bg-right-bottom",shadow:"sm",children:[(0,r.jsx)(a.A,{isIconOnly:!0,className:"absolute right-2 top-2 z-20",radius:"full",size:"sm",variant:"light",onClick:()=>{c.P.dismissProductUpdate(e.id),t(void 0)},children:(0,r.jsx)(l.JO,{className:"text-default-400",icon:"iconamoon:close-thin",width:24})}),(0,r.jsxs)(n.G,{className:"px-3 pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,r.jsx)(l.JO,{icon:"ic:sharp-tips-and-updates",className:"size-7 my-2"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("p",{className:"text-small text-default-500/50",children:d}),(0,r.jsx)("h2",{className:"text-lg font-black",children:(null==e?void 0:e.title)||"Product Updates"})]})]}),(0,r.jsx)("ul",{className:"mt-3",children:Object.entries(null==e?void 0:e.details).sort((e,t)=>e[0]-t[0]).map(e=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.JO,{icon:"ic:sharp-check-circle",className:"size-4"}),(0,r.jsx)("p",{className:"text-small text-default-500",children:e[1]})]},"product-update-feature"+e[0].toString()))})]})]})}},13108:function(e,t,s){"use strict";s.r(t),s.d(t,{Page:function(){return f}});var r=s(57348),l=s(16189),i=s(15346),a=s(71402),n=s(35878),o=s(4930),c=s(45155),d=s(82033),u={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0};let m=()=>{let{isBatchUploading:e}=(0,d.useUpload)();return(0,r.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,r.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,r.jsx)(o.c,{}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,r.jsx)(c.default,{src:u,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,r.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})};var h=s(52428);let f=e=>{let{children:t,isGated:s=!0,border:o="xs:border-0 sm:border-x border-white-400/15"}=e,c=(0,l.useRouter)(),[d,u]=(0,i.useState)(!0),{profile:f,setProfile:x,isHovering:g,isPostingMemes:v}=(0,a.useProfile)();return((0,i.useEffect)(()=>{f||(u(!0),n.P.getMe().then(x).catch(console.error).finally(()=>u(!1)))},[s,f,c,x]),f||d||!s)?(0,r.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(o),children:g&&!v?(0,r.jsx)(m,{}):t}):(0,r.jsx)(h.c,{isOpen:!0})}},15800:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});var r=s(57348),l=s(45155),i=s(13343),a=s(80951);let n=e=>{let{avatarSrc:t,badgeSrc:s,screenName:n,userHandle:o,p:c="px-4 py-2"}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none ".concat(c),children:[(0,r.jsx)("div",{className:"bg-black-400 size-10 rounded-full",children:(0,r.jsx)(a.R,{className:"rounded-full",src:t,alt:o,width:40,height:40})}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2 truncate",children:[(0,r.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:n}),s&&(0,r.jsx)(i.E,{content:"Kinode user",children:(0,r.jsx)(l.default,{src:s,alt:o,className:"rounded-sm",width:14,height:14})})]}),(0,r.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",o]})]})]})}},52428:function(e,t,s){"use strict";s.d(t,{c:function(){return h}});var r=s(57348),l=s(67425),i=s(45155),a=s(94787),n=s(35878),o=s(62568),c=s(15667);let d=e=>{let{title:t,children:s,isOpen:l,glow:a=!0,z:n="z-40",hideOnCloseButton:o=!1,onClose:d}=e;return l?(0,r.jsx)("div",{className:"bg-white-100 fixed inset-0 flex size-full max-h-full min-h-0 items-center justify-center overflow-y-auto overflow-x-hidden p-4 ".concat(n),onClick:d,children:(0,r.jsxs)("div",{className:"".concat(a?"glow":""," bg-black-400 relative flex w-full max-w-md flex-col items-center gap-6 rounded-lg px-6 pb-8 pt-6 shadow-lg"),onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("header",{className:"relative flex w-full items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:t}),d&&!o&&(0,r.jsx)("button",{onClick:d,className:"absolute right-0 translate-x-1/4 p-2",children:(0,r.jsx)(i.default,{src:c.Z,alt:"close",className:"w-3"})})]}),(0,r.jsx)("div",{children:s})]})}):null},u=[{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/1.8823d877.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAzklEQVR42mPQF9DS4NXgZ5bTVvVV1vRnYOBW41TVF9Bm0OXTchc3mGuac8J75rmkFXsz50RKWBoCJWTZVHI03HcYlmwzqdrn1n4qfnqnZbQ5txaDLr+WtZBeolJAvEFSjmtpTWhFqJyFHo8mg4GQriqnrJWUbbxJZp5XeWF4tSyjrL6gNoMWp5y5qKWjvJe3YVyKR0mQdaQGg6y+kA6Du352pHl5lElOsFV0SlBBsH28GoMMSCLZryfbrzPTu7kgpqUooSsnvNVBz12DQQ4Aeio0BOyoKu8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#2E102A"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/2.185f5c03.png",height:1198,width:1162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA0UlEQVR42mNwiEywCgovzczfOKtvYV97dkY9g1ONqmctg3tSYkxsWKCl7Zym8q0zOqfWVYm51ih61DIEZ5a7hacGmVtH2Ntvas5tiYrR8ayRcq9lMAioZ7AsdNXTs1c3PdRdvLO5msGmSsWzhkHJo0reu8HNMro9NuTYhIqV1fkMLhUqXg0MCu61Mh4NGrbJOT6eDZEhiU72dg4+Xr6ZDM6xJTy6fgxikoY6Zml2tgaaxppqRs6edgyuMZ4KxsoMoopaZq6uLoGaino6lkYWvjYAC7g+Dfv8P9kAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#21487D"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/3.43776601.png",height:880,width:880,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AE1OTiciHykjGBcNBQAAAAAAAF5mbpGjuwA5NSg1LiMTAABMSDqOi3SDgGsJAAA+REwACgAABwAARUAwvbqb2te0z8yrjYpzAAAAAHNwW1xYS4OBbtXTrtTRrqKhiJKQe7SykwDY1a/Qzautq5DV063RzarJxqbHxKPT0KoAb2tWt7SU1tKq0c6nzcqnzMemwLqXY2JOABoPDQAAAJaQfM7Hq7y2lsW+qG1nWiklKwB/dWSqopfQx8HVy8PMwrbXzcbRyMCon5YdSl2c8L4tdAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#D0CCA9"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/4.a25addea.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AKnG0avG0bDJ0rbO1bnQ1bLK0LDIz7DIzwC9zcvAzszH0s+YpKKOnJu/y8XH0szE0MsAzM/E1NXJqqyiNhIAfV9Ls6qew7aszsq/AMzHwc3Jx8O3sOe+mfTKptG5qbSals/GxgC3tcazpa63sL7yzKz+1KbSurGqmKK7tcMAlpOsjoORhXqM3Lib37udtqSpmpKfpJmeAGpdZUZDQ1huTfPNpragjQABKqGJgbipowA6AABEZUhDkG1vg2d+h2kATCG3mISikoczn3nJIi6wxQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#BDB9C3"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/5.622e0a3d.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/APvi2OfQxmplWSkyKTA3LmtlW+zTyf7k2wD649ernJEAAAAiLCQABgoAAAC4ppz95tsA8tzRfHVqAAAACgAAgWpVbWBIdGxm8tvQAPPe1Ih/d1o3B5RnQcetjbamioZ2Z+vSygD549rLubGAYTeyfDzy4cPc0rbGraD33dMA79rS9d7Xm4h8mFgW26qFwaWF4svC9d3SAPfj2smzqzMZEGU1HcCkgsCaf9KrofDe1ACzn5lEMC9wUCx6TS2gh2prQzF3AADEpI9uLGl6mUkPuwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#AF7A43"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/6.b62b0cfc.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AIuZgJKgnWiGpViHsXeYtZirvaOkmbeogwBZiLpGebt6g4KQh1KWjV2Ml4yIqsmBorkAOnK2d4Sax5pP27R+za6Ar5x1gpaqjKvCAFiPuYmYk72pdK6XcMCvi6KUdV57ko6zyABpm7mPoLGnontscladnJSSmKBblLdvpsoAmqisw7OkwLWRvbKnv7G+kKfBfp64kqi6AJCepLqvj7++s627yru7t3iUoa+tqsLEywCRn6GfsKtutdG0wM/WxbB+mqV4oceVsc4HHXVkV3+NuQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#7197BD"}],m=e=>{let{index:t,avatar:s}=e;return(0,r.jsx)(i.default,{src:s.src,draggable:!1,priority:!0,quality:50,style:{background:s.color},alt:"avatar ".concat(t),className:"size-9 rounded-full border-2 border-white-400 ".concat(t>0?"-ml-1":""),width:38,height:38})},h=e=>{let{isOpen:t,onClose:s}=e;return(0,r.jsx)(d,{z:"z-50",isOpen:t,hideOnCloseButton:!0,onClose:s,children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("h1",{className:"mb-6 text-center text-3xl font-bold",children:o.K7}),(0,r.jsx)("p",{className:"text-center text-lg text-white-400/75",children:o.vk}),(0,r.jsx)("div",{className:"relative my-6 flex items-center justify-center select-none",children:u.map((e,t)=>(0,r.jsx)(m,{index:t,avatar:e},t))}),(0,r.jsxs)(l.A,{className:"my-6 flex items-center justify-center gap-2 rounded-2xl bg-blue-500 px-5 py-1 text-sm",onClick:()=>{let e=n.P.xGetRedirectUrl();window.location.href=e},children:[(0,r.jsx)("p",{className:"text-lg",children:"Login with"}),(0,r.jsx)(i.default,{src:a.Z,alt:"x",className:"w-5"})]})]})})}},78778:function(e,t,s){"use strict";s.r(t),s.d(t,{TrendingPosters:function(){return c}});var r=s(57348),l=s(13881),i=s(15346),a=s(71402),n=s(35878),o=s(15800);let c=()=>{let{recommendedFollows:e,setRecommendedFollows:t}=(0,a.useProfile)(),[s,c]=(0,i.useState)(!0),d=(0,i.useCallback)(async()=>{t(await n.P.getRecommendedFollows()),c(!1)},[t]);return((0,i.useEffect)(()=>{0===e.length&&d()},[d,e.length]),s&&0===e.length)?(0,r.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3,4,5].map(e=>(0,r.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,r.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,r.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,r.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):(0,r.jsx)("div",{className:"flex flex-col gap-1",children:e.slice(0,5).map(e=>(0,r.jsx)(l.default,{href:"/u/".concat(e.screen_name),"aria-label":"View @".concat(e.screen_name,"'s profile"),className:"hover:bg-white-400/5",children:(0,r.jsx)(o.W,{avatarSrc:e.profile_image_url_https,badgeSrc:e.badge_image_url,screenName:e.name,userHandle:e.screen_name})},e.screen_name))})}},11525:function(e,t,s){"use strict";s.r(t),s.d(t,{TopDecksAside:function(){return m}});var r=s(57348),l=s(15346),i=s(71402),a=s(35878),n=s(41973),o=s(45155),c=s(13881),d=s(81727);let u=e=>{let{deck:t}=e;return(0,r.jsxs)(c.default,{href:(0,d.Wb)(t),className:"hover:bg-white-400/5 flex items-center gap-3 px-4 py-2 text-sm",children:[(0,r.jsx)("div",{className:"bg-black-400 size-12 rounded-lg overflow-hidden",children:(0,r.jsx)(o.default,{src:t.thumbnail,alt:t.title,width:64,height:64,className:"object-cover object-center size-full"})}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:t.title}),(0,r.jsx)("div",{className:"text-white-400/50 text-sm",children:"".concat(t.total_posted," ").concat((0,d._6)(t.total_posted,"meme","memes"))})]})]},t.id)},m=()=>{let{topDecksWeekly:e,setTopDecksWeekly:t}=(0,i.useProfile)(),[s,o]=(0,l.useState)(!0),c=(0,l.useCallback)(async()=>{o(!0),a.P.getTopDecks({limit:5,interval:n.u.Week}).then(t).finally(()=>o(!1))},[t]);return((0,l.useEffect)(()=>{0===e.length&&c()},[c,e.length]),s&&0===e.length)?(0,r.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3].map(e=>(0,r.jsxs)("div",{style:{height:"64px"},className:"flex items-center gap-1 px-4 py-2",children:[(0,r.jsx)("div",{className:"bg-white-400/10 size-12 rounded-lg"}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,r.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,r.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):(0,r.jsx)("div",{className:"flex flex-col gap-1",children:e.sort((e,t)=>t.total_posted-e.total_posted).slice(0,3).map(e=>(0,r.jsx)(u,{deck:e},e.id))})}},37824:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var r=s(57348),l=s(45155);let i=e=>{let{src:t,alt:s,id:i,margin:a="m-2",w:n="w-3.5",onClick:o}=e;return(0,r.jsx)("button",{id:i,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(a),onClick:o,children:(0,r.jsx)(l.default,{priority:!0,src:t,alt:s,className:"opacity-85 ".concat(n)})})}},23770:function(e,t,s){"use strict";s.r(t),s.d(t,{HomeFeed:function(){return B}});var r=s(57348),l=s(4930),i=s(5265),a=s(35971),n=s(35878),o=s(53350),c=s(65161),d=s(67425),u=s(76105),m=s(94645),h=s(95900),f=s(23805),x=s(45155),g=s(16189),v=s(12465),p=s(15346),b=s(77623),A=s(96622),w=s(71402),j=s(73139),y=s(69467),k=s(61858),N=s(66353),P=s(18491),S=s(81254);let C=e=>{var t,s,l,i,a,n,o,c,d,u;let{meme:m,isNsfw:h}=e,[f,x]=(0,p.useState)(h);return(0,r.jsxs)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:[(0,r.jsx)(S.g,{type:(0,N.fJ)(null!==(l=m.source)&&void 0!==l?l:"generated"),src:m.url,alt:(null!==(i=m.tags)&&void 0!==i?i:["Meme"]).join(", "),topText:null!==(a=null===(t=m.text_overlay)||void 0===t?void 0:t.top_text)&&void 0!==a?a:null,bottomText:null!==(n=null===(s=m.text_overlay)||void 0===s?void 0:s.bottom_text)&&void 0!==n?n:null,centerText:null,className:"z-1 ".concat(f?"blur-xl":""),imageWidth:null!==(o=m.width)&&void 0!==o?o:1024,imageHeight:null!==(c=m.height)&&void 0!==c?c:1024,canvasWidth:null!==(d=m.width)&&void 0!==d?d:1024,canvasHeight:null!==(u=m.height)&&void 0!==u?u:1024}),f&&(0,r.jsx)(P.T,{src:m.url,onClickShow:()=>x(!1)})]})};var z=s(90226),_=s(6526),R=s(52053),M=s(13343),D=s(81727);let E=e=>{let{badge:t,avatar:s,handle:l,publishedAt:i,name:a,description:n,isNsfw:o,onProfileClick:c}=e;return(0,r.jsxs)("header",{className:"flex w-full flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start gap-1.5 text-sm",children:[(0,r.jsx)(z.z,{classNames:{base:"text-white-400/80 hover:text-white-400/100"},name:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[l,t&&(0,r.jsx)(M.E,{content:"Kinode user",children:(0,r.jsx)(_.J,{src:t,alt:"badge",className:"rounded-sm z-0",width:14,height:14})})]}),avatarProps:{src:s,className:"w-5 h-5 text-tiny"},onClick:c}),(0,r.jsx)("div",{className:"text-stone-700 text-xs",children:"•"}),(0,r.jsx)("div",{className:"text-white-400/40",children:(0,D.Po)(i)}),o&&(0,r.jsx)("div",{className:"flex flex-1 flex-row justify-end items-center gap-1",children:(0,r.jsx)(R.z,{color:"danger",size:"sm",classNames:{content:"text-tiny font-medium",base:"py-0 px-0.5 max-h-4"},children:"NSFW"})})]}),(a||n)&&(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h2",{className:"truncate text-lg font-bold tracking-wide",children:a}),(0,r.jsx)("p",{className:"text-sm font-normal text-white-400/75",children:n})]})]})};var U=s(2406);let I=e=>{var t,s;let{meme:l,by_avatar:i,by_badge_image_url:a,by_handle:N,published_at:P,priorityLoadImage:S}=e,z=(0,g.useRouter)(),{isOpen:_,onOpen:R,onClose:M,onOpenChange:D}=(0,c.q)(),{profile:I}=(0,w.useProfile)(),{onOpenMeme:O}=(0,A.useMemeModal)(),{getMemeModalPath:B}=(0,b.T)(),L=(0,y.kl)(l),[H,F]=(0,p.useState)(l.is_saved),[T,K]=(0,p.useState)(!1),W=()=>{F(!H),n.P.saveMeme(l.id,H).catch(()=>{F(H)})},q=()=>{let e=B(l.id),t="".concat(window.location.origin).concat(e);navigator.clipboard.writeText(t),M(),(0,v.yv)("Link copied to clipboard",{variant:"success",autoHideDuration:1500})},G=async()=>{try{K(!0);let e=await fetch(l.url);if(!e.ok)throw Error("Network response was not ok.");let t=await e.blob(),s=new File([t],"meme.png",{type:"image/png"});await navigator.share({title:"Share Meme",text:"Check out this meme on Memedeck",files:[s]})}catch(e){console.error("Error sharing:",e)}finally{K(!1)}M()},J=l.width>0&&l.height>0&&l.width<=l.height?l.width/l.height:1024/768;return(0,r.jsxs)("article",{className:"flex min-h-0 min-w-full max-w-full cursor-pointer flex-col items-start justify-start gap-2 overflow-hidden border-b border-white-400/15 p-3 transition-colors hover:bg-black-400",onClick:()=>O(l.id),children:[(0,r.jsx)(E,{badge:a,avatar:i,handle:N,isNsfw:L,publishedAt:P,onProfileClick:e=>{e.preventDefault(),e.stopPropagation(),z.push("/u/".concat(N))}}),(0,r.jsx)("div",{className:"w-full",style:{aspectRatio:J},children:"generated"===l.source?(0,r.jsx)(C,{meme:l,isNsfw:L}):(0,r.jsx)(k.h,{imageUrl:l.url,alt:null===(t=l.tags)||void 0===t?void 0:t.join(", "),priorityLoadImage:S,isNsfw:L})},"meme-".concat(l.id)),(0,r.jsxs)("footer",{className:"flex w-full flex-row items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,r.jsx)(U.I,{itemId:l.id,userId:null!==(s=null==I?void 0:I.user.id)&&void 0!==s?s:"",addVoteApi:n.P.createMemeReaction,removeVoteApi:n.P.deleteMemeReaction}),(0,r.jsx)(d.A,{isIconOnly:!0,size:"sm",radius:"full",variant:"ghost",onClick:e=>{e.stopPropagation(),e.preventDefault(),W()},children:(0,r.jsx)(o.JO,{icon:H?"material-symbols:bookmark":"material-symbols:bookmark-outline",width:18})})]}),l.source&&y.FU.includes(l.source)&&(0,r.jsx)(d.A,{size:"sm",variant:"bordered",startContent:(0,r.jsx)(x.default,{src:j.Z,alt:"Remix",className:"size-4"}),onClick:()=>{z.push("/studio?remix=".concat(l.id))},children:"Remix"}),(0,r.jsx)(d.A,{isIconOnly:!0,size:"sm",variant:"ghost",className:"flex sm:hidden",onClick:R,children:(0,r.jsx)(o.JO,{icon:"ri:share-2-line",width:18})})]}),(0,r.jsx)(u.R,{isOpen:_,placement:"bottom",hideCloseButton:!0,onOpenChange:D,children:(0,r.jsx)(m.A,{children:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.I,{className:"flex gap-3 pt-4",children:[(0,r.jsx)(d.A,{variant:"light",className:"flex justify-start",startContent:(0,r.jsx)(o.JO,{icon:"tdesign:link",width:18}),onClick:q,children:"Copy link"}),!!navigator.share&&(0,r.jsx)(d.A,{variant:"light",className:"flex justify-start",startContent:(0,r.jsx)(o.JO,{icon:"ri:share-2-line",width:18}),isLoading:T,onClick:G,children:"Share post via..."})]}),(0,r.jsx)(f.R,{children:(0,r.jsx)(d.A,{variant:"bordered",fullWidth:!0,onPress:e,children:"Cancel"})})]})})})]})},O=e=>{let{index:t,post:s}=e;return"meme"===s.post_type?(0,r.jsx)(I,{...s,meme:s.post,priorityLoadImage:t<2},s.id):null},B=()=>{let{feed:e,setFeed:t,hasFetchedFeed:s,setHasFetchedFeed:o}=(0,a.useFeed)(),{isFetching:c}=(0,i.M)({feed:e,setFeed:t,hasFetched:s,setHasFetched:o,fetchFn:n.P.getFeed,pageSize:10});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative min-w-full max-w-full",children:e.map((e,t)=>(0,r.jsx)(O,{post:e,index:t},"feed--".concat(t)))}),c&&(0,r.jsx)("div",{className:"flex w-full justify-center px-3 py-6",children:(0,r.jsx)(l.c,{})})]})}},48710:function(e,t,s){"use strict";s.r(t),s.d(t,{FeedHeaderMobile:function(){return c}});var r=s(57348),l=s(67425),i=s(45155),a=s(13881),n=s(29492),o=s(82739);let c=()=>(0,r.jsx)("nav",{className:"h-16 border-b border-white-400/10 bg-black-500 sm:hidden xs:block px-3",children:(0,r.jsxs)("div",{className:"flex size-full w-full items-center justify-between gap-3",children:[(0,r.jsx)("div",{className:"size-[40px]"}),(0,r.jsx)("div",{className:"flex flex-1 justify-center items-center",children:(0,r.jsxs)(a.default,{href:"/home",className:"flex items-center gap-1",children:[(0,r.jsx)(n.QB,{className:"w-28"}),(0,r.jsx)(n.Ud,{})]})}),(0,r.jsx)(l.A,{as:a.default,href:"/trending",isIconOnly:!0,variant:"light",radius:"full",children:(0,r.jsx)(i.default,{src:o.Z,alt:"Search",className:"size-6"})})]})})},95967:function(e,t,s){"use strict";s.r(t),s.d(t,{SearchBar:function(){return d}});var r=s(57348),l=s(16189),i=s(15346),a=s(29492),n=s(23136),o=s(16818),c=s(76808);let d=e=>{let{value:t,autofocus:s,initialSearch:d,className:u="px-3",responsiveness:m="",border:h="border-b border-white-400/15",placeholder:f,hideLogo:x=!1,onSearch:g,searchInterval:v,onSelectInterval:p}=e,b=(0,l.useRouter)(),{initialQuery:A}=(0,c.x)(),w=(0,i.useMemo)(()=>t.length>0,[t.length]),j=(0,i.useCallback)(()=>{g||b.push("/trending")},[g,b]);return(0,r.jsxs)("div",{className:"sticky top-0 z-10 flex gap-3 h-16 w-full items-center justify-between bg-black-0 ".concat(u," ").concat(m," ").concat(h),onClick:j,children:[!x&&(0,r.jsx)("div",{className:"sm:hidden size-10 max-w-10",children:(0,r.jsx)(a.Ew,{})}),(0,r.jsx)(n.T,{value:t,autofocus:s,initialSearch:A,placeholder:f,onSearch:g}),w&&v&&p&&(0,r.jsx)(o.m,{interval:v,onSelect:p})]})}},23136:function(e,t,s){"use strict";s.d(t,{T:function(){return o}});var r=s(57348),l=s(46766),i=s(45155),a=s(15346),n=s(82739);let o=e=>{let{value:t,autofocus:s,initialSearch:o,placeholder:c="Search for memes. (i.e. pepe)",onFocus:d,onSearch:u}=e,m=(0,a.useRef)(null);return(0,r.jsx)(l.Y,{isClearable:!0,onClear:()=>{null==u||u("")},radius:"full",classNames:{base:"flex-1",input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,r.jsx)(i.default,{priority:!0,src:n.Z,alt:"Dropdown",onClick:e=>{var t;e.preventDefault(),null===(t=m.current)||void 0===t||t.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:m,autoFocus:s,defaultValue:o,placeholder:c,className:"h-10 min-w-24 flex-1 rounded-full border border-white-400/5 bg-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",value:t,onFocus:d,onChange:e=>null==u?void 0:u(e.target.value)})}},16818:function(e,t,s){"use strict";s.d(t,{m:function(){return n}});var r=s(57348),l=s(1718),i=s(88036),a=s(41973);let n=e=>{let{interval:t,onSelect:s}=e;return(0,r.jsx)(l.g,{size:"md","aria-label":"Interval",radius:"full",variant:"bordered",color:"primary",placeholder:"Sort by",classNames:{base:"w-auto",trigger:"w-28",popoverContent:"w-28"},value:t,selectedKeys:[t],onChange:e=>{s(e.target.value)},children:Object.values(a.u).map(e=>(0,r.jsx)(i.R,{children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}},5265:function(e,t,s){"use strict";s.d(t,{M:function(){return a}});var r=s(15346),l=s(74859),i=s(76808);let a=e=>{let{feed:t,setFeed:s,hasFetched:a,setHasFetched:n,searchQuery:o,setSearchQuery:c,fetchFn:d,deckId:u,fetchOnLoad:m=!0,pageSize:h=50,ignoreWindowScroll:f=!1,onFetchOnLoad:x}=e,{initialQuery:g,initialInterval:v,initialSortBy:p}=(0,i.x)(),[b,A]=(0,r.useState)(0),[w,j]=(0,r.useState)(!0),[y,k]=(0,r.useState)(!1),[N,P]=(0,r.useState)(v),[S,C]=(0,r.useState)(p),z=(0,r.useCallback)(async(e,t)=>{let r=await d(e,t);return s(t=>r.length>0&&Number(e.start)>0?[...t,...r]:r),k(!1),n(!0),j(r.length===h),r},[d,h,s,n]),_=(0,r.useMemo)(()=>(0,l.k)(z,1e3),[z]),R=(0,r.useCallback)(async(e,t)=>{var s,r,l,i,a;return k(!0),n(!1),_({search:null!==(s=e.search)&&void 0!==s?s:o,start:null!==(r=e.start)&&void 0!==r?r:b,limit:null!==(l=e.limit)&&void 0!==l?l:h,interval:null!==(i=e.interval)&&void 0!==i?i:N,sort_by:null!==(a=e.sort_by)&&void 0!==a?a:S,...u?{deck_id:u}:{}},t)},[_,u,h,N,o,S,n,b]),M=(0,r.useCallback)(e=>{if(!a||!w||y)return;let t=null!=e?e:b+h;A(t),R({start:t})},[a,w,y,b,h,R]),D=(0,r.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&M()},[M]),E=(0,r.useCallback)((e,t,s)=>{let r=new URL(window.location.href);e.length>0?r.searchParams.set("query",e):r.searchParams.delete("query"),t?r.searchParams.set("interval",t):r.searchParams.delete("interval"),s?r.searchParams.set("sort_by",s):r.searchParams.delete("sort_by"),window.history.pushState({},"",r.toString())},[]),U=(0,r.useCallback)(async(e,t,s)=>{null==c||c(e),c&&E(e,t,s),A(0),j(!0),R({search:e,start:0,limit:h,interval:t,sort_by:s})},[R,h,c,E]),I=(0,r.useCallback)(e=>{s([]),P(e),U("",e,S)},[U,S,s]),O=(0,r.useCallback)(e=>{s([]),C(e),U("",N,e)},[U,N,s]);return(0,r.useEffect)(()=>{if(!f)return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[D,f]),(0,r.useEffect)(()=>{let e=new AbortController;if(!a&&!(t.length>0)&&m&&!y)return R({search:g,start:0,limit:h,interval:v,sort_by:p},e.signal).then(x),()=>{!e.signal.aborted&&y&&e.abort()}},[t.length,R,m,a,g,v,y,x,h,p]),(0,r.useEffect)(()=>(g&&(null==c||c(g)),v&&P(v),p&&C(p),()=>{s([]),null==c||c(""),n(!1)}),[v,g,p,s,n,P,c,C]),{feed:t,setFeed:s,setHasMore:j,onSearch:U,searchInterval:N,onSelectInterval:I,searchSortBy:S,onSelectSortBy:O,isFetching:y,hasMore:w,setIsFetching:k,setHasFetched:n,onReachedEnd:M}}},76808:function(e,t,s){"use strict";s.d(t,{x:function(){return i}});var r=s(16189),l=s(41973);let i=()=>{var e,t,s;let i=(0,r.useSearchParams)();return{initialQuery:null!==(e=i.get("query"))&&void 0!==e?e:"",initialInterval:null!==(t=i.get("interval"))&&void 0!==t?t:l.u.Week,initialSortBy:null!==(s=i.get("sort_by"))&&void 0!==s?s:l.a.Hot}}},77623:function(e,t,s){"use strict";s.d(t,{T:function(){return i}});var r=s(16189),l=s(93276);let i=()=>{let e=(0,r.useRouter)(),t=(0,r.usePathname)(),s=(0,r.useSearchParams)(),i=e=>{let r=encodeURIComponent(e.replace("meme:",""));if(["/home","/trending"].includes(t))return"".concat(t,"/").concat(r);{let e=new URLSearchParams(s.toString());return e.set("memeId",r),(0,l.wS)(t,e)}};return{openMemeModal:t=>{let s=i(t);e.push(s,{scroll:!1})},getMemeModalPath:i}}},13582:function(e,t,s){"use strict";s.r(t),s.d(t,{AppHistoryProvider:function(){return o},useAppHistory:function(){return c}});var r=s(57348),l=s(16189),i=s(12465),a=s(15346);let n=(0,a.createContext)({}),o=e=>{let{children:t}=e,s=(0,l.usePathname)(),o=(0,l.useRouter)(),[c,d]=(0,a.useState)([]),u=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0;console.log("goBack",{defaultRoute:e,ignoreRouteBase:t});let s=e;c.length>1&&(s=c[c.length-2],void 0!==t&&s.includes(t)&&(s=e)),"string"!=typeof s&&(s="/home"),o.push(s,{scroll:!1})},[c,o]);return(0,a.useEffect)(()=>{d(e=>e[e.length-1]!==s?[...e,s]:e)},[s]),(0,r.jsxs)(n.Provider,{value:{goBack:u},children:[t,(0,r.jsx)(i.wT,{dense:!0,maxSnack:3})]})},c=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useFeed must be used within AppHistoryProvider");return e}},35971:function(e,t,s){"use strict";s.r(t),s.d(t,{FeedProvider:function(){return n},useFeed:function(){return o}});var r=s(57348),l=s(15346),i=s(71402);let a=(0,l.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,l.useState)([]),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)({}),[m,h]=(0,l.useState)(""),[f,x]=(0,l.useState)([]),[g,v]=(0,l.useState)(!1),[p,b]=(0,l.useState)(""),[A,w]=(0,l.useState)([]),[j,y]=(0,l.useState)(!1),{userMemes:k,setUserMemes:N}=(0,i.useProfile)(),[P,S]=(0,l.useState)(""),[C,z]=(0,l.useState)([]),[_,R]=(0,l.useState)(!1),[M,D]=(0,l.useState)([]),[E,U]=(0,l.useState)(!1),[I,O]=(0,l.useState)([]),[B,L]=(0,l.useState)(!1),H=(0,l.useCallback)(e=>s.find(t=>(t.post_type,t.post.id===e))||C.find(t=>t.id===e)||I.find(t=>t.id===e)||M.find(t=>t.id===e)||f.find(t=>t.id===e)||A.find(t=>t.id===e)||Object.values(k).reduce((t,s)=>s.find(t=>t.id===e)||t,void 0),[s,C,I,M,f,A,k]),F=(0,l.useCallback)((e,t,r,l)=>{let i=s.findIndex(e=>e.post.id===t),a=C.findIndex(e=>e.id===t),o=M.findIndex(e=>e.id===t),c=I.findIndex(e=>e.id===t),d=f.findIndex(e=>e.id===t),u=A.findIndex(e=>e.id===t),m=Object.values(k).reduce((e,s)=>{let r=s.findIndex(e=>e.id===t);return -1!==r?r:e},-1);if(-1===i&&-1===a&&-1===o&&-1===c&&-1===d&&-1===u&&-1===m)return;let h=(t,s)=>{let i={...s[t]},a={react:l,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===r?"upvote"===l?(i.votes.up.push(a),i.votes.down=i.votes.down.filter(t=>t.by!==e)):(i.votes.down.push(a),i.votes.up=i.votes.up.filter(t=>t.by!==e)):"upvote"===l?i.votes.up=i.votes.up.filter(t=>t.by!==e):i.votes.down=i.votes.down.filter(t=>t.by!==e),[...s.slice(0,t),i,...s.slice(t+1)]};-1!==i&&n(e=>h(i,e)),-1!==a&&z(e=>h(a,e)),-1!==o&&D(e=>h(o,e)),-1!==c&&O(e=>h(c,e)),-1!==d&&x(e=>h(d,e)),-1!==u&&w(e=>h(u,e)),-1!==m&&N(e=>{let s={...e},r=Object.keys(e).find(s=>e[s].some(e=>e.id===t));return r?(s[r]=h(m,s[r]),s):e})},[A,s,C,I,f,N,M,k]),T=(0,l.useCallback)((e,t)=>{n(s=>0===s.length?s:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...s])},[]),K=(0,l.useCallback)((e,t)=>{n(s=>0===s.length?s:s.map(s=>{if("meme"in s&&s.post.id===e){let e=s.post;return{...s,post:{...e,...t}}}return s}))},[]),W=(0,l.useCallback)(e=>{n(t=>t.filter(t=>t.post.id!==e))},[]),q=(0,l.useCallback)(e=>{C.length>0&&z(t=>[e,...t]),M.length>0&&D(t=>[e,...t])},[C.length,M.length]);return(0,r.jsx)(a.Provider,{value:{feed:s,setFeed:n,hasFetchedFeed:o,setHasFetchedFeed:c,feedActions:d,setFeedActions:u,appendMemesToFeed:T,removeItemFromFeed:W,updateMemeInFeed:K,searchQuery:m,setSearchQuery:h,searchResults:f,setSearchResults:x,hasFetchedSearchResults:g,setHasFetchedSearchResults:v,deckQuery:p,setDeckQuery:b,deckResults:A,setDeckResults:w,hasFetchedDeckResults:j,setHasFetchedDeckResults:y,librarySearchQuery:P,setLibrarySearchQuery:S,library:C,setLibrary:z,hasFetchedLibrary:_,setHasFetchedLibrary:R,uploads:M,setUploads:D,hasFetchedUploads:E,setHasFetchedUploads:U,saved:I,setSaved:O,hasFetchedSaved:B,setHasFetchedSaved:L,onUploadMeme:q,getItem:H,voteOnItem:F},children:t})},o=()=>{let e=(0,l.useContext)(a);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},96622:function(e,t,s){"use strict";s.r(t),s.d(t,{MemeModalProvider:function(){return d},useMemeModal:function(){return u}});var r=s(57348),l=s(16189),i=s(15346),a=s(13214),n=s(77623),o=s(93276);let c=(0,i.createContext)({}),d=e=>{var t;let{children:s}=e,i=(0,l.useRouter)(),d=(0,l.usePathname)(),u=(0,l.useSearchParams)();(0,l.useParams)();let m=0===d.search(/\/home\/[0-9a-zA-Z]{5,}_[0-9a-zA-Z_]{10,}/)?d.replace(/^\/home\//,"").split("/")[0].split("?")[0]:decodeURIComponent(null!==(t=u.get("memeId"))&&void 0!==t?t:""),h=new URLSearchParams(u.toString()),{openMemeModal:f}=(0,n.T)(),x=()=>{h.delete("memeId");let e=0===h.toString().length?"/".concat(d.split("/")[1]):(0,o.wS)(d,h);i.push(e,{scroll:!1})};return(0,r.jsxs)(c.Provider,{value:{onOpenMeme:f,onCloseMeme:x},children:[s,m&&(0,r.jsx)(a.k,{memeId:m,onClose:x})]})},u=()=>{let e=(0,i.useContext)(c);if(void 0===e)throw Error("useFeed must be used within MemeModalProvider");return e}},71402:function(e,t,s){"use strict";s.r(t),s.d(t,{ProfileProvider:function(){return a},useProfile:function(){return n}});var r=s(57348),l=s(15346);let i=(0,l.createContext)(void 0),a=e=>{let{children:t}=e,[s,a]=(0,l.useState)(null),[n,o]=(0,l.useState)({}),[c,d]=(0,l.useState)({}),[u,m]=(0,l.useState)([]),[h,f]=(0,l.useState)([]),[x,g]=(0,l.useState)([]),[v,p]=(0,l.useState)(!1),[b,A]=(0,l.useState)(!1),[w,j]=(0,l.useState)(!1);return(0,r.jsx)(i.Provider,{value:{profile:s,setProfile:a,userMemes:n,setUserMemes:o,userBookmarks:c,setUserBookmarks:d,topDecks:u,setTopDecks:m,topDecksWeekly:h,setTopDecksWeekly:f,recommendedFollows:x,setRecommendedFollows:g,isSignupModalOpen:v,setIsSignupModalOpen:p,isPostingMemes:b,setIsPostingMemes:A,isHovering:w,setIsHovering:j},children:t})},n=()=>{let e=(0,l.useContext)(i);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},82033:function(e,t,s){"use strict";s.r(t),s.d(t,{UploadProvider:function(){return v},useUpload:function(){return p}});var r=s(57348),l=s(16189),i=s(12465),a=s(15346),n=s(67425);let o=e=>{let{text:t,textButton:s,onClick:l}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t,s&&l&&(0,r.jsx)(n.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:l,children:s})]})};var c=s(77623),d=s(35971),u=s(71402),m=s(35878),h=s(74859);let f=e=>{let t=new FileReader;return new Promise((s,r)=>{t.onload=e=>{var t;let l=null===(t=e.target)||void 0===t?void 0:t.result;if(!l){r(Error("Failed to read file"));return}s(new Uint8Array(l))},t.onerror=()=>r(t.error),t.readAsArrayBuffer(e)})};var x=s(81727);let g=(0,a.createContext)({}),v=e=>{let{children:t}=e,s=(0,l.useRouter)(),{openMemeModal:n}=(0,c.T)(),{isPostingMemes:v,setIsHovering:p}=(0,u.useProfile)(),{onUploadMeme:b}=(0,d.useFeed)(),[A,w]=(0,a.useState)([]),[j,y]=(0,a.useState)(),[k,N]=(0,a.useState)(!1),P=(0,a.useCallback)(async e=>{try{(0,i.sy)();let t=e.name.slice(0,20),s=(0,i.yv)("Uploading ".concat(t),{variant:"info",persist:!0});y(s);let l=await f(e),a="",c=await m.P.postMeme({filename:(0,x.Df)(e.name),filetype:e.type,bytes:l});if(!c)throw Error("Failed to upload");a=c.id;let d={...c,votes:{up:[],down:[]}};w(e=>[d,...e]),b(d),(0,i.sy)(j),y(void 0);let u=(0,i.yv)((0,r.jsx)(o,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,i.sy)(u),n(a)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),y(void 0),(0,i.sy)(),(0,i.yv)("Failed to upload some memes",{variant:"error"})}},[j,n,b,w]),S=(0,a.useCallback)(async e=>{try{let t=(0,x.Df)(e),s=t.slice(0,20),l=(0,i.yv)("Uploading ".concat(s),{variant:"info",persist:!0});y(l);let a=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!a)throw Error("Failed to paste link");w(e=>[a,...e]),b(a),(0,i.sy)(j),y(void 0);let c=(0,i.yv)((0,r.jsx)(o,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,i.sy)(c),n(a.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,i.yv)("Failed to paste link",{variant:"error"})}},[j,n,b]),C=(0,a.useMemo)(()=>(0,h.k)(P,1e3),[P]),z=(0,a.useCallback)(async e=>{if(void 0===j){if(e.size>33554432){(0,i.yv)("Please upload files 32MB or less",{variant:"error"});return}return C(e)}},[C,j]),_=(0,a.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let s=t[e];if(s.type.includes("image")){let e=s.getAsFile();e&&await z(e)}}}},[z]);(0,a.useEffect)(()=>(window.addEventListener("paste",_),()=>{window.removeEventListener("paste",_)}),[_]);let R=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),p(!1),N(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let s=t[e];s.type.includes("image")&&await z(s)}v||s.push("/library")}catch(e){console.error(e)}finally{N(!1)}};return(0,r.jsx)(g.Provider,{value:{uploads:A,setUploads:w,startUpload:z,pasteImageLink:S,isBatchUploading:k},children:(0,r.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&p(!0)},onDragLeave:()=>p(!1),onDrop:R,children:t})})},p=()=>{let e=(0,a.useContext)(g);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}},74859:function(e,t,s){"use strict";s.d(t,{D:function(){return r},k:function(){return l}});let r=(e,t)=>{let s=null;return function(){for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];s&&clearTimeout(s),s=setTimeout(()=>{s&&clearTimeout(s);let t=e(...l);return s=null,t},t)}},l=(e,t)=>{let s=null;return function(){for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return new Promise((r,i)=>{let a=async()=>{s&&clearTimeout(s);try{let t=await e(...l);r(t)}catch(e){i(e)}s=null};s&&clearTimeout(s),s=setTimeout(a,t)})}}},62568:function(e,t,s){"use strict";s.d(t,{K7:function(){return i},jG:function(){return l},vk:function(){return a}});var r=s(54167);let l="MemeDeck",i="Meme With Frens",a="Create & discover memes with AI.";"".concat(l," – ").concat(i),new URL(r.j7?"http://localhost:8080":"https://memedeck.xyz")},81727:function(e,t,s){"use strict";s.d(t,{Df:function(){return i},Po:function(){return l},RL:function(){return a},Wb:function(){return c},_6:function(){return o},uZ:function(){return n}});var r=s(97102);let l=e=>{let t=new Date(e/1e6),s=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(s/60),l=Math.round(r/60);return s<60?"".concat(s,"s ago"):r<60?"".concat(r,"m ago"):l<24?"".concat(l,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},i=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),a="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function n(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function o(e,t,s){return 1===e?t:s}function c(e){return"/deck/".concat(e.id.replace("deck:",""))}},93276:function(e,t,s){"use strict";function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function l(e){return"/deck/".concat(e.replace("deck:",""))}function i(e){return"/home/".concat(e.replace("meme:",""))}s.d(t,{Wi:function(){return i},o4:function(){return l},wS:function(){return r}})},82739:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},94787:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},15667:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}},21008:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[8437,7398,2221,4175,454,2872,9154,3881,7686,1133,6440,312,4822,6378,9581,1718,9394,9832,3520,874,9862,8830,5240,5878,3214,937,7114,1744],function(){return e(e.s=89165)}),_N_E=e.O()}]);