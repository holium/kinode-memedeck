(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9650],{1440:function(e,l,t){Promise.resolve().then(t.bind(t,12811))},12811:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return e0}});var a,s,i=t(62284),n=t(28403),r=t(95786),c=t.n(r),o=t(6064),d=t(23405),u=t(35850),m=t(60521),h=t(46231),x=t(21317);let f=e=>{let{contest:l,startContent:t,flex:a="flex",h:s="h-12",w:n="w-auto",p:r="p-3",rounded:c="rounded-2xl",isSmall:o=!0}=e;return l.winner,(0,i.jsx)("div",{className:(0,d.cn)("flex relative truncate",s,n),children:(0,i.jsxs)("main",{className:(0,d.cn)("w-full truncate","items-center justify-center",a,r,c,"active"===l.status?"bg-violet-500":"bg-transparent"),children:[t,(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,i.jsx)(h.JO,{icon:"bxs:party",className:"size-5"}),l.prize?(0,i.jsx)("div",{className:"flex flex-col truncate",children:(0,i.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1 truncate"),children:[(0,i.jsx)("span",{className:(0,d.cn)("text-white-400 font-bold",o?"text-lg":"text-xl"),children:(0,x._s)(l.prize.token_amount)}),(0,i.jsx)("span",{className:(0,d.cn)("text-white-400/75 font-medium truncate",o?"text-sm":"text-lg",o?"":"mt-[1px]"),children:l.prize.ticker})]})}):(0,i.jsx)("p",{className:"font-bold",children:"TBD"})]})]})})};var p=t(20102),g=t(82258);let v=()=>{let{contest:e}=(0,p.C)();if(!(0,n.useSearchParams)().get("contestId")&&!e)return null;let l=(null==e?void 0:e.status)==="upcoming";return(0,i.jsx)("div",{className:"p-2 pt-0 md:p-3",children:(0,i.jsx)("footer",{className:(0,d.cn)("relative h-12 md:h-16 w-full overflow-hidden","flex items-center justify-center gap-3 md:gap-4","bg-black-400 rounded-2xl border border-violet-400","shadow-lg"),children:e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f,{contest:e,h:"h-full",rounded:"rounded-none"}),(0,i.jsx)("div",{className:"flex flex-1 items-start min-w-0",children:(0,i.jsxs)(u.default,{className:"flex flex-col gap-0 items-start justify-center h-full max-w-full",href:(0,g.CU)(e),children:[(0,i.jsx)("h2",{className:"text-white-400 font-bold text-sm md:text-sm leading-5 max-w-full truncate",children:e.title}),(0,i.jsx)("p",{className:"text-white-400/75 font-light text-xs md:text-sm leading-4 max-w-full truncate ",children:e.description})]})}),(0,i.jsx)("div",{className:"hidden sm:block h-full z-0",children:(0,i.jsx)(m.s,{contest:e,startContent:(0,i.jsx)("div",{className:"text-white-400/75 text-xs pr-3",children:l?"Starts in:":"Ends in:"}),hideTrail:!0,bg:"bg-black-300",rounded:"rounded-none"})})]}):(0,i.jsx)(o.W,{size:"sm",isIndeterminate:!0,"aria-label":"Loading...",className:"w-full max-w-sm p-3",classNames:{indicator:"bg-violet-500"}})})})};var b=t(17192),j=t(88938),w=t(59297),y=t(14074),N=t(15219);let k=e=>{let{label:l,imageRef:t,isBaseImage:a=!1,initialSrc:s,setImage:n}=e,{composedMemeId:r,activePanelIdx:c,activePanel:o,dispatchPanelAction:d}=(0,p.C)(),[u]=(0,N.X5)(),[m]=(0,N.Jp)(),h=async(e,l,t,s)=>{var i;if(!r||!o)return;let m=await u({meme_id:r,panel_id:o.id,bytes:Array.from(e),width:l,height:t,filetype:"image/jpeg",is_face:!a});if(!m.data)return;let h=m.data.panel_config;if(!h)return;let x=a?h.faceswap.base_image:h.faceswap.face_image;x&&n(x);let f=o.panel_config;d({idx:c,action:"update-panel",panel_type:"faceswap",panel_config:{image:{url:"",width:a?l:h.faceswap.base_width,height:a?t:h.faceswap.base_height},faceswap:{face_image:h.faceswap.face_image,base_image:h.faceswap.base_image,faceswap_strength:null!==(i=h.faceswap.faceswap_strength)&&void 0!==i?i:f.faceswap.faceswap_strength,base_width:a?l:h.faceswap.base_width,base_height:a?t:h.faceswap.base_height}},local:{selectedAspectRatio:a?s:o.local.selectedAspectRatio}})},x=(0,w.useCallback)(async()=>{r&&o&&(await m({meme_id:r,panel_id:o.id,is_face:!a}),n(void 0))},[o,r,m,a,n]);return(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("p",{className:"text-white-400 font-medium text-small",children:l}),(0,i.jsx)(y.U,{imageRef:t,initialSrc:s,onParseImage:h,onClickDeleteMeme:x})]})},C=()=>{var e;let{activePanel:l,activePanelIdx:t,onClickFaceswap:a,dispatchPanelAction:s}=(0,p.C)(),n=(0,w.useRef)(null),r=(0,w.useCallback)(e=>{s({idx:t,action:"update-panel",panel_config:{faceswap:{faceswap_strength:e}}})},[t,s]),c=(0,w.useCallback)(e=>{s({idx:t,action:"update-panel",panel_config:{faceswap:{face_image:e}}})},[t,s]),o=(0,w.useCallback)(e=>{s({idx:t,action:"update-panel",panel_config:{faceswap:{base_image:e}}})},[t,s]),d=null==l?void 0:l.panel_config.faceswap.base_image,u=null==l?void 0:l.panel_config.faceswap.face_image,m=null!==(e=null==l?void 0:l.panel_config.faceswap.faceswap_strength)&&void 0!==e?e:.5;return(0,i.jsxs)("div",{className:"flex size-full flex-col gap-3 justify-between",children:[(0,i.jsxs)("section",{className:" w-full flex-1 flex flex-col gap-4 overflow-hidden lg:overflow-y-scroll",children:[(0,i.jsx)(k,{imageRef:n,label:"Base Image",isBaseImage:!0,initialSrc:null!=d?d:null,setImage:o},"faceswap-base-image"),(0,i.jsx)(k,{label:"Face Image",initialSrc:null!=u?u:null,setImage:c},"faceswap-face-image"),(0,i.jsx)(b.L,{size:"md",step:.01,color:"warning",label:(0,i.jsx)("p",{className:"text-white-400 font-medium text-small",children:"Faceswap Strength"}),maxValue:1,minValue:.1,value:m,defaultValue:.5,onChange:e=>r(e),className:"w-full my-1"})]}),(0,i.jsx)("footer",{className:"w-full pb-3",children:l&&(0,i.jsx)(j.A,{fullWidth:!0,className:"text-md h-11 min-h-11",variant:"shadow",color:"primary",size:"md",isLoading:l.local.isGenerating,isDisabled:!u||!d,onClick:()=>{var e,t;if(!u||!d||!n.current)return;let s={width:null===(e=n.current)||void 0===e?void 0:e.naturalWidth,height:null===(t=n.current)||void 0===t?void 0:t.naturalHeight};a(l.idx,u,d,s)},children:(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)(h.JO,{icon:"tabler:replace-filled",className:"fill-orange-400 size-5"}),(0,i.jsx)("h4",{children:"Swap Faces"})]})},"desktop-faceswap")})]},"faceswap-controls-".concat(t))};var z=t(91942),A=t(40720),_=t(50935),S=t(15254),D=t(44443);let I=()=>{var e;let{activePanelIdx:l,activePanel:t,isGenerateDisabled:a,onChangeTextOverlay:s,onClickGenerate:n}=(0,p.C)();if(!t)return null;let{top_text:r,bottom_text:c}=null!==(e=t.panel_config.text_overlay)&&void 0!==e?e:{};return(0,i.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,i.jsx)(S.Y,{classNames:{input:"placeholder:text-white-400/25",inputWrapper:"!bg-black-400 rounded-lg"},fullWidth:!0,label:"Top text",placeholder:"Add top text",value:null!=r?r:"",onValueChange:e=>{s(l,"top_text",e)},maxLength:120,isClearable:!0,onKeyDown:e=>{"Enter"!==e.key||a||(e.preventDefault(),n(l,t))}},"desktop-top-text-overlay"),(0,i.jsx)(S.Y,{classNames:{input:"placeholder:text-white-400/25",inputWrapper:"!bg-black-400 rounded-lg"},fullWidth:!0,label:"Bottom text",placeholder:"Add bottom text",value:null!=c?c:"",onValueChange:e=>{s(l,"bottom_text",e)},maxLength:120,isClearable:!0,onKeyDown:e=>{"Enter"!==e.key||a||(e.preventDefault(),n(l,t))}},"desktop-bottom-text-overlay")]})},T=e=>{var l;let{isMobile:t=!1}=e,{activePanelIdx:a,activePanel:s,isGenerateDisabled:n,onClickGenerate:r,dispatchPanelAction:c}=(0,p.C)();if(!s)return null;let{seed:o,seed_type:d,user_negative_prompt:u}=null!==(l=s.panel_config.prompt)&&void 0!==l?l:{};return(0,i.jsxs)(z.d,{variant:"shadow",className:"border-default-200 dark:border-default-100",children:[(0,i.jsx)(A.G,{classNames:{title:"text-base",content:"pt-0 pb-4 flex flex-col gap-6"},"aria-label":"Text",title:"Text",subtitle:"Add text to your image",children:(0,i.jsx)(I,{})},"1"),(0,i.jsxs)(A.G,{classNames:{title:"text-base",content:"pt-0 pb-4 flex flex-col gap-6"},"aria-label":"Advanced",title:"Advanced",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"inline-flex flex-row gap-2 justify-between",children:[(0,i.jsx)("label",{className:"text-white-400 font-medium text-small",children:"Seed"}),(0,i.jsxs)(_.g,{children:[(0,i.jsx)(j.A,{size:"sm",className:"h-5 px-0",color:"warning",variant:"fixed"===d?"solid":"bordered",onClick:()=>{c({idx:a,action:"update-panel",panel_config:{prompt:{seed_type:"fixed"}}})},children:"Fixed"}),(0,i.jsx)(j.A,{size:"sm",className:"h-5 px-0",color:"warning",variant:"random"===d?"solid":"bordered",onClick:()=>{c({idx:a,action:"update-panel",panel_config:{prompt:{seed:(0,x.qb)(),seed_type:"random"}}})},children:"Random"})]})]}),(0,i.jsx)(S.Y,{fullWidth:!0,type:"number",label:null,classNames:{input:"placeholder:text-white-400/30",inputWrapper:"!bg-black-400 rounded-lg"},value:(null!=o?o:"").toString(),onValueChange:e=>{let l=parseInt(e);isNaN(l)&&(l=void 0),c({idx:a,action:"update-panel",panel_config:{prompt:{seed:l}}})}})]}),!t&&(0,i.jsx)(D.Y,{className:"px-0",classNames:{input:"placeholder:text-white-400/30",inputWrapper:"!bg-black-400 rounded-lg"},fullWidth:!0,label:"Negative prompt",labelPlacement:"outside",placeholder:'What do you want the image NOT to look like? E.g. "no cats"',value:u,onValueChange:e=>{c({idx:a,action:"update-panel",panel_config:{prompt:{user_negative_prompt:e}}})},onKeyDown:e=>{"Enter"!==e.key||n||(e.preventDefault(),r(a,s))}},"desktop-negative-prompt")]},"2")]})};var O=t(7441);let M=()=>{var e,l,t;let{activePanelIdx:a,activePanel:s,dispatchPanelAction:n}=(0,p.C)();return s?(0,i.jsxs)("div",{className:"w-full my-1 flex flex-col gap-2 px-0",children:[(0,i.jsx)(b.L,{size:"md",step:.2,color:"foreground",label:(0,i.jsxs)("div",{className:"flex flex-row gap-1.5 items-center",children:[(0,i.jsx)("p",{className:"text-white-400 font-medium text-small",children:"Guidance "}),(0,i.jsx)("p",{className:"text-default-500 font-normal text-tiny",children:"(cfg_scale)"})]}),showSteps:!0,maxValue:O.$7.max,minValue:O.$7.min,defaultValue:null!==(t=null===(e=s.panel_config.prompt)||void 0===e?void 0:e.cfg_scale)&&void 0!==t?t:O.$7.default,value:null===(l=s.panel_config.prompt)||void 0===l?void 0:l.cfg_scale,onChange:e=>{n({idx:a,action:"update-panel",panel_config:{prompt:{cfg_scale:e}}})}}),(0,i.jsx)("p",{className:"text-default-500 font-normal text-small",children:"How close the AI follows the prompt, lower is more creative."})]}):null};var W=t(62486),E=t(96260),F=t(99919),R=t(31291),L=t(96690);let P={base:(0,d.cn)("inline-flex flex-col m-0 p-2 max-w-[100%] items-center justify-center","w-full cursor-pointer rounded-lg 3 !border-medium border-default-100","data-[selected=true]:border-warning bg-black-300 hover:border-white-400/10"),label:"inline-flex flex-col items-center",labelWrapper:"m-0 gap-1 min-w-0 max-w-full",description:"truncate text-center text-white-400/90 max-w-full",wrapper:"hidden"},J={square:"icon-park-twotone:square-small",landscape:"icon-park-twotone:rectangle-small",portrait:"icon-park-twotone:rectangle-small"},V=()=>{(0,N.iS)();let{activePanel:e,activePanelIdx:l,selectedLayout:t,dispatchPanelAction:a}=(0,p.C)();if(!e)return null;let{selectedAspectRatio:s}=e.local;return t!==L.L.One?null:(0,i.jsx)(F.X,{classNames:{wrapper:"flex-nowrap gap-2",label:"text-white-400 font-medium text-small"},defaultValue:"square",label:"Aspect Ratio",orientation:"horizontal",value:s,onValueChange:e=>{a({idx:l,action:"update-panel",local:{selectedAspectRatio:e}})},children:Object.entries(J).sort((e,l)=>{let[t]=e,[a]=l;return t.localeCompare(a)}).map(e=>{let[l]=e;return(0,i.jsxs)(R.J,{classNames:P,value:l,children:[(0,i.jsx)("div",{className:"w-full flex justify-center",children:(0,i.jsx)(h.JO,{icon:J[l],className:"portrait"===l?"rotate-90":"",width:40})}),(0,i.jsx)("p",{className:"text-sm text-white-400/90 text-center",children:l.charAt(0).toUpperCase()+l.slice(1)})]},l)})})};var H=t(1353);let B=e=>{let{isMobile:l=!1}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.U,{}),(0,i.jsx)(W.Z,{isMobile:l}),!l&&(0,i.jsx)(H.j,{label:"Prompt",autoFocus:!0,classNames:{label:"absolute top-2 left-3",base:"w-full min-h-[112px] h-[112px] max-h-[112px]",input:"min-h-full max-h-full placeholder:text-white-400/25",inputWrapper:"min-h-28 h-28 max-h-28 pb-6 pt-6 rounded-xl"}},"desktop-prompt"),(0,i.jsx)(V,{}),(0,i.jsx)(M,{}),(0,i.jsx)(T,{isMobile:l})]})};var U=t(2793),Z=t(44135);let Y=()=>{let{contest:e,activePanelIdx:l,activePanel:t,isGenerateDisabled:a,onClickGenerate:s}=(0,p.C)();if(!t)return null;let{isGenerating:n}=t.local;return(0,i.jsx)("div",{className:"p-3",children:(0,i.jsx)(j.A,{fullWidth:!0,className:(0,d.cn)("text-md h-11",e?"bg-violet-500 shadow-violet-400/40":""),variant:"shadow",color:"primary",size:"md",isLoading:n,isDisabled:a,onClick:()=>{s(l,t)},children:(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[!n&&(0,i.jsx)(U.default,{src:Z.Z,alt:"Generate",className:"size-5"}),(0,i.jsx)("h1",{children:"Generate"})]})},"desktop-generate")})};var G=t(53495),K=t(12890),q=t(77781),X=t(75635),Q=t(72363);let $=()=>{let{activePanel:e,onClickLibrary:l}=(0,p.C)(),{search:t,searchDebounced:a,onSearch:s}=(0,X.U)(),[n,r]=(0,w.useState)(1),{currentData:c,isLoading:o,isFetching:d,isError:u}=(0,N.FK)({start:0,limit:20*n,interval:Q.u.AllTime,search:a}),m=(0,w.useCallback)(()=>{d||o||u||r(e=>{let l=!c||0===c.length,t=(null!=c?c:[]).length<20*e;return l||t?e:e+1})},[c,u,d,o]),h=(0,w.useCallback)(e=>{let{scrollLeft:l,clientWidth:t,scrollWidth:a}=e.currentTarget;l+t>=a-400&&m()},[m]);return e?(0,i.jsxs)("div",{className:"flex size-full min-h-0 flex-col gap-3",children:[(0,i.jsx)("div",{children:(0,i.jsx)(q.T,{value:t,placeholder:"Search your library",onSearch:s})}),(0,i.jsx)("div",{className:"flex-1 w-full min-h-0 overflow-y-scroll overflow-x-hidden",onScroll:h,children:(0,i.jsx)(K.o,{items:null!=c?c:[],hasFetched:!!c,hasSearched:a.length>0,isFetching:d,isLoading:o,className:"overflow-hidden -mr-3",breakpoints:{default:2},renderItem:(t,a)=>(0,i.jsx)(G.Y,{item:t,isSelected:t.id===e.panel_config.image.id,onClick:()=>l(t)},"".concat(a,"-").concat(t.id))})})]}):null};var ee=t(63006);let el=()=>{let{activePanelIdx:e,selectedTab:l,onClickTab:t}=(0,p.C)();return(0,i.jsxs)("header",{className:"flex gap-3 p-3 items-center justify-between",children:[(0,i.jsxs)("h1",{className:"text-lg uppercase tracking-wide",children:["Panel ",e+1]}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)(ee.e,{content:"AI Generation",delay:500,showArrow:!0,closeDelay:200,children:(0,i.jsx)(j.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"generate"===l?"warning":"default",onClick:()=>t("generate"),children:(0,i.jsx)(h.JO,{icon:"ph:sparkle-fill",className:"fill-orange-400 size-5"})})}),(0,i.jsx)(ee.e,{content:"Text",delay:500,showArrow:!0,closeDelay:200,children:(0,i.jsx)(j.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"text"===l?"warning":"default",onClick:()=>t("text"),children:(0,i.jsx)(h.JO,{icon:"fluent:text-t-24-filled",className:"fill-orange-400 size-6"})})}),(0,i.jsx)(ee.e,{content:"Your Library",delay:500,showArrow:!0,closeDelay:200,children:(0,i.jsx)(j.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"library"===l?"warning":"default",onClick:()=>t("library"),children:(0,i.jsx)(h.JO,{icon:"fluent:emoji-meme-24-regular",className:"fill-orange-400 size-5"})})}),(0,i.jsx)(ee.e,{content:"Faceswap",delay:500,showArrow:!0,closeDelay:200,children:(0,i.jsx)(j.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"faceswap"===l?"warning":"default",onClick:()=>t("faceswap"),children:(0,i.jsx)(h.JO,{icon:"tabler:replace-filled",className:"fill-orange-400 size-5"})})})]})]})},et=()=>{let{activePanel:e,activePanelIdx:l,onChangeTextPanel:t}=(0,p.C)();return e?(0,i.jsx)("div",{children:(0,i.jsx)(S.Y,{classNames:{input:"placeholder:text-white-400/25",inputWrapper:"!bg-black-500 rounded-lg"},fullWidth:!0,label:"Panel text",placeholder:"Add panel text",value:e.panel_config.text,onValueChange:a=>{t(l,e.id,a)},maxLength:120,isClearable:!0},"desktop-panel-text")}):null};var ea=t(85493);let es=e=>{let{isMobile:l}=e,{selectedTab:t,activePanel:a}=(0,p.C)();return a?(0,i.jsxs)("section",{className:"flex flex-1 flex-col size-full",children:[(0,i.jsx)(el,{}),(0,i.jsx)("div",{className:"flex flex-1 flex-col w-full min-h-0 overflow-hidden",children:(0,i.jsxs)("div",{className:"flex flex-1 flex-col gap-4 px-3 overflow-y-auto",children:["generate"===t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B,{isMobile:l}),(0,i.jsx)(ea.q,{})]}),"text"===t&&(0,i.jsx)(et,{}),"library"===t&&(0,i.jsx)($,{}),"faceswap"===t&&(0,i.jsx)(C,{})]})}),"generate"===t&&!l&&(0,i.jsx)(Y,{})]}):null};var ei=t(68880),en=t(45780),er=t(70240),ec=t(4680),eo=t(57102);let ed=()=>{var e,l,t,a;let s;let{postId:n,activePanelIdx:r}=(0,p.C)(),{data:c}=(0,N.yD)(null!=n?n:""),[o]=(0,N.NU)(),[d]=(0,N.Rp)();if(!c)return(0,i.jsx)("div",{className:"size-full flex items-center justify-center",children:(0,i.jsx)(ei.c,{})});let u=Object.values(null!==(a=null===(e=c.meme)||void 0===e?void 0:e.panels)&&void 0!==a?a:{}).find(e=>e.idx===r);(null==u?void 0:u.panel_type)==="faceswap"&&(s=u.panel_config);let m=null==u?void 0:u.panel_config,h=null==m?void 0:m.prompt;return(0,i.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,i.jsx)("header",{className:"my-2 flex flex-col gap-5",children:(0,i.jsx)(eo.s,{poster:c.by,isActiveContestEntry:(null===(t=c.meme)||void 0===t?void 0:null===(l=t.contest)||void 0===l?void 0:l.status)==="active",createdAt:c.created_at,publishedAt:c.updated_at})}),h&&(0,i.jsx)(ec.R,{prompt:h}),s&&(0,i.jsx)(er.Z,{panelData:s}),(0,i.jsx)("div",{children:(0,i.jsx)(en.I,{readOnly:!0,size:"md",postId:c.id,user:{id:""},deckPageId:"feed",initialVotes:c.votes,postVoteApi:o,deleteVoteApi:d})})]})},eu=()=>{let{postId:e,activePanel:l,activePanelIdx:t,contest:a,isGenerateDisabled:s,onClickGenerate:n}=(0,p.C)(),r=(0,w.useCallback)(()=>{l&&!s&&n(t,l)},[l,t,s,n]);if(!l)return null;let{isGenerating:c}=l.local;return(0,i.jsx)("div",{className:(0,d.cn)("w-full flex flex-col lg:hidden","min-h-96 max-h-96 overflow-y-scroll","border-white-400/10 border-t bg-black-400"),children:e?(0,i.jsx)("section",{className:"w-full p-4 pb-24",children:(0,i.jsx)(ed,{},e)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{className:"w-full flex gap-3 p-4",children:[(0,i.jsx)(H.j,{classNames:{input:"min-h-full max-h-full placeholder:text-white-400/40",inputWrapper:"pb-6 bg-black-300 rounded-xl overflow-hidden"}},"mobile-prompt"),(0,i.jsx)(j.A,{isIconOnly:!0,className:(0,d.cn)("text-md",a?"bg-violet-500":""),variant:"solid",color:"primary",radius:"full",isLoading:c,isDisabled:s,onClick:r,children:(0,i.jsx)(U.default,{src:Z.Z,alt:"Generate",className:"size-6"})},"mobile-generate")]}),(0,i.jsx)("section",{className:"w-full p-1 pb-24",children:(0,i.jsx)(es,{isMobile:!0})})]})})};var em=t(66975),eh=t(76295),ex=t(47777),ef=t(12972),ep=t(71987);let eg=e=>{let{postId:l}=e,t=async()=>{let e=encodeURIComponent("".concat((0,ep.L)()).concat((0,g.GY)(l)));window.open("https://x.com/intent/tweet?text=".concat(e),"_blank")};return(0,i.jsxs)(j.A,{fullWidth:!0,className:"flex items-center justify-center gap-2 rounded-md bg-blue-500 px-5 py-1 text-sm",onClick:t,children:[(0,i.jsx)("p",{className:"text-lg",children:"Share on"}),(0,i.jsx)(U.default,{src:ef.Z,alt:"X",className:"w-5"})]})};var ev=t(61737);let eb=e=>{let{postId:l,memeId:t,src:a,onClose:s}=e,[n]=(0,N.X_)(),[r,c]=(0,w.useState)(null),[o,d]=(0,w.useState)(!1),m=(0,w.useCallback)(e=>{c(e)},[]),h=(0,w.useCallback)(async()=>{try{if(!r)throw Error("Deck ID is missing");if(!l)throw Error("Post ID is missing");if(d(!0),!await n({deck_id:r,post_id:l}))throw Error()}catch(e){(0,em.yv)("Failed to add meme to deck",{variant:"error"})}finally{s(),d(!1)}},[s,l,r,n]);return(0,i.jsx)(eh.Z,{onClick:s,children:(0,i.jsxs)("form",{className:"relative flex w-full min-w-0 max-w-lg flex-col gap-3 rounded-xl bg-black-400 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("header",{className:"relative flex w-full items-center justify-end px-3 pt-3",children:(0,i.jsx)(j.A,{isIconOnly:!0,className:"rounded-full",variant:"light",size:"sm",onClick:s,children:(0,i.jsx)(U.default,{src:ev.Z,alt:"close",className:"w-3"})})}),(0,i.jsxs)("main",{className:"min-h-72 gap-7 flex flex-col items-center justify-center",children:[(0,i.jsx)("h1",{className:"text-xl -mb-2",children:"Meme Posted to the Feed \uD83C\uDF89"}),(0,i.jsx)(u.default,{href:(0,g.GY)(l),className:"size-40 md:size-52 z-40 rounded-md bg-black-100 object-contain",children:(0,i.jsx)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:a&&(0,i.jsx)(U.default,{draggable:!1,className:"absolute z-1 inset-0 size-full object-contain",src:a,alt:"Meme preview",width:640,height:640,sizes:"640px",quality:100})})}),(0,i.jsxs)("section",{className:"flex flex-col gap-5 p-3 items-center",children:[(0,i.jsx)(eg,{postId:l}),(0,i.jsxs)("div",{className:"flex w-1/2 items-center justify-center relative",children:[(0,i.jsx)("hr",{className:"w-full border-0.5 border-white-400/10"}),(0,i.jsx)("span",{className:"absolute px-2 bg-black-400 text-white-400/50",children:"or"})]}),(0,i.jsx)(ex.Z,{memeId:t.replace("meme:",""),imageId:void 0,selectedDeck:r,onSelectDeck:m})]})]}),(0,i.jsx)("footer",{className:"h-14 p-3 flex items-center justify-end",children:r&&(0,i.jsx)(j.A,{size:"sm",variant:"solid",color:"primary",isLoading:o,onClick:h,children:"Done"})})]})})};var ej=t(45064),ew=t(81374),ey=t(98314),eN=t(33548),ek=t(12967),eC=t(5522),ez=t(3276),eA=t.n(ez),e_=t(17179);(a=s||(s={})).NEW="new",a.DUPLICATE="duplicate",a.DOWNLOAD="download",a.DELETE="delete";let eS=()=>{let{postId:e,panels:l,activePanel:t,paneAspectRatio:a,selectedLayout:s,isCreatingProject:n,isDuplicating:r,isDeletingMeme:c,isDoingSomething:o,onClickNewProject:d,onClickDuplicateProject:u,onClickDelete:m}=(0,p.C)(),[x,f]=(0,w.useState)(!1),g=(0,w.useCallback)(async()=>{try{f(!0);let e=await (0,e_.jt)(l,s,a),i=new Blob([e],{type:"image/jpeg"});eA().saveAs(i,"".concat(null==t?void 0:t.panel_config.image.id,".jpg"))}catch(l){let e=(0,em.yv)((0,i.jsxs)("div",{className:"flex items-center gap-3",children:["Error downloading meme",(0,i.jsx)(j.A,{isIconOnly:!0,variant:"flat",color:"danger",size:"sm",className:"text-white-400",onClick:()=>{(0,em.sy)(e)},children:(0,i.jsx)(h.JO,{className:"size-5 ",icon:"mdi:close",color:"white"})})]}),{variant:"error",autoHideDuration:3e3})}finally{f(!1)}},[null==t?void 0:t.panel_config.image.id,a,l,s]),v=(0,w.useMemo)(()=>{let l=[];return o&&(l.push("duplicate"),l.push("duplicate"),l.push("delete")),e&&l.push("delete"),l},[o,e]);return t?(0,i.jsxs)(ew.F,{"aria-label":"Project actions",children:[(0,i.jsx)(ey.S,{children:(0,i.jsx)(j.A,{isIconOnly:!0,isLoading:n||r||x||c,className:"flex z-1",size:"sm",variant:"flat",children:(0,i.jsx)(h.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,i.jsxs)(eN.a,{disabledKeys:v,children:[(0,i.jsxs)(ek.d,{title:"Actions",showDivider:!0,children:[(0,i.jsx)(eC.W,{"aria-label":"New project",textValue:"New project",startContent:(0,i.jsx)(h.JO,{className:"size-5",icon:"tabler:plus"}),onClick:()=>d(),children:"New project"},"new"),(0,i.jsx)(eC.W,{"aria-label":"Duplicate project",textValue:"Duplicate project",startContent:(0,i.jsx)(h.JO,{className:"size-5",icon:"tabler:copy"}),onClick:()=>u(s,l),children:"Duplicate"},"duplicate"),(0,i.jsx)(eC.W,{"aria-label":"Download meme",textValue:"Download meme",startContent:(0,i.jsx)(h.JO,{className:"size-5",icon:"mingcute:download-line"}),onClick:g,children:"Download"},"download")]}),(0,i.jsx)(ek.d,{title:"Danger zone",children:(0,i.jsx)(eC.W,{"aria-label":"Delete project",textValue:"Delete project",color:"danger",startContent:(0,i.jsx)(h.JO,{className:"size-5",icon:"tabler:trash"}),onClick:m,children:"Delete"},"delete")})]})]}):null};var eD=t(91250);let eI=()=>{let{activePanel:e,postId:l,contest:t,isPosting:a,isPostDisabled:s,isUnpublishing:n,isDoingSomething:r,onClickUnpublish:c,onClickPublish:o,onClickSubmitToContest:d,onClickUnsubmitFromContest:u}=(0,p.C)(),{isEnded:m}=(0,eD.Y)(null!=t?t:{});return e?(0,i.jsxs)("div",{className:"flex gap-2.5 items-center z-1",children:[(0,i.jsx)(eS,{}),t?(0,i.jsx)(j.A,{size:"sm",variant:"flat",isDisabled:s||r||m,isLoading:l?n:a,className:l?"":"bg-violet-500",onClick:l?u:d,children:(0,i.jsx)("h3",{className:"text-sm",children:l?"Unsubmit":m?"Contest Ended":"Submit"})}):(0,i.jsx)(j.A,{size:"sm",variant:"flat",isDisabled:!l&&(s||r),isLoading:l?n:a,onClick:l?c:o,children:(0,i.jsx)("h3",{className:"text-sm",children:l?"Unpublish":"Publish"})})]}):null};var eT=t(86127),eO=t(15837);let eM={[L.L.One]:{label:"One Pane",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/one-pane.2f9a7f4d.svg",height:30,width:30,blurWidth:0,blurHeight:0}},[L.L.TwoVertical]:{label:"Two Vertical",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/two-pane-vertical.bcad13c4.svg",height:30,width:30,blurWidth:0,blurHeight:0}},[L.L.TwoHorizontal]:{label:"Two Horizontal",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/two-pane-horizontal.ad349fa3.svg",height:30,width:30,blurWidth:0,blurHeight:0}},[L.L.Four]:{label:"Four Panes",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/four-pane.09ada0ab.svg",height:30,width:30,blurWidth:0,blurHeight:0}}},eW=()=>{let{selectedLayout:e,onSelectPanelLayout:l,isCreatingProject:t,postId:a}=(0,p.C)();return(0,i.jsx)(eT.g,{size:"sm",value:e,isDisabled:t||!!a,selectedKeys:[e],defaultSelectedKeys:[L.L.One],startContent:(0,i.jsx)(U.default,{src:eM[e].icon,alt:eM[e].label,width:24,height:24}),classNames:{base:"min-w-20 max-w-20 sm:max-w-48",value:"hidden sm:block"},onChange:e=>{let t=e.target.value;t&&l(t)},"aria-label":"Panel Layout",children:Object.entries(eM).map(e=>{let[l,{label:t,icon:a}]=e;return(0,i.jsx)(eO.R,{value:l,"aria-label":t,startContent:(0,i.jsx)(U.default,{src:a,alt:t,width:24,height:24}),classNames:{title:"hidden sm:block"},children:t},l)})})};var eE=t(8836),eF=t(77269),eR=t(42441),eL=t(71072),eP=t(7602);let eJ=e=>{var l;let{meme:t}=e,a=(0,N.iS)(),s=(0,w.useMemo)(()=>{var e;return null===(e=a.currentData)||void 0===e?void 0:e.studio_config},[null===(l=a.currentData)||void 0===l?void 0:l.studio_config]),n=(0,w.useRef)(null);return(0,w.useEffect)(()=>{(async()=>{if(!s)return;let e=n.current;if(!e)return;let l=t.panels,a=t.panel_layout;if(!l||!a)return;let i=(0,O.xe)(l)[0];i&&await (0,e_.mr)({canvas:e,studioPanels:l,studioLayout:a,paneAspectRatio:i.local.selectedAspectRatio})})()},[s,t.panel_layout,t.panels]),(0,i.jsx)("div",{className:"size-full flex items-center justify-center",children:(0,i.jsx)("canvas",{ref:n,className:"w-full max-h-full object-contain"})})},eV=e=>{let{meme:l,style:t}=e,{composedMemeId:a,onClickHistory:s}=(0,p.C)(),n=(0,w.useMemo)(()=>l.id===a,[a,l.id]),r=(0,w.useMemo)(()=>{var e;return(null!==(e=l.posts)&&void 0!==e?e:[]).length>0},[l.posts]);return(0,i.jsx)("div",{style:t,className:"w-full pb-3 cursor-pointer",onClick:()=>s(l),children:(0,i.jsxs)("div",{className:(0,d.cn)("size-full relative bg-black-0 rounded-md border-2 overflow-hidden",n?"border-blue-500":"border-white-400/10"),children:[(0,i.jsx)(eJ,{meme:l}),!r&&(0,i.jsx)(eP.z,{size:"sm",variant:"solid",radius:"sm",color:"default",className:"absolute top-1.5 right-1 font-medium shadow-2xl",children:"Draft"})]})})};var eH=t(10469);let eB=()=>{var e;let l=(0,N.iS)(),[t,a]=(0,w.useState)(1),{data:s,isFetching:n,isError:r}=(0,N.sb)({start:20*(t-1),limit:20,sources:["generated"]}),c=(0,w.useMemo)(()=>(null!=s?s:[]).filter(e=>!e.is_saved),[s]),o=(0,w.useMemo)(()=>{var e;return null===(e=l.currentData)||void 0===e?void 0:e.studio_config},[null===(e=l.currentData)||void 0===e?void 0:e.studio_config]),{isSidebarMenuOpen:d,composedMemeId:u}=(0,p.C)(),m=(0,w.useCallback)(()=>{n||r||a(e=>{let l=!s||0===s.length,t=(null!=s?s:[]).length<20*e;return l||t?e:e+1})},[s,r,n]),h=(0,w.useCallback)(e=>{let{clientHeight:l,scrollHeight:t,scrollTop:a}=e;l+a>=t-400&&m()},[m]),x=(0,w.useCallback)(e=>{let{index:l}=e,a=(null!=s?s:[]).length<20*t;if(l===c.length)return a?0:64;let i=c[l],n=null==i?void 0:i.panels,r=null==i?void 0:i.panel_layout;if(n&&r&&o){let e=(0,O.xe)(n)[0];if(!e)return 178;let l=e.local.selectedAspectRatio,t=(0,eH.rf)(r,l),{canvasWidth:a,canvasHeight:s}=(0,eH.GJ)(r,t);return 269/(a/s)+12}return 178},[o,s,c,t]),f=(0,w.useCallback)(e=>{let{rowIndex:l,key:t,style:a}=e;if(l===c.length)return n?(0,i.jsx)("div",{style:a,className:"flex w-full justify-center px-3",children:(0,i.jsx)(ei.c,{})},t):(0,i.jsx)("div",{},t);let s=c[l];return s?(0,i.jsx)(eV,{meme:s,style:a},t):(0,i.jsx)("div",{},t)},[c,n]);return d?(0,i.jsxs)("div",{className:"flex-1 flex-col gap-4 flex border-r-1 border-black-100 overflow-hidden",children:[0===c.length&&(0,i.jsx)("p",{className:"mx-3 text-white-400/50 text-sm",children:"No images generated yet"}),(0,i.jsx)("div",{className:"flex-1 min-h-0",children:(0,i.jsx)(eR.ZP,{children:e=>{let{height:l}=e;return(0,i.jsx)(eL.rj,{scrollDirection:"vertical",className:"px-3 overflow-x-hidden overflow-y-auto",width:293,height:l,rowCount:c.length+1,rowHeight:x,columnCount:1,columnWidth:269,overscanColumnCount:10,onScroll:h,cellRenderer:f})}})})]}):null},eU=()=>{let{data:e}=(0,N.iS)(),l=(0,w.useMemo)(()=>(0,eF.br)(eF.mQ.Home,!1),[]),{isSidebarMenuOpen:t,toggleIsSidebarMenuOpen:a,isCreatingProject:s,onClickNewProject:n}=(0,p.C)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eh.Z,{isOpen:t,onClick:a,children:(0,i.jsx)("div",{})}),(0,i.jsx)("aside",{className:(0,d.cn)("fixed top-0 left-0 h-full w-72 z-[100]","bg-black-300 shadow-2xl","transform transition-transform duration-200",{"translate-x-0":t,"-translate-x-full":!t}),children:(0,i.jsxs)("div",{className:"size-full flex flex-col gap-3 pb-3",children:[(0,i.jsx)("section",{className:"flex flex-col px-3",children:(0,i.jsxs)("header",{className:"h-14 min-h-14 flex items-center justify-between gap-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(j.A,{isIconOnly:!0,size:"sm",variant:"light",onClick:a,children:(0,i.jsx)(h.JO,{icon:"mdi:menu",className:"size-6"})}),(0,i.jsx)(ej.B,{keepStudio:!0})]}),e&&(0,i.jsx)(j.A,{as:u.default,isIconOnly:!0,size:"sm",variant:"light",href:"/u/".concat(e.handle),children:(0,i.jsx)(eE.h,{size:"sm",name:e.handle,src:e.avatar})})]})}),(0,i.jsxs)("section",{className:"flex flex-col gap-3 pb-3 px-3",children:[(0,i.jsx)(j.A,{size:"md",variant:"solid",color:"primary",className:"min-w-0",isLoading:s,onClick:()=>n(),startContent:!s&&(0,i.jsx)(h.JO,{className:"size-5",icon:"tabler:plus"}),children:"New project"}),(0,i.jsx)(j.A,{as:u.default,size:"md",variant:"flat",startContent:(0,i.jsx)(h.JO,{icon:l,className:"size-5"}),href:"/home",children:"Return home"})]}),(0,i.jsx)("div",{className:"border-b px-3 border-white-400/10",children:(0,i.jsx)("h3",{className:"text-sm text-white-400/50",children:"History"})}),(0,i.jsx)(eB,{})]})})]})},eZ=()=>{let{toggleIsSidebarMenuOpen:e}=(0,p.C)();return(0,i.jsx)(j.A,{isIconOnly:!0,size:"sm",variant:"light",onClick:e,children:(0,i.jsx)(h.JO,{icon:"mdi:menu",className:"size-6"})})},eY=()=>(0,i.jsx)("header",{className:"flex w-full flex-col justify-center gap-4 h-14 min-h-14 px-3 lg:flex-row lg:justify-between",children:(0,i.jsxs)("div",{className:"flex flex-row w-full items-center gap-2 justify-between",children:[(0,i.jsxs)("div",{className:"flex gap-1 items-center text-large font-medium select-none z-[1]",children:[(0,i.jsx)(eZ,{}),(0,i.jsx)(eU,{}),(0,i.jsx)(ej.B,{})]}),(0,i.jsx)("div",{className:"sm:absolute inset-x-0 flex justify-center z-0 gap-2",children:(0,i.jsx)(eW,{})}),(0,i.jsx)(eI,{})]})}),eG=e=>{let{aspectRatio:l=1,children:t}=e;return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{style:{aspectRatio:l},className:"square",children:t})})};var eK=t(31610),eq=t(30778);let eX=()=>{let{selectedLayout:e,canvasAspectRatio:l,activePanel:t}=(0,p.C)(),a=(0,w.useMemo)(()=>eq.i4[e],[e]);return(0,i.jsx)(eG,{aspectRatio:l,children:(0,i.jsx)("div",{className:"size-full flex items-center justify-center overflow-hidden max-h-full max-w-full min-h-0",children:t?(0,i.jsx)("div",{className:(0,d.cn)("max-h-full max-w-full grid",eq.J2[e]),children:Array.from({length:a}).map((e,l)=>(0,i.jsx)(eK.a,{index:l},l))}):(0,i.jsx)(ei.c,{})})})},eQ=()=>{let{isPostModalOpen:e,postId:l,composedMemeId:t,rawSrc:a,onClosePostModal:s}=(0,p.C)();return(0,i.jsxs)("div",{className:"fixed z-50 flex flex-row items-center justify-between h-screen overflow-y-auto dot-grid inset-x-0 min-h-screen max-h-screen t-0",children:[(0,i.jsxs)("div",{className:"relative flex flex-col flex-1 size-full min-h-0 overflow-hidden",children:[(0,i.jsx)(eY,{}),(0,i.jsx)("main",{className:"size-full relative flex justify-end flex-1 max-w-[100vw]",children:(0,i.jsxs)("div",{className:"flex flex-col size-full transition-all",children:[(0,i.jsx)("div",{className:"size-full min-h-44 overflow-hidden p-1 pb-3 sm:p-3 lg:px-6 lg:py-3 flex flex-row justify-center",children:(0,i.jsx)(eX,{})}),(0,i.jsx)(v,{}),(0,i.jsx)(eu,{})]})}),e&&l&&t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c(),{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:200}),(0,i.jsx)(eb,{postId:l,memeId:t,src:a,onClose:s})]})]}),l?(0,i.jsx)("div",{className:"p-3 pl-0 h-full hidden lg:flex",children:(0,i.jsx)("div",{className:"p-3 rounded-2xl bg-[#0F0F0F] border-1 border-black-100 w-96 max-h-full flex-none flex-col gap-4 lg:h-full",children:(0,i.jsx)(ed,{},l)})}):(0,i.jsx)("div",{className:"p-3 pl-0 h-full hidden lg:flex",children:(0,i.jsx)("div",{className:"rounded-2xl bg-[#0F0F0F] border-1 border-black-100 w-96 max-h-full flex-none flex-col gap-4 lg:h-full",children:(0,i.jsx)(es,{})})})]})};var e$=t(99555);function e0(){var e,l,t,a,s;let r=(0,n.useSearchParams)(),c=null!==(e=r.get("remix"))&&void 0!==e?e:void 0,o=null!==(l=r.get("meme"))&&void 0!==l?l:void 0,d=null!==(t=r.get("character"))&&void 0!==t?t:void 0,u=null!==(a=r.get("aesthetic"))&&void 0!==a?a:void 0,m=null!==(s=r.get("contestId"))&&void 0!==s?s:void 0,{socket:h}=(0,e$.s)({showToast:!0}),{currentData:x}=(0,N.iS)(),{data:f}=(0,N.sb)({start:0,limit:20,sources:["generated"]});return h&&x&&x.studio_config&&window.localStorage?(0,i.jsx)(p.L,{socket:h,profile:x,history:f,queryParams:{memeId:o,remixMemeId:c,characterId:d,aestheticId:u,contestId:m},children:(0,i.jsx)(eQ,{})}):null}},14074:function(e,l,t){"use strict";t.d(l,{U:function(){return v}});var a=t(62284),s=t(46231),i=t(46902),n=t(7563),r=t(87335),c=t(68880),o=t(88938),d=t(23405),u=t(66975),m=t(59297),h=t(96690),x=t(10469),f=t(99378);let p=async e=>new Promise((l,t)=>{let a=new Image,s=new FileReader;s.onload=()=>{a.src=s.result},a.onload=()=>{let t=(0,x.vO)(a.width,a.height),{paneWidth:s,paneHeight:i}=(0,x.rf)(h.L.One,t),n=document.createElement("canvas");n.width=s,n.height=i;let r=n.getContext("2d");if(!r)return;let c=a.width,o=a.height;(0,f.h)({ctx:r,image:a,targetWidth:s,targetHeight:i,imageWidth:c,imageHeight:o}),l({base64:n.toDataURL(e.type),aspectRatio:t,targetWidth:s,targetHeight:i})},s.onerror=e=>{t(e)},s.readAsDataURL(e)});var g=t(25845);let v=e=>{let{initialSrc:l,imageRef:t,bgColor:h="bg-black-300",onParseImage:x,onClickDeleteMeme:f}=e,[v,b]=(0,m.useState)(l),[j,w]=(0,m.useState)(!1),[y,N]=(0,m.useState)(!1),k=(0,m.useCallback)(async e=>{if(e){if((0,u.sy)(),e.length>10){(0,u.yv)("Please upload 10 files or less",{variant:"error"});return}for(let l=0;l<e.length;l++)if(e[l].size>33554432){(0,u.yv)("Please upload files 32MB or less",{variant:"error"});return}w(!0);try{if(0===e.length)return;let l=e[0],{base64:t,aspectRatio:a,targetWidth:s,targetHeight:i}=await p(l),n=t.split(",")[1],r=Uint8Array.from(atob(n),e=>e.charCodeAt(0));await x(r,s,i,a),b(t)}catch(e){(0,u.yv)("Error uploading files",{variant:"error"})}finally{w(!1)}}},[x]),C=(0,m.useCallback)(async()=>{N(!0);try{await f(),b(null)}catch(e){}finally{N(!1)}},[f]);return(0,a.jsxs)(i.w,{radius:"md",shadow:"none",className:(0,d.cn)(h,"border-1 border-transparent transition-all",v?"":"hover:border-orange-400"),children:[(0,a.jsx)("div",{className:(0,d.cn)("relative size-full max-h-full max-w-full aspect-square flex items-center justify-center",v?"":"cursor-pointer"),children:v?(0,a.jsx)(n.J,{ref:t,alt:"Image input",classNames:{wrapper:"size-full min-w-full min-h-full",img:"size-full object-cover rounded-none"},src:v}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.JO,{className:"size-8",icon:"hugeicons:image-upload-01"}),(0,a.jsx)("input",{type:"file",multiple:!1,accept:g.RL,className:"absolute inset-0 size-full cursor-pointer opacity-0",onChange:e=>k(e.target.files)})]})}),(0,a.jsxs)(r.i,{className:"gap-4 justify-end min-h-10 overflow-hidden absolute w-full z-10 -top-2.5 -right-2.5",children:[j?(0,a.jsx)(c.c,{size:"sm",color:"warning"}):null,v&&!j?(0,a.jsx)(o.A,{size:"sm",variant:"flat",radius:"full",className:"backdrop-blur-sm bg-red-900/70",isIconOnly:!0,color:"danger",isLoading:y,onClick:C,children:(0,a.jsx)(s.JO,{className:"size-5 !text-red-400",icon:"ic:baseline-close"})}):null]})]})}},12890:function(e,l,t){"use strict";t.d(l,{o:function(){return c}});var a=t(62284),s=t(68880),i=t(44593),n=t(91151);let r={default:3,1100:3,700:2,500:1},c=e=>{let{items:l,isLoading:t,isFetching:c,hasFetched:o,hasSearched:d,noResultsMessage:u="No memes",className:m="relative overflow-hidden pl-3 pt-3",breakpoints:h=r,renderItem:x}=e;return(0,a.jsxs)("div",{className:m,children:[!c&&0===l.length&&(o||d)?(0,a.jsx)("div",{className:"text-sm text-white-400/50",children:u}):null,t?(0,a.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,a.jsx)(s.c,{})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{breakpointCols:h,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:l.map(x)}),c&&l.length>=n.I&&(0,a.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,a.jsx)(s.c,{})})]})]})}},55578:function(e,l,t){"use strict";t.d(l,{B:function(){return i}});var a=t(62284),s=t(23405);let i=e=>{let{bg:l="bg-black-400",trailColor:t="#8B5CF6",trailWidth:i=500,staticBorderColor:n,rounded:r="rounded-2xl",hideTrail:c=!1,children:o,onClick:d}=e;return(0,a.jsxs)(a.Fragment,{children:[c?null:(0,a.jsx)("div",{className:(0,s.cn)("size-full box-border","absolute inset-0","border-2 border-transparent",r),children:(0,a.jsx)("div",{className:"trail",style:{width:i,"--trail-color":t}})}),(0,a.jsx)("div",{className:(0,s.cn)("size-full min-h-full box-border z-10","overflow-hidden","border-2 border-transparent",r,null!=n?n:""),onClick:d,children:(0,a.jsx)("div",{className:(0,s.cn)("size-full flex flex-col gap-1",l,r),children:o})})]})}},60521:function(e,l,t){"use strict";t.d(l,{s:function(){return c}});var a=t(62284),s=t(23405),i=t(55578),n=t(12010);function r(e){return e.toString().padStart(2,"0")}let c=e=>{let{contest:l,startContent:t,flex:c="flex",h:d="h-full",w:u="w-auto",p:m="px-2 sm:px-3 md:px-4",bg:h="bg-black-300",rounded:x="rounded-2xl",hideTrail:f=!1}=e,{timeLeft:p}=(0,n.h)({contest:l}),{days:g,hours:v,minutes:b,seconds:j}=p;return"ended"===l.status?null:(0,a.jsx)("div",{className:(0,s.cn)("relative overflow-hidden","flex items-center justify-center h-full",h,x,"h-full","min-h-full"),children:(0,a.jsx)(i.B,{staticBorderColor:f?"border-transparent":"border-white-400/10",trailWidth:220,trailColor:"active"===l.status?"#8B5CF6":"#006FEE",rounded:x,hideTrail:f,bg:h,children:(0,a.jsxs)("div",{className:(0,s.cn)("size-full items-center justify-between",c,t?"justify-between":"justify-center",m,d,u),children:[t,(0,a.jsxs)("div",{className:"flex-1 flex items-center justify-center gap-3",children:[(0,a.jsx)(o,{number:r(g),label:"day"}),(0,a.jsx)(o,{number:r(v),label:"hour"}),(0,a.jsx)(o,{number:r(b),label:"min"}),(0,a.jsx)(o,{number:r(j),label:"sec"})]})]})})})},o=e=>{let{number:l,label:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-0.5 text-center min-w-5",children:[(0,a.jsx)("p",{className:(0,s.cn)("w-6 text-center","font-semibold leading-5 md:leading-6 tracking-wide text-sm md:text-base","text-white-400 bg-black-400 rounded-md"),children:l}),(0,a.jsx)("p",{className:"text-white-400/60 font-normal leading-3 uppercase text-[10px] tracking-tight",children:(0,a.jsx)("span",{children:t})})]})}},53495:function(e,l,t){"use strict";t.d(l,{Y:function(){return d}});var a=t(62284),s=t(23405),i=t(2793),n=t(90241),r=t(15219),c=t(90028),o=t(14751);let d=e=>{var l,t,d,u,m,h;let{item:x,isSelected:f,showCreator:p=!1,onClick:g}=e,{data:v}=(0,r.iS)(),{onOpenImage:b}=(0,c.g)(),j=void 0!==x.post_type?(0,o.zD)(x):(0,o.sw)(x,v);return(0,a.jsx)("article",{className:(0,s.cn)("relative w-full cursor-pointer select-none overflow-hidden rounded-lg border-2",f?"border-blue-500":"border-transparent"),onClick:()=>g?g():b(x.id),children:(0,a.jsxs)("div",{className:"group flex w-full flex-col",children:["image"===j.source?(0,a.jsx)(n.g,{type:j.source,src:j.url,alt:x.id,canvasWidth:null!==(l=j.width)&&void 0!==l?l:1152,canvasHeight:null!==(t=j.height)&&void 0!==t?t:1152,imageWidth:null!==(d=j.width)&&void 0!==d?d:1152,imageHeight:null!==(u=j.height)&&void 0!==u?u:1152,topText:null,bottomText:null,centerText:null,className:"z-0 size-full bg-white-400/5"}):(0,a.jsx)(i.default,{className:"z-0 size-full bg-white-400/5",src:j.url,alt:x.id,width:null!==(m=j.width)&&void 0!==m?m:1152,height:null!==(h=j.height)&&void 0!==h?h:1152}),p&&(0,a.jsx)("div",{className:"absolute inset-0 z-1 flex select-none items-end px-1.5 py-1 opacity-0 transition-opacity group-hover:opacity-100",children:(0,a.jsx)("div",{className:"flex flex-1 items-center gap-2",children:(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate p-1 text-sm font-semibold drop-shadow-[0.5px_0.5px_1px_rgba(0,0,0,80)]",children:[(0,a.jsx)(i.default,{src:x.by.avatar,alt:x.by.handle,className:"rounded-full hover:scale-105",width:24,height:24}),x.by.handle]})})})]})})}},77269:function(e,l,t){"use strict";var a,s;function i(e){return"Trending"===e}t.d(l,{W1:function(){return i},br:function(){return n},c1:function(){return r},mQ:function(){return a}}),(0,t(51815).Cb)("all"),(s=a||(a={})).Home="Home",s.Trending="Trending",s.Library="My Library",s.Templates="Templates",s.Notifications="Notifications",s.Profile="Profile";let n=(e,l)=>{switch(e){case"Home":return l?"fluent:home-24-filled":"fluent:home-24-regular";case"Trending":return l?"ph:fire-fill":"ph-fire";case"My Library":return l?"fluent:emoji-meme-24-filled":"fluent:emoji-meme-24-regular";case"Templates":return l?"mdi:puzzle":"mdi:puzzle-outline";case"Profile":return l?"fluent:person-24-filled":"fluent:person-24-regular";case"Notifications":return l?"mingcute:notification-newdot-fill":"mingcute:notification-newdot-line"}},r=(e,l)=>{switch(e){case"Home":return"/home";case"Trending":return"/trending";case"My Library":return"/library";case"Templates":return"/templates";case"Profile":return"/u/".concat(l);case"Notifications":return"/notifications"}}},76295:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var a=t(62284),s=t(23405);let i=e=>{let{isOpen:l=!0,children:t,onClick:i}=e;return(0,a.jsx)("div",{className:(0,s.cn)("modal-overlay","fixed inset-0 z-50 flex size-full max-h-full min-h-0 items-start xs:items-center justify-center overflow-y-auto overflow-x-hidden","bg-white-100 px-4 py-[10vh]","transition-opacity duration-100",{"opacity-0":!l,"opacity-100":l,"pointer-events-none":!l}),onClick:i,children:t})}},90241:function(e,l,t){"use strict";t.d(l,{g:function(){return c}});var a=t(62284),s=t(23405),i=t(2793),n=t(59297),r=t(17179);let c=e=>{let{type:l,src:t,topText:c,bottomText:o,centerText:d,id:u="image-canvas",imageWidth:m=1152,imageHeight:h=1152,canvasWidth:x=1152,canvasHeight:f=1152,alt:p="Generated Image",progress:g=100,className:v=""}=e,b=(0,n.useRef)(new Image),j=(0,n.useRef)(null),w=(0,n.useMemo)(()=>g&&g<100&&g>0,[g]);return(0,n.useEffect)(()=>{let e=b.current,a=j.current;if(a){if(t||d)"image"===l||"faceswap"===l?(e.onload=()=>{(0,r.el)({image:e,canvas:a,topText:c,bottomText:o,centerText:null,canvasWidth:x,canvasHeight:f,imageWidth:m,imageHeight:h})},e.height=h,e.width=m,e.src=t):"text"===l&&(e.height=h,e.width=m,(0,r.el)({image:e,canvas:a,topText:null,bottomText:null,centerText:d,canvasWidth:x,canvasHeight:f,imageWidth:m,imageHeight:h}));else{(0,r.el)({image:e,canvas:a,topText:null,bottomText:null,centerText:null,canvasWidth:1152,canvasHeight:1152,imageWidth:1152,imageHeight:1152});return}}},[o,f,x,d,h,m,t,c,l]),(0,a.jsx)("div",{id:u,className:"size-full transition-all flex items-center justify-center",children:w?(0,a.jsx)(i.default,{draggable:!1,priority:!0,src:t,alt:p,style:{borderRadius:"0px",filter:g<100?"blur(".concat(70/g,"px)"):"none",transition:"filter 0.5s"},className:(0,s.cn)("transition-all object-cover","w-[".concat(m,"px] h-[").concat(h,"px]"),v),width:m,height:h}):(0,a.jsx)("canvas",{ref:j,className:(0,s.cn)("size-full object-cover",v)})})}},45064:function(e,l,t){"use strict";t.d(l,{B:function(){return r}});var a=t(62284),s=t(23405),i=t(2793),n=t(18957);let r=e=>{let{keepMemeDeck:l=!1,keepStudio:t=!1}=e;return(0,a.jsxs)("div",{className:"flex items-center h-8 min-h-8",children:[(0,a.jsx)(i.default,{priority:!0,src:n.Z,alt:"Meme Deck",className:(0,s.cn)("h-8 w-auto xl:block",l?"":"hidden"),draggable:!1}),(0,a.jsx)("h1",{className:(0,s.cn)("text-stone-300 text-lg sm:block",t?"":"hidden"),children:"Studio"})]})}},31610:function(e,l,t){"use strict";t.d(l,{a:function(){return f}});var a=t(62284),s=t(35324),i=t(23405),n=t(77618),r=t(90241),c=t(46902),o=t(64392),d=t(2846),u=t(20102);let m={[d.By.WAITING]:"Waiting in queue...",[d.By.STARTED]:"Running...",[d.By.COMPLETED]:"Completed"},h=e=>{let{index:l,isInGrid:t=!1}=e,{activeJobStatus:s,panels:r,contest:d}=(0,u.C)(),h=r[l];if(!h)return null;let{src:x}=h.local;return(0,a.jsx)(n.E.div,{className:(0,i.cn)("absolute w-full flex items-center justify-center",t?"bottom-5":"bottom-10"),initial:{opacity:0,scale:.85},animate:{opacity:x?0:1,scale:x?.9:1,transition:{duration:.3}},exit:{opacity:0,scale:.9},children:(0,a.jsx)(c.w,{shadow:"none",className:(0,i.cn)("w-48 h-12 mx-3 p-2","text-sm flex flex-row justify-center items-center gap-2 rounded-xl border-2",d&&"active"===d.status?"border-violet-400":"border-orange-400"),children:(0,a.jsx)(o.M,{mode:"wait",children:(0,a.jsx)(n.E.h2,{className:(0,i.cn)("truncate select-none",d&&"active"===d.status?"text-violet-400":"text-orange-400"),initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:m[s]},s)})})})};var x=t(30778);let f=e=>{var l;let{index:t,hideborder:c=!1,isInGrid:o=!1}=e,{activePanelIdx:d,panels:m,selectedLayout:f,paneDimensions:p,contest:g,onClickPane:v}=(0,u.C)(),b=m[t],j=d===t;if(!b)return null;let{src:w,progress:y,isGenerating:N}=b.local,k=b.panel_config.image,{top_text:C,bottom_text:z}=null!==(l=b.panel_config.text_overlay)&&void 0!==l?l:{},A=x.WN[f];return(0,a.jsxs)("div",{style:{aspectRatio:p.paneWidth/p.paneHeight},className:(0,i.cn)(A,"relative flex-1 overflow-hidden mx-auto my-0 bg-black-400",c?"border-none":"border-3",j?g&&"active"===g.status?"border-violet-400":"border-orange-400":"border-transparent"),onClick:()=>v(t),children:[N&&!w&&(0,a.jsx)(n.E.div,{className:"size-full flex items-center justify-center backdrop-blur-lg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(s.X,{className:"size-full opacity-50"})}),N&&(0,a.jsx)(h,{index:t,isInGrid:o}),(0,a.jsx)(n.E.div,{className:"size-full max-h-full flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)(r.g,{type:b.panel_type,src:w||k.source_url,topText:null!=C?C:"",progress:N?y:100,bottomText:null!=z?z:"",centerText:b.panel_config.text,imageWidth:k.width,imageHeight:k.height,canvasWidth:p.paneWidth,canvasHeight:p.paneHeight},w)})]})}},95279:function(e,l,t){"use strict";t.d(l,{d:function(){return m}});var a=t(62284),s=t(46231),i=t(12863),n=t(23405),r=t(88938),c=t(15837),o=t(59297),d=t(35976),u=t(15219);let m=e=>{var l;let{aestheticId:t,onSelect:m,hideDescription:h=!1,isMobile:x=!1,isSmall:f=!1,isDisabled:p=!1}=e,g=(0,u.iS)(),v=(0,o.useMemo)(()=>{var e;return null===(e=g.currentData)||void 0===e?void 0:e.studio_config},[null===(l=g.currentData)||void 0===l?void 0:l.studio_config]),b=(0,o.useMemo)(()=>v?v.aesthetics.find(e=>e.id===t):null,[t,v]),j=(0,o.useMemo)(()=>{var e;return h?null:null!==(e=null==b?void 0:b.description)&&void 0!==e?e:"Applies a style to the prompt"},[h,null==b?void 0:b.description]),[w,y]=(0,o.useState)(!1),[N,k]=(0,o.useState)("No style");(0,d.y)({locked:w});let C=(0,o.useCallback)(e=>{if(e||m(null),!v)return;let l=v.aesthetics.find(l=>l.id===e);m(null!=l?l:null)},[v,m]);return v?(0,a.jsx)(i.d,{"aria-label":"Aesthetic",label:f?null:"Style",placeholder:N,description:j,classNames:{base:f?"flex-1":"w-full",popoverContent:(0,n.cn)("absolute transform xs:left-1/2 xs:-translate-x-1/2","bg-[#0F0F0F] border-1 border-black-100 min-w-72 sm:min-w-[340px]"),listboxWrapper:"min-h-80 sm:min-h-[400px]"},inputProps:{classNames:{input:f?"!text-xs truncate":"",inputWrapper:f?"bg-black-300":"",description:"truncate"}},selectedKey:t,size:f?"sm":"md",radius:f?"full":"md",onFocus:e=>{x&&e.preventDefault()},onOpenChange:e=>{y(e),e?k("Type to filter"):k("No style")},className:"z-0",isClearable:!1,isDisabled:p,endContent:b&&!p?(0,a.jsx)(r.A,{size:"sm",isIconOnly:!0,variant:"flat",className:f?"bg-black-300":"",onClick:()=>C(null),children:(0,a.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}):null,onSelectionChange:C,children:v.aesthetics.map(e=>(0,a.jsx)(c.R,{"aria-label":e.name,textValue:e.name,className:"flex flex-column justify-center gap-2",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-base font-semibold truncate",children:e.name}),(0,a.jsx)("span",{className:"text-xs text-white-400/50 truncate",children:e.description})]})},e.id))}):null}},62486:function(e,l,t){"use strict";t.d(l,{Z:function(){return r}});var a=t(62284),s=t(59297),i=t(95279),n=t(20102);let r=e=>{var l;let{lockedAestheticId:t="",isMobile:r=!1,isMiniStudio:c=!1}=e,{activePanel:o,activePanelIdx:d,dispatchPanelAction:u}=(0,n.C)(),m=(0,s.useMemo)(()=>{var e,l;return t||(null!==(l=null==o?void 0:null===(e=o.panel_config.prompt)||void 0===e?void 0:e.aesthetic)&&void 0!==l?l:"")},[null==o?void 0:null===(l=o.panel_config.prompt)||void 0===l?void 0:l.aesthetic,t]),h=(0,s.useCallback)(e=>{var l,t;u({idx:d,action:"update-panel",panel_config:{prompt:{aesthetic:null!==(l=null==e?void 0:e.id)&&void 0!==l?l:null}}}),localStorage.setItem("selectedAesthetic",null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"")},[d,u]);return(0,a.jsx)(i.d,{aestheticId:m,onSelect:h,isMobile:r,isSmall:c,hideDescription:c,isDisabled:!!t||!o})}},25854:function(e,l,t){"use strict";t.d(l,{z:function(){return x}});var a=t(62284),s=t(46231),i=t(86127),n=t(88938),r=t(8836),c=t(15837),o=t(23405),d=t(59297),u=t(35976),m=t(85908);let h=e=>{let l="",t=[];for(let a of e)a.grouping!==l&&(t.push({id:Math.random().toString(),grouping:a.grouping,isDivider:!0}),l=a.grouping),t.push(a);return t},x=e=>{let{characterId:l,onSelect:t,isMiniStudio:x,showClearButton:f=!0,isDisabled:p=!1}=e,{characters:g}=(0,m.Z)(),[v,b]=(0,d.useState)(!1);(0,u.y)({locked:v});let j=(0,d.useMemo)(()=>g.reduce((e,l)=>{let t=l.grouping;return e[t]||(e[t]=0),e[t]++,e},{}),[g]),w=(0,d.useMemo)(()=>h(g.slice().filter(e=>e.enabled).filter(Boolean).sort((e,l)=>"normal"===e.id?1:"normal"===l.id?-1:0).map(e=>{var t;return{...e,avatar:null!==(t=e.thumbnail)&&void 0!==t?t:"",isSelected:l===e.id,isDivider:!1}}).sort((e,l)=>{let t=e.grouping.toUpperCase(),a=l.grouping.toUpperCase();return"ELECTION"===t||t<a?-1:t>a?1:0})),[g,l]),y=(0,d.useCallback)(e=>{let l=g.find(l=>l.id===e);l&&t(l)},[g,t]),N=(0,d.useMemo)(()=>[l.replace("ai_character:","")].filter(Boolean),[l]);return(0,a.jsx)(i.g,{items:w,isOpen:v,onOpenChange:b,placeholder:"Select a character","aria-label":"Character",disabled:p,classNames:{base:x?"flex-1":"w-full",trigger:x?"min-h-0 h-8 px-1 bg-black-300":"h-[80px]",popoverContent:"bg-[#0F0F0F] border-1 border-black-100 min-w-72 sm:min-w-[340px]",listbox:"h-fit selector-list-box",listboxWrapper:"min-h-80 sm:min-h-[400px]"},radius:x?"full":"md",isDisabled:p,defaultSelectedKeys:["pepe"],selectedKeys:N,onChange:e=>y(e.target.value),endContent:l&&f&&(0,a.jsx)(n.A,{size:"sm",isIconOnly:!0,variant:"flat",onClick:()=>t(null),children:(0,a.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}),renderValue:e=>e.map(e=>{var l,t,s,i,n;return(null===(l=e.data)||void 0===l?void 0:l.isDivider)?null:(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center",x?"gap-2":"gap-4"),children:[(0,a.jsx)(r.h,{alt:(null===(t=e.data)||void 0===t?void 0:t.id)+"-avatar",className:(0,o.cn)("shrink-0",x?"size-4 max-w-6 max-h-6":""),radius:x?"full":"md",size:x?"sm":"lg",src:null===(s=e.data)||void 0===s?void 0:s.avatar}),x?(0,a.jsx)("div",{className:"font-semibold text-xs truncate",children:null===(i=e.data)||void 0===i?void 0:i.name}):(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-tiny text-default-600",children:"Character"}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:null===(n=e.data)||void 0===n?void 0:n.name})]})]},e.key)}),children:e=>e.isDivider?(0,a.jsx)(c.R,{textValue:e.grouping,hideSelectedIcon:!0,isReadOnly:!0,"aria-disabled":!0,className:"col-span-full",classNames:{base:"bg-transparent hover:!bg-transparent cursor-default"},children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)("h3",{className:"uppercase text-xs tracking-wide font-medium text-white-400/50 select-none",children:e.grouping}),(0,a.jsx)("div",{className:"text-xs font-normal text-white-400/70 bg-white-400/10 rounded-full px-1 py-0.5 min-w-[20px] text-center",children:j[e.grouping]}),(0,a.jsx)("hr",{className:"flex-1 opacity-10"},"divider-".concat(Math.random()))]})},null==e?void 0:e.id):(0,a.jsx)(c.R,{"aria-label":null==e?void 0:e.name,color:e.isSelected?"primary":"default",variant:"solid","data-hover":!0,hideSelectedIcon:!0,classNames:{base:"flex-1 flex flex-col gap-0 ".concat(e.isSelected?"bg-primary-400":""),wrapper:"flex flex-col"},children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,a.jsx)(r.h,{alt:(null==e?void 0:e.id)+"-avatar",radius:"md",size:"lg",src:null==e?void 0:e.avatar}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"text-sm font-semibold",children:null==e?void 0:e.name})})]})},null==e?void 0:e.id)})}},96260:function(e,l,t){"use strict";t.d(l,{U:function(){return r}});var a=t(62284),s=t(59297),i=t(25854),n=t(20102);let r=e=>{var l,t;let{lockedCharacterId:r="",isMiniStudio:c=!1}=e,{activePanel:o,activePanelIdx:d,dispatchPanelAction:u}=(0,n.C)(),m=(0,s.useCallback)(e=>{e&&(u({idx:d,action:"update-panel",panel_config:{prompt:{character:e.id}}}),localStorage.setItem("selectedCharacter",e.id))},[d,u]);return(0,a.jsx)(i.z,{characterId:null!==(t=r||(null==o?void 0:null===(l=o.panel_config.prompt)||void 0===l?void 0:l.character))&&void 0!==t?t:"",onSelect:m,showClearButton:!1,isMiniStudio:c,isDisabled:!!r||!o})}},1353:function(e,l,t){"use strict";t.d(l,{j:function(){return f}});var a=t(62284),s=t(46231),i=t(44443),n=t(88938),r=t(59297),c=t(12688);let o=()=>(0,a.jsxs)("span",{className:"absolute bottom-0.5 text-white-400/35 text-[9px] truncate",children:[(0,a.jsxs)("span",{className:"hidden sm:flex items-center",children:["Pssst. Use"," ",(0,a.jsx)(c.C,{keys:["tab"],className:"bg-transparent opacity-50"})," and"," ",(0,a.jsx)(c.C,{keys:["up","down"],className:"bg-transparent opacity-50"})," ","keys to autocomplete."]}),(0,a.jsxs)("span",{className:"flex sm:hidden items-center gap-1",children:[(0,a.jsx)(s.JO,{icon:"carbon:touch-1-filled",className:"text-white-400/40 size-3"}),"Swipe left for prompt suggestion, swipe right to autocomplete."]})]}),d=["actor","alien","archaeologist","artist","athlete","astronaut","Batman","biologist","Captain America","chef","chemist","cowboy","Darth Vader in Star Wars","detective","doctor","engineer","firefighter","ghost","Harry Potter","historian","homeless person","Indiana Jones","Ironman","James Bond 007","journalist","John Wick","Martial Artist","mathematician","millionaire","Morphius in The Matrix","model in a fashion show","musician","navy seal","ninja","nurse","paramedic","Patrick Bateman in American Psycho","philosopher","physicist","pilot","pirate","police officer","politician","psychologist","robot","Rock Star","samurai","scientist","Sherlock Holmes","Shrek","Spiderman","spy","student","Superman","superhero","supervillain","teacher","The Hulk","The Joker","The Terminator","Thor","Tony Montana in Scarface","Vampire","Vito Corleone in The Godfather","Viking","werewolf","Winny the Pooh","Wolverine","writer","Yoda","zombie"],u=["boxing","computer hacking","cooking a gourmet meal","dancing ballet","hip-hop dancing","defusing a bomb","fighting fires","flying a plane","meditating","navigating treacherous terrain","performing surgery","playing chess","playing guitar","running a marathon","singing","solving a mystery","working out in the gym","writing a novel"],m=["top-tier Michelin restaurant","abandoned warehouse","ancient temple","arid desert","burning building","corporate office","deep canyon","dense forest","flooded area","haunted house","library","medieval castle","outer space","remote island","snowy mountain range","space station","stormy sea","urban cityscape"],h=["in a state of confusion","in a state of panic","in a state of rage","in a state of zen","in euphoria","in the dead of night","laughing uncontrollably","crying uncontrollably","under extreme pressure","wearing a blindfold","wearing a suit and tie","wearing a suit of armor","while being cheered on by a crowd","while being pursued by wild animals","while multitasking","in the middle of a hurricane"];var x=t(20102);let f=e=>{var l;let{keywords:t,contestPrompt:c,...f}=e,{activePanel:p,activePanelIdx:g,isGenerateDisabled:v,promptValue:b,isPromptEmpty:j,onChangePromptValue:w,onClickGenerate:y}=(0,x.C)(),{suggestion:N,onKeyDown:k,nextPrompt:C,autocomplete:z}=function(e,l,t,a){let[s,i]=(0,r.useState)(0),n=(0,r.useMemo)(()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,l=[];for(let t=0;t<e;t++){let e=Math.floor(Math.random()*d.length),t=d[e],a=Math.floor(Math.random()*u.length),s=u[a],i=Math.floor(Math.random()*m.length),n=m[i],r="aeiou".includes(n[0].toLowerCase())?"an":"a",c=Math.random()>.5,o="As ".concat(t," ").concat(s," in ").concat(r," ").concat(n);if(c){let e=Math.floor(Math.random()*h.length),l=h[e];o+=" ".concat(l)}l.push(o)}return l})(),[]),c=(0,r.useMemo)(()=>n[s],[n,s]),o=(0,r.useCallback)(()=>{i((s+1)%n.length)},[s,n.length]),x=(0,r.useCallback)(()=>{i((s-1+n.length)%n.length)},[s,n.length]),f=(0,r.useCallback)(()=>{l(null!=a?a:n[s])},[a,l,s,n]);return{suggestion:c,onKeyDown:(0,r.useCallback)(l=>{let a=""===e.trim();"Enter"!==l.key||l.shiftKey?"Tab"===l.key&&a?(l.preventDefault(),f()):"ArrowUp"===l.key&&a?(l.preventDefault(),x()):"ArrowDown"===l.key&&a&&(l.preventDefault(),o()):(l.preventDefault(),a?f():t())},[f,t,o,x,e]),nextPrompt:o,autocomplete:f}}(b,w,(0,r.useCallback)(()=>{p&&!v&&y(g,p)},[p,g,v,y]),t),{onTouchStart:A,onTouchMove:_,onTouchEnd:S}=function(e){let{onSwipeLeft:l,onSwipeRight:t}=e,[a,s]=(0,r.useState)(null),[i,n]=(0,r.useState)(null);return{onTouchStart:(0,r.useCallback)(e=>{n(null),s(e.targetTouches[0].clientX)},[]),onTouchMove:(0,r.useCallback)(e=>n(e.targetTouches[0].clientX),[]),onTouchEnd:(0,r.useCallback)(()=>{if(!a||!i)return;let e=a-i;e>50?null==l||l():e<-50&&(null==t||t())},[l,t,i,a])}}({onSwipeLeft:j?C:null,onSwipeRight:j?z:null});return(0,a.jsx)(i.Y,{"aria-label":"Prompt",fullWidth:!0,isMultiline:!0,isRequired:!0,endContent:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{isIconOnly:!0,isDisabled:j,style:{display:b?"flex":"none"},size:"sm",radius:"full",variant:"light",className:"absolute top-px right-px",onClick:()=>w(""),children:(0,a.jsx)(s.JO,{icon:"ic:baseline-clear",width:16,className:"text-white-400"})}),t?null:(0,a.jsx)(o,{})]}),placeholder:null!==(l=null!=c?c:t)&&void 0!==l?l:N,value:b,onValueChange:w,onKeyDown:k,onTouchStart:A,onTouchMove:_,onTouchEnd:S,...f})}},85493:function(e,l,t){"use strict";t.d(l,{q:function(){return v}});var a=t(62284),s=t(46231),i=t(88938),n=t(59297),r=t(65615),c=t(9067),o=t(15382),d=t(98335),u=t(15254),m=t(44443),h=t(44941),x=t(79083),f=t(35850),p=t(66975);let g=e=>{let{isOpen:l=!1,onClose:t}=e,[g,v]=(0,n.useState)(""),[b,j]=(0,n.useState)(""),[w,y]=(0,n.useState)(!1),N=(0,n.useCallback)(async e=>{e.preventDefault();try{if(y(!0),!await fetch("https://formspree.io/f/xvgpewyq",{method:"POST",headers:{Accept:"application/json"},body:new FormData(e.currentTarget)}))throw Error();(0,p.yv)("Thank you!",{variant:"success"}),t()}catch(e){(0,p.yv)("Failed to submit form",{variant:"error"})}finally{y(!1)}},[t]);return(0,a.jsx)(r.R,{isOpen:l,onClose:t,title:"Contest Terms and Conditions",children:(0,a.jsx)(c.A,{children:(0,a.jsxs)("form",{onSubmit:N,children:[(0,a.jsxs)(o.k,{className:"flex gap-2 items-center",children:[(0,a.jsx)(s.JO,{icon:"mdi:chat",className:"size-5"}),(0,a.jsx)("h1",{children:"Support"})]}),(0,a.jsxs)(d.I,{children:[(0,a.jsx)(u.Y,{label:"Email",name:"email",placeholder:"youremail@gmail.com",description:"Enter the best way to reach you.",type:"email",classNames:{inputWrapper:"bg-white-400/5"},isRequired:!0,value:g,onValueChange:v}),(0,a.jsx)(m.Y,{label:"Message",name:"message",placeholder:'"Faceswap isn\'t working" or "I want video functionality"',description:(0,a.jsxs)("span",{children:["For immediate support, reach out in our"," ",(0,a.jsxs)(f.default,{href:"https://t.me/memedeck",target:"_blank",className:"inline-flex underline -mr-0.5",children:["Telegram",(0,a.jsx)(h.x,{})]}),"chat."]}),type:"text",classNames:{inputWrapper:"bg-white-400/5"},isRequired:!0,value:b,onValueChange:j})]}),(0,a.jsx)(x.R,{children:(0,a.jsx)(i.A,{type:"submit",isLoading:w,isDisabled:!g||!b,children:"Submit"})})]})})})},v=e=>{let{onClick:l}=e,[t,r]=(0,n.useState)(!1);return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.A,{variant:"flat",size:"sm",startContent:(0,a.jsx)(s.JO,{icon:"mdi:chat"}),onClick:()=>{r(!0),null==l||l()},children:(0,a.jsx)("h4",{children:"Support"})}),(0,a.jsx)(g,{isOpen:t,onClose:()=>r(!1)})]})}},77781:function(e,l,t){"use strict";t.d(l,{T:function(){return o}});var a=t(62284),s=t(15254),i=t(23405),n=t(2793),r=t(59297),c=t(96934);let o=e=>{let{value:l,autofocus:t,initialSearch:o,placeholder:d="Search for memes. (i.e. pepe)",isSmall:u=!1,onFocus:m,onSearch:h}=e,x=(0,r.useRef)(null);return(0,a.jsx)(s.Y,{size:u?"sm":"md",isClearable:!0,onClear:()=>{null==h||h("")},variant:u?"bordered":"flat",radius:"full",classNames:{base:"flex-1",input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,a.jsx)(n.default,{priority:!0,src:c.Z,alt:"Dropdown",onClick:e=>{var l;e.preventDefault(),null===(l=x.current)||void 0===l||l.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:x,autoFocus:t,defaultValue:o,placeholder:d,className:(0,i.cn)("min-w-24 flex-1 rounded-full border border-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",u?"h-8":"h-10 bg-white-400/5"),value:l,onFocus:m,onChange:e=>null==h?void 0:h(e.target.value)})}},85908:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var a=t(59297),s=t(15219);function i(){let{data:e,isLoading:l}=(0,s.iS)(),t=(0,a.useMemo)(()=>null==e?void 0:e.studio_config,[null==e?void 0:e.studio_config]),i=(0,a.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.characters)&&void 0!==e?e:[]},[null==t?void 0:t.characters]),n=(0,a.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.aesthetics)&&void 0!==e?e:[]},[null==t?void 0:t.aesthetics]);return{me:e,config:t,isLoading:l,characters:i,aesthetics:n}}},91151:function(e,l,t){"use strict";t.d(l,{I:function(){return i},w:function(){return n}});var a=t(59297),s=t(15219);let i=50,n=e=>{var l;let{search:t,...n}=e,[r,c]=(0,a.useState)(1),o=(0,s.t$)({...n,search:t,start:i*(r-1),limit:i}),d=(0,a.useCallback)(e=>{var l,t;return(null!==(t=null===(l=o.data)||void 0===l?void 0:l.memes)&&void 0!==t?t:[]).length<e*i},[null===(l=o.data)||void 0===l?void 0:l.memes]),u=(0,a.useCallback)(()=>{o.isFetching||o.isLoading||o.isError||c(e=>!o.data||0===o.data.memes.length||d(e)?e:e+1)},[d,o.data,o.isError,o.isFetching,o.isLoading]),m=(0,a.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&u()},[u]);return(0,a.useEffect)(()=>(window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}),[m]),o}},75635:function(e,l,t){"use strict";t.d(l,{U:function(){return i}});var a=t(59297),s=t(81255);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",[l,t]=(0,a.useState)(e),[i,n]=(0,a.useState)(e),r=(0,a.useMemo)(()=>(0,s.D)(n,500),[]);return{search:l,searchDebounced:i,onSearch:(0,a.useCallback)(e=>{t(e),r(e)},[r])}}},99555:function(e,l,t){"use strict";t.d(l,{s:function(){return h}});var a=t(62284),s=t(68880),i=t(66975),n=t(59297),r=t(71987);let c=()=>r.cm?"wss://staging-generation-api.memedeck.xyz/v2/ws":r.BB||r.j7?"wss://studio.api.memedeck.xyz/v2/ws":"ws://127.0.0.1:8079/v2/ws";var o=t(15219),d=t(81255);let u=()=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(s.c,{size:"sm",color:"white"}),"Connecting to server"]}),m=(0,d.D)(()=>{(0,i.yv)((0,a.jsx)(u,{}),{key:"reconnect",variant:"warning",hideIconVariant:!0,preventDuplicate:!0,persist:!0})},1e3),h=e=>{let{showToast:l=!1}=e,{data:t}=(0,o.iS)(),[a,s]=(0,n.useState)(null),r=(0,n.useRef)(!1),d=(0,n.useCallback)(()=>{if(!t)return;let e=new WebSocket("".concat(c(),"/").concat(t.id));return e.onopen=()=>{(0,i.sy)()},e.onclose=()=>{!0!==r.current&&(setTimeout(()=>{d()},2e3),l&&m())},s(e),e},[t,l]);return(0,n.useEffect)(()=>{let e=d();return r.current=!1,()=>{e&&e.close(),r.current=!0,(0,i.sy)()}},[d]),{socket:a}}},90028:function(e,l,t){"use strict";t.d(l,{ImageModalProvider:function(){return d},g:function(){return u}});var a=t(62284),s=t(28403),i=t(59297),n=t(89895),r=t(72488),c=t(94548);let o=(0,i.createContext)({}),d=e=>{let{params:l,children:t}=e,{imageId:i}=(0,c.d)({params:l,key:"imageId"}),d=(0,s.useSearchParams)().get("imageId"),u=i.length>0?i:d,{openLightBox:m,closeLightBox:h}=(0,r.e)();return(0,a.jsxs)(o.Provider,{value:{onOpenImage:e=>m({imageId:e}),onCloseImage:h},children:[t,u&&(0,a.jsx)(n.e,{imageId:u,onClose:h})]})},u=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useImageModal must be used within ImageModalProvider");return e}},96934:function(e,l){"use strict";l.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},12972:function(e,l){"use strict";l.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAALVBMVEVMaXH+/v79/f3+/v79/f38/Pz8/Pz8/Pz9/f39/f39/f36+vr4+Pj9/f38/PwKLxeaAAAAD3RSTlMAS48j05o6aYO9pxgSs1uR71/vAAAACXBIWXMAABYlAAAWJQFJUiTwAAAANElEQVR4nBXBiRHAIAwEsT0/2AbSf7sZJJYcfNGR94SgzaYAt9w89pmAmso8KJyezXK40g8cqQDpZl1e6QAAAABJRU5ErkJggg==",blurWidth:7,blurHeight:8}},18957:function(e,l){"use strict";l.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[2446,8938,9303,1271,4607,3453,322,1866,6127,3316,6157,9675,6844,3089,7420,8632,5219,621,3746,102,4868,2046,1744],function(){return e(e.s=1440)}),_N_E=e.O()}]);