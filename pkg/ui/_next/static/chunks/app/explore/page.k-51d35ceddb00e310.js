(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6148],{83905:function(e,t,r){Promise.resolve().then(r.bind(r,9277))},9277:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(59547),a=r(30912),s=r(74600),l=r(72251),i=r(94820),c=r(46113),u=r(47023);let o=e=>{let{onClickTag:t}=e;return(0,n.jsx)("div",{className:"flex h-12 w-full min-w-0 items-center overflow-x-auto rounded-none border-b border-white-400/15 px-3 pb-2",children:(0,n.jsx)(u.TrendingTopics,{limit:5,wrap:"flex-nowrap",onClickTag:t})})};var d=r(1463),h=r(12384),f=r(74491);function m(){var e;let t=null!==(e=(0,s.useSearchParams)().get("query"))&&void 0!==e?e:void 0,r=Number(null==t?void 0:t.length)>0,[u,m]=(0,a.useState)([]),[g,w]=(0,a.useState)(!0),{searchQuery:b,setSearchQuery:x,searchResults:p,setSearchResults:v,hasFetchedSearchResults:k,setHasFetchedSearchResults:S}=(0,f.useFeed)(),{isFetching:j,onSearch:y}=(0,c.M)({feed:p,setFeed:v,hasFetched:k,setHasFetched:S,searchQuery:b,setSearchQuery:x,initialQuery:t,fetchOnLoad:r,fetchFn:d.P.search});return(0,a.useEffect)(()=>{w(!0),d.P.getExplore({interval:168,limit:21}).then(m).finally(()=>w(!1))},[]),(0,a.useEffect)(()=>(t&&x(t),()=>{x(""),v([]),S(!1)}),[t,x,v,S]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.SearchBar,{autofocus:!0,initialSearch:t,border:"border-b border-transparent",value:b,onSearch:y}),(0,n.jsx)(o,{onClickTag:y}),(0,n.jsx)(i.o,{memes:b.length>0?p:u,isFetching:j||g,hasFetched:k,hasSearched:b.length>0,renderItem:(e,t)=>(0,n.jsx)(h.P,{meme:e},t)})]})}},47023:function(e,t,r){"use strict";r.r(t),r.d(t,{TrendingTopics:function(){return u}});var n=r(59547),a=r(30912),s=r(17432),l=r(1463),i=r(15076),c=r(67630);let u=e=>{let{limit:t,wrap:r="flex-wrap",onClickTag:u}=e,{trending:o,setTrending:d}=(0,i.useProfile)(),[h,f]=(0,a.useState)(!0),m=(0,a.useCallback)(async()=>{d(await l.P.getTrending(t)),f(!1)},[d,t]);return((0,a.useEffect)(()=>{let e=o.length;(0===e||e<t)&&m()},[m,t,o.length]),h&&0===o.length)?(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:[1,2,3].map(e=>(0,n.jsx)(s.z,{variant:"flat",className:"cursor-pointer select-none px-2 py-1 text-sm font-bold tracking-wide text-transparent",children:1===e?"abcdefg":"xyzw"},e))}):(0,n.jsx)(c.$,{wrap:r,tags:o.slice(0,t).map(e=>e.name),onClickTag:u})}},72251:function(e,t,r){"use strict";r.r(t),r.d(t,{SearchBar:function(){return i}});var n=r(59547),a=r(74600),s=r(95320),l=r(65883);let i=e=>{let{value:t,autofocus:r,initialSearch:i,responsiveness:c="",border:u="border-b border-white-400/15",placeholder:o,onSearch:d}=e,h=(0,a.useRouter)();return(0,n.jsxs)("div",{className:"sticky top-0 z-10 flex gap-3 h-16 w-full items-center bg-black-0 px-3 ".concat(c," ").concat(u),onClick:()=>{d||h.push("/explore")},children:[(0,n.jsx)("div",{className:"sm:hidden size-10 max-w-10",children:(0,n.jsx)(s.Ew,{})}),(0,n.jsx)(l.T,{value:t,autofocus:r,initialSearch:i,placeholder:o,onSearch:d})]})}},46113:function(e,t,r){"use strict";r.d(t,{M:function(){return s}});var n=r(30912),a=r(58741);let s=e=>{let{feed:t,setFeed:r,hasFetched:s,setHasFetched:l,searchQuery:i,setSearchQuery:c,fetchFn:u,initialQuery:o,fetchOnLoad:d=!0,pageSize:h=50,ignoreWindowScroll:f=!1,onFetchOnLoad:m}=e,[g,w]=(0,n.useState)(0),[b,x]=(0,n.useState)(!0),[p,v]=(0,n.useState)(!1),k=(0,n.useCallback)(async(e,t)=>{let n=await u(e,t);return r(t=>n.length>0&&Number(e.start)>0?[...t,...n]:n),v(!1),l(!0),x(n.length===h),n},[u,h,r,l]),S=(0,n.useMemo)(()=>(0,a.k)(k,1e3),[k]),j=(0,n.useCallback)(async(e,t)=>{var r,n,a;return v(!0),l(!1),S({search:null!==(r=e.search)&&void 0!==r?r:i,start:null!==(n=e.start)&&void 0!==n?n:g,limit:null!==(a=e.limit)&&void 0!==a?a:h},t)},[S,h,i,l,g]),y=(0,n.useCallback)(()=>{if(!s||!b||p)return;let e=g+h;w(e),j({start:e})},[s,b,p,g,h,j]),C=(0,n.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&y()},[y]),E=(0,n.useCallback)(e=>{let t=new URL(window.location.href);e.length>0?t.searchParams.set("query",e):t.searchParams.delete("query"),window.history.pushState({},"",t.toString())},[]),N=(0,n.useCallback)(async e=>{null==c||c(e),c&&E(e),w(0),x(!0),j({search:e,start:0,limit:h})},[j,h,c,E]);return(0,n.useEffect)(()=>{if(!f)return window.addEventListener("scroll",C),()=>window.removeEventListener("scroll",C)},[C,f]),(0,n.useEffect)(()=>{let e=new AbortController;if(!s&&!(t.length>0)&&d&&!p)return j({search:o,start:0,limit:h},e.signal).then(m),()=>{!e.signal.aborted&&p&&e.abort()}},[t.length,j,d,s,o,p,m,h]),{feed:t,setFeed:r,setHasMore:x,onSearch:N,isFetching:p,hasMore:b,setIsFetching:v,setHasFetched:l,onReachedEnd:y}}}},function(e){e.O(0,[1775,1904,3817,2972,9886,920,3372,276,4283,417,5875,5924,4116,7177,5866,88,7930,3957,1744],function(){return e(e.s=83905)}),_N_E=e.O()}]);