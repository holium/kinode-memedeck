"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2238,3108],{29492:function(e,t,l){l.d(t,{Ud:function(){return h},hd:function(){return d},Ew:function(){return u},QB:function(){return m}});var r=l(57348),a=l(52053),s=l(45155),i=l(13881),n={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo.a86b8f2b.svg",height:256,width:256,blurWidth:0,blurHeight:0},o=l(21008),c=l(62568);let d=()=>(0,r.jsx)("div",{className:"flex h-16 min-h-16 select-none items-center justify-center lg:justify-start",children:(0,r.jsxs)(i.default,{href:"/home",children:[(0,r.jsxs)("div",{className:"hidden gap-3 items-center lg:flex",children:[(0,r.jsx)(m,{}),(0,r.jsx)(h,{})]}),(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)(u,{})})]})}),u=()=>(0,r.jsx)(s.default,{src:n,alt:"".concat(c.jG," Icon"),"aria-label":"".concat(c.jG," - ").concat(c.vk),className:"h-10 min-w-10 w-full select-none"}),m=e=>{let{className:t="h-12 w-[120px] object-cover"}=e;return(0,r.jsx)(s.default,{priority:!0,src:o.Z,alt:"".concat(c.jG," Logo"),"aria-label":"".concat(c.jG," - ").concat(c.vk),className:t,draggable:!1})},h=()=>(0,r.jsx)(a.z,{size:"sm",color:"warning",classNames:{base:"mb-0.5 text-yellow-400 bg-yellow-50 border-1 border-yellow-400/10"},children:"Alpha"})},8485:function(e,t,l){l.d(t,{o:function(){return n}});var r=l(57348),a=l(4930),s=l(82896);let i={default:3,1100:3,700:2,500:1},n=e=>{let{memes:t,isFetching:l,hasFetched:n,hasSearched:o,noResultsMessage:c="No memes",className:d="overflow-hidden pl-3 pt-3",breakpoints:u=i,renderItem:m}=e;return(0,r.jsxs)("div",{className:d,children:[!l&&0===t.length&&(n||o)?(0,r.jsx)("div",{className:"text-white-400/75",children:c}):null,l&&0===t.length&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(a.c,{})}),(0,r.jsx)(s.Z,{breakpointCols:u,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(m)}),l&&t.length>0&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(a.c,{})})]})}},13108:function(e,t,l){l.r(t),l.d(t,{Page:function(){return h}});var r=l(57348),a=l(75952),s=l(4930),i=l(45155),n=l(82033),o={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0};let c=()=>{let{isBatchUploading:e}=(0,n.useUpload)();return(0,r.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,r.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,r.jsx)(s.c,{}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,r.jsx)(i.default,{src:o,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,r.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})};var d=l(11781),u=l(71402),m=l(64720);(0,a.Cb)("local");let h=e=>{let{children:t,isGated:l=!0,border:a="xs:border-0 sm:border-x border-white-400/15"}=e,{profile:s,isFetching:i}=(0,u.useProfile)(),{isHovering:n}=(0,m.useSidebar)();return s||i||!l?(0,r.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(a),children:n?(0,r.jsx)(c,{}):t}):(0,r.jsx)(d.c,{isOpen:!0})}},24605:function(e,t,l){l.d(t,{d:function(){return s}});var r=l(57348),a=l(81727);let s=e=>{let{isFetching:t,hasSearched:l,stats:s}=e;return t||!l?null:(0,r.jsxs)("span",{className:"px-3 text-white-400/50 text-tiny",children:[s.total_memes," ",(0,a._6)(s.total_memes,"meme","memes")," in"," ",s.time_ms,"ms"]})}},89765:function(e,t,l){l.d(t,{Z:function(){return a},g:function(){return g}});var r,a,s=l(57348),i=l(53350),n=l(22094),o=l(54611),c=l(4930),d=l(67425),u=l(22596),m=l(58484),h=l(16189),f=l(12465),x=l(15346),A=l(64720),v=l(35878);(r=a||(a={})).Edit="edit",r.Delete="delete";let g=e=>{let{deckId:t,size:l="sm",variant:r="light",itemsToRender:a=["edit","delete"],isLoading:g,isDisabled:p,onEdit:b,onDelete:w}=e,y=(0,h.useRouter)(),[k,j]=(0,x.useState)(!1),{setMyDecks:C}=(0,A.useSidebar)(),S=(0,x.useCallback)(()=>{y.push("/deck/".concat(t,"/edit")),null==b||b()},[y,t,b]),N=(0,x.useCallback)(async e=>{e.stopPropagation(),e.preventDefault();try{j(!0),await v.P.deleteDeck(t),C(e=>e.filter(e=>e.id!==t)),null==w||w()}catch(e){console.error("Failed to delete deck",e),(0,f.yv)("Failed to delete deck",{variant:"error"})}finally{j(!1)}},[t,w,C]),D=(0,x.useMemo)(()=>[{key:"edit",label:"Edit",color:"default",startContent:(0,s.jsx)(i.JO,{className:"size-5",icon:"mdi:edit"}),onClick:S},{key:"delete",label:"Delete",color:"danger",startContent:(0,s.jsx)(i.JO,{className:"size-5",icon:"tabler:trash"}),onClick:N}],[S,N]);return(0,s.jsxs)(n.F,{classNames:{content:"min-w-0 w-auto"},children:[(0,s.jsx)(o.S,{children:k||g?(0,s.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,s.jsx)(c.c,{size:"sm"})}):(0,s.jsx)(d.A,{isIconOnly:!0,size:l,variant:r,isDisabled:p,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,s.jsx)(i.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,s.jsx)(u.a,{children:D.filter(e=>a.includes(e.key)).map(e=>(0,s.jsx)(m.W,{color:e.color,startContent:e.startContent,onClick:e.onClick,children:e.label},e.key))})]})}},9806:function(e,t,l){l.d(t,{D:function(){return j}});var r=l(57348),a=l(76105),s=l(94645),i=l(4930),n=l(95900),o=l(87840),c=l(68887),d=l(15346),u=l(41307);let m={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?1e3:-1e3,opacity:0})},h=()=>{let{activeStep:e,activeStepIdx:t}=(0,u.y)(),[l,a]=(0,d.useState)(t),s=t>l?1:-1;return(0,d.useEffect)(()=>{a(t)},[t]),(0,r.jsx)(o.E.div,{className:"min-h-72",transition:{type:"spring",stiffness:300,damping:30},children:(0,r.jsx)(c.M,{initial:!1,custom:s,children:(0,r.jsx)(o.E.div,{custom:s,variants:m,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute size-full",children:(0,r.jsx)(n.I,{children:e.body})},t)})})};var f=l(23805),x=l(67425),A=l(72148);let v=()=>{let{isFirstStep:e,isLastStep:t,isFinishing:l,onClickBack:a,onClickNext:s}=(0,u.y)(),{name:i,description:n,hasUnsavedChanges:o,isSaving:c}=(0,A.useEditDeck)(),m=(0,d.useMemo)(()=>0===i.length||0===n.length||o||c,[i.length,n.length,o,c]);return(0,r.jsx)(f.R,{children:(0,r.jsxs)("div",{className:"w-full flex items-center justify-end gap-3",children:[(0,r.jsx)(x.A,{variant:"flat",onClick:a,children:e?"Cancel":"Back"}),(0,r.jsx)(x.A,{variant:"solid",color:"primary",isDisabled:m,isLoading:l,onClick:s,children:t?"Finish":"Next"})]})})};var g=l(25291);let p=e=>{let{text:t=""}=e;return(0,r.jsx)("h3",{className:"font-bold text-lg",children:t})},b=e=>{let{text:t=""}=e;return(0,r.jsx)("p",{className:"font-normal text-xs text-white-400/50",children:t})},w=()=>{let{activeStep:e,activeStepIdx:t,numberOfSteps:l}=(0,u.y)();return(0,r.jsxs)(g.k,{className:"pt-6 flex flex-col gap-1",children:[(0,r.jsx)(p,{text:e.title}),(0,r.jsx)(b,{text:e.subtitle}),(0,r.jsxs)("div",{className:"absolute top-1.5 right-2 text-white-400/25 text-sm leading-6 font-normal tracking-widest",children:[t+1,"/",l]})]})};var y=l(21202);let k=e=>{let{useIsSavingHook:t}=e,{isSaving:l}=t();return l?(0,r.jsx)(y.W,{size:"sm",isIndeterminate:!0,"aria-label":"Loading..."}):(0,r.jsx)("div",{className:"h-1"})},j=e=>{let{BodyWrapper:t,Provider:l,providerKey:n,useIsSavingHook:o}=e,{flowId:c,onClickClose:d}=(0,u.y)();return(0,r.jsx)(a.R,{size:"lg",classNames:{base:"overflow-hidden",header:"px-4 sm:px-6",body:"px-4 sm:px-6 min-h-72 max-h-72 overflow-hidden",footer:"px-4 sm:px-6"},hideCloseButton:!0,isOpen:!!c,onOpenChange:d,children:c?(0,r.jsx)(l,{params:{[n]:c},children:(0,r.jsxs)(s.A,{children:[(0,r.jsx)(k,{useIsSavingHook:o}),(0,r.jsx)(w,{}),(0,r.jsx)(t,{children:(0,r.jsx)(h,{})}),(0,r.jsx)(v,{})]})}):(0,r.jsx)(i.c,{})})}},11781:function(e,t,l){l.d(t,{c:function(){return h}});var r=l(57348),a=l(67425),s=l(45155);let i=[{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/1.8823d877.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAzklEQVR42mPQF9DS4NXgZ5bTVvVV1vRnYOBW41TVF9Bm0OXTchc3mGuac8J75rmkFXsz50RKWBoCJWTZVHI03HcYlmwzqdrn1n4qfnqnZbQ5txaDLr+WtZBeolJAvEFSjmtpTWhFqJyFHo8mg4GQriqnrJWUbbxJZp5XeWF4tSyjrL6gNoMWp5y5qKWjvJe3YVyKR0mQdaQGg6y+kA6Du352pHl5lElOsFV0SlBBsH28GoMMSCLZryfbrzPTu7kgpqUooSsnvNVBz12DQQ4Aeio0BOyoKu8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#2E102A"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/2.185f5c03.png",height:1198,width:1162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA0UlEQVR42mNwiEywCgovzczfOKtvYV97dkY9g1ONqmctg3tSYkxsWKCl7Zym8q0zOqfWVYm51ih61DIEZ5a7hacGmVtH2Ntvas5tiYrR8ayRcq9lMAioZ7AsdNXTs1c3PdRdvLO5msGmSsWzhkHJo0reu8HNMro9NuTYhIqV1fkMLhUqXg0MCu61Mh4NGrbJOT6eDZEhiU72dg4+Xr6ZDM6xJTy6fgxikoY6Zml2tgaaxppqRs6edgyuMZ4KxsoMoopaZq6uLoGaino6lkYWvjYAC7g+Dfv8P9kAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#21487D"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/3.43776601.png",height:880,width:880,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AE1OTiciHykjGBcNBQAAAAAAAF5mbpGjuwA5NSg1LiMTAABMSDqOi3SDgGsJAAA+REwACgAABwAARUAwvbqb2te0z8yrjYpzAAAAAHNwW1xYS4OBbtXTrtTRrqKhiJKQe7SykwDY1a/Qzautq5DV063RzarJxqbHxKPT0KoAb2tWt7SU1tKq0c6nzcqnzMemwLqXY2JOABoPDQAAAJaQfM7Hq7y2lsW+qG1nWiklKwB/dWSqopfQx8HVy8PMwrbXzcbRyMCon5YdSl2c8L4tdAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#D0CCA9"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/4.a25addea.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AKnG0avG0bDJ0rbO1bnQ1bLK0LDIz7DIzwC9zcvAzszH0s+YpKKOnJu/y8XH0szE0MsAzM/E1NXJqqyiNhIAfV9Ls6qew7aszsq/AMzHwc3Jx8O3sOe+mfTKptG5qbSals/GxgC3tcazpa63sL7yzKz+1KbSurGqmKK7tcMAlpOsjoORhXqM3Lib37udtqSpmpKfpJmeAGpdZUZDQ1huTfPNpragjQABKqGJgbipowA6AABEZUhDkG1vg2d+h2kATCG3mISikoczn3nJIi6wxQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#BDB9C3"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/5.622e0a3d.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/APvi2OfQxmplWSkyKTA3LmtlW+zTyf7k2wD649ernJEAAAAiLCQABgoAAAC4ppz95tsA8tzRfHVqAAAACgAAgWpVbWBIdGxm8tvQAPPe1Ih/d1o3B5RnQcetjbamioZ2Z+vSygD549rLubGAYTeyfDzy4cPc0rbGraD33dMA79rS9d7Xm4h8mFgW26qFwaWF4svC9d3SAPfj2smzqzMZEGU1HcCkgsCaf9KrofDe1ACzn5lEMC9wUCx6TS2gh2prQzF3AADEpI9uLGl6mUkPuwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#AF7A43"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/6.b62b0cfc.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AIuZgJKgnWiGpViHsXeYtZirvaOkmbeogwBZiLpGebt6g4KQh1KWjV2Ml4yIqsmBorkAOnK2d4Sax5pP27R+za6Ar5x1gpaqjKvCAFiPuYmYk72pdK6XcMCvi6KUdV57ko6zyABpm7mPoLGnontscladnJSSmKBblLdvpsoAmqisw7OkwLWRvbKnv7G+kKfBfp64kqi6AJCepLqvj7++s627yru7t3iUoa+tqsLEywCRn6GfsKtutdG0wM/WxbB+mqV4oceVsc4HHXVkV3+NuQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#7197BD"}],n=e=>{let{index:t,avatar:l}=e;return(0,r.jsx)(s.default,{src:l.src,draggable:!1,priority:!0,quality:50,style:{background:l.color},alt:"avatar ".concat(t),className:"size-9 rounded-full border-2 border-white-400 ".concat(t>0?"-ml-1":""),width:38,height:38})};var o=l(99957);let c=e=>{let{children:t,isOpen:l,onClose:a}=e;return l?(0,r.jsx)("div",{className:(0,o.cn)("flex items-center justify-center","fixed inset-0 z-50","bg-white-100 size-full max-h-full min-h-0 overflow-y-auto overflow-x-hidden p-4"),onClick:a,children:(0,r.jsxs)("div",{className:"glow bg-black-400 relative flex w-full max-w-md flex-col items-center gap-6 rounded-lg px-6 pb-8 pt-6 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("header",{className:"relative flex w-full items-center justify-between"}),(0,r.jsx)("div",{children:t})]})}):null};var d=l(94787),u=l(35878),m=l(62568);let h=e=>{let{isOpen:t,onClose:l}=e;return(0,r.jsx)(c,{isOpen:t,onClose:l,children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("h1",{className:"mb-6 text-center text-3xl font-bold",children:m.K7}),(0,r.jsx)("p",{className:"text-center text-lg text-white-400/75",children:m.vk}),(0,r.jsx)("div",{className:"relative my-6 flex items-center justify-center select-none",children:i.map((e,t)=>(0,r.jsx)(n,{index:t,avatar:e},t))}),(0,r.jsxs)(a.A,{className:"my-6 flex items-center justify-center gap-2 rounded-2xl bg-blue-500 px-5 py-1 text-sm",onClick:()=>{let e=u.P.xGetRedirectUrl();window.location.href=e},children:[(0,r.jsx)("p",{className:"text-lg",children:"Login with"}),(0,r.jsx)(s.default,{src:d.Z,alt:"x",className:"w-5"})]})]})})}},95967:function(e,t,l){l.r(t),l.d(t,{SearchBar:function(){return d}});var r=l(57348),a=l(16189),s=l(15346),i=l(29492),n=l(23136),o=l(16818),c=l(76808);let d=e=>{let{value:t,autofocus:l,className:d="px-3",responsiveness:u="",border:m="border-b border-white-400/15",placeholder:h,hideLogo:f=!1,onSearch:x,searchInterval:A,onSelectInterval:v}=e,g=(0,a.useRouter)(),{initialQuery:p}=(0,c.x)(),b=(0,s.useMemo)(()=>t.length>0,[t.length]),w=(0,s.useCallback)(()=>{x||g.push("/trending")},[x,g]);return(0,r.jsxs)("div",{className:"sticky top-0 z-10 flex gap-3 h-16 w-full items-center justify-between bg-black-0 ".concat(d," ").concat(u," ").concat(m),onClick:w,children:[!f&&(0,r.jsx)("div",{className:"sm:hidden size-10 max-w-10",children:(0,r.jsx)(i.Ew,{})}),(0,r.jsx)(n.T,{value:t,autofocus:l,initialSearch:p,placeholder:h,onSearch:x}),b&&A&&v&&(0,r.jsx)(o.m,{interval:A,onSelect:v})]})}},23136:function(e,t,l){l.d(t,{T:function(){return o}});var r=l(57348),a=l(46766),s=l(45155),i=l(15346),n=l(82739);let o=e=>{let{value:t,autofocus:l,initialSearch:o,placeholder:c="Search for memes. (i.e. pepe)",onFocus:d,onSearch:u}=e,m=(0,i.useRef)(null);return(0,r.jsx)(a.Y,{isClearable:!0,onClear:()=>{null==u||u("")},radius:"full",classNames:{base:"flex-1",input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,r.jsx)(s.default,{priority:!0,src:n.Z,alt:"Dropdown",onClick:e=>{var t;e.preventDefault(),null===(t=m.current)||void 0===t||t.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:m,autoFocus:l,defaultValue:o,placeholder:c,className:"h-10 min-w-24 flex-1 rounded-full border border-white-400/5 bg-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",value:t,onFocus:d,onChange:e=>null==u?void 0:u(e.target.value)})}},6076:function(e,t,l){l.d(t,{P:function(){return g}});var r=l(57348),a=l(92378),s=l(950),i=l(45155),n=l(15346),o=l(56480),c=l(73421),d=l(71402),u=l(35878),m=l(69467),h=l(99957),f=l(62568),x=l(81727),A=l(2406),v=l(18491);let g=e=>{var t,l,g;let{meme:p,priorityLoadImage:b,onClick:w}=e,{profile:y}=(0,d.useProfile)(),k=(0,n.useMemo)(()=>{var e;return null!==(e=null==y?void 0:y.user.id)&&void 0!==e?e:""},[y]),j=(0,o.u)(k,p.votes),C=(0,n.useMemo)(()=>(0,m.kl)(p),[p]),[S,N]=(0,n.useState)(C),{memeDescription:D,memeCreator:z}=(0,f.VU)(p),{onOpenMeme:E}=(0,c.useMemeModal)(),R=(0,n.useCallback)(()=>{if(w){w();return}E(p.id)},[p.id,w,E]);return(0,n.useEffect)(()=>()=>{N(C)},[C]),(0,r.jsx)("article",{className:"relative w-full cursor-pointer",onClick:R,children:(0,r.jsxs)(a.w,{isFooterBlurred:!0,className:"group overflow-hidden rounded-md",children:[(0,r.jsx)(i.default,{className:"z-0 size-full rounded-md bg-white-400/5 sm:transition-transform sm:group-hover:scale-104",src:p.url,quality:50,priority:b,alt:D,width:null!==(t=p.width)&&void 0!==t?t:200,height:null!==(l=p.height)&&void 0!==l?l:200}),(0,r.jsx)(s.i,{className:(0,h.cn)("justify-between bg-black-400/30 border-1 border-zinc-600/40 overflow-hidden py-2 absolute before:rounded-lg rounded-xl bottom-1 w-[calc(100%_-_8px)] shadow-small ml-1 z-1","transition-opacity opacity-0",j.hasUpvoted||j.hasDownvoted?"sm:opacity-100":"sm:group-hover:opacity-100"),children:(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate text-sm font-semibold",children:[(0,r.jsx)(i.default,{src:null!==(g=p.creator_avatar)&&void 0!==g?g:p.creator_avatar,alt:z,className:"rounded-full min-w-8",width:32,height:32,quality:50}),(0,r.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,r.jsx)("span",{className:"truncate",children:p.creator_handle}),p.published_at&&(0,r.jsx)("span",{className:"text-tiny font-normal text-white-400/70",children:(0,x.Po)(p.published_at)})]})]}),(0,r.jsx)(A.I,{memeId:p.id,userId:k,addVoteApi:u.P.createMemeReaction,removeVoteApi:u.P.deleteMemeReaction,onClick:w,initialVotes:p.votes,border:"border-zinc-400/50"})]})}),S&&(0,r.jsx)(v.T,{src:p.url,onClickShow:()=>N(!1)})]})})}},16818:function(e,t,l){l.d(t,{m:function(){return n}});var r=l(57348),a=l(1718),s=l(88036),i=l(41973);let n=e=>{let{interval:t,onSelect:l}=e;return(0,r.jsx)(a.g,{size:"md","aria-label":"Interval",radius:"full",variant:"bordered",color:"primary",placeholder:"Sort by",classNames:{base:"w-auto",trigger:"w-20 sm:w-28",popoverContent:"w-28"},value:t,selectedKeys:[t],onChange:e=>{l(e.target.value)},children:Object.values(i.u).map(e=>(0,r.jsx)(s.R,{children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}},87140:function(e,t,l){l.r(t),l.d(t,{DiffusionConfigProvider:function(){return n},useDiffusionConfig:function(){return o}});var r=l(57348),a=l(15346),s=l(55771);let i=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[l,n]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{n(!0),s.p.getConfig().then(c).finally(()=>n(!1))},[]),(0,r.jsx)(i.Provider,{value:{config:o,isFetchingConfig:l},children:t})},o=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useDiffusionConfig must be used within DiffusionConfigProvider");return e}},64720:function(e,t,l){l.r(t),l.d(t,{SidebarProvider:function(){return i},useSidebar:function(){return n}});var r=l(57348),a=l(15346);let s=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[l,i]=(0,a.useState)([]),[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[h,f]=(0,a.useState)([]),[x,A]=(0,a.useState)([]),[v,g]=(0,a.useState)({}),[p,b]=(0,a.useState)(!1),[w,y]=(0,a.useState)(!1);return(0,r.jsx)(s.Provider,{value:{myDecks:h,setMyDecks:f,following:x,setFollowing:A,isFetchingMyDecks:u,setIsFetchingMyDecks:m,newPostCounts:v,setNewPostCounts:g,topDecks:l,setTopDecks:i,topDecksWeekly:n,setTopDecksWeekly:o,recommendedFollows:c,setRecommendedFollows:d,isSignupModalOpen:p,setIsSignupModalOpen:b,isHovering:w,setIsHovering:y},children:t})},n=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useProfile must be used within SidebarProvider");return e}},82033:function(e,t,l){l.r(t),l.d(t,{UploadProvider:function(){return v},useUpload:function(){return g}});var r=l(57348),a=l(16189),s=l(12465),i=l(15346),n=l(67425);let o=e=>{let{text:t,textButton:l,onClick:a}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t,l&&a&&(0,r.jsx)(n.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:a,children:l})]})};var c=l(77623),d=l(35971),u=l(64720),m=l(35878),h=l(74859);let f=e=>{let t=new FileReader;return new Promise((l,r)=>{t.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;if(!a){r(Error("Failed to read file"));return}l(new Uint8Array(a))},t.onerror=()=>r(t.error),t.readAsArrayBuffer(e)})};var x=l(81727);let A=(0,i.createContext)({}),v=e=>{let{children:t}=e,l=(0,a.useRouter)(),{openMemeModal:n}=(0,c.T)(),{setIsHovering:v}=(0,u.useSidebar)(),{onUploadMeme:g}=(0,d.useFeed)(),[p,b]=(0,i.useState)([]),[w,y]=(0,i.useState)(),[k,j]=(0,i.useState)(!1),C=(0,i.useCallback)(async e=>{try{(0,s.sy)();let t=e.name.slice(0,20),l=(0,s.yv)("Uploading ".concat(t),{variant:"info",persist:!0});y(l);let a=await f(e),i="",c=await m.P.postMeme({filename:(0,x.Df)(e.name),filetype:e.type,bytes:a});if(!c)throw Error("Failed to upload");i=c.id;let d={...c,votes:{up:[],down:[]}};b(e=>[d,...e]),g(d),(0,s.sy)(w),y(void 0);let u=(0,s.yv)((0,r.jsx)(o,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,s.sy)(u),n(i)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),y(void 0),(0,s.sy)(),(0,s.yv)("Failed to upload some memes",{variant:"error"})}},[w,n,g,b]),S=(0,i.useCallback)(async e=>{try{let t=(0,x.Df)(e),l=t.slice(0,20),a=(0,s.yv)("Uploading ".concat(l),{variant:"info",persist:!0});y(a);let i=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!i)throw Error("Failed to paste link");b(e=>[i,...e]),g(i),(0,s.sy)(w),y(void 0);let c=(0,s.yv)((0,r.jsx)(o,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,s.sy)(c),n(i.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,s.yv)("Failed to paste link",{variant:"error"})}},[w,n,g]),N=(0,i.useMemo)(()=>(0,h.k)(C,1e3),[C]),D=(0,i.useCallback)(async e=>{if(void 0===w){if(e.size>33554432){(0,s.yv)("Please upload files 32MB or less",{variant:"error"});return}return N(e)}},[N,w]),z=(0,i.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let l=t[e];if(l.type.includes("image")){let e=l.getAsFile();e&&await D(e)}}}},[D]);(0,i.useEffect)(()=>(window.addEventListener("paste",z),()=>{window.removeEventListener("paste",z)}),[z]);let E=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),v(!1),j(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let l=t[e];l.type.includes("image")&&await D(l)}l.push("/library")}catch(e){console.error(e)}finally{j(!1)}};return(0,r.jsx)(A.Provider,{value:{uploads:p,setUploads:b,startUpload:D,pasteImageLink:S,isBatchUploading:k},children:(0,r.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&v(!0)},onDragLeave:()=>v(!1),onDrop:E,children:t})})},g=()=>{let e=(0,i.useContext)(A);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}},72148:function(e,t,l){l.r(t),l.d(t,{EditDeckProvider:function(){return m},useEditDeck:function(){return h}});var r=l(57348),a=l(12465),s=l(15346),i=l(83815),n=l(64720),o=l(35878),c=l(74859),d=l(41973);let u=(0,s.createContext)(void 0),m=e=>{var t;let{params:l,children:m}=e,{deckId:h}=(0,i.d)({params:l,key:"deckId"}),f=(0,s.useMemo)(()=>h.replace("deck:",""),[h]),[x,A]=(0,s.useState)(!0),[v,g]=(0,s.useState)(null),[p,b]=(0,s.useState)(""),[w,y]=(0,s.useState)(""),[k,j]=(0,s.useState)(null),[C,S]=(0,s.useState)([]),[N,D]=(0,s.useState)(null),[z,E]=(0,s.useState)(null!==(t=null==v?void 0:v.admins)&&void 0!==t?t:[]),[R,U]=(0,s.useState)(null),[B,P]=(0,s.useState)(null),[q,M]=(0,s.useState)(!1),[K,L]=(0,s.useState)(!1),[V,_]=(0,s.useState)(null),{queueUpdate:G,isSaving:I,hasUnsavedChanges:O}=function(e){let[t,l]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!1),i=(0,s.useRef)({}),{setMyDecks:d}=(0,n.useSidebar)(),u=(0,s.useCallback)((0,c.k)(async(e,t)=>{a(!0);let l=null,r=null;try{var s;let l=await o.P.updateDeck(e,t);r=null!==(s=null==l?void 0:l.cover_photo)&&void 0!==s?s:""}finally{a(!1),d(a=>{var s,i,n;if(!a)return a;let o=a.find(t=>t.id===e);return l=null!==(i=null!==(s=t.title)&&void 0!==s?s:null==o?void 0:o.title)&&void 0!==i?i:"",r=null!==(n=null!=r?r:null==o?void 0:o.cover_photo)&&void 0!==n?n:"",[{id:e,title:l,cover_photo:r,is_admin:!0},...a.filter(t=>t.id!==e)]})}},500),[]);return{queueUpdate:(0,s.useCallback)(t=>{i.current={...i.current,...t},l(!0),u(e,i.current).finally(()=>{i.current={},l(!1)})},[e,u]),isSaving:r,hasUnsavedChanges:t}}(f),W=(0,s.useCallback)(async e=>{var t,l;let r=await o.P.getDeck(e,{interval:d.u.AllTime});r&&(g(r),b(r.title),y(null!==(t=r.description)&&void 0!==t?t:""),j(r.cover_photo),S(null!==(l=r.external_links)&&void 0!==l?l:[]),E(r.admins),M(r.require_approval),L(r.auto_post),_(r.matching_rules))},[]),F=(0,s.useCallback)(e=>{b(e),G({title:e})},[G]),H=(0,s.useCallback)(e=>{y(e),G({description:e})},[G]),J=(0,s.useCallback)(e=>{j(e?URL.createObjectURL(new Blob([e])):null),G({cover_photo:e?Array.from(e):null})},[G]),T=(0,s.useCallback)(e=>{let t=[...C,e];S(t),G({external_links:t})},[C,G]),Q=(0,s.useCallback)(e=>{let t=C.filter(t=>t!==e);D(e),G({external_links:t}),S(t),D(null)},[C,G]),Z=(0,s.useCallback)(e=>{try{U(e.id),E(t=>[...t,e]),G({add_admin:e.id})}catch(t){console.error("Failed to add admin",t),(0,a.yv)("Failed to add admin",{variant:"error"}),E(t=>t.filter(t=>t.id!==e.id))}finally{U(null)}},[G]),Y=(0,s.useCallback)(e=>{try{P(e.id),G({remove_admin:e.id}),E(t=>t.filter(t=>t.id!==e.id))}catch(e){console.error("Failed to remove admin",e),(0,a.yv)("Failed to remove admin",{variant:"error"})}finally{P(null)}},[G]),X=(0,s.useCallback)(e=>{M(e),G({require_approval:e})},[G]),$=(0,s.useCallback)(e=>{L(e),G({auto_post:e})},[G]),ee=(0,s.useCallback)(e=>{_(t=>{var l,r,a;let s={characters:void 0!==e.characters?e.characters:null!==(l=null==t?void 0:t.characters)&&void 0!==l?l:null,styles:void 0!==e.styles?e.styles:null!==(r=null==t?void 0:t.styles)&&void 0!==r?r:null,keywords:void 0!==e.keywords?e.keywords:null!==(a=null==t?void 0:t.keywords)&&void 0!==a?a:null};return G({matching_rules:s}),s})},[G]);return(0,s.useEffect)(()=>{A(!0),W(f).finally(()=>A(!1))},[W,f]),(0,r.jsx)(u.Provider,{value:{isFetching:x,fetchedDeck:v,name:p,onChangeName:F,description:w,onChangeDescription:H,coverPhoto:k,onUploadImage:J,links:C,onClickAddLink:T,isRemovingLink:N,onClickRemoveLink:Q,admins:z,isAddingAdmin:R,onClickAddAdmin:Z,isRemovingAdmin:B,onClickRemoveAdmin:Y,adminApproval:q,onChangeAdminApproval:X,autoPost:K,onChangeAutoPost:$,matchingRules:V,onChangeMatchingRules:ee,isSaving:I,hasUnsavedChanges:O},children:m})},h=()=>{let e=(0,s.useContext)(u);if(void 0===e)throw Error("useEditDeck must be used within EditDeckProvider");return e}},41307:function(e,t,l){l.d(t,{p:function(){return o},y:function(){return c}});var r=l(57348),a=l(16189),s=l(12465),i=l(15346);let n=(0,i.createContext)(void 0),o=e=>{let{steps:t,queryParamKey:l,children:o,createFlow:c,finishFlow:d}=e,u=(0,a.useSearchParams)(),m=(0,i.useMemo)(()=>u.get(l),[l,u]),[h,f]=(0,i.useState)(0),[x,A]=(0,i.useState)(!1),[v,g]=(0,i.useState)(null),[p,b]=(0,i.useTransition)(),w=(0,i.useMemo)(()=>0===h,[h]),y=(0,i.useMemo)(()=>h===t.length-1,[h,t.length]),k=(0,i.useMemo)(()=>t[h],[h,t]),j=(0,i.useMemo)(()=>t.length,[t]),C=(0,i.useCallback)(()=>{let e=new URL(window.location.href);e.searchParams.delete(l),window.history.pushState({},"",e.toString()),f(0),A(!1)},[l]),S=(0,i.useCallback)(async e=>{C();try{g(e);let t=await c();if(!t)throw Error("Failed to create new deck");let r=t.id,a=new URL(window.location.href);a.searchParams.set(l,r),window.history.pushState({},"",a.toString())}catch(e){console.error(e),(0,s.yv)("Failed to create new deck",{variant:"error"})}finally{g(null)}},[c,l,C]),N=(0,i.useCallback)(()=>{if(w)return C();f(e=>e-1)},[w,C]),D=(0,i.useCallback)(async()=>{m&&(y?b(()=>{d(m)}):f(e=>e+1))},[d,m,y]);return(0,i.useEffect)(()=>()=>{C()},[C]),(0,r.jsx)(n.Provider,{value:{flowId:m,activeStep:k,activeStepIdx:h,numberOfSteps:j,isSaving:x,setIsSaving:A,isFirstStep:w,isLastStep:y,isCreating:v,isFinishing:p,onClickClose:C,onClickStart:S,onClickBack:N,onClickNext:D},children:o})},c=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useFlowModal must be used within FlowModalProvider");return e}},82739:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},21008:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}}]);