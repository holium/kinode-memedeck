(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3798],{30258:function(e,t,l){Promise.resolve().then(l.bind(l,13108)),Promise.resolve().then(l.bind(l,16080))},13343:function(e,t,l){"use strict";l.d(t,{E:function(){return i}});var s=l(57348),r=l(81015),n=l(54167);let i=e=>{let{children:t,...l}=e;return n.BB||n.cm?(0,s.jsx)(r.e,{...l,children:t}):(0,s.jsx)(s.Fragment,{children:t})}},9806:function(e,t,l){"use strict";l.d(t,{D:function(){return C}});var s=l(57348),r=l(76105),n=l(94645),i=l(4930),a=l(95900),o=l(87840),c=l(68887),u=l(15346),d=l(41307);let f={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?1e3:-1e3,opacity:0})},m=()=>{let{activeStep:e,activeStepIdx:t}=(0,d.y)(),[l,r]=(0,u.useState)(t),n=t>l?1:-1;return(0,u.useEffect)(()=>{r(t)},[t]),(0,s.jsx)(o.E.div,{className:"min-h-72",transition:{type:"spring",stiffness:300,damping:30},children:(0,s.jsx)(c.M,{initial:!1,custom:n,children:(0,s.jsx)(o.E.div,{custom:n,variants:f,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute size-full",children:(0,s.jsx)(a.I,{children:e.body})},t)})})};var x=l(23805),h=l(67425),v=l(72148);let p=()=>{let{isFirstStep:e,isLastStep:t,isFinishing:l,onClickBack:r,onClickNext:n}=(0,d.y)(),{name:i,description:a,hasUnsavedChanges:o,isSaving:c}=(0,v.useEditDeck)(),f=(0,u.useMemo)(()=>0===i.length||0===a.length||o||c,[i.length,a.length,o,c]);return(0,s.jsx)(x.R,{children:(0,s.jsxs)("div",{className:"w-full flex items-center justify-end gap-3",children:[(0,s.jsx)(h.A,{variant:"flat",onClick:r,children:e?"Cancel":"Back"}),(0,s.jsx)(h.A,{variant:"solid",color:"primary",isDisabled:f,isLoading:l,onClick:n,children:t?"Finish":"Next"})]})})};var g=l(25291);let b=e=>{let{text:t=""}=e;return(0,s.jsx)("h3",{className:"font-bold text-lg",children:t})},j=e=>{let{text:t=""}=e;return(0,s.jsx)("p",{className:"font-normal text-xs text-white-400/50",children:t})},w=()=>{let{activeStep:e,activeStepIdx:t,numberOfSteps:l}=(0,d.y)();return(0,s.jsxs)(g.k,{className:"pt-6 flex flex-col gap-1",children:[(0,s.jsx)(b,{text:e.title}),(0,s.jsx)(j,{text:e.subtitle}),(0,s.jsxs)("div",{className:"absolute top-1.5 right-2 text-white-400/25 text-sm leading-6 font-normal tracking-widest",children:[t+1,"/",l]})]})};var k=l(21202);let y=e=>{let{useIsSavingHook:t}=e,{isSaving:l}=t();return l?(0,s.jsx)(k.W,{size:"sm",isIndeterminate:!0,"aria-label":"Loading..."}):(0,s.jsx)("div",{className:"h-1"})},C=e=>{let{BodyWrapper:t,Provider:l,providerKey:a,useIsSavingHook:o}=e,{flowId:c,onClickClose:u}=(0,d.y)();return(0,s.jsx)(r.R,{size:"lg",classNames:{base:"overflow-hidden",header:"px-4 sm:px-6",body:"px-4 sm:px-6 min-h-72 max-h-72 overflow-hidden",footer:"px-4 sm:px-6"},hideCloseButton:!0,isOpen:!!c,onOpenChange:u,children:c?(0,s.jsx)(l,{params:{[a]:c},children:(0,s.jsxs)(n.A,{children:[(0,s.jsx)(y,{useIsSavingHook:o}),(0,s.jsx)(w,{}),(0,s.jsx)(t,{children:(0,s.jsx)(m,{})}),(0,s.jsx)(p,{})]})}):(0,s.jsx)(i.c,{})})}},59602:function(e,t,l){"use strict";l.d(t,{y:function(){return a}});var s=l(57348),r=l(37824),n=l(13582),i={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0};let a=e=>{let{title:t,subtitle:l,border:a="border-b border-transparent",isLoading:o=!1,endContent:c,onGoBack:u}=e,{goBack:d}=(0,n.useAppHistory)();return(0,s.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(a),children:[(0,s.jsx)(r.O,{src:i,alt:"Back",onClick:null!=u?u:d}),o?(0,s.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,s.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,s.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:t}),l]}),c]})}},37824:function(e,t,l){"use strict";l.d(t,{O:function(){return n}});var s=l(57348),r=l(45155);let n=e=>{let{src:t,alt:l,id:n,margin:i="m-2",w:a="w-3.5",onClick:o}=e;return(0,s.jsx)("button",{id:n,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(i),onClick:o,children:(0,s.jsx)(r.default,{priority:!0,src:t,alt:l,className:"opacity-85 ".concat(a)})})}},16080:function(e,t,l){"use strict";l.r(t),l.d(t,{ProfileBaseLayout:function(){return A}});var s,r,n=l(57348),i=l(53350),a=l(67425),o=l(90226),c=l(6526),u=l(53300),d=l(38028),f=l(15346),m=l(59602),x=l(13343),h=l(54144),v=l(20923),p=l(13881),g=l(16189),b=l(9806);(s=r||(r={})).Memes="Memes",s.Decks="Decks",s.Bookmarks="Bookmarks";let j=(e,t)=>{let l=t.toLowerCase();switch(e){case"Memes":return"/u/".concat(l);case"Decks":return"/u/".concat(l,"/decks");case"Bookmarks":return"/u/".concat(l,"/bookmarks");default:return""}};var w=l(72148),k=l(87140),y=l(41307);let C="create-contest-profile-tabs",_=e=>{let{handle:t,isSelf:l}=e,s=(0,g.usePathname)(),{isCreating:i,onClickStart:o}=(0,y.y)();return(0,n.jsxs)("div",{className:"relative flex min-w-full max-w-full flex-row items-center justify-between gap-3 overflow-x-auto border-b-1 border-white-400/15 px-1.5",children:[(0,n.jsx)(h.n,{color:"primary",variant:"underlined","aria-label":"Profile tabs",radius:"full",selectedKey:s.toLowerCase(),classNames:{base:"w-full xs:mt-2 mt-1",tabList:"gap-4 w-full relative rounded-none p-0 border-b border-divider px-3 xs:justify-center md:justify-start border-none",cursor:"w-full bg-blue-500",tab:"max-w-fit px-0 !h-12 select-none outline-none",tabContent:"group-data-[selected=true]:text-blue-500 px-1 text-white-400/75 font-semibold tracking-wide mb-1 !text-base !font-semibold"},children:Object.values(r).map(e=>{let l=j(e,t);return(0,n.jsx)(v.r,{href:l,className:"!focus-visible:outline-none",title:(0,n.jsx)("h2",{children:e}),as:p.default},l)})}),l&&(0,n.jsx)(a.A,{variant:"bordered",id:C,isLoading:i===C,isDisabled:null!==i,onClick:()=>o(C),children:"New Deck"}),(0,n.jsx)(b.D,{providerKey:"deckId",Provider:w.EditDeckProvider,useIsSavingHook:w.useEditDeck,BodyWrapper:k.DiffusionConfigProvider})]})},N=e=>{let{handle:t=""}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-12",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 px-3",children:[(0,n.jsx)("div",{className:"size-24 rounded-full bg-black-300"}),(0,n.jsx)("div",{className:"mb-2 flex flex-col gap-2",children:(0,n.jsxs)("h3",{className:"text-lg font-medium leading-4 text-white-400/70",children:["@",t]})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 px-3",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold leading-6",children:"This account doesnâ€™t exist"}),(0,n.jsx)("p",{className:"text-lg font-medium leading-4 text-white-400/70",children:"Try searching for another."})]})]})};var S=l(11781),P=l(83815),E=l(13582),D=l(71402),B=l(64720),z=l(35878),M=l(99957);let A=e=>{let{params:t,children:l}=e,{handle:s}=(0,P.d)({params:t,key:"handle"}),{profile:r}=(0,D.useProfile)(),{isSignupModalOpen:h,setIsSignupModalOpen:v}=(0,B.useSidebar)(),{goBack:p}=(0,E.useAppHistory)(),[g,b]=(0,f.useState)(null),[j,w]=(0,f.useState)(!0),[k,y]=(0,f.useState)(),C=(0,f.useMemo)(()=>(null==r?void 0:r.twitter_profile.screen_name)===s,[s,r]),A=(0,f.useMemo)(()=>{var e;return null!==(e=null==k?void 0:k.profile_image_url_https.replace("_normal",""))&&void 0!==e?e:""},[null==k?void 0:k.profile_image_url_https]),L=(0,f.useCallback)(()=>{z.P.logout().then(()=>{window.location.reload()})},[]);return((0,f.useEffect)(()=>{r&&C?(y(r.twitter_profile),b(r.user.badge_image_url),w(!1)):z.P.getProfileByHandle(s).then(e=>{e?(y(e.twitter_profile),b(e.badge_image_url)):(y(null),b(null))}).catch(()=>y(null)).finally(()=>w(!1))},[C,s,r]),j)?(0,n.jsxs)("div",{className:"flex size-full flex-col gap-3",children:[(0,n.jsx)(m.y,{title:"",isLoading:!0}),(0,n.jsxs)("div",{className:"mb-2 flex items-center gap-3 px-3",children:[(0,n.jsx)("div",{className:"size-24 animate-pulse rounded-full bg-gray-200"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"h-6 w-48 animate-pulse rounded bg-gray-200"}),(0,n.jsx)("div",{className:"h-4 w-32 animate-pulse rounded bg-gray-200"})]})]}),(0,n.jsx)(_,{handle:"",isSelf:C})]}):k?(0,n.jsxs)("div",{className:"flex size-full flex-col gap-3",children:[(0,n.jsx)(m.y,{title:"Profile",onGoBack:()=>p("/home","/u/".concat(k.screen_name)),endContent:C?(0,n.jsx)(a.A,{isIconOnly:!0,variant:"flat",className:"flex md:hidden mr-3",onClick:L,children:(0,n.jsx)(i.JO,{icon:"iconamoon:exit",width:16})}):void 0}),(0,n.jsx)(o.z,{name:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)("h2",{className:"text-2xl font-black truncate",children:k.name}),g&&(0,n.jsx)(x.E,{content:"Kinode user",children:(0,n.jsx)(c.J,{src:g,alt:"badge",className:"rounded-md",width:24,height:24})})]}),classNames:{base:(0,M.cn)("flex-col gap-2 mb-2 px-4 justify-start","sm:flex-row sm:gap-4"),wrapper:(0,M.cn)("flex items-center gap-1 items-center max-w-full","sm:items-start sm:gap-0.5"),name:"text-2xl font-bold max-w-full"},description:(0,n.jsxs)(u.O,{href:"https://x.com/".concat(k.screen_name),size:"sm",className:"flex items-center text-base font-normal text-white-400/50",isExternal:!0,children:["@".concat(k.screen_name),(0,n.jsx)(d.x,{})]}),avatarProps:{className:"!size-14 sm:!size-24 overflow-hidden rounded-full",src:A,alt:k.screen_name,onError:async()=>{console.log("Failed to load avatar. Refreshing X profile.");let e=await z.P.refreshProfile(k.screen_name);y(t=>({...t,...e.twitter_profile}))}}}),(0,n.jsx)(_,{handle:s,isSelf:C}),l,h&&(0,n.jsx)(S.c,{isOpen:h,onClose:()=>v(!1)})]}):(0,n.jsxs)("div",{className:"flex size-full flex-col gap-3",children:[(0,n.jsx)(m.y,{title:""}),(0,n.jsx)(N,{handle:s})]})}},83815:function(e,t,l){"use strict";l.d(t,{d:function(){return i}});var s=l(16189),r=l(15346),n=l(77623);let i=e=>{let{key:t,index:l,params:i}=e,a=(0,s.usePathname)(),o=(0,r.useMemo)(()=>{let e=n.P.some(e=>a.startsWith(e));if("memeId"===t&&!e)return i[t]||"";{var s;let e=null!==(s=a&&a.split("/")[l||2])&&void 0!==s?s:"";return i[t]||e}},[l,t,i,a]);return{[t]:decodeURIComponent(o)}}},13582:function(e,t,l){"use strict";l.r(t),l.d(t,{AppHistoryProvider:function(){return o},useAppHistory:function(){return c}});var s=l(57348),r=l(16189),n=l(12465),i=l(15346);let a=(0,i.createContext)({}),o=e=>{let{children:t}=e,l=(0,r.usePathname)(),o=(0,r.useRouter)(),[c,u]=(0,i.useState)([]),d=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0,l=e;c.length>1&&(l=c[c.length-2],void 0!==t&&l.includes(t)&&(l=e)),"string"!=typeof l&&(l="/home"),o.push(l,{scroll:!1})},[c,o]);return(0,i.useEffect)(()=>{u(e=>e[e.length-1]!==l?[...e,l]:e)},[l]),(0,s.jsxs)(a.Provider,{value:{goBack:d},children:[t,(0,s.jsx)(n.wT,{dense:!0,maxSnack:3})]})},c=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useFeed must be used within AppHistoryProvider");return e}},87140:function(e,t,l){"use strict";l.r(t),l.d(t,{DiffusionConfigProvider:function(){return a},useDiffusionConfig:function(){return o}});var s=l(57348),r=l(15346),n=l(55771);let i=(0,r.createContext)(void 0),a=e=>{let{children:t}=e,[l,a]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{a(!0),n.p.getConfig().then(c).finally(()=>a(!1))},[]),(0,s.jsx)(i.Provider,{value:{config:o,isFetchingConfig:l},children:t})},o=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useDiffusionConfig must be used within DiffusionConfigProvider");return e}},72148:function(e,t,l){"use strict";l.r(t),l.d(t,{EditDeckProvider:function(){return f},useEditDeck:function(){return m}});var s=l(57348),r=l(12465),n=l(15346),i=l(83815),a=l(64720),o=l(35878),c=l(74859),u=l(41973);let d=(0,n.createContext)(void 0),f=e=>{var t;let{params:l,children:f}=e,{deckId:m}=(0,i.d)({params:l,key:"deckId"}),x=(0,n.useMemo)(()=>m.replace("deck:",""),[m]),[h,v]=(0,n.useState)(!0),[p,g]=(0,n.useState)(null),[b,j]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),[y,C]=(0,n.useState)(null),[_,N]=(0,n.useState)([]),[S,P]=(0,n.useState)(null),[E,D]=(0,n.useState)(null!==(t=null==p?void 0:p.admins)&&void 0!==t?t:[]),[B,z]=(0,n.useState)(null),[M,A]=(0,n.useState)(null),[L,R]=(0,n.useState)(!1),[F,O]=(0,n.useState)(!1),[H,I]=(0,n.useState)(null),{queueUpdate:U,isSaving:T,hasUnsavedChanges:W}=function(e){let[t,l]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),i=(0,n.useRef)({}),{setMyDecks:u}=(0,a.useSidebar)(),d=(0,n.useCallback)((0,c.k)(async(e,t)=>{r(!0);let l=null,s=null;try{var n;let l=await o.P.updateDeck(e,t);s=null!==(n=null==l?void 0:l.cover_photo)&&void 0!==n?n:""}finally{r(!1),u(r=>{var n,i,a;if(!r)return r;let o=r.find(t=>t.id===e);return l=null!==(i=null!==(n=t.title)&&void 0!==n?n:null==o?void 0:o.title)&&void 0!==i?i:"",s=null!==(a=null!=s?s:null==o?void 0:o.cover_photo)&&void 0!==a?a:"",[{id:e,title:l,cover_photo:s,is_admin:!0},...r.filter(t=>t.id!==e)]})}},500),[]);return{queueUpdate:(0,n.useCallback)(t=>{i.current={...i.current,...t},l(!0),d(e,i.current).finally(()=>{i.current={},l(!1)})},[e,d]),isSaving:s,hasUnsavedChanges:t}}(x),q=(0,n.useCallback)(async e=>{var t,l;let s=await o.P.getDeck(e,{interval:u.u.AllTime});s&&(g(s),j(s.title),k(null!==(t=s.description)&&void 0!==t?t:""),C(s.cover_photo),N(null!==(l=s.external_links)&&void 0!==l?l:[]),D(s.admins),R(s.require_approval),O(s.auto_post),I(s.matching_rules))},[]),K=(0,n.useCallback)(e=>{j(e),U({title:e})},[U]),J=(0,n.useCallback)(e=>{k(e),U({description:e})},[U]),G=(0,n.useCallback)(e=>{C(e?URL.createObjectURL(new Blob([e])):null),U({cover_photo:e?Array.from(e):null})},[U]),X=(0,n.useCallback)(e=>{let t=[..._,e];N(t),U({external_links:t})},[_,U]),Q=(0,n.useCallback)(e=>{let t=_.filter(t=>t!==e);P(e),U({external_links:t}),N(t),P(null)},[_,U]),V=(0,n.useCallback)(e=>{try{z(e.id),D(t=>[...t,e]),U({add_admin:e.id})}catch(t){console.error("Failed to add admin",t),(0,r.yv)("Failed to add admin",{variant:"error"}),D(t=>t.filter(t=>t.id!==e.id))}finally{z(null)}},[U]),Y=(0,n.useCallback)(e=>{try{A(e.id),U({remove_admin:e.id}),D(t=>t.filter(t=>t.id!==e.id))}catch(e){console.error("Failed to remove admin",e),(0,r.yv)("Failed to remove admin",{variant:"error"})}finally{A(null)}},[U]),Z=(0,n.useCallback)(e=>{R(e),U({require_approval:e})},[U]),$=(0,n.useCallback)(e=>{O(e),U({auto_post:e})},[U]),ee=(0,n.useCallback)(e=>{I(t=>{var l,s,r;let n={characters:void 0!==e.characters?e.characters:null!==(l=null==t?void 0:t.characters)&&void 0!==l?l:null,styles:void 0!==e.styles?e.styles:null!==(s=null==t?void 0:t.styles)&&void 0!==s?s:null,keywords:void 0!==e.keywords?e.keywords:null!==(r=null==t?void 0:t.keywords)&&void 0!==r?r:null};return U({matching_rules:n}),n})},[U]);return(0,n.useEffect)(()=>{v(!0),q(x).finally(()=>v(!1))},[q,x]),(0,s.jsx)(d.Provider,{value:{isFetching:h,fetchedDeck:p,name:b,onChangeName:K,description:w,onChangeDescription:J,coverPhoto:y,onUploadImage:G,links:_,onClickAddLink:X,isRemovingLink:S,onClickRemoveLink:Q,admins:E,isAddingAdmin:B,onClickAddAdmin:V,isRemovingAdmin:M,onClickRemoveAdmin:Y,adminApproval:L,onChangeAdminApproval:Z,autoPost:F,onChangeAutoPost:$,matchingRules:H,onChangeMatchingRules:ee,isSaving:T,hasUnsavedChanges:W},children:f})},m=()=>{let e=(0,n.useContext)(d);if(void 0===e)throw Error("useEditDeck must be used within EditDeckProvider");return e}},41307:function(e,t,l){"use strict";l.d(t,{p:function(){return o},y:function(){return c}});var s=l(57348),r=l(16189),n=l(12465),i=l(15346);let a=(0,i.createContext)(void 0),o=e=>{let{steps:t,queryParamKey:l,children:o,createFlow:c,finishFlow:u}=e,d=(0,r.useSearchParams)(),f=(0,i.useMemo)(()=>d.get(l),[l,d]),[m,x]=(0,i.useState)(0),[h,v]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[b,j]=(0,i.useTransition)(),w=(0,i.useMemo)(()=>0===m,[m]),k=(0,i.useMemo)(()=>m===t.length-1,[m,t.length]),y=(0,i.useMemo)(()=>t[m],[m,t]),C=(0,i.useMemo)(()=>t.length,[t]),_=(0,i.useCallback)(()=>{let e=new URL(window.location.href);e.searchParams.delete(l),window.history.pushState({},"",e.toString()),x(0),v(!1)},[l]),N=(0,i.useCallback)(async e=>{_();try{g(e);let t=await c();if(!t)throw Error("Failed to create new deck");let s=t.id,r=new URL(window.location.href);r.searchParams.set(l,s),window.history.pushState({},"",r.toString())}catch(e){console.error(e),(0,n.yv)("Failed to create new deck",{variant:"error"})}finally{g(null)}},[c,l,_]),S=(0,i.useCallback)(()=>{if(w)return _();x(e=>e-1)},[w,_]),P=(0,i.useCallback)(async()=>{f&&(k?j(()=>{u(f)}):x(e=>e+1))},[u,f,k]);return(0,i.useEffect)(()=>()=>{_()},[_]),(0,s.jsx)(a.Provider,{value:{flowId:f,activeStep:y,activeStepIdx:m,numberOfSteps:C,isSaving:h,setIsSaving:v,isFirstStep:w,isLastStep:k,isCreating:p,isFinishing:b,onClickClose:_,onClickStart:N,onClickBack:S,onClickNext:P},children:o})},c=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useFlowModal must be used within FlowModalProvider");return e}},55771:function(e,t,l){"use strict";l.d(t,{p:function(){return i},s:function(){return r}});var s=l(54167);let r=()=>s.cm?"wss://staging-generation-api.memedeck.xyz/v1/ws":s.BB||s.j7?"wss://studio.api.memedeck.xyz/v1/ws":"ws://127.0.0.1:8079/v1/ws";class n{async getConfig(){return fetch("".concat(n.BASE_URL,"/studio/config")).then(e=>e.json())}async getRandomPrompt(){return fetch("".concat(n.BASE_URL,"/studio/random-prompt")).then(e=>e.json())}}n.BASE_URL=s.cm?"https://staging-generation-api.memedeck.xyz/v1":s.BB||s.j7?"https://studio.api.memedeck.xyz/v1":"http://127.0.0.1:8079/v1";let i=new n}},function(e){e.O(0,[7398,7425,4175,3159,8797,2079,3881,7686,1639,9028,1510,5952,1202,9832,8230,4513,5878,8852,3108,937,7114,1744],function(){return e(e.s=30258)}),_N_E=e.O()}]);