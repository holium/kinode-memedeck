"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{19783:function(e,l,a){a.d(l,{U:function(){return x}});var t=a(57348),s=a(53350),i=a(92378),r=a(6526),n=a(950),o=a(4930),c=a(67425),d=a(12465),u=a(15346),f=a(67733),h=a(38857);let m=async e=>new Promise((l,a)=>{let t=new Image,s=new FileReader;s.onload=()=>{t.src=s.result},t.onload=()=>{let a=(0,f.vO)(t.width,t.height),[s,i]=f.e5[a],r=document.createElement("canvas");r.width=s,r.height=i;let n=r.getContext("2d");if(!n)return;let o=t.width,c=t.height;(0,h.h)({ctx:n,image:t,targetWidth:s,targetHeight:i,imageWidth:o,imageHeight:c}),l({base64:r.toDataURL(e.type),aspectRatio:a,targetWidth:s,targetHeight:i})},s.onerror=e=>{a(e)},s.readAsDataURL(e)});var p=a(81727);let x=e=>{let{initialSrc:l,imageRef:a,onParseImage:f,onClickDeleteMeme:h}=e,[x,v]=(0,u.useState)(l),[g,b]=(0,u.useState)(!1),[j,y]=(0,u.useState)(!1),C=(0,u.useCallback)(async e=>{if(e){if((0,d.sy)(),e.length>10){(0,d.yv)("Please upload 10 files or less",{variant:"error"});return}for(let l=0;l<e.length;l++)if(e[l].size>33554432){(0,d.yv)("Please upload files 32MB or less",{variant:"error"});return}b(!0);try{if(0===e.length)return;let l=e[0],{base64:a,aspectRatio:t,targetWidth:s,targetHeight:i}=await m(l),r=a.split(",")[1],n=Uint8Array.from(atob(r),e=>e.charCodeAt(0));await f(n,s,i,t),v(a)}catch(e){console.error("Error uploading files",e),(0,d.yv)("Error uploading files",{variant:"error"})}finally{b(!1)}}},[f]),N=(0,u.useCallback)(async()=>{y(!0);try{await h(),v(null)}catch(e){console.error("Error deleting meme",e)}finally{y(!1)}},[h]);return(0,t.jsxs)(i.w,{radius:"md",className:"border-1 border-transparent transition-all ".concat(!x&&"hover:border-orange-400"),children:[(0,t.jsx)("div",{className:"relative size-full max-h-full max-w-full aspect-square flex items-center justify-center ".concat(x?"":"cursor-pointer"),children:x?(0,t.jsx)(r.J,{ref:a,alt:"Image input",classNames:{wrapper:"size-full min-w-full min-h-full",img:"size-full object-cover rounded-none"},src:x}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.JO,{className:"size-8",icon:"hugeicons:image-upload-01"}),(0,t.jsx)("input",{type:"file",multiple:!1,accept:p.RL,className:"absolute inset-0 size-full cursor-pointer opacity-0",onChange:e=>C(e.target.files)})]})}),(0,t.jsxs)(n.i,{className:"gap-4 justify-end min-h-10 overflow-hidden absolute w-full z-10 -top-2.5 -right-2.5",children:[g?(0,t.jsx)(o.c,{size:"sm",color:"warning"}):null,x&&!g?(0,t.jsx)(c.A,{size:"sm",variant:"flat",radius:"full",className:"backdrop-blur-sm bg-red-900/70",isIconOnly:!0,color:"danger",isLoading:j,onClick:N,children:(0,t.jsx)(s.JO,{className:"size-5 !text-red-400",icon:"ic:baseline-close"})}):null]})]})}},13343:function(e,l,a){a.d(l,{E:function(){return r}});var t=a(57348),s=a(81015),i=a(54167);let r=e=>{let{children:l,...a}=e;return i.BB||i.cm?(0,t.jsx)(s.e,{...a,children:l}):(0,t.jsx)(t.Fragment,{children:l})}},86628:function(e,l,a){a.d(l,{d:function(){return d}});var t=a(57348),s=a(53350),i=a(51934),r=a(67425),n=a(88036),o=a(15346),c=a(87140);let d=e=>{var l;let{selectedAesthetic:a,onSelect:d,hideDescription:u=!1}=e,{config:f}=(0,c.useDiffusionConfig)(),[h,m]=(0,o.useState)("None selected"),p=(0,o.useCallback)(e=>{if(e||d(null),!f)return;let l=f.aesthetics.find(l=>l.id===e);d(null!=l?l:null)},[f,d]);return f?(0,t.jsx)(i.d,{"aria-label":"aesthetic selector",label:"Style",placeholder:h,description:u?null:null!==(l=null==a?void 0:a.description)&&void 0!==l?l:"Applies a style to the prompt",selectedKey:a?a.id:null,size:"md",onOpenChange:e=>{e?m("Type to filter"):m("None selected")},isClearable:!1,endContent:a&&(0,t.jsx)(r.A,{size:"sm",isIconOnly:!0,variant:"flat",onClick:()=>d(null),children:(0,t.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}),onSelectionChange:p,children:f.aesthetics.map(e=>(0,t.jsx)(n.R,{"aria-label":e.name,className:"flex flex-column justify-center gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.description})]})},e.id))}):null}},56889:function(e,l,a){a.d(l,{z:function(){return p}});var t=a(57348),s=a(53350),i=a(1718),r=a(67425),n=a(5070),o=a(88036),c=a(15346),d=a(87140);let u=["apu_apustaja","chad","doomer","pepe","skibidi","soyjack","tradwife","wojack","normal"],f=e=>{let l=e.replace("ai_character:","");return u.includes(l)?0:1},h=e=>{switch(e){case 0:return"Default Characters";case 1:return"Crypto Friends";default:return"Other"}},m=e=>{let l=-1,a=[];for(let t of e)t.section!==l&&(a.push({id:Math.random().toString(),section:t.section,isDivider:!0}),l=t.section),a.push(t);return a},p=e=>{let{selectedCharacter:l,selectedStyler:a,onSelect:u,showClearButton:p=!0}=e,{config:x}=(0,d.useDiffusionConfig)(),[v,g]=(0,c.useState)(!1),b=(0,c.useMemo)(()=>{var e;return null!==(e=null==x?void 0:x.characters)&&void 0!==e?e:[]},[null==x?void 0:x.characters]),j=(0,c.useMemo)(()=>null==l?void 0:l.id,[l]),y=(0,c.useMemo)(()=>null==a?void 0:a.id,[a]),C=(0,c.useMemo)(()=>m(b.sort((e,l)=>"normal"===e.id?1:"normal"===l.id?-1:0).map(e=>({...e,avatar:function(e,l){if("normal"===l)return;let a=e.replace(/[_\s]/g,"-"),t=l.replace(/[_\s]/g,"-");return"https://memedeckblob.blob.core.windows.net/ai-characters/".concat(a,"-").concat(t,".png")}(null!=y?y:"",e.id),section:f(e.id),isSelected:j===e.id,isDivider:!1})).sort((e,l)=>e.section-l.section)),[b,j,y]),N=(0,c.useCallback)(e=>{let l=b.find(l=>l.id===e);l&&u(l)},[b,u]);return(0,t.jsx)(i.g,{items:C,isOpen:v,onOpenChange:g,placeholder:"Select a character","aria-label":"Character",classNames:{trigger:"h-[80px]",popoverContent:"bg-[#0F0F0F] border-1 border-black-100",listbox:"h-fit selector-list-box",listboxWrapper:"min-h-[400px]"},selectedKeys:[j].filter(Boolean),onChange:e=>N(e.target.value),endContent:j&&p&&(0,t.jsx)(r.A,{size:"sm",isIconOnly:!0,variant:"flat",onClick:()=>u(null),children:(0,t.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}),renderValue:e=>e.map(e=>{var l,a,s,i;return(null===(l=e.data)||void 0===l?void 0:l.isDivider)?null:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.h,{alt:(null===(a=e.data)||void 0===a?void 0:a.id)+"-avatar",className:"shrink-0 mr-2",radius:"md",size:"lg",src:null===(s=e.data)||void 0===s?void 0:s.avatar}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-tiny text-default-600",children:"Character"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:null===(i=e.data)||void 0===i?void 0:i.name})]})]},e.key)}),children:e=>e.isDivider?(0,t.jsx)(o.R,{hideSelectedIcon:!0,isReadOnly:!0,"aria-disabled":!0,className:"col-span-2 lg:col-span-3",classNames:{base:"bg-transparent hover:!bg-transparent cursor-default"},children:(0,t.jsxs)("div",{className:"flex w-full items-center gap-3",children:[(0,t.jsx)("h3",{className:"uppercase text-xs tracking-wide font-medium text-white-400/50 select-none",children:h(e.section)}),(0,t.jsx)("hr",{className:"flex-1 opacity-10"},"divider-".concat(Math.random()))]})},null==e?void 0:e.id):(0,t.jsx)(o.R,{"aria-label":null==e?void 0:e.name,color:e.isSelected?"primary":"default",variant:"solid","data-hover":!0,hideSelectedIcon:!0,classNames:{base:"flex-1 flex flex-col gap-0 ".concat(e.isSelected?"bg-primary-400":""),wrapper:"flex flex-col"},children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,t.jsx)(n.h,{alt:(null==e?void 0:e.id)+"-avatar",radius:"md",size:"lg",src:null==e?void 0:e.avatar}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("span",{className:"text-sm font-medium",children:null==e?void 0:e.name})})]})},null==e?void 0:e.id)})}},87140:function(e,l,a){a.r(l),a.d(l,{DiffusionConfigProvider:function(){return n},useDiffusionConfig:function(){return o}});var t=a(57348),s=a(15346),i=a(55771);let r=(0,s.createContext)(void 0),n=e=>{let{children:l}=e,[a,n]=(0,s.useState)(null);return(0,s.useEffect)(()=>{i.p.getConfig().then(n)},[]),(0,t.jsx)(r.Provider,{value:{config:a},children:l})},o=()=>{let e=(0,s.useContext)(r);if(void 0===e)throw Error("useDiffusionConfig must be used within EditDeckProvider");return e}}}]);