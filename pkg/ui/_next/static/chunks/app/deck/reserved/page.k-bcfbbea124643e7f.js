(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8708],{39898:function(e,s,l){Promise.resolve().then(l.bind(l,35262))},35262:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return X}});var t=l(57348),a=l(15346),r=l(5070),n=l(92387),c=l(16189),i=l(19935),d=l(52053);let o=e=>{let{category:s}=e,{label:l,color:a}="character"===s?{color:"default",label:"Character"}:{color:"secondary",label:"Page"};return(0,t.jsx)(d.z,{variant:"dot",size:"sm",color:a,children:l})};var x=l(89765),m=l(35878),u=l(41973),h=l(71402);let p=(0,a.createContext)(void 0),f=e=>{let{deckId:s,children:l}=e,{profile:r}=(0,h.useProfile)(),[n,c]=(0,a.useState)(!0),[i,d]=(0,a.useState)(null),[o,x]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!1),g=(0,a.useMemo)(()=>(null==i?void 0:i.admins.findIndex(e=>e.id===(null==r?void 0:r.user.id)))!==-1,[i,r]),v=(0,a.useCallback)(async e=>{try{let s=await m.P.getDeck(e,{interval:u.u.AllTime});if(!s)return;d(s)}catch(e){console.error("Failed to fetch deck",e)}},[]);return(0,a.useEffect)(()=>{c(!0),v(s).then(()=>{c(!1)})},[s,v]),(0,t.jsx)(p.Provider,{value:{deck:i,isAdmin:g,isFetching:n,isAdminsModalOpen:o,setIsAdminsModalOpen:x,isPostersModalOpen:f,setIsPostersModalOpen:j},children:l})},j=()=>{let e=(0,a.useContext)(p);if(void 0===e)throw Error("useDeck must be used within EditDeckProvider");return e};var g=l(81727);let v=e=>{var s,l,a,d,m;let{deckId:u}=e,h=(0,c.useRouter)(),{deck:p,isAdmin:f,isFetching:v,setIsPostersModalOpen:N,setIsAdminsModalOpen:b}=j();return v&&!p?(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-1 pb-3 px-5",children:[(0,t.jsx)("div",{className:"animate-pulse rounded-xl size-28 bg-gray-200 shadow-lg"}),(0,t.jsxs)("header",{className:"w-full flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-9 md:h-10 w-40"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-6 w-28"}),(0,t.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-6 w-28"}),(0,t.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-6 w-28"})]})]})]}):p?(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-1 pb-3 px-5",children:[(0,t.jsx)(r.h,{classNames:{base:"!size-28 !rounded-xl"},alt:p.title,src:null!==(s=p.cover_photo)&&void 0!==s?s:"",className:"object-cover object-center shadow-lg select-none bg-white-400/10 border-1 border-white-400/10"}),(0,t.jsx)("header",{className:"w-full flex flex-col",children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[(0,t.jsxs)("div",{className:"w-full flex gap-3 justify-between md:items-center",children:[(0,t.jsxs)("div",{className:"w-full flex gap-3 items-center truncate",children:[(0,t.jsxs)("h1",{className:"flex gap-3 items-center truncate text-2xl md:text-3xl",children:[(0,t.jsx)("span",{className:"text-white-400 font-bold truncate",children:p.title?p.title:"Untitled"}),p.rank&&(0,t.jsxs)("span",{className:"text-white-400/70 font-bold",children:["#",p.rank]})]}),(0,t.jsx)(o,{category:p.category})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 flex-1",children:[f&&(0,t.jsx)(x.g,{deckId:u,size:"md",variant:"bordered",onDelete:()=>h.push("/trending")}),(0,t.jsx)(i.F,{title:"Post",variant:"ghost",color:"default",size:"md",queryParam:"?deck=".concat(u),className:"w-auto rounded-xl lg:min-w-[100px]",iconSize:"size-5"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("p",{className:"flex gap-1.5 text-base",children:[(0,t.jsx)("span",{className:"font-bold",children:null!==(l=p.total_posted)&&void 0!==l?l:0}),(0,t.jsx)("span",{className:"text-white-400/75",children:(0,g._6)(null!==(a=p.total_posted)&&void 0!==a?a:0,"meme","memes")})]}),(0,t.jsxs)("p",{className:"flex gap-1.5 text-base cursor-pointer hover:underline",onClick:()=>N(!0),children:[(0,t.jsx)("span",{className:"font-bold",children:null!==(d=p.creator_count)&&void 0!==d?d:0}),(0,t.jsx)("span",{className:"text-white-400/75",children:"".concat((0,g._6)(null!==(m=p.creator_count)&&void 0!==m?m:0,"creator","posters"))})]})]}),(0,t.jsx)(n._,{isBordered:!0,max:3,total:p.admins.length,renderCount:e=>{let s=e-3;return(0,t.jsx)("p",{className:"text-small text-foreground font-medium ms-2",children:s>0?"+".concat(s," ").concat((0,g._6)(s,"admin","admins")):"".concat(e," ").concat((0,g._6)(e,"admin","admins"))})},className:"md:hidden hover:underline cursor-pointer",onClick:()=>b(!0),children:p.admins.map(e=>(0,t.jsx)(r.h,{src:e.profile_image_url_https},e.id))}),(0,t.jsx)("p",{className:"md:hidden text-sm text-white-400/50 leading-normal",children:p.description?p.description:"No description"})]})})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-1 pb-3 px-5",children:[(0,t.jsx)("div",{className:"rounded-xl size-28 bg-white-400/5 shadow-lg"}),(0,t.jsx)("header",{className:"w-full flex flex-col gap-3",children:(0,t.jsx)("h1",{className:"flex gap-3 items-end text-3xl md:text-4xl",children:(0,t.jsx)("span",{className:"text-white-400 font-bold",children:u})})})]})};var N=l(13881),b=l(15800);let w=e=>{let{posters:s,isFetching:l}=e;return l?(0,t.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3].map(e=>(0,t.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,t.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,t.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):0===s.length?(0,t.jsx)("p",{className:"px-4 text-sm text-white-400/50 leading-normal line-clamp-3",children:"No posters yet"}):(0,t.jsx)("div",{className:"flex flex-col gap-1",children:s.map(e=>(0,t.jsx)(N.default,{href:"/u/".concat(e.screen_name),"aria-label":"View @".concat(e.screen_name,"'s profile"),className:"hover:bg-white-400/10 rounded-md",children:(0,t.jsx)(b.W,{avatarSrc:e.profile_image_url_https,badgeSrc:e.badge_image_url,screenName:e.name,userHandle:e.screen_name})},e.screen_name))})};var y=l(76105),k=l(94645),_=l(25291),C=l(95900);let z=e=>{let{title:s,count:l,body:a,isOpen:r,onClose:n}=e;return(0,t.jsx)(y.R,{isOpen:r,onOpenChange:n,children:(0,t.jsxs)(k.A,{className:"pb-4",children:[(0,t.jsxs)(_.k,{className:"flex items-center gap-3 px-6",children:[(0,t.jsx)("h3",{children:s}),l&&(0,t.jsx)(d.z,{size:"sm",variant:"flat",children:(0,t.jsx)("span",{className:"font-medium",children:l})})]}),(0,t.jsx)(C.I,{className:"max-h-96 overflow-y-auto px-2 py-0",children:a})]})})},S=e=>{let{title:s,count:l,onClick:a}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2 px-4 pt-4 cursor-pointer underline-title-on-hover",onClick:a,children:[(0,t.jsx)("h2",{className:"flex items-center justify-between text-lg font-black",children:s}),l&&(0,t.jsx)(d.z,{size:"sm",variant:"flat",children:(0,t.jsx)("span",{className:"font-medium no-underline!",children:l>99?"99+":l})})]})},F=()=>{let{deck:e,isFetching:s,isAdminsModalOpen:l,setIsAdminsModalOpen:a,isPostersModalOpen:r,setIsPostersModalOpen:n}=j(),c=null==e?void 0:e.posters.length,i=null==e?void 0:e.admins.length;return(0,t.jsx)("div",{className:"hidden flex-1 md:block max-w-full",children:(0,t.jsxs)("div",{className:"sticky right-0 top-0 flex flex-col gap-3 py-3",children:[(0,t.jsxs)("div",{className:"w-full rounded-lg pb-4",children:[(0,t.jsx)("h2",{className:"flex gap-1.5 items-center justify-between mb-2 px-4 pt-4 text-lg font-black",children:"About"}),e?(0,t.jsx)("p",{className:"px-4 text-sm text-white-400/50 leading-normal",children:e.description?e.description:"No description"}):(0,t.jsx)("div",{className:"mx-4 animate-pulse rounded bg-gray-200 h-[21px] w-28"})]}),(0,t.jsxs)("section",{className:"w-full rounded-lg pb-4",children:[(0,t.jsx)(S,{title:"Admins",count:i,onClick:()=>a(!0)}),e&&(0,t.jsx)(w,{posters:e.admins.slice(0,5),isFetching:s}),(0,t.jsx)(z,{title:"Admins",count:i,body:e&&(0,t.jsx)(w,{posters:e.admins,isFetching:s}),isOpen:l,onClose:()=>a(!1)})]}),(0,t.jsxs)("section",{className:"w-full rounded-lg pb-4",children:[(0,t.jsx)(S,{title:"Posters",count:c,onClick:()=>n(!0)}),e&&(0,t.jsx)(w,{posters:e.posters.slice(0,5),isFetching:s}),(0,t.jsx)(z,{title:"Posters",count:c,body:e&&(0,t.jsx)(w,{posters:e.posters,isFetching:s}),isOpen:r,onClose:()=>n(!1)})]})]})})};var P=l(59602),O=l(8485),A=l(24605),I=l(52428),R=l(95967),E=l(6076),B=l(16818),D=l(53350),H=l(1718),G=l(88036);let M={[u.a.Hot]:"ph:fire",[u.a.Recent]:"ph:clock"},L=e=>{let{icon:s,label:l}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,t.jsx)(D.JO,{icon:s,className:"min-w-5 size-5"}),l&&l.charAt(0).toUpperCase()+l.slice(1)]})},U=e=>{let{sortBy:s,onSelect:l}=e;return(0,t.jsx)(H.g,{"aria-label":"Sort by",placeholder:"Sort by",size:"md",radius:"full",variant:"bordered",color:"primary",classNames:{trigger:"w-[128px] px-3"},value:s,selectedKeys:[s],renderValue:()=>(0,t.jsx)(L,{"aria-label":s,label:s,icon:M[s]}),onChange:e=>{l(e.target.value)},children:Object.values(u.a).map(e=>(0,t.jsx)(G.R,{"aria-label":e,children:(0,t.jsx)(L,{label:e,icon:M[e]})},e))})};var W=l(5265),q=l(13582),K=l(35971);async function Q(e,s,l){l(null);let t=Date.now(),a=await m.P.search(e,s),r=Date.now();return l({total_memes:a.total_memes,time_ms:r-t}),a.memes}let V=(0,l(74859).k)(Q,500),J=e=>{let{deckId:s}=e,{goBack:l}=(0,q.useAppHistory)(),{profile:r,isSignupModalOpen:n,setIsSignupModalOpen:c}=(0,h.useProfile)(),[i,d]=(0,a.useState)(null),{deckQuery:o,setDeckQuery:x,deckResults:m,setDeckResults:u,hasFetchedDeckResults:p,setHasFetchedDeckResults:f}=(0,K.useFeed)(),{isFetching:j,onSearch:N,searchInterval:b,onSelectInterval:w,searchSortBy:y,onSelectSortBy:k}=(0,W.M)({feed:m,setFeed:u,hasFetched:p,setHasFetched:f,searchQuery:o,setSearchQuery:x,fetchOnLoad:!0,deckId:s,fetchFn:function(){for(var e=arguments.length,s=Array(e),l=0;l<e;l++)s[l]=arguments[l];return V(...s,d)}});return(0,t.jsx)("div",{className:"relative flex size-full flex-col gap-3",children:(0,t.jsxs)("div",{className:"flex size-full flex-row gap-2 xl:gap-4",children:[(0,t.jsxs)("div",{className:"min-h-full w-full border-white-400/15 pb-3 sm:border-x md:w-3/4 xs:border-0",children:[(0,t.jsx)(P.y,{title:"Deck",onGoBack:l}),(0,t.jsx)(v,{deckId:s}),(0,t.jsxs)("div",{className:"flex px-3 items-center justify-between border-t border-white-400/15 gap-2",children:[(0,t.jsx)(R.SearchBar,{hideLogo:!0,className:"px-0",border:"",placeholder:"Search by keyword",value:o,onSearch:N}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(B.m,{interval:b,onSelect:w}),(0,t.jsx)(U,{sortBy:y,onSelect:k})]})]}),i&&(0,t.jsx)(A.d,{isFetching:j,hasSearched:o.length>0,stats:i}),(0,t.jsx)(O.o,{memes:m,noResultsMessage:o.length>0?"":"No memes ".concat((0,g.qr)(b).toLowerCase()),isFetching:j,hasFetched:p,hasSearched:o.length>0,renderItem:(e,s)=>(0,t.jsx)(E.P,{meme:e,onClick:r?void 0:()=>c(!0)},s)}),n&&(0,t.jsx)(I.c,{isOpen:n,onClose:()=>c(!1)})]}),(0,t.jsx)(F,{})]})})};var T=l(13108),Z=l(95478);function X(e){let{params:s}=e,{id:l}=(0,Z.u)({params:s,key:"id"}),r=(0,a.useMemo)(()=>decodeURIComponent(l).replace("deck:",""),[l]);return(0,t.jsx)(T.Page,{isGated:!1,border:"border-none",children:(0,t.jsx)(f,{deckId:r,children:(0,t.jsx)(J,{deckId:r})})})}},13343:function(e,s,l){"use strict";l.d(s,{E:function(){return n}});var t=l(57348),a=l(81015),r=l(54167);let n=e=>{let{children:s,...l}=e;return r.BB||r.cm?(0,t.jsx)(a.e,{...l,children:s}):(0,t.jsx)(t.Fragment,{children:s})}},15800:function(e,s,l){"use strict";l.d(s,{W:function(){return c}});var t=l(57348),a=l(45155),r=l(13343),n=l(80951);let c=e=>{let{avatarSrc:s,badgeSrc:l,screenName:c,userHandle:i,p:d="px-4 py-2"}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none ".concat(d),children:[(0,t.jsx)("div",{className:"bg-black-400 size-10 rounded-full",children:(0,t.jsx)(n.R,{className:"rounded-full",src:s,alt:i,width:40,height:40})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 truncate",children:[(0,t.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:c}),l&&(0,t.jsx)(r.E,{content:"Kinode user",children:(0,t.jsx)(a.default,{src:l,alt:i,className:"rounded-sm",width:14,height:14})})]}),(0,t.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",i]})]})]})}},19935:function(e,s,l){"use strict";l.d(s,{F:function(){return d}});var t=l(57348),a=l(67425),r=l(45155),n=l(16189),c=l(71402),i=l(73139);let d=e=>{let{title:s="Generate",variant:l="shadow",color:d="primary",size:o="lg",queryParam:x="",className:m="mt-3 md:w-full min-w-[50px] rounded-full",innerClassName:u="lg:px-4",iconSize:h="size-6"}=e,p=(0,n.useRouter)(),{profile:f,setIsSignupModalOpen:j}=(0,c.useProfile)();return(0,t.jsx)(a.A,{type:"button",variant:l,color:d,className:m,size:o,radius:"full",disableRipple:!0,isIconOnly:!0,onClick:()=>{if(!f){j(!0);return}p.push("/studio".concat(x))},children:(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-center w-full ".concat(u),children:[(0,t.jsx)(r.default,{src:i.Z,alt:"Generate",className:h}),(0,t.jsx)("h1",{className:"hidden lg:block text-base truncate",children:s})]})})}},59602:function(e,s,l){"use strict";l.d(s,{y:function(){return c}});var t=l(57348),a=l(37824),r=l(13582),n={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0};let c=e=>{let{title:s,subtitle:l,border:c="border-b border-transparent",isLoading:i=!1,endContent:d,onGoBack:o}=e,{goBack:x}=(0,r.useAppHistory)();return(0,t.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(c),children:[(0,t.jsx)(a.O,{src:n,alt:"Back",onClick:null!=o?o:x}),i?(0,t.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,t.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,t.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:s}),l]}),d]})}},95478:function(e,s,l){"use strict";l.d(s,{u:function(){return a}});var t=l(16189);let a=e=>{var s;let{key:l,index:a,params:r}=e,n=(0,t.usePathname)(),c=null!==(s=n&&n.split("/")[a||2])&&void 0!==s?s:"",i=r[l]||c;return{[l]:i}}}},function(e){e.O(0,[7398,2221,4175,454,2872,9154,3881,7686,1133,6440,312,4822,6378,9581,1718,9394,3520,9113,5878,412,3214,3108,474,937,7114,1744],function(){return e(e.s=39898)}),_N_E=e.O()}]);