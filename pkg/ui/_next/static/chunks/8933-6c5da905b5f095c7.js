"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8933],{98127:function(e,t,r){r.d(t,{T:function(){return o}});var a=r(17412),n=r(26816);let o=()=>{let e=(0,n.useRouter)(),t=(0,n.usePathname)(),r=(0,n.useSearchParams)(),o=e=>{let n=new URLSearchParams(r.toString());n.delete("deckId"),n.delete("memeIndex");let o=encodeURIComponent(e.replace("meme:",""));return n.set("memeId",o),(0,a.wS)(t,n)};return{openMemeModal:t=>{let r=o(t);e.push(r,{scroll:!1})},getMemeModalPath:o}}},60402:function(e,t,r){r.r(t),r.d(t,{FeedProvider:function(){return u},useFeed:function(){return i}});var a=r(91104),n=r(63137);let o=(0,n.createContext)(void 0),u=e=>{let{children:t}=e,[r,u]=(0,n.useState)([]),[i,l]=(0,n.useState)(!1),[s,d]=(0,n.useState)({}),[c,m]=(0,n.useState)(""),[_,f]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1),[g,v]=(0,n.useState)(""),[b,w]=(0,n.useState)([]),[S,y]=(0,n.useState)(!1),[k,x]=(0,n.useState)(""),[C,P]=(0,n.useState)([]),[M,D]=(0,n.useState)(!1),[I,T]=(0,n.useState)([]),[j,E]=(0,n.useState)(!1),[F,R]=(0,n.useState)([]),[A,L]=(0,n.useState)(!1),Z=(0,n.useCallback)(e=>r.find(t=>(t.post_type,t.post.id===e))||C.find(t=>t.id===e)||F.find(t=>t.id===e)||I.find(t=>t.id===e)||_.find(t=>t.id===e)||b.find(t=>t.id===e),[r,C,F,I,_,b]),N=(0,n.useCallback)((e,t,a,n)=>{let o=r.findIndex(e=>e.post.id===t),i=C.findIndex(e=>e.id===t),l=I.findIndex(e=>e.id===t),s=F.findIndex(e=>e.id===t),d=_.findIndex(e=>e.id===t),c=b.findIndex(e=>e.id===t);if(-1===o&&-1===i&&-1===l&&-1===s&&-1===d&&-1===c)return;let m=(t,r)=>{let o={...r[t]},u={react:n,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===a?"upvote"===n?(o.votes.up.push(u),o.votes.down=o.votes.down.filter(t=>t.by!==e)):(o.votes.down.push(u),o.votes.up=o.votes.up.filter(t=>t.by!==e)):"upvote"===n?o.votes.up=o.votes.up.filter(t=>t.by!==e):o.votes.down=o.votes.down.filter(t=>t.by!==e),[...r.slice(0,t),o,...r.slice(t+1)]};-1!==o&&u(e=>m(o,e)),-1!==i&&P(e=>m(i,e)),-1!==l&&T(e=>m(l,e)),-1!==s&&R(e=>m(s,e)),-1!==d&&f(e=>m(d,e)),-1!==c&&w(e=>m(c,e))},[r,C,F,I,_,b]),U=(0,n.useCallback)((e,t)=>{u(r=>0===r.length?r:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...r])},[]),z=(0,n.useCallback)((e,t)=>{u(r=>0===r.length?r:r.map(r=>{if("meme"in r&&r.post.id===e){let e=r.post;return{...r,post:{...e,...t}}}return r}))},[]),G=(0,n.useCallback)((e,t)=>{u(r=>0===r.length?r:[{id:Math.random().toString(36).substring(2,15),post_type:"deck",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,memes:Object.values(e.memes).map(e=>({...e,is_public:!0})),is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()},...r])},[]),H=(0,n.useCallback)(e=>{u(t=>t.filter(t=>t.post.id!==e))},[]),O=(0,n.useCallback)(e=>{C.length>0&&P(t=>[e,...t]),I.length>0&&T(t=>[e,...t])},[C.length,I.length]);return(0,a.jsx)(o.Provider,{value:{feed:r,setFeed:u,hasFetchedFeed:i,setHasFetchedFeed:l,feedActions:s,setFeedActions:d,appendMemesToFeed:U,appendDeckToFeed:G,removeItemFromFeed:H,updateMemeInFeed:z,searchQuery:c,setSearchQuery:m,searchResults:_,setSearchResults:f,hasFetchedSearchResults:p,setHasFetchedSearchResults:h,characterQuery:g,setCharacterQuery:v,characterResults:b,setCharacterResults:w,hasFetchedCharacterResults:S,setHasFetchedCharacterResults:y,librarySearchQuery:k,setLibrarySearchQuery:x,library:C,setLibrary:P,hasFetchedLibrary:M,setHasFetchedLibrary:D,uploads:I,setUploads:T,hasFetchedUploads:j,setHasFetchedUploads:E,saved:F,setSaved:R,hasFetchedSaved:A,setHasFetchedSaved:L,onUploadMeme:O,getItem:Z,voteOnItem:N},children:t})},i=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useFeed must be used within a FeedProvider");return e}},41116:function(e,t,r){r.r(t),r.d(t,{ProfileProvider:function(){return i},useProfile:function(){return l}});var a=r(91104),n=r(21204),o=r(63137);let u=(0,o.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(null),[l,s]=(0,o.useState)({}),[d,c]=(0,o.useState)({}),[m,_]=(0,o.useState)(n.u.AllTime),[f,p]=(0,o.useState)([]),[h,g]=(0,o.useState)([]),[v,b]=(0,o.useState)([]),[w,S]=(0,o.useState)(!1),[y,k]=(0,o.useState)(!1),[x,C]=(0,o.useState)(!1);return(0,a.jsx)(u.Provider,{value:{profile:r,setProfile:i,userMemes:l,setUserMemes:s,userBookmarks:d,setUserBookmarks:c,searchInterval:m,setSearchInterval:_,topCharacters:f,setTopCharacters:p,topCharactersWeekly:h,setTopCharactersWeekly:g,recommendedFollows:v,setRecommendedFollows:b,isSignupModalOpen:w,setIsSignupModalOpen:S,isPostingMemes:y,setIsPostingMemes:k,isHovering:x,setIsHovering:C},children:t})},l=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},29125:function(e,t,r){r.d(t,{D:function(){return a},k:function(){return n}});let a=(e,t)=>{let r=null;return function(){for(var a=arguments.length,n=Array(a),o=0;o<a;o++)n[o]=arguments[o];r&&clearTimeout(r),r=setTimeout(()=>{r&&clearTimeout(r);let t=e(...n);return r=null,t},t)}},n=(e,t)=>{let r=null;return function(){for(var a=arguments.length,n=Array(a),o=0;o<a;o++)n[o]=arguments[o];return new Promise((a,o)=>{let u=async()=>{r&&clearTimeout(r);try{let t=await e(...n);a(t)}catch(e){o(e)}r=null};r&&clearTimeout(r),r=setTimeout(u,t)})}}},4180:function(e,t,r){r.d(t,{Df:function(){return o},Po:function(){return n},RL:function(){return u},_6:function(){return l},uZ:function(){return i}});var a=r(9100);let n=e=>{let t=new Date(e/1e6),r=Math.round((new Date().getTime()-t.getTime())/1e3),a=Math.round(r/60),n=Math.round(a/60),o=Math.round(n/24);return r<60?"".concat(r,"s ago"):a<60?"".concat(a,"m ago"):n<24?"".concat(n,"h ago"):"".concat(o," day").concat(1===o?"":"s"," ago")},o=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),u="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function i(){let e=(0,a.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function l(e,t,r){return 1===e?t:r}},17412:function(e,t,r){r.d(t,{wS:function(){return a}});function a(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}},28563:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}}]);