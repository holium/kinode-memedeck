(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4486],{14898:function(e,t,n){Promise.resolve().then(n.bind(n,13108))},35971:function(e,t,n){"use strict";n.r(t),n.d(t,{FeedProvider:function(){return o},useFeed:function(){return l}});var r=n(57348),u=n(15346),a=n(71402);let i=(0,u.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,u.useState)([]),[l,c]=(0,u.useState)(!1),[d,s]=(0,u.useState)({}),[f,m]=(0,u.useState)(""),[h,g]=(0,u.useState)([]),[p,v]=(0,u.useState)(!1),[_,b]=(0,u.useState)(""),[S,w]=(0,u.useState)([]),[A,k]=(0,u.useState)(!1),{userMemes:y,setUserMemes:x}=(0,a.useProfile)(),[C,I]=(0,u.useState)(""),[P,M]=(0,u.useState)([]),[E,T]=(0,u.useState)(!1),[j,D]=(0,u.useState)([]),[U,F]=(0,u.useState)(!1),[O,R]=(0,u.useState)([]),[L,N]=(0,u.useState)(!1),G=(0,u.useCallback)(e=>n.find(t=>(t.post_type,t.post.id===e))||P.find(t=>t.id===e)||O.find(t=>t.id===e)||j.find(t=>t.id===e)||h.find(t=>t.id===e)||S.find(t=>t.id===e)||Object.values(y).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0),[n,P,O,j,h,S,y]),Q=(0,u.useCallback)((e,t,r,u)=>{let a=n.findIndex(e=>e.post.id===t),i=P.findIndex(e=>e.id===t),l=j.findIndex(e=>e.id===t),c=O.findIndex(e=>e.id===t),d=h.findIndex(e=>e.id===t),s=S.findIndex(e=>e.id===t),f=Object.values(y).reduce((e,n)=>{let r=n.findIndex(e=>e.id===t);return -1!==r?r:e},-1);if(-1===a&&-1===i&&-1===l&&-1===c&&-1===d&&-1===s&&-1===f)return;let m=(t,n)=>{let a={...n[t]},i={react:u,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===r?"upvote"===u?(a.votes.up.push(i),a.votes.down=a.votes.down.filter(t=>t.by!==e)):(a.votes.down.push(i),a.votes.up=a.votes.up.filter(t=>t.by!==e)):"upvote"===u?a.votes.up=a.votes.up.filter(t=>t.by!==e):a.votes.down=a.votes.down.filter(t=>t.by!==e),[...n.slice(0,t),a,...n.slice(t+1)]};-1!==a&&o(e=>m(a,e)),-1!==i&&M(e=>m(i,e)),-1!==l&&D(e=>m(l,e)),-1!==c&&R(e=>m(c,e)),-1!==d&&g(e=>m(d,e)),-1!==s&&w(e=>m(s,e)),-1!==f&&x(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=m(f,n[r]),n):e})},[S,n,P,O,h,x,j,y]),Z=(0,u.useCallback)((e,t)=>{o(n=>0===n.length?n:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...n])},[]),z=(0,u.useCallback)((e,t)=>{o(n=>0===n.length?n:n.map(n=>{if("meme"in n&&n.post.id===e){let e=n.post;return{...n,post:{...e,...t}}}return n}))},[]),H=(0,u.useCallback)(e=>{o(t=>t.filter(t=>t.post.id!==e))},[]),J=(0,u.useCallback)(e=>{P.length>0&&M(t=>[e,...t]),j.length>0&&D(t=>[e,...t])},[P.length,j.length]);return(0,r.jsx)(i.Provider,{value:{feed:n,setFeed:o,hasFetchedFeed:l,setHasFetchedFeed:c,feedActions:d,setFeedActions:s,appendMemesToFeed:Z,removeItemFromFeed:H,updateMemeInFeed:z,searchQuery:f,setSearchQuery:m,searchResults:h,setSearchResults:g,hasFetchedSearchResults:p,setHasFetchedSearchResults:v,deckQuery:_,setDeckQuery:b,deckResults:S,setDeckResults:w,hasFetchedDeckResults:A,setHasFetchedDeckResults:k,librarySearchQuery:C,setLibrarySearchQuery:I,library:P,setLibrary:M,hasFetchedLibrary:E,setHasFetchedLibrary:T,uploads:j,setUploads:D,hasFetchedUploads:U,setHasFetchedUploads:F,saved:O,setSaved:R,hasFetchedSaved:L,setHasFetchedSaved:N,onUploadMeme:J,getItem:G,voteOnItem:Q},children:t})},l=()=>{let e=(0,u.useContext)(i);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},71402:function(e,t,n){"use strict";n.r(t),n.d(t,{ProfileProvider:function(){return i},useProfile:function(){return o}});var r=n(57348),u=n(15346);let a=(0,u.createContext)(void 0),i=e=>{let{children:t}=e,[n,i]=(0,u.useState)(null),[o,l]=(0,u.useState)({}),[c,d]=(0,u.useState)({}),[s,f]=(0,u.useState)([]),[m,h]=(0,u.useState)([]),[g,p]=(0,u.useState)([]),[v,_]=(0,u.useState)(!1),[b,S]=(0,u.useState)(!1),[w,A]=(0,u.useState)(!1);return(0,r.jsx)(a.Provider,{value:{profile:n,setProfile:i,userMemes:o,setUserMemes:l,userBookmarks:c,setUserBookmarks:d,topDecks:s,setTopDecks:f,topDecksWeekly:m,setTopDecksWeekly:h,recommendedFollows:g,setRecommendedFollows:p,isSignupModalOpen:v,setIsSignupModalOpen:_,isPostingMemes:b,setIsPostingMemes:S,isHovering:w,setIsHovering:A},children:t})},o=()=>{let e=(0,u.useContext)(a);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},74859:function(e,t,n){"use strict";n.d(t,{D:function(){return r},k:function(){return u}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,u=Array(r),a=0;a<r;a++)u[a]=arguments[a];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...u);return n=null,t},t)}},u=(e,t)=>{let n=null;return function(){for(var r=arguments.length,u=Array(r),a=0;a<r;a++)u[a]=arguments[a];return new Promise((r,a)=>{let i=async()=>{n&&clearTimeout(n);try{let t=await e(...u);r(t)}catch(e){a(e)}n=null};n&&clearTimeout(n),n=setTimeout(i,t)})}}},81727:function(e,t,n){"use strict";n.d(t,{Df:function(){return a},Po:function(){return u},RL:function(){return i},Wb:function(){return c},_6:function(){return l},uZ:function(){return o}});var r=n(97102);let u=e=>{let t=new Date(e/1e6),n=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(n/60),u=Math.round(r/60);return n<60?"".concat(n,"s ago"):r<60?"".concat(r,"m ago"):u<24?"".concat(u,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},a=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),i="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function o(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function l(e,t,n){return 1===e?t:n}function c(e){return"/deck/".concat(e.id.replace("deck:",""))}},93276:function(e,t,n){"use strict";function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function u(e){return"/deck/".concat(e.replace("deck:",""))}function a(e){return"/home/".concat(e.replace("meme:",""))}n.d(t,{Wi:function(){return a},o4:function(){return u},wS:function(){return r}})},94787:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},15667:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[7398,2221,4175,454,5878,3108,937,7114,1744],function(){return e(e.s=14898)}),_N_E=e.O()}]);