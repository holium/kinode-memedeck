(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7405],{33056:function(e,t,s){Promise.resolve().then(s.bind(s,74886))},74886:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var n=s(59547),a=s(30912),l=s(1463),i=s(54056),r=s(93078),c=s(35875),o=s(99854),u=s(82972),d=s(71904),f=s(15076),m=s(44399),h=s(81771),x=s(25957),p=s(88992),g=s(22083),v=s(10188),y=s(24449),j=s(73726),w=s(17432),b=s(39992),k=s(79886),C=s(67887),N=s(94667);let P=e=>{let{username:t}=e;return(0,n.jsxs)(k.default,{href:"https://twitter.com/".concat(t),target:"_blank",className:"flex flex-1 gap-2 sm:gap-3 items-center min-w-0 hover:underline",children:[(0,n.jsx)(C.h,{src:"https://unavatar.io/twitter/".concat(t),alt:t,name:t,showFallback:!0,size:"sm",className:"min-w-8"}),(0,n.jsxs)("p",{className:"flex tracking-wide",children:["@".concat(t),(0,n.jsx)(N.x,{})]})]})},_=e=>{let{columnKey:t,invite:s,isDeleting:a,onClickDelete:l}=e;if("created_at"===t)return(0,n.jsx)("p",{className:"flex-1 truncate text-xs sm:text-sm px-2 text-white-400/75",children:(0,b.Po)((0,j.sF)(s,t))});if("status"===t){let e=(0,j.sF)(s,t),i=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),c="ACCEPTED"===e;return(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsx)(w.z,{size:"sm",color:c?"success":"primary",classNames:{base:c?"bg-green-400 text-green-900":"text-white-400"},children:i}),!c&&(0,n.jsx)(u.A,{size:"sm",isIconOnly:!0,variant:"light",isLoading:a,onClick:l,children:(0,n.jsx)(r.JO,{icon:"mdi:remove",className:"text-white-400/75",width:16})})]})}if("to"===t){let e=(0,j.sF)(s,t);return(0,n.jsx)(P,{username:e})}},D=[{key:"to",value:"To"},{key:"created_at",value:"Sent"},{key:"status",value:"Status"}],S=e=>{let{invites:t,isFetching:s,isDeleting:a,onClickDeleteInvite:l}=e;return(0,n.jsxs)(m.b,{classNames:{wrapper:"p-2 lg:p-3",table:"max-w-full min-w-full relative flex flex-col gap-3",thead:"flex flex-col gap-0",th:"flex flex-1 items-center truncate min-h-0 bg-black-400",tbody:"flex flex-col gap-3",tr:"flex max-w-full min-w-full",td:"flex flex-1 items-center truncate px-1 py-0",emptyWrapper:"flex flex-col items-center justify-center"},children:[(0,n.jsx)(h.J,{columns:D,children:e=>(0,n.jsx)(x.j,{children:e.value},e.key)}),(0,n.jsx)(p.y,{items:t,emptyContent:(0,n.jsx)("p",{className:"p-3",children:"No invites issued yet"}),children:s?(0,n.jsxs)(g.g,{children:[(0,n.jsx)(v.X,{children:""}),(0,n.jsx)(v.X,{children:(0,n.jsx)("div",{className:"w-full h-[160px] flex items-center justify-center",children:(0,n.jsx)(y.c,{})})}),(0,n.jsx)(v.X,{children:""})]}):t.sort((e,t)=>"ACCEPTED"===e.status&&"ACCEPTED"!==t.status?1:"ACCEPTED"!==e.status&&"ACCEPTED"===t.status?-1:new Date(t.created_at/1e6).getTime()-new Date(e.created_at/1e6).getTime()).map(e=>(0,n.jsx)(g.g,{children:t=>(0,n.jsx)(v.X,{children:(0,n.jsx)(_,{columnKey:t,invite:e,isDeleting:a===e.id,onClickDelete:()=>l(e.id)},t)})},e.id))})]})};function E(){var e;let{profile:t}=(0,f.useProfile)(),s=null!==(e=null==t?void 0:t.user.invite_cap)&&void 0!==e?e:5,[m,h]=(0,a.useState)([]),[x,p]=(0,a.useState)(!0),[g,v]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),[w,b]=(0,a.useState)(null),k=(0,a.useMemo)(()=>m.length>=s,[s,m.length]),C=(0,a.useCallback)(async()=>{h(await l.P.getInvites()),p(!1)},[]),N=(0,a.useCallback)(async()=>{if(y||k)return;let e=g.trim().replace(/^@/,"");if(m.some(t=>t.to.toLowerCase()===e.toLowerCase())){(0,d.yv)("User already invited",{variant:"info"});return}try{j(!0);try{if((await l.P.getProfileByHandle(e)).id){(0,d.yv)("User already exists",{variant:"info"});return}}catch(e){}await l.P.postInvite({x_handle:e})}catch(e){(0,d.yv)("Failed to send invite",{variant:"error"})}finally{await C(),v(""),j(!1)}},[y,k,g,m,C]),P=(0,a.useCallback)(async e=>{if(w!==e)try{b(e),await l.P.deleteInvite(e)}catch(e){(0,d.yv)("Failed to delete invite",{variant:"error"})}finally{await C(),b(null)}},[C,w]);return(0,a.useEffect)(()=>{C()},[C]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.y,{title:(0,n.jsxs)("span",{className:"flex items-center gap-1 justify-between",children:["Invite Friends from X",(0,n.jsx)(c.e,{content:(0,n.jsx)("p",{className:"max-w-48",children:"As a Memedeck user you can invite a friend from X which allows them to skip the waitlist."}),children:(0,n.jsx)("div",{className:"flex items-center justify-center size-12",children:(0,n.jsx)(r.JO,{icon:"mdi:information-outline",className:"text-white-400/75",width:16})})})]}),border:"border-b border-white-400/10"}),(0,n.jsxs)("div",{className:"flex flex-col p-3 gap-3 min-w-full max-w-full",children:[(0,n.jsxs)("p",{className:"text-white-400/75 text-sm",children:["You have ",Number(s-m.length),"/",s," invites left."]}),(0,n.jsx)(o.Y,{type:"text",size:"lg",classNames:{input:"placeholder:text-white-400/50"},placeholder:"elonmusk",value:g,onValueChange:v,startContent:(0,n.jsx)(r.JO,{icon:"mdi:at",className:"text-white-400",width:20}),endContent:(0,n.jsx)(u.A,{size:"sm",color:"primary",isLoading:y,isDisabled:k,onClick:N,children:"Invite"}),onKeyDown:e=>{"Enter"===e.key&&N()}}),(0,n.jsx)(S,{invites:m,isFetching:x,isDeleting:w,onClickDeleteInvite:P})]})]})}},54056:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var n=s(59547),a={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0},l=s(62350),i=s(89204);let r=e=>{let{title:t,border:s="border-b border-transparent",isLoading:r=!1,endContent:c,onGoBack:o}=e,{goBack:u}=(0,i.useAppHistory)();return(0,n.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(s),children:[(0,n.jsx)(l.O,{src:a,alt:"Back",onClick:null!=o?o:u}),r?(0,n.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,n.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:t}),c]})}},62350:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var n=s(59547),a=s(15361);let l=e=>{let{src:t,alt:s,id:l,margin:i="m-2",w:r="w-3.5",onClick:c}=e;return(0,n.jsx)("button",{id:l,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(i),onClick:c,children:(0,n.jsx)(a.default,{priority:!0,src:t,alt:s,className:"opacity-85 ".concat(r)})})}},89204:function(e,t,s){"use strict";s.r(t),s.d(t,{AppHistoryProvider:function(){return c},useAppHistory:function(){return o}});var n=s(59547),a=s(74600),l=s(71904),i=s(30912);let r=(0,i.createContext)({}),c=e=>{let{children:t}=e,s=(0,a.usePathname)(),c=(0,a.useRouter)(),[o,u]=(0,i.useState)([]),d=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0;console.log("goBack",{defaultRoute:e,ignoreRouteBase:t});let s=e;o.length>1&&(s=o[o.length-2],void 0!==t&&s.includes(t)&&(s=e)),"string"!=typeof s&&(s="/home"),c.push(s,{scroll:!1})},[o,c]);return(0,i.useEffect)(()=>{u(e=>e[e.length-1]!==s?[...e,s]:e)},[s]),(0,n.jsxs)(r.Provider,{value:{goBack:d},children:[t,(0,n.jsx)(l.wT,{dense:!0,maxSnack:3})]})},o=()=>(0,i.useContext)(r)},39992:function(e,t,s){"use strict";s.d(t,{Df:function(){return l},Po:function(){return a},RL:function(){return i},uZ:function(){return r}});var n=s(60198);let a=e=>{let t=new Date(e/1e6),s=Math.round((new Date().getTime()-t.getTime())/1e3),n=Math.round(s/60),a=Math.round(n/60),l=Math.round(a/24);return s<60?"".concat(s,"s ago"):n<60?"".concat(n,"m ago"):a<24?"".concat(a,"h ago"):"".concat(l," day").concat(1===l?"":"s"," ago")},l=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),i="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function r(){let e=(0,n.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}},24665:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var n=s(22161),a=s(88830),l=s(75652);function i(e,t,s){let{isDisabled:i=!1,isReadOnly:r=!1,value:c,name:o,children:u,"aria-label":d,"aria-labelledby":f,validationState:m="valid",isInvalid:h}=e;null!=u||null!=d||null!=f||console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:x,isPressed:p}=(0,l.r7)({isDisabled:i}),{pressProps:g,isPressed:v}=(0,l.r7)({isDisabled:i||r,onPress(){t.toggle()}}),{focusableProps:y}=(0,a.kc)(e,s),j=(0,n.dG)(x,y),w=(0,n.zL)(e,{labelable:!0});return(0,n.y$)(s,t.isSelected,t.setSelected),{labelProps:(0,n.dG)(g,{onClick:e=>e.preventDefault()}),inputProps:(0,n.dG)(w,{"aria-invalid":h||"invalid"===m||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":r||void 0,onChange:e=>{e.stopPropagation(),t.setSelected(e.target.checked)},disabled:i,...null==c?{}:{value:c},name:o,type:"checkbox",...j}),isSelected:t.isSelected,isPressed:p||v,isDisabled:i,isReadOnly:r,isInvalid:h||"invalid"===m}}},22381:function(e,t,s){"use strict";s.d(t,{l:function(){return a}});var n=s(63271);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isReadOnly:t}=e,[s,a]=(0,n.zk)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:s,setSelected:function(e){t||a(e)},toggle:function(){t||a(!s)}}}}},function(e){e.O(0,[1775,1904,3817,2972,9886,920,3372,276,5875,8723,4116,7930,3957,1744],function(){return e(e.s=33056)}),_N_E=e.O()}]);