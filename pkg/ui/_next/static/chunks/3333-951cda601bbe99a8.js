"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3333],{3333:function(e,t,n){n.d(t,{A6:function(){return $},BE:function(){return eg},CZ:function(){return s},FK:function(){return v},GJ:function(){return M},Jp:function(){return I},KV:function(){return Q},Mf:function(){return O},My:function(){return eu},NU:function(){return X},Qr:function(){return ei},Rp:function(){return B},TJ:function(){return er},Ug:function(){return Y},V4:function(){return ef},X:function(){return W},X2:function(){return G},X5:function(){return L},X_:function(){return ee},_y:function(){return c},e5:function(){return ed},ey:function(){return U},ez:function(){return H},fS:function(){return w},fg:function(){return k},ft:function(){return q},gF:function(){return b},gJ:function(){return Z},hE:function(){return ey},iS:function(){return l},iq:function(){return y},jn:function(){return V},k8:function(){return el},lR:function(){return T},lm:function(){return ec},m4:function(){return et},ns:function(){return ea},ny:function(){return D},oX:function(){return en},rB:function(){return eo},rj:function(){return _},sb:function(){return p},t$:function(){return A},uG:function(){return J},ug:function(){return S},vK:function(){return d},vq:function(){return ep},ws:function(){return j},xY:function(){return E},yD:function(){return R},yo:function(){return em},zk:function(){return K}});var r=n(71407),u=n(42596),a=n(36572),o=n(92782),i=n(89405);let d=(0,r.LC)({reducerPath:"cachedApi",tagTypes:["Profile","Meme","Post","Deck","Contest"],baseQuery:(0,u.ni)({baseUrl:"".concat((0,o.bR)(),"/v2"),credentials:"include"}),endpoints:e=>({logout:e.mutation({query:()=>"/auth/logout"}),getMe:e.query({query:()=>({url:"/profile/me?include_decks=true&include_studio_config=true",priority:"high"})}),refreshProfile:e.query({query:e=>"/profile/update_twitter/".concat(e)}),getProfile:e.query({query:e=>"/profile/".concat(e)}),getMyProfileMemes:e.query({query:e=>{let{start:t,limit:n,sources:r}=e,u=new URLSearchParams;return t&&u.append("start",t.toString()),n&&u.append("limit",n.toString()),r&&u.append("source",r.join(",")),{url:"/profile/me/memes?".concat(u)}},merge:(e,t,n)=>{var r;let{arg:u}=n;return u.pushToTop?[...t,...null!=e?e:[]]:null!==(r=u.start)&&void 0!==r&&r?[...null!=e?e:[],...null!=t?t:[]]:t},serializeQueryArgs:e=>{let{queryArgs:t}=e,{start:n,limit:r,pushToTop:u,...a}=t;return a},forceRefetch(e){let{currentArg:t,previousArg:n}=e;return(null==t?void 0:t.start)!==(null==n?void 0:n.start)||(null==t?void 0:t.limit)!==(null==n?void 0:n.limit)}}),getProfileMemes:e.query({query:e=>{let{start:t,limit:n,handle:r}=e,u=new URLSearchParams;return u.append("start",t.toString()),u.append("limit",n.toString()),{url:"/profile/".concat(r,"/memes?").concat(u)}}}),getLibraryMemes:e.query({query:e=>{let{start:t,limit:n,search:r,sources:u}=e,a=new URLSearchParams;return t&&a.append("start",t.toString()),n&&a.append("limit",n.toString()),r&&a.append("search",r),u&&u.length>0&&a.append("source",u.join(",")),{url:"/profile/me/images?".concat(a)}},merge:(e,t,n)=>{var r;let{arg:u}=n;return u.pushToTop?[...t,...null!=e?e:[]]:null!==(r=u.start)&&void 0!==r&&r?[...e||[],...t]:t},serializeQueryArgs:e=>{let{queryArgs:t}=e,{start:n,limit:r,pushToTop:u,...a}=t;return a},forceRefetch(e){let{currentArg:t,previousArg:n}=e;return(null==t?void 0:t.start)!==(null==n?void 0:n.start)||(null==t?void 0:t.limit)!==(null==n?void 0:n.limit)||(null==t?void 0:t.search)!==(null==n?void 0:n.search)||(null==t?void 0:t.sources)!==(null==n?void 0:n.sources)}}),searchUser:e.query({query:e=>{let{start:t,limit:n,search:r}=e,u=new URLSearchParams;return t&&u.append("start",t.toString()),n&&u.append("limit",n.toString()),r&&u.append("search",r),"/profile?".concat(u)}}),getRecommendedFollows:e.query({query:()=>"/profile/recommended-follow"}),getProductUpdates:e.query({query:()=>"/profile/product_updates"}),dismissProductUpdate:e.mutation({query:e=>({url:"/profile/product_updates",method:"DELETE",body:{product_update_id:e}}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,u=n(d.util.updateQueryData("getProductUpdates",void 0,e=>{Object.assign(e,{})}));try{await r}catch(e){u.undo()}}}),postImage:e.mutation({query:e=>({url:"/images",method:"POST",body:e}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r,getState:u}=t,{data:a}=await r;if(!a)return;let o=["generated","faceswap"];"uploaded"===a.source&&(o=["uploaded"]),n(d.util.upsertQueryData("getLibraryMemes",{start:0,limit:50,search:"",sources:o,pushToTop:!0},[a]))}}),getImage:e.query({query:e=>"/images/".concat((0,i.eC)(e))}),deleteImage:e.mutation({query:e=>({url:"/images/".concat((0,i.eC)(e)),method:"DELETE"}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;u&&[["uploaded"],["generated","faceswap"]].forEach(e=>{n(d.util.updateQueryData("getLibraryMemes",{start:0,limit:50,sources:e,search:""},e=>{let t=e.findIndex(e=>e.id===u.id);-1!==t&&e.splice(t,1)}))})}}),getMeme:e.query({query:e=>"/memes/".concat((0,i.eC)(e))}),postMeme:e.mutation({query:e=>({url:"/memes",method:"POST",body:e}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r,getState:u}=t,{data:a}=await r;a&&n(d.util.upsertQueryData("getMyProfileMemes",{start:0,limit:20,sources:["generated"],pushToTop:!0},[a]))}}),updateMeme:e.mutation({query:e=>{let{meme_id:t,...n}=e;return{url:"/memes/".concat((0,i.eC)(t)),method:"PUT",body:n}},async onQueryStarted(e,t){let{meme_id:n,...r}=e,{dispatch:u,queryFulfilled:a}=t,o=d.util.updateQueryData("getMeme",n,e=>{e&&Object.assign(e,r)}),i=d.util.updateQueryData("getMyProfileMemes",{start:0,limit:20,sources:["generated"]},e=>{var t;let u=e.findIndex(e=>e.id===n);-1!==u&&Object.assign(e[u],{...e[u],panel_layout:null!==(t=r.panel_layout)&&void 0!==t?t:e[u].panel_layout})}),c=u(o),l=u(i);try{await a}catch(e){c.undo(),l.undo()}},async onCacheEntryAdded(e,t){let{meme_id:n}=e,{dispatch:r,cacheDataLoaded:u}=t,{data:a}=await u;a&&r(d.util.updateQueryData("getMyProfileMemes",{start:0,limit:20,sources:["generated"]},e=>{let t=e.findIndex(e=>e.id===n);-1!==t&&Object.assign(e[t],a)}))}}),deleteMeme:e.mutation({query:e=>({url:"/memes/".concat((0,i.eC)(e)),method:"DELETE"}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;u&&n(d.util.updateQueryData("getMyProfileMemes",{start:0,limit:20,sources:["generated"]},t=>{let n=t.findIndex(t=>t.id===e);-1!==n&&t.splice(n,1)}))}}),postMemePanel:e.mutation({query:e=>{let{meme_id:t,...n}=e;return{url:"/memes/".concat((0,i.eC)(t),"/panel"),method:"POST",body:n}}}),publishMeme:e.mutation({query:e=>{let{meme_id:t,...n}=e;return{url:"/memes/".concat((0,i.eC)(t),"/publish"),method:"POST",body:n}},async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;if(!u)return;let a={...u,is_creator:!0};n(d.util.updateQueryData("getMyProfileMemes",{start:0,limit:20,sources:["generated"]},e=>{var t;let n=null===(t=u.meme)||void 0===t?void 0:t.id;if(!n)return;let r=e.findIndex(e=>e.id===n);-1!==r&&(e[r]={...e[r],posts:[u.id]})})),n(d.util.updateQueryData("getPosts",{deck_id:"feed"},e=>e?[a,...e]:[a])),n(d.util.updateQueryData("getDecksNewPosts",void 0,e=>{u.appears_in.map(e=>e.id).forEach(t=>{let n=e[t];n&&(e[t]=n+1)})}))}}),updateMemePanel:e.mutation({query:e=>{let{meme_id:t,panel_id:n,...r}=e;return{url:"/memes/".concat((0,i.eC)(t),"/panel/").concat(n),method:"PUT",body:r}}}),postMemeTextOverlay:e.mutation({query:e=>{let{meme_id:t,panel_idx:n,...r}=e;return{url:"/memes/".concat((0,i.eC)(t),"/panel/").concat(n.toString(),"/text_overlay"),method:"PUT",body:r}}}),faceswapUpload:e.mutation({query:e=>{let{meme_id:t,panel_id:n,...r}=e;return{url:"/memes/".concat((0,i.eC)(t),"/panel/").concat(n,"/faceswap-upload"),method:"POST",body:r}}}),faceswapDelete:e.mutation({query:e=>{let{meme_id:t,panel_id:n,...r}=e;return{url:"/memes/".concat((0,i.eC)(t),"/panel/").concat(n,"/faceswap-upload"),method:"DELETE",body:r}}}),getSavedMemes:e.query({query:e=>{let{start:t,limit:n,user_handle:r}=e,u=new URLSearchParams;return u.append("start",t.toString()),u.append("limit",n.toString()),u.append("user_handle",r),"/memes/saved?".concat(u)}}),getPosts:e.query({query:e=>{let{start:t,limit:n,deck_id:r="feed"}=e,u=new URLSearchParams;return t&&u.append("start",t.toString()),n&&u.append("limit",n.toString()),r&&u.append("deck_id",r),{url:"/posts?".concat(u)}},merge:(e,t,n)=>{var r;let{arg:u}=n;return null!==(r=u.start)&&void 0!==r&&r?[...null!=e?e:[],...null!=t?t:[]]:t},serializeQueryArgs:e=>{let{queryArgs:t}=e,{start:n,limit:r,...u}=t;return u},forceRefetch(e){let{currentArg:t,previousArg:n}=e;return(null==t?void 0:t.start)!==(null==n?void 0:n.start)||(null==t?void 0:t.limit)!==(null==n?void 0:n.limit)||(null==t?void 0:t.sort_by)!==(null==n?void 0:n.sort_by)||(null==t?void 0:t.interval)!==(null==n?void 0:n.interval)}}),getPostsSearch:e.query({query:e=>{let{start:t,limit:n,deck_id:r,search:u,sort_by:a,interval:o,nsfw:i,user_id:d,user_handle:c,is_saved:l}=e,s=new URLSearchParams;return t&&s.append("start",t.toString()),n&&s.append("limit",n.toString()),r&&s.append("deck_id",r),i&&s.append("nsfw",i.toString()),u&&s.append("search",u),a&&s.append("sort_by",a),o&&s.append("interval",o),d&&s.append("user_id",d),c&&s.append("user_handle",c),l&&s.append("is_saved",l.toString()),{url:"/posts/search?".concat(s)}},transformResponse:(e,t,n)=>({...e,start:n.start||0}),merge:(e,t,n)=>{var r;let{arg:u}=n;return null!==(r=u.start)&&void 0!==r&&r?{...e,...t,memes:[...e.memes||[],...t.memes]}:t},serializeQueryArgs:e=>{let{queryArgs:t}=e,{deck_id:n,user_handle:r,search:u}=t;return u?{search:u}:{deck_id:n,user_handle:r}},forceRefetch(e){let{currentArg:t,previousArg:n}=e;return(null==t?void 0:t.start)!==(null==n?void 0:n.start)||(null==t?void 0:t.limit)!==(null==n?void 0:n.limit)||(null==t?void 0:t.search)!==(null==n?void 0:n.search)||(null==t?void 0:t.sort_by)!==(null==n?void 0:n.sort_by)||(null==t?void 0:t.interval)!==(null==n?void 0:n.interval)}}),getPost:e.query({query:e=>"/posts/".concat((0,i.eC)(e))}),createPost:e.mutation({query:e=>({url:"/posts",method:"POST",body:e})}),deletePost:e.mutation({query:e=>({url:"/posts/".concat((0,i.eC)(e)),method:"DELETE"}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;if(!u)return;let a=d.util.updateQueryData("getPosts",{deck_id:"feed"},t=>{if(!t)return;let n=t.findIndex(t=>t.id===e);-1!==n&&t.splice(n,1)}),o=d.util.updateQueryData("getPostsSearch",{},t=>{if(!t)return;let n=t.memes.findIndex(t=>t.id===e);-1!==n&&t.memes.splice(n,1)}),i=d.util.updateQueryData("getPostsSearch",{user_handle:"me"},t=>{if(!t)return;let n=t.memes.findIndex(t=>t.id===e);-1!==n&&t.memes.splice(n,1)});n(a),n(o),n(i)}}),postVote:e.mutation({query:e=>{let{postId:t,vote:n}=e;return{url:"/posts/".concat((0,i.eC)(t),"/votes"),method:"POST",body:{vote:n}}},onQueryStarted:async(e,t)=>{let{postId:n,user:r,deckId:u="feed",vote:a}=e,{dispatch:o,queryFulfilled:c}=t,l={id:"VOTE_ON:".concat(r.id),by:r.id,react:a?"upvote":"downvote"};function s(e){return{up:a?[...e.votes.up,l]:e.votes.up.filter(e=>e.by!==r.id),down:a?e.votes.down.filter(e=>e.by!==r.id):[...e.votes.down,l]}}let m=d.util.updateQueryData("getPosts",{deck_id:u},e=>{if(!e)return;let t=e.findIndex(e=>e.id===n);if(-1===t)return;let r=s(e[t]);e[t].votes=r}),y=d.util.updateQueryData("getPostsSearch",{},e=>{if(!e)return;let t=e.memes.findIndex(e=>e.id===n);if(-1===t)return;let r=s(e.memes[t]);e.memes[t].votes=r}),p=d.util.updateQueryData("getPostsSearch",{user_handle:r.handle},e=>{if(!e)return;let t=e.memes.findIndex(e=>e.id===n);if(-1===t)return;let r=s(e.memes[t]);e.memes[t].votes=r}),f=d.util.updateQueryData("getPost",(0,i.eC)(n),e=>{if(!e)return;let t=s(e);e.votes=t}),g=o(m),h=o(y),v=o(p),C=o(f);try{await c}catch(e){g.undo(),h.undo(),v.undo(),C.undo()}}}),deleteVote:e.mutation({query:e=>{let{postId:t}=e;return{url:"/posts/".concat((0,i.eC)(t),"/votes"),method:"DELETE"}},async onQueryStarted(e,t){let{postId:n,user:r,deckId:u="feed"}=e,{dispatch:a,queryFulfilled:o}=t;function c(e){return{up:e.votes.up.filter(e=>e.by!==r.id),down:e.votes.down.filter(e=>e.by!==r.id)}}let l=d.util.updateQueryData("getPosts",{deck_id:u},e=>{if(!e)return;let t=e.findIndex(e=>e.id===n);if(-1===t)return;let r=c(e[t]);e[t].votes=r}),s=d.util.updateQueryData("getPostsSearch",{},e=>{if(!e)return;let t=e.memes.findIndex(e=>e.id===n);if(-1===t)return;let r=c(e.memes[t]);e.memes[t].votes=r}),m=d.util.updateQueryData("getPostsSearch",{user_handle:r.handle},e=>{if(!e)return;let t=e.memes.findIndex(e=>e.id===n);if(-1===t)return;let r=c(e.memes[t]);e.memes[t].votes=r}),y=d.util.updateQueryData("getPost",(0,i.eC)(n),e=>{if(!e)return;let t=c(e);e.votes=t}),p=a(l),f=a(s),g=a(m),h=a(y);try{await o}catch(e){p.undo(),g.undo(),f.undo(),h.undo()}}}),updateIsNsfw:e.mutation({query:e=>{let{postId:t,is_nsfw:n}=e;return{url:"/posts/".concat((0,i.eC)(t),"/nsfw"),method:"POST",body:{is_nsfw:n}}}}),getDeck:e.query({query:e=>"/decks/".concat((0,i.eC)(e)),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,u=n(d.util.updateQueryData("getDecksNewPosts",void 0,t=>{let n="deck:".concat(e);t[n]&&(t[n]=0)}));try{await r}catch(e){u.undo()}}}),getDecks:e.query({query:e=>{let{start:t,interval:n,limit:r,user_handle:u,meme_id:a}=e,o=new URLSearchParams;return t&&o.append("start",t.toString()),n&&o.append("interval",n.toString()),r&&o.append("limit",r.toString()),a&&o.append("meme_id",a),u&&o.append("user_handle",u.toLowerCase()),"/decks?".concat(o)},serializeQueryArgs:e=>{let{queryArgs:t}=e,{start:n,limit:r,...u}=t;return u}}),createDeck:e.mutation({query:e=>({url:"/decks",method:"POST",body:e}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;u&&(n(d.util.updateQueryData("getDeck",(0,i.eC)(u.id),e=>{Object.assign(e,u)})),n(d.util.updateQueryData("getMe",void 0,e=>{e.decks&&(e.decks={...e.decks,[u.id]:u})})))}}),updateDeck:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/decks/".concat((0,i.eC)(t)),method:"PUT",body:n}},async onQueryStarted(e,t){let{id:n,...r}=e,{dispatch:u,queryFulfilled:a}=t,o="deck:"+(0,i.eC)(n),c=u(d.util.updateQueryData("getDeck",(0,i.eC)(n),e=>{Object.assign(e,r)})),l=u(d.util.updateQueryData("getMe",void 0,e=>{var t;let n=Object.values(null!==(t=e.decks)&&void 0!==t?t:{}).find(e=>e.id===o);if(!n)return;let u={...n,...r};e.decks&&(e.decks={...e.decks,[o]:u})}));try{await a}catch(e){c.undo(),l.undo()}}}),deleteDeck:e.mutation({query:e=>({url:"/decks/".concat((0,i.eC)(e)),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,u=d.util.updateQueryData("getMe",void 0,t=>{t.decks&&delete t.decks[e]}),a=d.util.upsertQueryData("getDeck",(0,i.eC)(e),void 0),o=n(u);n(a);try{await r,n(d.util.invalidateTags([{type:"Deck",id:(0,i.eC)(e)}]))}catch(e){o.undo()}}}),followDeck:e.mutation({query:e=>({url:"/decks/".concat((0,i.eC)(e),"/follow"),method:"POST"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,u=d.util.updateQueryData("getTopDecks",{interval:a.u.Week,limit:4},t=>{let n=Object.values(null!=t?t:{}).find(t=>t.id===e);n&&Object.assign(t,{[e]:{...n,is_following:!0}})}),o=d.util.updateQueryData("getDeck",(0,i.eC)(e),e=>{Object.assign(e,{is_following:!0})}),c=d.util.updateQueryData("getDecks",{start:0,limit:20,interval:a.u.Month},t=>{let n=t.find(t=>t.id===e);if(!n)return;let r={...n,is_following:!0},u=t.findIndex(t=>t.id===e);t[u]=r}),l=n(u),s=n(o),m=n(c);try{await r}catch(e){l.undo(),s.undo(),m.undo()}},async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;u&&n(d.util.updateQueryData("getMe",void 0,t=>{t.decks&&(t.decks={...t.decks,[e]:u})}))}}),unfollowDeck:e.mutation({query:e=>({url:"/decks/".concat((0,i.eC)(e),"/follow"),method:"DELETE"}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t,u=d.util.updateQueryData("getMe",void 0,t=>{var n;let r=Object.values(null!==(n=t.decks)&&void 0!==n?n:{}).find(t=>t.id===e);if(!r)return;let u={...r,is_following:!1};Object.assign(t,{decks:{...t.decks,[e]:u}})}),o=d.util.updateQueryData("getTopDecks",{interval:a.u.Week,limit:4},t=>{let n=Object.values(null!=t?t:{}).find(t=>t.id===e);n&&Object.assign(t,{[e]:{...n,is_following:!1}})}),c=d.util.updateQueryData("getDeck",(0,i.eC)(e),e=>{Object.assign(e,{is_following:!1})}),l=n(u),s=n(o),m=n(c);try{await r}catch(e){l.undo(),s.undo(),m.undo()}}}),submitPostToDeck:e.mutation({query:e=>{let{deck_id:t,...n}=e;return{url:"/decks/".concat((0,i.eC)(t),"/submit"),method:"POST",body:n}}}),getDecksNewPosts:e.query({query:()=>"/decks/following/new-posts"}),getTopDecks:e.query({query:e=>{let{interval:t,limit:n,category:r}=e,u=new URLSearchParams;return t&&u.append("interval",t.toString()),n&&u.append("limit",n.toString()),r&&u.append("category",r),{url:"/decks/top?".concat(u)}}}),getContests:e.query({query:e=>{let t=new URLSearchParams;return e&&t.append("deck_id",e),"/contests?".concat(t)}}),getContest:e.query({query:e=>"/contests/".concat((0,i.eC)(e))}),getContestEntries:e.query({query:e=>"/contests/".concat((0,i.eC)(e),"/entries")}),getContestEntry:e.query({query:e=>{let{contestId:t,entryId:n}=e;return"/contests/".concat((0,i.eC)(t),"/entries/").concat((0,i.eC)(n))}}),createContest:e.mutation({query:e=>({url:"/contests",method:"POST",body:e})}),updateContest:e.mutation({query:e=>{let{id:t,...n}=e;return{url:"/contests/".concat((0,i.eC)(t)),method:"PUT",body:n}},async onCacheEntryAdded(e,t){let{id:n,...r}=e,{dispatch:u,cacheDataLoaded:a}=t,{data:o}=await a;if(!o)return;let c="contest:"+(0,i.eC)(n);u(d.util.updateQueryData("getContests",(0,i.eC)(o.deck_id),e=>{let t=e.findIndex(e=>e.id===c);-1===t?Object.assign(e,[...e,o]):e[t]=o}))}}),deleteContest:e.mutation({query:e=>({url:"/contests/".concat((0,i.eC)(e)),method:"DELETE"}),async onCacheEntryAdded(e,t){let{dispatch:n,cacheDataLoaded:r}=t,{data:u}=await r;if(!u)return;let a="contest:"+(0,i.eC)(e);n(d.util.updateQueryData("getContests",(0,i.eC)(u.deck_id),e=>{let t=e.findIndex(e=>e.id===a);-1!==t&&e.splice(t,1)}))}}),submitContestEntry:e.mutation({query:e=>{let{contestId:t,memeId:n}=e;return{url:"/contests/".concat((0,i.eC)(t),"/entries"),method:"POST",body:{meme_id:n}}}}),deleteContestEntry:e.mutation({query:e=>{let{contestId:t,entryId:n}=e;return{url:"/contests/".concat((0,i.eC)(t),"/entries/").concat((0,i.eC)(n)),method:"DELETE"}}}),voteOnContestEntry:e.mutation({query:e=>{let{contestId:t,entryId:n,upvote:r}=e;return{url:"/contests/".concat((0,i.eC)(t),"/entries/").concat((0,i.eC)(n),"/vote"),method:"POST",body:{upvote:r}}},async onQueryStarted(e,t){let{contestId:n,entryId:r,upvote:u,user:a}=e,{dispatch:o,queryFulfilled:c}=t,l={id:"VOTE_ON:".concat(a.id),by:a.id,react:u?"upvote":"downvote"},s=o(d.util.updateQueryData("getContestEntry",{contestId:(0,i.eC)(n),entryId:(0,i.eC)(r)},e=>{if(!e)return;let t={up:u?[...e.votes.up,l]:e.votes.up.filter(e=>e.by!==a.id),down:u?e.votes.down.filter(e=>e.by!==a.id):[...e.votes.down,l]};e.votes=t}));try{await c}catch(e){s.undo()}}}),removeVoteOnContestEntry:e.mutation({query:e=>{let{contestId:t,entryId:n}=e;return{url:"/contests/".concat((0,i.eC)(t),"/entries/").concat((0,i.eC)(n),"/vote"),method:"DELETE"}},async onQueryStarted(e,t){let{contestId:n,entryId:r,user:u}=e,{dispatch:a,queryFulfilled:o}=t,c=a(d.util.updateQueryData("getContestEntry",{contestId:(0,i.eC)(n),entryId:(0,i.eC)(r)},e=>{if(!e)return;let t={up:e.votes.up.filter(e=>e.by!==u.id),down:e.votes.down.filter(e=>e.by!==u.id)};e.votes=t}));try{await o}catch(e){c.undo()}}}),getAnalytics:e.query({query:()=>"/analytics"})})}),{useLogoutMutation:c,useGetMeQuery:l,useLazyRefreshProfileQuery:s,useGetProfileQuery:m,useLazyGetProfileQuery:y,useGetMyProfileMemesQuery:p,useLazyGetMyProfileMemesQuery:f,useGetProfileMemesQuery:g,useLazyGetProfileMemesQuery:h,useGetLibraryMemesQuery:v,useLazyGetLibraryMemesQuery:C,useSearchUserQuery:k,useGetRecommendedFollowsQuery:w,useGetProductUpdatesQuery:q,useDismissProductUpdateMutation:D,useDeleteImageMutation:S,useGetMemeQuery:P,useLazyGetMemeQuery:_,usePostMemeMutation:E,usePostMemePanelMutation:T,useUpdateMemeMutation:Q,usePublishMemeMutation:b,useUpdateMemePanelMutation:M,usePostMemeTextOverlayMutation:O,useFaceswapUploadMutation:L,useFaceswapDeleteMutation:I,useGetSavedMemesQuery:x,useDeleteMemeMutation:U,useGetPostsQuery:j,useGetPostsSearchQuery:A,useGetPostQuery:R,useLazyGetPostQuery:z,useCreatePostMutation:N,useDeletePostMutation:V,usePostVoteMutation:X,useDeleteVoteMutation:B,useGetDeckQuery:W,useLazyGetDeckQuery:G,useCreateDeckMutation:J,useGetDecksQuery:Y,useLazyGetDecksQuery:F,useUpdateDeckMutation:K,useDeleteDeckMutation:H,useFollowDeckMutation:Z,useUnfollowDeckMutation:$,useSubmitPostToDeckMutation:ee,useGetDecksNewPostsQuery:et,useGetTopDecksQuery:en,useGetContestsQuery:er,useGetContestQuery:eu,useLazyGetContestQuery:ea,useGetContestEntriesQuery:eo,useGetContestEntryQuery:ei,useCreateContestMutation:ed,useUpdateContestMutation:ec,useDeleteContestMutation:el,useSubmitContestEntryMutation:es,useDeleteContestEntryMutation:em,useVoteOnContestEntryMutation:ey,useRemoveVoteOnContestEntryMutation:ep,usePostImageMutation:ef,useGetImageQuery:eg,useLazyGetImageQuery:eh,useGetAnalyticsQuery:ev}=d},36572:function(e,t,n){var r,u,a,o;n.d(t,{a:function(){return u},u:function(){return r}}),(a=r||(r={})).Today="today",a.Week="week",a.Month="month",a.Year="year",a.AllTime="all-time",(o=u||(u={})).Hot="hot",o.Recent="recent"},92782:function(e,t,n){n.d(t,{BB:function(){return u},Dt:function(){return d},L:function(){return s},bR:function(){return c},bd:function(){return l},cm:function(){return a},j7:function(){return o}});var r=n(49857);let u="true"===r.env.NEXT_PUBLIC_IS_PROD,a="true"===r.env.NEXT_PUBLIC_IS_STAGING,o=!0,i="0.0.0.0";function d(){return/Android/i.test(navigator.userAgent)}function c(){return o?window.location.origin+"/memedeck:memedeck:meme-deck.os":u?"https://api.memedeck.xyz":a?"https://staging-api.memedeck.xyz":"http://".concat("0.0.0.0",":8080")}function l(){return o?window.location.origin+"/memedeck:memedeck:meme-deck.os/home":u?"https://memedeck.xyz/home":a?"https://staging.memedeck.xyz/home":"http://".concat(i,":3000/home")}function s(){return u?"https://memedeck.xyz":a?"https://staging.memedeck.xyz":"http://".concat(i,":3000")}},89405:function(e,t,n){n.d(t,{Df:function(){return a},Po:function(){return u},RL:function(){return o},_6:function(){return i},eC:function(){return c},qr:function(){return d}});var r=n(36572);let u=e=>{let t=Math.round((new Date().getTime()-e.getTime())/1e3),n=Math.round(t/60),r=Math.round(n/60);return t<60?"".concat(t,"s ago"):n<60?"".concat(n,"m ago"):r<24?"".concat(r,"h ago"):e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},a=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),o="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function i(e,t,n){return 1===e?t:n}function d(e){switch(e){case r.u.Today:return"Today";case r.u.Week:return"This Week";case r.u.Month:return"This Month";case r.u.Year:return"This Year";case r.u.AllTime:return"of All Time"}}function c(e){return e.replace("image:","").replace("meme:","").replace("post:","").replace("deck:","").replace("contest:","").replace("entry:","")}}}]);