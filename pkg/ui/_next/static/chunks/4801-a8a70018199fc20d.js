"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4801,5878,8852],{29492:function(e,t,n){n.d(t,{Ud:function(){return h},hd:function(){return d},Ew:function(){return u},QB:function(){return m}});var r=n(57348),a=n(52053),o=n(45155),l=n(13881),c={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo.a86b8f2b.svg",height:256,width:256,blurWidth:0,blurHeight:0},s=n(21008),i=n(62568);let d=()=>(0,r.jsx)("div",{className:"flex h-16 min-h-16 select-none items-center justify-center lg:justify-start",children:(0,r.jsxs)(l.default,{href:"/home",children:[(0,r.jsxs)("div",{className:"hidden gap-3 items-center lg:flex",children:[(0,r.jsx)(m,{}),(0,r.jsx)(h,{})]}),(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)(u,{})})]})}),u=()=>(0,r.jsx)(o.default,{src:c,alt:"".concat(i.jG," Icon"),"aria-label":"".concat(i.jG," - ").concat(i.vk),className:"h-10 min-w-10 w-full select-none"}),m=e=>{let{className:t="h-12 w-[120px] object-cover"}=e;return(0,r.jsx)(o.default,{priority:!0,src:s.Z,alt:"".concat(i.jG," Logo"),"aria-label":"".concat(i.jG," - ").concat(i.vk),className:t,draggable:!1})},h=()=>(0,r.jsx)(a.z,{size:"sm",color:"warning",classNames:{base:"mb-0.5 text-yellow-400 bg-yellow-50 border-1 border-yellow-400/10"},children:"Alpha"})},13343:function(e,t,n){n.d(t,{E:function(){return l}});var r=n(57348),a=n(81015),o=n(54167);let l=e=>{let{children:t,...n}=e;return o.BB||o.cm?(0,r.jsx)(a.e,{...n,children:t}):(0,r.jsx)(r.Fragment,{children:t})}},15800:function(e,t,n){n.d(t,{W:function(){return l},y:function(){return c}});var r=n(57348),a=n(45155),o=n(13343);let l=e=>{let{avatarSrc:t,badgeSrc:n,screenName:l,userHandle:c,p:s="px-4 py-2"}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none ".concat(s),children:[(0,r.jsx)("div",{className:"bg-black-400 size-8 rounded-full",children:(0,r.jsx)(a.default,{className:"rounded-full",src:t,alt:c,width:40,height:40})}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2 truncate",children:[(0,r.jsx)("div",{className:"max-w-48 truncate text-md font-semibold leading-tight",children:l}),n&&(0,r.jsx)(o.E,{content:"Kinode user",children:(0,r.jsx)(a.default,{src:n,alt:c,className:"rounded-sm",width:14,height:14})})]}),(0,r.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",c]})]})]})},c=()=>(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none px-4 py-2 w-full",children:[(0,r.jsx)("div",{className:"bg-white-400/10 size-8 rounded-full"}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsx)("div",{className:"bg-white-400/10 w-24 h-[18px] rounded-md"}),(0,r.jsx)("div",{className:"bg-white-400/5 w-20 h-[20px] rounded-md"})]})]})},16160:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(57348),a=n(67425),o=n(15346),l=n(64720),c=n(35878),s=n(99957);let i=e=>{let{deck:t,size:n="md",setDeck:i,onClickOverride:d}=e,{setFollowing:u,setTopDecks:m,setTopDecksWeekly:h}=(0,l.useSidebar)(),[p,f]=(0,o.useState)(!1),v=(0,o.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),d){d();return}t.is_following?c.P.unfollowDeck(t.id):c.P.followDeck(t.id);let n=!t.is_following,r=t.follower_count+(n?1:-1),a={...t,is_following:!t.is_following,follower_count:r};u(e=>{var t;return n?[...e,{...a,cover_photo:null!==(t=a.cover_photo)&&void 0!==t?t:a.thumbnail}]:e.filter(e=>e.id!==a.id)}),h(e=>e.map(e=>e.id===a.id?{...e,is_following:n,follower_count:r}:e)),m(e=>e.map(e=>e.id===a.id?{...e,is_following:n,follower_count:r}:e)),null==i||i(a)},[t,d,i,u,m,h]);return t?(0,r.jsx)(a.A,{variant:t.is_following?"ghost":"solid",color:t.is_following&&p?"danger":"primary",size:n,className:(0,s.cn)("rounded-xl","sm"===n?"!h-[26px] px-1":"",t.is_following&&"sm"===n?"w-[89px]":"",t.is_following&&"md"===n?"w-[106px]":""),disableRipple:!0,onClick:v,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:(0,r.jsx)("div",{className:"flex gap-2 items-center justify-center w-full",children:(0,r.jsx)("h4",{className:"md"===n?"text-base":"text-sm",children:t.is_following?p?"Unfollow":"Following":"Follow"})})}):null}},23813:function(e,t,n){n.d(t,{L:function(){return m},z:function(){return u}});var r=n(57348),a=n(5070),o=n(13881),l=n(16160),c=n(99957),s=n(81727),i=n(93276),d=n(89765);let u=e=>{var t,n,u,m,h,p;let{deck:f,radius:v,rank:g,metric:y="memes",onClickNavigate:x,setDeck:w}=e;return(0,r.jsxs)(o.default,{href:(0,i.o4)(f.id),className:(0,c.cn)("flex items-center gap-3","h-[54px] px-4 py-2 text-sm","hover:bg-white-400/5",v),onClick:x,children:[g&&(0,r.jsx)("h2",{className:"text-white-400 font-medium text-md",children:g}),(0,r.jsx)("div",{className:"bg-black-400 size-8 rounded-md overflow-hidden",children:(0,r.jsx)(a.h,{size:"sm",radius:"sm",src:null!==(n=null!==(t=f.cover_photo)&&void 0!==t?t:f.thumbnail)&&void 0!==n?n:"",alt:f.title,className:"object-cover object-center size-full"})}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsx)("div",{className:"max-w-48 truncate text-md font-semibold leading-tight",children:f.title}),(0,r.jsx)("div",{className:"text-white-400/50 text-sm truncate",children:"memes"===y?"".concat(null!==(u=f.total_posted)&&void 0!==u?u:0," ").concat((0,s._6)(null!==(m=f.total_posted)&&void 0!==m?m:0,"meme","memes")):"".concat(null!==(h=f.follower_count)&&void 0!==h?h:0," ").concat((0,s._6)(null!==(p=f.follower_count)&&void 0!==p?p:0,"follower","followers"))})]}),f.is_admin?(0,r.jsx)(d.g,{deckId:f.id,onEdit:x}):(0,r.jsx)(l.g,{size:"sm",deck:f,setDeck:w})]},f.id)},m=()=>(0,r.jsxs)("div",{className:"flex items-center gap-3 h-[54px] px-4 py-2 text-sm w-full",children:[(0,r.jsx)("div",{className:"bg-white-400/5 size-3 rounded-sm"}),(0,r.jsx)("div",{className:"bg-white-400/10 size-8 rounded-md"}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsx)("div",{className:"bg-white-400/10 h-[18px] w-1/2 rounded-md"}),(0,r.jsx)("div",{className:"bg-white-400/5 h-[20px] w-1/3 rounded-md"})]})]})},89765:function(e,t,n){n.d(t,{Z:function(){return a},g:function(){return y}});var r,a,o=n(57348),l=n(53350),c=n(22094),s=n(54611),i=n(4930),d=n(67425),u=n(22596),m=n(58484),h=n(16189),p=n(12465),f=n(15346),v=n(64720),g=n(35878);(r=a||(a={})).Edit="edit",r.Delete="delete";let y=e=>{let{deckId:t,size:n="sm",variant:r="light",itemsToRender:a=["edit","delete"],isLoading:y,isDisabled:x,onEdit:w,onDelete:j}=e,S=(0,h.useRouter)(),[k,_]=(0,f.useState)(!1),{setMyDecks:b}=(0,v.useSidebar)(),E=(0,f.useCallback)(()=>{S.push("/deck/".concat(t,"/edit")),null==w||w()},[S,t,w]),C=(0,f.useCallback)(async e=>{e.stopPropagation(),e.preventDefault();try{_(!0),await g.P.deleteDeck(t),b(e=>e.filter(e=>e.id!==t)),null==j||j()}catch(e){console.error("Failed to delete deck",e),(0,p.yv)("Failed to delete deck",{variant:"error"})}finally{_(!1)}},[t,j,b]),T=(0,f.useMemo)(()=>[{key:"edit",label:"Edit",color:"default",startContent:(0,o.jsx)(l.JO,{className:"size-5",icon:"mdi:edit"}),onClick:E},{key:"delete",label:"Delete",color:"danger",startContent:(0,o.jsx)(l.JO,{className:"size-5",icon:"tabler:trash"}),onClick:C}],[E,C]);return(0,o.jsxs)(c.F,{classNames:{content:"min-w-0 w-auto"},children:[(0,o.jsx)(s.S,{children:k||y?(0,o.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,o.jsx)(i.c,{size:"sm"})}):(0,o.jsx)(d.A,{isIconOnly:!0,size:n,variant:r,isDisabled:x,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(l.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,o.jsx)(u.a,{children:T.filter(e=>a.includes(e.key)).map(e=>(0,o.jsx)(m.W,{color:e.color,startContent:e.startContent,onClick:e.onClick,children:e.label},e.key))})]})}},9806:function(e,t,n){n.d(t,{D:function(){return _}});var r=n(57348),a=n(76105),o=n(94645),l=n(4930),c=n(95900),s=n(87840),i=n(68887),d=n(15346),u=n(41307);let m={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?1e3:-1e3,opacity:0})},h=()=>{let{activeStep:e,activeStepIdx:t}=(0,u.y)(),[n,a]=(0,d.useState)(t),o=t>n?1:-1;return(0,d.useEffect)(()=>{a(t)},[t]),(0,r.jsx)(s.E.div,{className:"min-h-72",transition:{type:"spring",stiffness:300,damping:30},children:(0,r.jsx)(i.M,{initial:!1,custom:o,children:(0,r.jsx)(s.E.div,{custom:o,variants:m,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute size-full",children:(0,r.jsx)(c.I,{children:e.body})},t)})})};var p=n(23805),f=n(67425),v=n(72148);let g=()=>{let{isFirstStep:e,isLastStep:t,isFinishing:n,onClickBack:a,onClickNext:o}=(0,u.y)(),{name:l,description:c,hasUnsavedChanges:s,isSaving:i}=(0,v.useEditDeck)(),m=(0,d.useMemo)(()=>0===l.length||0===c.length||s||i,[l.length,c.length,s,i]);return(0,r.jsx)(p.R,{children:(0,r.jsxs)("div",{className:"w-full flex items-center justify-end gap-3",children:[(0,r.jsx)(f.A,{variant:"flat",onClick:a,children:e?"Cancel":"Back"}),(0,r.jsx)(f.A,{variant:"solid",color:"primary",isDisabled:m,isLoading:n,onClick:o,children:t?"Finish":"Next"})]})})};var y=n(25291);let x=e=>{let{text:t=""}=e;return(0,r.jsx)("h3",{className:"font-bold text-lg",children:t})},w=e=>{let{text:t=""}=e;return(0,r.jsx)("p",{className:"font-normal text-xs text-white-400/50",children:t})},j=()=>{let{activeStep:e,activeStepIdx:t,numberOfSteps:n}=(0,u.y)();return(0,r.jsxs)(y.k,{className:"pt-6 flex flex-col gap-1",children:[(0,r.jsx)(x,{text:e.title}),(0,r.jsx)(w,{text:e.subtitle}),(0,r.jsxs)("div",{className:"absolute top-1.5 right-2 text-white-400/25 text-sm leading-6 font-normal tracking-widest",children:[t+1,"/",n]})]})};var S=n(21202);let k=e=>{let{useIsSavingHook:t}=e,{isSaving:n}=t();return n?(0,r.jsx)(S.W,{size:"sm",isIndeterminate:!0,"aria-label":"Loading..."}):(0,r.jsx)("div",{className:"h-1"})},_=e=>{let{BodyWrapper:t,Provider:n,providerKey:c,useIsSavingHook:s}=e,{flowId:i,onClickClose:d}=(0,u.y)();return(0,r.jsx)(a.R,{size:"lg",classNames:{base:"overflow-hidden",header:"px-4 sm:px-6",body:"px-4 sm:px-6 min-h-72 max-h-72 overflow-hidden",footer:"px-4 sm:px-6"},hideCloseButton:!0,isOpen:!!i,onOpenChange:d,children:i?(0,r.jsx)(n,{params:{[c]:i},children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(k,{useIsSavingHook:s}),(0,r.jsx)(j,{}),(0,r.jsx)(t,{children:(0,r.jsx)(h,{})}),(0,r.jsx)(g,{})]})}):(0,r.jsx)(l.c,{})})}},18860:function(e,t,n){n.d(t,{_:function(){return U}});var r=n(57348),a=n(53350),o=n(67425),l=n(15346),c=n(23813),s=n(9806),i=n(76105),d=n(94645),u=n(25291),m=n(95900);let h=e=>{let{title:t,children:n,onScroll:a,onClose:o}=e;return(0,r.jsx)(i.R,{isOpen:!0,onOpenChange:o,children:(0,r.jsxs)(d.A,{className:"pb-4",children:[(0,r.jsx)(u.k,{className:"flex items-center gap-3 px-6",children:(0,r.jsx)("h3",{children:t})}),(0,r.jsx)(m.I,{className:"max-h-96 min-h-96 overflow-y-auto px-2 py-0",onScroll:a,children:n})]})})};var p=n(4930),f=n(5265),v=n(35878),g=n(41973);let y=e=>{let{onClose:t}=e,[n,a]=(0,l.useState)([]),[o,s]=(0,l.useState)(!1),{isFetching:i,hasMore:d,onReachedEnd:u}=(0,f.M)({feed:n,setFeed:a,hasFetched:o,setHasFetched:s,fetchFn:(e,t)=>{let{start:n,limit:r}=e;return v.P.getDecks({start:n,limit:r,interval:g.u.AllTime},t)},pageSize:20}),m=(0,l.useCallback)(e=>{let{scrollLeft:t,clientWidth:n,scrollWidth:r}=e.currentTarget;t+n>=r-400&&d&&u()},[d,u]),y=(0,l.useMemo)(()=>n.filter(e=>e.title.length>0).filter(e=>!e.is_following&&!e.is_admin),[n]);return(0,r.jsx)(h,{title:"Explore Decks",onScroll:m,onClose:t,children:(0,r.jsxs)("div",{className:"flex flex-col size-full",children:[i||0!==y.length?y.map(e=>(0,r.jsx)(c.z,{deck:e,radius:"rounded-sm",setDeck:e=>{e&&a(t=>t.map(t=>t.id===e.id?e:t))},onClickNavigate:t},e.id)):(0,r.jsx)("p",{className:"mx-4 text-tiny text-white-400/50 mt-1",children:"No decks"}),i&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(p.c,{})})]})})};var x=n(53300),w=n(52053);let j=e=>{let{title:t,count:n,endContent:a,onClick:o}=e;return(0,r.jsxs)("header",{className:"h-10 mt-2 min-h-10 flex items-center justify-between border-b border-white-400/10",children:[(0,r.jsxs)(x.O,{className:"flex items-center gap-3 cursor-pointer",onClick:o,children:[(0,r.jsx)("h3",{className:"text-white-400 font-base",children:t}),n>0&&(0,r.jsx)(w.z,{size:"sm",variant:"flat",children:n})]}),a]})};var S=n(18676);let k=e=>{let{title:t,icon:n,onClick:o}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 px-1.5 h-8 min-h-8 cursor-pointer",onClick:o,children:[(0,r.jsx)("div",{className:"flex items-center justify-center size-5",children:(0,r.jsx)(a.JO,{icon:n,className:"size-5 text-white-400/75"})}),(0,r.jsx)("span",{className:"text-white-400/75 text-sm",children:t})]})};var _=n(64720);let b=e=>{let{isFetching:t,decks:n,collapsedLength:a,showAllTitle:o,onClickShowAll:c}=e,{newPostCounts:s}=(0,_.useSidebar)(),[i,d]=(0,l.useState)(a),u=(0,l.useMemo)(()=>n.slice(0,i),[n,i]),m=(0,l.useMemo)(()=>u.length<n.length,[n,u]),h=(0,l.useMemo)(()=>u.length<n.length&&n.length>a,[a,n.length,u.length]),p=(0,l.useMemo)(()=>u.length===n.length&&n.length>a,[a,n.length,u.length]),f=(0,l.useCallback)(()=>d(n.length),[n.length]),v=(0,l.useCallback)(()=>d(a),[a]);return(0,r.jsxs)("div",{className:"flex flex-col gap-1.5",children:[t?[1,2,3].map(e=>(0,r.jsx)(S.h,{},e)):0===u.length?(0,r.jsx)("p",{className:"text-tiny text-white-400/50 mt-1",children:"No decks"}):u.map(e=>{var t;let n=e.id.replace("deck:",""),a=null!==(t=s[n])&&void 0!==t?t:0;return(0,r.jsx)(S.D,{deck:e,newPosts:a},n)}),m&&h&&(0,r.jsx)(k,{title:"Show more",icon:"mdi:chevron-down",onClick:f}),p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k,{title:o,icon:"tabler:list",onClick:c}),(0,r.jsx)(k,{title:"Show less",icon:"mdi:chevron-up",onClick:v})]})]})};var E=n(72148),C=n(87140),T=n(41307),P=n(71402);let A="create-contest-my-decks-sidebar",U=e=>{let{closeParentModal:t}=e,{profile:n}=(0,P.useProfile)(),{myDecks:i,setMyDecks:d,following:u,setFollowing:m,isFetchingMyDecks:p,setIsFetchingMyDecks:f,newPostCounts:g,setNewPostCounts:x}=(0,_.useSidebar)(),{isCreating:w,onClickStart:S}=(0,T.y)(),[k,U]=(0,l.useState)(!1),[L,N]=(0,l.useState)(!1),[R,D]=(0,l.useState)(!1),M=(0,l.useCallback)(async()=>{let e=[],t=[];await v.P.getDecksNewPosts().then(e=>{x(e.reduce((e,t)=>{var n;return e[t.id.replace("deck:","")]=null!==(n=t.new_posts)&&void 0!==n?n:0,e},{}))}),await v.P.getDecksIFollow().then(n=>{n.forEach(n=>{n.is_admin||n.is_creator?e.push(n):t.push(n)}),d(e),m(t)})},[m,d,x]);(0,l.useEffect)(()=>{f(!0),M().finally(()=>f(!1))},[M,f]);let B=(0,l.useMemo)(()=>i.filter(e=>e.title.length>0).sort((e,t)=>{var n,r;return new Date(null!==(n=t.updated_at)&&void 0!==n?n:t.created_at).getTime()-new Date(null!==(r=e.updated_at)&&void 0!==r?r:e.created_at).getTime()}),[i]),O=(0,l.useMemo)(()=>u.sort((e,t)=>{var n,r;let a=null!==(n=g[e.id.replace("deck:","")])&&void 0!==n?n:0,o=null!==(r=g[t.id.replace("deck:","")])&&void 0!==r?r:0;return o!==a?o-a:t.follower_count-e.follower_count}),[u,g]);return n?(0,r.jsxs)("div",{className:"flex flex-col gap-1 size-full",children:[(0,r.jsx)(j,{title:"My Decks",count:i.length,endContent:(0,r.jsx)(o.A,{size:"sm",isIconOnly:!0,variant:"light",id:A,isLoading:w===A,isDisabled:null!==w,onClick:()=>{S(A),null==t||t()},children:(0,r.jsx)(a.JO,{icon:"mdi:plus",className:"size-6 text-white-400/75"})}),onClick:()=>{U(!0),null==t||t()}}),(0,r.jsx)(b,{isFetching:p,decks:B,collapsedLength:3,showAllTitle:"All decks",onClickShowAll:()=>{U(!0),null==t||t()}}),(0,r.jsx)(j,{title:"Following",count:u.length,endContent:(0,r.jsx)(o.A,{size:"sm",isIconOnly:!0,variant:"light",onClick:()=>{D(!0),null==t||t()},children:(0,r.jsx)(a.JO,{icon:"mdi:search",className:"size-5 text-white-400/75"})}),onClick:()=>{N(!0),null==t||t()}}),(0,r.jsx)(b,{isFetching:p,decks:u,collapsedLength:10,showAllTitle:"All following",onClickShowAll:()=>{N(!0),null==t||t()}}),k&&(0,r.jsx)(h,{title:"My Decks",onClose:()=>U(!1),children:(0,r.jsxs)("div",{className:"flex flex-col size-full",children:[0===i.length&&(0,r.jsx)("p",{className:"mx-4 text-sm text-white-400/50 mt-1",children:"No decks"}),i.map(e=>(0,r.jsx)(c.z,{deck:e,metric:"followers",radius:"rounded-sm",setDeck:e=>{e&&d(t=>t.map(t=>t.id===e.id?e:t))},onClickNavigate:()=>U(!1)},"".concat(e.id,"-").concat(e.cover_photo)))]})}),L&&(0,r.jsx)(h,{title:"Following",onClose:()=>N(!1),children:(0,r.jsxs)("div",{className:"flex flex-col size-full",children:[0===u.length&&(0,r.jsx)("p",{className:"mx-4 text-sm text-white-400/50 mt-1",children:"No decks"}),O.map(e=>(0,r.jsx)(c.z,{deck:e,metric:"followers",radius:"rounded-sm",setDeck:e=>{e&&m(t=>t.map(t=>t.id===e.id?e:t))},onClickNavigate:()=>N(!1)},e.id))]})}),R&&(0,r.jsx)(y,{onClose:()=>D(!1)}),(0,r.jsx)(s.D,{providerKey:"deckId",Provider:E.EditDeckProvider,useIsSavingHook:E.useEditDeck,BodyWrapper:C.DiffusionConfigProvider}),(0,r.jsx)("div",{className:"w-full h-3 min-h-3"})]}):null}},77623:function(e,t,n){n.d(t,{P:function(){return o},T:function(){return l}});var r=n(16189),a=n(93276);let o=["/home","/trending"],l=()=>{let e=(0,r.useRouter)(),t=(0,r.usePathname)(),n=(0,r.useSearchParams)(),l=e=>{let r=encodeURIComponent(e.replace("meme:",""));if(o.includes(t)){let e=new URLSearchParams(n.toString()),o="".concat(t,"/").concat(r);return(0,a.wS)(o,e)}{let e=new URLSearchParams(n.toString());return e.set("memeId",r),(0,a.wS)(t,e)}},c=()=>{let e=o.some(e=>t.startsWith(e)),r=t;e&&(r=t.split("/").slice(0,-1).join("/"));let l=new URLSearchParams(n.toString());return l.delete("memeId"),(0,a.wS)(r,l)};return{getOpenHref:l,openMemeModal:t=>{let n=l(t);e.push(n,{scroll:!1})},closeMemeModal:()=>{let t=c();e.push(t,{scroll:!1})}}}},87140:function(e,t,n){n.r(t),n.d(t,{DiffusionConfigProvider:function(){return c},useDiffusionConfig:function(){return s}});var r=n(57348),a=n(15346),o=n(55771);let l=(0,a.createContext)(void 0),c=e=>{let{children:t}=e,[n,c]=(0,a.useState)(!0),[s,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{c(!0),o.p.getConfig().then(i).finally(()=>c(!1))},[]),(0,r.jsx)(l.Provider,{value:{config:s,isFetchingConfig:n},children:t})},s=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useDiffusionConfig must be used within DiffusionConfigProvider");return e}},35971:function(e,t,n){n.r(t),n.d(t,{FeedProvider:function(){return l},useFeed:function(){return c}});var r=n(57348),a=n(15346);let o=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)(null),[c,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)([]),[f,v]=(0,a.useState)(!1),[g,y]=(0,a.useState)({}),[x,w]=(0,a.useState)({}),[j,S]=(0,a.useState)(""),[k,_]=(0,a.useState)([]),[b,E]=(0,a.useState)(!1),[C,T]=(0,a.useState)(""),[P,A]=(0,a.useState)([]),[U,L]=(0,a.useState)(!1),[N,R]=(0,a.useState)([]),[D,M]=(0,a.useState)(!1),[B,O]=(0,a.useState)([]),[z,F]=(0,a.useState)(!1),I=(0,a.useCallback)(e=>n||c.find(t=>{if("meme"===t.post_type)return t.post.id===e})||P.find(t=>t.id===e)||B.find(t=>t.id===e)||N.find(t=>t.id===e)||h.find(t=>t.id===e)||Object.values(g).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0)||Object.values(x).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0),[c,P,n,B,h,N,x,g]),H=(0,a.useCallback)(e=>{let t=(null==n?void 0:n.id)===e?0:-1,r=c.findIndex(t=>t.post.id===e),a=P.findIndex(t=>t.id===e),o=N.findIndex(t=>t.id===e),l=B.findIndex(t=>t.id===e),s=h.findIndex(t=>t.id===e);return{oneOffMemeIndex:t,feedItemIndex:r,libraryItemIndex:a,uploadsItemIndex:o,savedItemIndex:l,searchResultsItemIndex:s,deckResultsItemIndex:k.findIndex(t=>t.id===e),userMemesItemIndex:Object.values(g).reduce((t,n)=>{let r=n.findIndex(t=>t.id===e);return -1!==r?r:t},-1),userBookmarksItemIndex:Object.values(x).reduce((t,n)=>{let r=n.findIndex(t=>t.id===e);return -1!==r?r:t},-1)}},[k,c,P,n,B,h,N,x,g]),J=(0,a.useCallback)((e,t,n,r)=>{let{oneOffMemeIndex:a,feedItemIndex:o,libraryItemIndex:c,uploadsItemIndex:i,savedItemIndex:d,searchResultsItemIndex:u,deckResultsItemIndex:m,userMemesItemIndex:h,userBookmarksItemIndex:f}=H(t);if(-1===a&&-1===o&&-1===c&&-1===i&&-1===d&&-1===u&&-1===m&&-1===h&&-1===f)return;let v=(t,a)=>{let o={...a[t]},l={react:r,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===n?"upvote"===r?(o.votes.up.push(l),o.votes.down=o.votes.down.filter(t=>t.by!==e)):(o.votes.down.push(l),o.votes.up=o.votes.up.filter(t=>t.by!==e)):"upvote"===r?o.votes.up=o.votes.up.filter(t=>t.by!==e):o.votes.down=o.votes.down.filter(t=>t.by!==e),[...a.slice(0,t),o,...a.slice(t+1)]};-1!==a&&l(e=>{if(!e)return e;let[t]=v(a,[e]);return t}),-1!==o&&s(e=>v(o,e)),-1!==c&&A(e=>v(c,e)),-1!==i&&R(e=>v(i,e)),-1!==d&&O(e=>v(d,e)),-1!==u&&p(e=>v(u,e)),-1!==m&&_(e=>v(m,e)),-1!==h&&y(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=v(h,n[r]),n):e}),-1!==f&&w(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=v(f,n[r]),n):e})},[H,y]),G=(0,a.useCallback)((e,t)=>{s(n=>0===n.length?n:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...n])},[]),W=(0,a.useCallback)((e,t)=>{s(n=>0===n.length?n:n.map(n=>{if("meme"in n&&n.post.id===e){let e=n.post;return{...n,post:{...e,...t}}}return n}))},[]),Z=(0,a.useCallback)(e=>{let{feedItemIndex:t,libraryItemIndex:n,uploadsItemIndex:r,savedItemIndex:a,searchResultsItemIndex:o,deckResultsItemIndex:l,userMemesItemIndex:c,userBookmarksItemIndex:i}=H(e);-1!==t&&s(t=>t.filter(t=>t.post.id!==e)),-1!==n&&A(t=>t.filter(t=>t.id!==e)),-1!==r&&R(t=>t.filter(t=>t.id!==e)),-1!==a&&O(t=>t.filter(t=>t.id!==e)),-1!==o&&p(t=>t.filter(t=>t.id!==e)),-1!==l&&_(t=>t.filter(t=>t.id!==e)),-1!==c&&y(t=>{let n={...t},r=Object.keys(t).find(n=>t[n].some(t=>t.id===e));return r?(n[r]=n[r].filter(t=>t.id!==e),n):t}),-1!==i&&w(t=>{let n={...t},r=Object.keys(t).find(n=>t[n].some(t=>t.id===e));return r?(n[r]=n[r].filter(t=>t.id!==e),n):t})},[H,y]),V=(0,a.useCallback)(e=>{P.length>0&&A(t=>[e,...t]),N.length>0&&R(t=>[e,...t])},[P.length,N.length]);return(0,r.jsx)(o.Provider,{value:{oneOffMeme:n,setOneOffMeme:l,feed:c,setFeed:s,hasFetchedFeed:i,setHasFetchedFeed:d,appendMemesToFeed:G,removeItemFromFeed:Z,updateMemeInFeed:W,searchQuery:u,setSearchQuery:m,searchResults:h,setSearchResults:p,hasFetchedSearchResults:f,setHasFetchedSearchResults:v,userMemes:g,setUserMemes:y,userBookmarks:x,setUserBookmarks:w,deckQuery:j,setDeckQuery:S,deckResults:k,setDeckResults:_,hasFetchedDeckResults:b,setHasFetchedDeckResults:E,librarySearchQuery:C,setLibrarySearchQuery:T,library:P,setLibrary:A,hasFetchedLibrary:U,setHasFetchedLibrary:L,uploads:N,setUploads:R,hasFetchedUploads:D,setHasFetchedUploads:M,saved:B,setSaved:O,hasFetchedSaved:z,setHasFetchedSaved:F,onUploadMeme:V,getMeme:I,voteOnMeme:J},children:t})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},71402:function(e,t,n){n.r(t),n.d(t,{ProfileProvider:function(){return l},useProfile:function(){return c}});var r=n(57348),a=n(15346);let o=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)(null),[c,s]=(0,a.useState)(!0);return(0,r.jsx)(o.Provider,{value:{profile:n,setProfile:l,isFetching:c,setIsFetching:s},children:t})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},64720:function(e,t,n){n.r(t),n.d(t,{SidebarProvider:function(){return l},useSidebar:function(){return c}});var r=n(57348),a=n(15346);let o=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)([]),[c,s]=(0,a.useState)([]),[i,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[h,p]=(0,a.useState)([]),[f,v]=(0,a.useState)([]),[g,y]=(0,a.useState)({}),[x,w]=(0,a.useState)(!1),[j,S]=(0,a.useState)(!1);return(0,r.jsx)(o.Provider,{value:{myDecks:h,setMyDecks:p,following:f,setFollowing:v,isFetchingMyDecks:u,setIsFetchingMyDecks:m,newPostCounts:g,setNewPostCounts:y,topDecks:n,setTopDecks:l,topDecksWeekly:c,setTopDecksWeekly:s,recommendedFollows:i,setRecommendedFollows:d,isSignupModalOpen:x,setIsSignupModalOpen:w,isHovering:j,setIsHovering:S},children:t})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useProfile must be used within SidebarProvider");return e}},82033:function(e,t,n){n.r(t),n.d(t,{UploadProvider:function(){return g},useUpload:function(){return y}});var r=n(57348),a=n(16189),o=n(12465),l=n(15346),c=n(67425);let s=e=>{let{text:t,textButton:n,onClick:a}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t,n&&a&&(0,r.jsx)(c.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:a,children:n})]})};var i=n(77623),d=n(35971),u=n(64720),m=n(35878),h=n(74859);let p=e=>{let t=new FileReader;return new Promise((n,r)=>{t.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;if(!a){r(Error("Failed to read file"));return}n(new Uint8Array(a))},t.onerror=()=>r(t.error),t.readAsArrayBuffer(e)})};var f=n(81727);let v=(0,l.createContext)({}),g=e=>{let{children:t}=e,n=(0,a.useRouter)(),{openMemeModal:c}=(0,i.T)(),{setIsHovering:g}=(0,u.useSidebar)(),{onUploadMeme:y}=(0,d.useFeed)(),[x,w]=(0,l.useState)([]),[j,S]=(0,l.useState)(),[k,_]=(0,l.useState)(!1),b=(0,l.useCallback)(async e=>{try{(0,o.sy)();let t=e.name.slice(0,20),n=(0,o.yv)("Uploading ".concat(t),{variant:"info",persist:!0});S(n);let a=await p(e),l="",i=await m.P.postMeme({filename:(0,f.Df)(e.name),filetype:e.type,bytes:a});if(!i)throw Error("Failed to upload");l=i.id;let d={...i,votes:{up:[],down:[]}};w(e=>[d,...e]),y(d),(0,o.sy)(j),S(void 0);let u=(0,o.yv)((0,r.jsx)(s,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,o.sy)(u),c(l)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),S(void 0),(0,o.sy)(),(0,o.yv)("Failed to upload some memes",{variant:"error"})}},[j,c,y,w]),E=(0,l.useCallback)(async e=>{try{let t=(0,f.Df)(e),n=t.slice(0,20),a=(0,o.yv)("Uploading ".concat(n),{variant:"info",persist:!0});S(a);let l=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!l)throw Error("Failed to paste link");w(e=>[l,...e]),y(l),(0,o.sy)(j),S(void 0);let i=(0,o.yv)((0,r.jsx)(s,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,o.sy)(i),c(l.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,o.yv)("Failed to paste link",{variant:"error"})}},[j,c,y]),C=(0,l.useMemo)(()=>(0,h.k)(b,1e3),[b]),T=(0,l.useCallback)(async e=>{if(void 0===j){if(e.size>33554432){(0,o.yv)("Please upload files 32MB or less",{variant:"error"});return}return C(e)}},[C,j]),P=(0,l.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let n=t[e];if(n.type.includes("image")){let e=n.getAsFile();e&&await T(e)}}}},[T]);(0,l.useEffect)(()=>(window.addEventListener("paste",P),()=>{window.removeEventListener("paste",P)}),[P]);let A=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),g(!1),_(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let n=t[e];n.type.includes("image")&&await T(n)}n.push("/library")}catch(e){console.error(e)}finally{_(!1)}};return(0,r.jsx)(v.Provider,{value:{uploads:x,setUploads:w,startUpload:T,pasteImageLink:E,isBatchUploading:k},children:(0,r.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&g(!0)},onDragLeave:()=>g(!1),onDrop:A,children:t})})},y=()=>{let e=(0,l.useContext)(v);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}},72148:function(e,t,n){n.r(t),n.d(t,{EditDeckProvider:function(){return m},useEditDeck:function(){return h}});var r=n(57348),a=n(12465),o=n(15346),l=n(83815),c=n(64720),s=n(35878),i=n(74859),d=n(41973);let u=(0,o.createContext)(void 0),m=e=>{var t;let{params:n,children:m}=e,{deckId:h}=(0,l.d)({params:n,key:"deckId"}),p=(0,o.useMemo)(()=>h.replace("deck:",""),[h]),[f,v]=(0,o.useState)(!0),[g,y]=(0,o.useState)(null),[x,w]=(0,o.useState)(""),[j,S]=(0,o.useState)(""),[k,_]=(0,o.useState)(null),[b,E]=(0,o.useState)([]),[C,T]=(0,o.useState)(null),[P,A]=(0,o.useState)(null!==(t=null==g?void 0:g.admins)&&void 0!==t?t:[]),[U,L]=(0,o.useState)(null),[N,R]=(0,o.useState)(null),[D,M]=(0,o.useState)(!1),[B,O]=(0,o.useState)(!1),[z,F]=(0,o.useState)(null),{queueUpdate:I,isSaving:H,hasUnsavedChanges:J}=function(e){let[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),l=(0,o.useRef)({}),{setMyDecks:d}=(0,c.useSidebar)(),u=(0,o.useCallback)((0,i.k)(async(e,t)=>{a(!0);let n=null,r=null;try{var o;let n=await s.P.updateDeck(e,t);r=null!==(o=null==n?void 0:n.cover_photo)&&void 0!==o?o:""}finally{a(!1),d(a=>{var o,l,c;if(!a)return a;let s=a.find(t=>t.id===e);return n=null!==(l=null!==(o=t.title)&&void 0!==o?o:null==s?void 0:s.title)&&void 0!==l?l:"",r=null!==(c=null!=r?r:null==s?void 0:s.cover_photo)&&void 0!==c?c:"",[{id:e,title:n,cover_photo:r,is_admin:!0},...a.filter(t=>t.id!==e)]})}},500),[]);return{queueUpdate:(0,o.useCallback)(t=>{l.current={...l.current,...t},n(!0),u(e,l.current).finally(()=>{l.current={},n(!1)})},[e,u]),isSaving:r,hasUnsavedChanges:t}}(p),G=(0,o.useCallback)(async e=>{var t,n;let r=await s.P.getDeck(e,{interval:d.u.AllTime});r&&(y(r),w(r.title),S(null!==(t=r.description)&&void 0!==t?t:""),_(r.cover_photo),E(null!==(n=r.external_links)&&void 0!==n?n:[]),A(r.admins),M(r.require_approval),O(r.auto_post),F(r.matching_rules))},[]),W=(0,o.useCallback)(e=>{w(e),I({title:e})},[I]),Z=(0,o.useCallback)(e=>{S(e),I({description:e})},[I]),V=(0,o.useCallback)(e=>{_(e?URL.createObjectURL(new Blob([e])):null),I({cover_photo:e?Array.from(e):null})},[I]),Q=(0,o.useCallback)(e=>{let t=[...b,e];E(t),I({external_links:t})},[b,I]),Y=(0,o.useCallback)(e=>{let t=b.filter(t=>t!==e);T(e),I({external_links:t}),E(t),T(null)},[b,I]),q=(0,o.useCallback)(e=>{try{L(e.id),A(t=>[...t,e]),I({add_admin:e.id})}catch(t){console.error("Failed to add admin",t),(0,a.yv)("Failed to add admin",{variant:"error"}),A(t=>t.filter(t=>t.id!==e.id))}finally{L(null)}},[I]),K=(0,o.useCallback)(e=>{try{R(e.id),I({remove_admin:e.id}),A(t=>t.filter(t=>t.id!==e.id))}catch(e){console.error("Failed to remove admin",e),(0,a.yv)("Failed to remove admin",{variant:"error"})}finally{R(null)}},[I]),X=(0,o.useCallback)(e=>{M(e),I({require_approval:e})},[I]),$=(0,o.useCallback)(e=>{O(e),I({auto_post:e})},[I]),ee=(0,o.useCallback)(e=>{F(t=>{var n,r,a;let o={characters:void 0!==e.characters?e.characters:null!==(n=null==t?void 0:t.characters)&&void 0!==n?n:null,styles:void 0!==e.styles?e.styles:null!==(r=null==t?void 0:t.styles)&&void 0!==r?r:null,keywords:void 0!==e.keywords?e.keywords:null!==(a=null==t?void 0:t.keywords)&&void 0!==a?a:null};return I({matching_rules:o}),o})},[I]);return(0,o.useEffect)(()=>{v(!0),G(p).finally(()=>v(!1))},[G,p]),(0,r.jsx)(u.Provider,{value:{isFetching:f,fetchedDeck:g,name:x,onChangeName:W,description:j,onChangeDescription:Z,coverPhoto:k,onUploadImage:V,links:b,onClickAddLink:Q,isRemovingLink:C,onClickRemoveLink:Y,admins:P,isAddingAdmin:U,onClickAddAdmin:q,isRemovingAdmin:N,onClickRemoveAdmin:K,adminApproval:D,onChangeAdminApproval:X,autoPost:B,onChangeAutoPost:$,matchingRules:z,onChangeMatchingRules:ee,isSaving:H,hasUnsavedChanges:J},children:m})},h=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useEditDeck must be used within EditDeckProvider");return e}},41307:function(e,t,n){n.d(t,{p:function(){return s},y:function(){return i}});var r=n(57348),a=n(16189),o=n(12465),l=n(15346);let c=(0,l.createContext)(void 0),s=e=>{let{steps:t,queryParamKey:n,children:s,createFlow:i,finishFlow:d}=e,u=(0,a.useSearchParams)(),m=(0,l.useMemo)(()=>u.get(n),[n,u]),[h,p]=(0,l.useState)(0),[f,v]=(0,l.useState)(!1),[g,y]=(0,l.useState)(null),[x,w]=(0,l.useTransition)(),j=(0,l.useMemo)(()=>0===h,[h]),S=(0,l.useMemo)(()=>h===t.length-1,[h,t.length]),k=(0,l.useMemo)(()=>t[h],[h,t]),_=(0,l.useMemo)(()=>t.length,[t]),b=(0,l.useCallback)(()=>{let e=new URL(window.location.href);e.searchParams.delete(n),window.history.pushState({},"",e.toString()),p(0),v(!1)},[n]),E=(0,l.useCallback)(async e=>{b();try{y(e);let t=await i();if(!t)throw Error("Failed to create new deck");let r=t.id,a=new URL(window.location.href);a.searchParams.set(n,r),window.history.pushState({},"",a.toString())}catch(e){console.error(e),(0,o.yv)("Failed to create new deck",{variant:"error"})}finally{y(null)}},[i,n,b]),C=(0,l.useCallback)(()=>{if(j)return b();p(e=>e-1)},[j,b]),T=(0,l.useCallback)(async()=>{m&&(S?w(()=>{d(m)}):p(e=>e+1))},[d,m,S]);return(0,l.useEffect)(()=>()=>{b()},[b]),(0,r.jsx)(c.Provider,{value:{flowId:m,activeStep:k,activeStepIdx:h,numberOfSteps:_,isSaving:f,setIsSaving:v,isFirstStep:j,isLastStep:S,isCreating:g,isFinishing:x,onClickClose:b,onClickStart:E,onClickBack:C,onClickNext:T},children:s})},i=()=>{let e=(0,l.useContext)(c);if(void 0===e)throw Error("useFlowModal must be used within FlowModalProvider");return e}},35878:function(e,t,n){n.d(t,{P:function(){return l}});var r=n(41973),a=n(54167);class o{async setTGBot(e,t,n){return fetch("".concat(o.BASE_URL,"/set_tg_bot/").concat(e,"/").concat(t,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json())}async setPublicAddress(e){return fetch("".concat(o.BASE_URL,"/set_public_address"),{method:"POST",body:JSON.stringify({url:e}),headers:{"Content-Type":"application/json"}}).then(e=>e.json())}xGetRedirectUrl(){let e=(0,a.ZB)();return"".concat(o.BASE_URL,"/v1/auth/twitter/login?redirect_url=").concat(e)}async getMe(){return fetch("".concat(o.BASE_URL,"/v1/profile/me"),{credentials:"include",priority:"high",cache:"default"}).then(e=>e.json())}logout(){return fetch("".concat(o.BASE_URL,"/v1/auth/logout"),{credentials:"include"})}async getProfile(e){return fetch("".concat(o.BASE_URL,"/v1/profile/").concat(e),{credentials:"include"}).then(e=>e.json())}async getProfileByHandle(e){return fetch("".concat(o.BASE_URL,"/v1/profile/by_handle/").concat(e),{credentials:"include"}).then(e=>e.json())}async refreshProfile(e){return fetch("".concat(o.BASE_URL,"/v1/profile/update_twitter/").concat(e),{credentials:"include",method:"POST"}).then(e=>e.json())}async getFeed(e,t){let{start:n=0,limit:r=20}=e,a=new URLSearchParams;return a.append("start",n.toString()),a.append("limit",r.toString()),fetch("".concat(o.BASE_URL,"/v1/feed?").concat(a),{credentials:"include",signal:t}).then(e=>e.json())}async getLibrary(e,t){let{search:n="",source:r=["upload","generated","faceswap"],start:a=0,limit:l=20}=e,c=new URLSearchParams;return n&&c.append("search",n),r.length>0&&c.append("source",r.join(",")),c.append("limit",l.toString()),c.append("start",a.toString()),fetch("".concat(o.BASE_URL,"/v1/profile/me/library?").concat(c),{credentials:"include",signal:t}).then(e=>e.json())}async getUploads(e,t){let{deckId:n,search:r="",start:a=0,limit:l=20}=e,c=new URLSearchParams;return n&&c.append("deck_id",n),r&&c.append("search",r),c.append("limit",l.toString()),c.append("start",a.toString()),fetch("".concat(o.BASE_URL,"/v1/profile/me/uploads?").concat(c),{credentials:"include",signal:t}).then(e=>e.json())}async getMemesByHandle(e,t,n){let{search:r="",start:a=0,limit:l=20}=t,c=new URLSearchParams;return r&&c.append("search",r),c.append("limit",l.toString()),c.append("start",a.toString()),fetch("".concat(o.BASE_URL,"/v1/profile/by_handle/").concat(e,"/memes?").concat(c),{credentials:"include",signal:n}).then(e=>e.json())}async getMeme(e){return fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e),{credentials:"include"}).then(e=>e.json())}async getSavedMemes(e,t){let{search:n="",start:r=0,limit:a=20,user_handle:l}=e,c=new URLSearchParams;return n&&c.append("search",n),l&&c.append("user_handle",l),c.append("limit",a.toString()),c.append("start",r.toString()),fetch("".concat(o.BASE_URL,"/v1/memes/saved?").concat(c),{credentials:"include",signal:t}).then(e=>e.json())}async deleteMeme(e){return fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e),{method:"DELETE",credentials:"include"}).then(e=>e.json())}async postMeme(e){let{filename:t,filetype:n,source_url:r,bytes:a}=e;try{let e={filename:t,filetype:n};r?e={...e,source_url:r}:a&&(e={...e,bytes:Array.from(new Uint8Array(a))});let l=await fetch("".concat(o.BASE_URL,"/v1/memes"),{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error("HTTP Error: ".concat(l.status));let c=await l.json();return console.log("Meme creation response:",c),c}catch(e){console.error("Error creating meme:",e)}}async postMemeTextOverlay(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/text_overlay"),{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status));let r=await n.json();return console.log("Meme text overlay response:",r),r}catch(e){console.error("Error creating meme text overlay:",e)}}async createComposedMeme(e){try{let t=await fetch("".concat(o.BASE_URL,"/v1/memes/composed"),{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP Error: ".concat(t.status));let n=await t.json();return console.log("POST Compose Meme response:",n),n}catch(e){console.error("Error POST Compose Meme:",e)}}async updateMemePanel(e,t,n){try{let r=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/panel/").concat(t),{method:"PUT",body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP Error: ".concat(r.status));let a=await r.json();return console.log("PUT Meme Panel response:",a),a}catch(e){console.error("Error PUT Meme Panel:",e)}}async updateComposedMemeLayout(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/layout"),{method:"PUT",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status));let r=await n.json();return console.log("PUT Compose Meme Layout response:",r),r}catch(e){console.error("Error PUT Compose Meme Layout:",e)}}async composedUpload(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/composed-upload"),{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status));let r=await n.json();return console.log("POST Compile Meme response:",r),r}catch(e){console.error("Error POST Compile Meme:",e)}}async getTrending(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return fetch("".concat(o.BASE_URL,"/v1/search/trending?start=0&limit=").concat(e),{credentials:"include"}).then(e=>e.json())}async getRecommendedFollows(){return fetch("".concat(o.BASE_URL,"/v1/recommended-follow"),{credentials:"include"}).then(e=>e.json())}async createPost(e){return(await fetch("".concat(o.BASE_URL,"/v1/feed"),{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}})).json()}async createDeck(e){return(await fetch("".concat(o.BASE_URL,"/v2/decks"),{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}})).json()}async updateDeck(e,t){return(await fetch("".concat(o.BASE_URL,"/v2/decks/").concat(e),{method:"PUT",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}})).json()}async submitPostToDeck(e,t){return(await fetch("".concat(o.BASE_URL,"/v2/decks/").concat(e,"/submit"),{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}})).json()}async deleteDeck(e){return(await fetch("".concat(o.BASE_URL,"/v2/decks/").concat(e),{method:"DELETE",credentials:"include"})).json()}async getDeck(e,t,n){let{interval:r,limit:a}=t,l=new URLSearchParams;return r&&l.append("interval",r),a&&l.append("limit",a.toString()),fetch("".concat(o.BASE_URL,"/v2/decks/").concat(e,"?").concat(l),{credentials:"include",signal:n,cache:"no-store"}).then(e=>e.json())}async getDecks(e,t){let{start:n,interval:r,limit:a,user_handle:l,meme_id:c}=e,s=new URLSearchParams;return n&&s.append("start",n.toString()),r&&s.append("interval",r.toString()),a&&s.append("limit",a.toString()),l&&s.append("user_handle",l.toLowerCase()),c&&s.append("meme_id",c),fetch("".concat(o.BASE_URL,"/v2/decks?").concat(s),{credentials:"include",signal:t}).then(e=>e.json())}async getTopDecks(e,t){let{interval:n,limit:r,category:a}=e,l=new URLSearchParams;return n&&l.append("interval",n.toString()),r&&l.append("limit",r.toString()),a&&l.append("category",a),fetch("".concat(o.BASE_URL,"/v1/search/deck?").concat(l),{credentials:"include",signal:t}).then(e=>e.json())}async followDeck(e){return(await fetch("".concat(o.BASE_URL,"/v2/decks/").concat(e,"/follow"),{method:"POST",credentials:"include"})).json()}async unfollowDeck(e){return(await fetch("".concat(o.BASE_URL,"/v2/decks/").concat(e,"/follow"),{method:"DELETE",credentials:"include"})).json()}async getDecksIFollow(){return fetch("".concat(o.BASE_URL,"/v2/decks/following"),{method:"GET",credentials:"include"}).then(e=>e.json())}async getDecksNewPosts(){return fetch("".concat(o.BASE_URL,"/v2/decks/following/new-posts"),{method:"GET",credentials:"include"}).then(e=>e.json())}async deletePost(e){return fetch("".concat(o.BASE_URL,"/v1/feed/").concat(e),{method:"DELETE",credentials:"include"}).then(e=>e.json())}async publishMeme(e){try{let t=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e.replace("meme:",""),"/publish"),{method:"POST",body:null,credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP Error: ".concat(t.status," ").concat(t.body));return await t.json()}catch(e){console.error("deck publish error:",e)}}async unpublishMeme(e){try{let t=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e.replace("meme:",""),"/publish"),{method:"DELETE",body:null,credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP Error: ".concat(t.status," ").concat(t.body));return await t.json()}catch(e){console.error("deck publish error:",e)}}async getMemeReactions(e){let t=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e.replace("meme:",""),"/reacts"),{credentials:"include"}),n=await t.json();return n.reduce((e,t)=>(e[t.react]||(e[t.react]={count:0,data:n}),e[t.react].count+=1,e),{})}async createMemeReaction(e,t){return(await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e.replace("meme:",""),"/reacts"),{method:"POST",credentials:"include",body:JSON.stringify({react:t}),headers:{"Content-Type":"application/json"}})).json()}async deleteMemeReaction(e,t){return(await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e.replace("meme:",""),"/reacts"),{method:"DELETE",credentials:"include",body:JSON.stringify({react:t}),headers:{"Content-Type":"application/json"}})).json()}async searchTags(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return fetch("".concat(o.BASE_URL,"/v1/tags/search?search=").concat(e,"&limit=").concat(t,"&sort=Recent"),{credentials:"include"}).then(e=>e.json())}async tagResource(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/tags"),{method:"POST",body:JSON.stringify({resource_id:e,tag:t}),credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status," ").concat(n.body));let r=await n.json();return console.log("tag resource response:",r),r}catch(e){console.error("tag resource error:",e)}}async untagResource(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/tags"),{method:"DELETE",body:JSON.stringify({resource_id:e,tag_id:t}),credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status," ").concat(n.body));let r=await n.json();return console.log("untag resource response:",r),r}catch(e){console.error("untag resource error:",e)}}async saveMeme(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/save"),{method:t?"DELETE":"POST",body:null,credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status," ").concat(n.body));let r=await n.json();return console.log("deck bookmark response:",r),r}catch(e){console.error("deck bookmark error:",e)}}async updateMeme(e,t){try{let n=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e),{method:"PUT",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP Error: ".concat(n.status));let r=await n.json();return console.log("Meme put response:",r),r}catch(e){console.error("Error updating meme:",e)}}async search(e,t){let{search:n="",start:a=0,limit:l=20,interval:c=r.u.Week,deck_id:s="",sort_by:i=r.a.Hot}=e,d=new URLSearchParams;return n&&d.append("search",n),s&&d.append("deck_id",s),d.append("interval",c),d.append("limit",l.toString()),d.append("start",a.toString()),d.append("sort_by",i),fetch("".concat(o.BASE_URL,"/v1/search?").concat(d),{credentials:"include",signal:t}).then(e=>e.json())}async searchUser(e,t){let{search:n="",start:r=0,limit:a=20}=e,l=new URLSearchParams;return n&&l.append("search",n),l.append("limit",a.toString()),l.append("start",r.toString()),fetch("".concat(o.BASE_URL,"/v1/search/user?").concat(l),{credentials:"include",signal:t}).then(e=>e.json())}async getTopCharacters(e,t){let{interval:n,limit:r}=e,a=new URLSearchParams;return n&&a.append("interval",n.toString()),r&&a.append("limit",r.toString()),fetch("".concat(o.BASE_URL,"/v1/search/character?").concat(a),{credentials:"include",signal:t}).then(e=>e.json())}async randomMeme(e){return fetch("".concat(o.BASE_URL,"/v1/memes/random?search=").concat(e||"pepe"),{credentials:"include"}).then(e=>e.json())}async getAnalytics(){return fetch("".concat(o.BASE_URL,"/v1/analytics"),{credentials:"include"}).then(e=>e.json())}async getProductUpdates(){return fetch("".concat(o.BASE_URL,"/v1/product_updates"),{credentials:"include"}).then(e=>e.json())}async dismissProductUpdate(e){return fetch("".concat(o.BASE_URL,"/v1/product_updates"),{method:"DELETE",credentials:"include",body:JSON.stringify({product_update_id:e}),headers:{"Content-Type":"application/json"}}).then(e=>e.json())}async faceswapUpload(e,t,n){try{let r=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/panel/").concat(t,"/faceswap-upload"),{method:"POST",body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP Error: ".concat(r.status));let a=await r.json();return console.log("POST faceswap upload response:",a),a}catch(e){console.error("Error POST faceswap upload:",e)}}async faceswapDelete(e,t,n){try{let r=await fetch("".concat(o.BASE_URL,"/v1/memes/").concat(e,"/panel/").concat(t,"/faceswap-upload"),{method:"DELETE",body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP Error: ".concat(r.status));let a=await r.json();return console.log("DELETE faceswap upload response:",a),a}catch(e){console.error("Error POST faceswap upload:",e)}}}o.BASE_URL=(0,a.bR)();let l=new o},41973:function(e,t,n){var r,a,o,l;n.d(t,{a:function(){return a},u:function(){return r}}),(o=r||(r={})).Today="today",o.Week="week",o.Month="month",o.Year="year",o.AllTime="all-time",(l=a||(a={})).Hot="hot",l.Recent="recent"},99957:function(e,t,n){n.d(t,{cn:function(){return o}});var r=n(79598),a=n(62079);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},74859:function(e,t,n){n.d(t,{D:function(){return r},k:function(){return a}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...a);return n=null,t},t)}},a=(e,t)=>{let n=null;return function(){for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return new Promise((r,o)=>{let l=async()=>{n&&clearTimeout(n);try{let t=await e(...a);r(t)}catch(e){o(e)}n=null};n&&clearTimeout(n),n=setTimeout(l,t)})}}},54167:function(e,t,n){n.d(t,{BB:function(){return a},Dt:function(){return s},L:function(){return u},ZB:function(){return d},bR:function(){return i},cm:function(){return o},j7:function(){return l}});var r=n(93126);let a="true"===r.env.NEXT_PUBLIC_IS_PROD,o="true"===r.env.NEXT_PUBLIC_IS_STAGING,l=!0,c="localhost";function s(){return/Android/i.test(navigator.userAgent)}function i(){return l?window.location.origin+"/memedeck:memedeck:meme-deck.os":a?"https://api.memedeck.xyz":o?"https://staging-api.memedeck.xyz":"http://".concat(c,":8080")}function d(){return l?window.location.origin+"/memedeck:memedeck:meme-deck.os/home":a?"https://memedeck.xyz/home":o?"https://staging.memedeck.xyz/home":"http://".concat(c,":3000/home")}function u(){return a?"https://memedeck.xyz":o?"https://staging.memedeck.xyz":"http://".concat(c,":3000")}},62568:function(e,t,n){n.d(t,{K7:function(){return o},VU:function(){return s},jG:function(){return a},vk:function(){return l}});var r=n(54167);let a="MemeDeck",o="Meme With Frens",l="Create & discover memes with AI.";function c(e){return e.replace("ai_character:","").replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function s(e){let t="".concat(e.creator_name," (@").concat(e.creator_handle,")"),n="AI Meme",r="View the AI-generated meme by ".concat(t," on MemeDeck.xyz");if("generated"===e.source){let t=e.prompt;t&&(n=c(t.character),r=t.user_positive_prompt)}else if("composed"===e.source){var a;let o=Object.values(null!==(a=e.panels)&&void 0!==a?a:{}),l=o.find(e=>"generated"===e.panel_type&&e.panel_config.prompt),s=o.find(e=>"generated"===e.panel_type&&e.panel_config.meme),i=l?l.panel_config.prompt:null,d=s?s.panel_config.meme:null,u=o.find(e=>"faceswap"===e.panel_type&&e.panel_config.swapped_image),m=u?u.panel_config.swapped_image:null;if(i)n=c(i.character),r=i.user_positive_prompt;else if(d){let e=d.search_text;n=e.length>50?"".concat(e.slice(0,50),"..."):e,r=d.search_text}else m&&(n="Face Swap",r="View the face swap meme by ".concat(t," on MemeDeck.xyz"))}let o="".concat(n," by ").concat(t);return{memeTitle:n,memeTitleWithAttribution:o,memeDescription:r,memeCreator:t}}"".concat(a," – ").concat(o),new URL(r.j7?"http://localhost:8080":"https://memedeck.xyz")},81727:function(e,t,n){n.d(t,{Df:function(){return l},Po:function(){return o},RL:function(){return c},_6:function(){return i},qr:function(){return d},uZ:function(){return s}});var r=n(97102),a=n(41973);let o=e=>{let t=new Date(e/1e6),n=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(n/60),a=Math.round(r/60);return n<60?"".concat(n,"s ago"):r<60?"".concat(r,"m ago"):a<24?"".concat(a,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},l=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),c="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function s(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function i(e,t,n){return 1===e?t:n}function d(e){switch(e){case a.u.Today:return"Today";case a.u.Week:return"This Week";case a.u.Month:return"This Month";case a.u.Year:return"This Year";case a.u.AllTime:return"of All Time"}}},93276:function(e,t,n){function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function a(e,t){let n=new URLSearchParams;return(null==t?void 0:t.sort_by)&&n.set("sort_by",t.sort_by),"/deck/".concat(e.replace("deck:",""),"?").concat(n.toString())}function o(e){return"/home/".concat(e.replace("meme:",""))}n.d(t,{Wi:function(){return o},o4:function(){return a},wS:function(){return r}})},94787:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},21008:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}}]);