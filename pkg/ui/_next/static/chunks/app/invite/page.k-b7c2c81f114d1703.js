(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{77571:function(e,t,s){Promise.resolve().then(s.bind(s,3801))},3801:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var l=s(91104),i=s(63137),n=s(33968),a=s(29398),r=s(49566),c=s(9698),o=s(87091),u=s(57826),d=s(36623),x=s(41116),m=s(8846),h=s(31210),f=s(48845),p=s(72184),v=s(61484),j=s(64255),w=s(41908),y=s(38304),g=s(18159),b=s(4180),k=s(30027),C=s(45268),N=s(86600);let E=e=>{let{username:t}=e;return(0,l.jsxs)(k.default,{href:"https://twitter.com/".concat(t),target:"_blank",className:"flex flex-1 gap-2 sm:gap-3 items-center min-w-0 hover:underline",children:[(0,l.jsx)(C.h,{src:"https://unavatar.io/twitter/".concat(t),alt:t,name:t,showFallback:!0,size:"sm",className:"min-w-8"}),(0,l.jsxs)("p",{className:"flex tracking-wide",children:["@".concat(t),(0,l.jsx)(N.x,{})]})]})},P=e=>{let{columnKey:t,invite:s,isDeleting:i,onClickDelete:n}=e;if("created_at"===t)return(0,l.jsx)("p",{className:"flex-1 truncate text-xs sm:text-sm px-2 text-white-400/75",children:(0,b.Po)((0,y.sF)(s,t))});if("status"===t){let e=(0,y.sF)(s,t),a=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),c="ACCEPTED"===e;return(0,l.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,l.jsx)(g.z,{size:"sm",color:c?"success":"primary",classNames:{base:c?"bg-green-400 text-green-900":"text-white-400"},children:a}),!c&&(0,l.jsx)(u.A,{size:"sm",isIconOnly:!0,variant:"light",isLoading:i,onClick:n,children:(0,l.jsx)(r.JO,{icon:"mdi:remove",className:"text-white-400/75",width:16})})]})}if("to"===t){let e=(0,y.sF)(s,t);return(0,l.jsx)(E,{username:e})}},_=[{key:"to",value:"To"},{key:"created_at",value:"Sent"},{key:"status",value:"Status"}],D=e=>{let{invites:t,isFetching:s,isDeleting:i,onClickDeleteInvite:n}=e;return(0,l.jsxs)(m.b,{classNames:{wrapper:"p-2 lg:p-3",table:"max-w-full min-w-full relative flex flex-col gap-3",thead:"flex flex-col gap-0",th:"flex flex-1 items-center truncate min-h-0 bg-black-400",tbody:"flex flex-col gap-3",tr:"flex max-w-full min-w-full",td:"flex flex-1 items-center truncate px-1 py-0",emptyWrapper:"flex flex-col items-center justify-center"},children:[(0,l.jsx)(h.J,{columns:_,children:e=>(0,l.jsx)(f.j,{children:e.value},e.key)}),(0,l.jsx)(p.y,{items:t,emptyContent:(0,l.jsx)("p",{className:"p-3",children:"No invites issued yet"}),children:s?(0,l.jsxs)(v.g,{children:[(0,l.jsx)(j.X,{children:""}),(0,l.jsx)(j.X,{children:(0,l.jsx)("div",{className:"w-full h-[160px] flex items-center justify-center",children:(0,l.jsx)(w.c,{})})}),(0,l.jsx)(j.X,{children:""})]}):t.sort((e,t)=>"ACCEPTED"===e.status&&"ACCEPTED"!==t.status?1:"ACCEPTED"!==e.status&&"ACCEPTED"===t.status?-1:new Date(t.created_at/1e6).getTime()-new Date(e.created_at/1e6).getTime()).map(e=>(0,l.jsx)(v.g,{children:t=>(0,l.jsx)(j.X,{children:(0,l.jsx)(P,{columnKey:t,invite:e,isDeleting:i===e.id,onClickDelete:()=>n(e.id)},t)})},e.id))})]})};function A(){var e;let{profile:t}=(0,x.useProfile)(),s=null!==(e=null==t?void 0:t.user.invite_cap)&&void 0!==e?e:5,[m,h]=(0,i.useState)([]),[f,p]=(0,i.useState)(!0),[v,j]=(0,i.useState)(""),[w,y]=(0,i.useState)(!1),[g,b]=(0,i.useState)(null),k=(0,i.useMemo)(()=>m.length>=s,[s,m.length]),C=(0,i.useCallback)(async()=>{h(await n.P.getInvites()),p(!1)},[]),N=(0,i.useCallback)(async()=>{if(w||k)return;let e=v.trim().replace(/^@/,"");if(m.some(t=>t.to.toLowerCase()===e.toLowerCase())){(0,d.yv)("User already invited",{variant:"info"});return}try{y(!0);try{if((await n.P.getProfileByHandle(e)).id){(0,d.yv)("User already exists",{variant:"info"});return}}catch(e){}await n.P.postInvite({x_handle:e})}catch(e){(0,d.yv)("Failed to send invite",{variant:"error"})}finally{await C(),j(""),y(!1)}},[w,k,v,m,C]),E=(0,i.useCallback)(async e=>{if(g!==e)try{b(e),await n.P.deleteInvite(e)}catch(e){(0,d.yv)("Failed to delete invite",{variant:"error"})}finally{await C(),b(null)}},[C,g]);return(0,i.useEffect)(()=>{C()},[C]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.y,{title:(0,l.jsxs)("span",{className:"flex items-center gap-1 justify-between",children:["Invite Friends from X",(0,l.jsx)(c.e,{content:(0,l.jsx)("p",{className:"max-w-48",children:"As a Memedeck user you can invite a friend from X which allows them to skip the waitlist."}),children:(0,l.jsx)("div",{className:"flex items-center justify-center size-12",children:(0,l.jsx)(r.JO,{icon:"mdi:information-outline",className:"text-white-400/75",width:16})})})]}),border:"border-b border-white-400/10"}),(0,l.jsxs)("div",{className:"flex flex-col p-3 gap-3 min-w-full max-w-full",children:[(0,l.jsxs)("p",{className:"text-white-400/75 text-sm",children:["You have ",Number(s-m.length),"/",s," invites left."]}),(0,l.jsx)(o.Y,{type:"text",size:"lg",classNames:{input:"placeholder:text-white-400/50"},placeholder:"elonmusk",value:v,onValueChange:j,startContent:(0,l.jsx)(r.JO,{icon:"mdi:at",className:"text-white-400",width:20}),endContent:(0,l.jsx)(u.A,{size:"sm",color:"primary",isLoading:w,isDisabled:k,onClick:N,children:"Invite"}),onKeyDown:e=>{"Enter"===e.key&&N()}}),(0,l.jsx)(D,{invites:m,isFetching:f,isDeleting:g,onClickDeleteInvite:E})]})]})}},29398:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var l=s(91104),i={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0},n=s(23640),a=s(48751);let r=e=>{let{title:t,border:s="border-b border-transparent",isLoading:r=!1,endContent:c,onGoBack:o}=e,{goBack:u}=(0,a.useAppHistory)();return(0,l.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(s),children:[(0,l.jsx)(n.O,{src:i,alt:"Back",onClick:null!=o?o:u}),r?(0,l.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,l.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:t}),c]})}},23640:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var l=s(91104),i=s(83301);let n=e=>{let{src:t,alt:s,id:n,margin:a="m-2",w:r="w-3.5",onClick:c}=e;return(0,l.jsx)("button",{id:n,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(a),onClick:c,children:(0,l.jsx)(i.default,{priority:!0,src:t,alt:s,className:"opacity-85 ".concat(r)})})}},48751:function(e,t,s){"use strict";s.r(t),s.d(t,{AppHistoryProvider:function(){return c},useAppHistory:function(){return o}});var l=s(91104),i=s(26816),n=s(36623),a=s(63137);let r=(0,a.createContext)({}),c=e=>{let{children:t}=e,s=(0,i.usePathname)(),c=(0,i.useRouter)(),[o,u]=(0,a.useState)([]),d=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0;console.log("goBack",{defaultRoute:e,ignoreRouteBase:t});let s=e;o.length>1&&(s=o[o.length-2],void 0!==t&&s.includes(t)&&(s=e)),"string"!=typeof s&&(s="/home"),c.push(s,{scroll:!1})},[o,c]);return(0,a.useEffect)(()=>{u(e=>e[e.length-1]!==s?[...e,s]:e)},[s]),(0,l.jsxs)(r.Provider,{value:{goBack:d},children:[t,(0,l.jsx)(n.wT,{dense:!0,maxSnack:3})]})},o=()=>(0,a.useContext)(r)}},function(e){e.O(0,[826,349,223,98,464,42,915,514,171,744],function(){return e(e.s=77571)}),_N_E=e.O()}]);