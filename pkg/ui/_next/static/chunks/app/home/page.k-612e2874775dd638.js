(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[984],{3040:function(e,t,s){Promise.resolve().then(s.bind(s,87221)),Promise.resolve().then(s.bind(s,91239)),Promise.resolve().then(s.bind(s,30977)),Promise.resolve().then(s.bind(s,20100)),Promise.resolve().then(s.bind(s,9577)),Promise.resolve().then(s.bind(s,69936)),Promise.resolve().then(s.bind(s,35038)),Promise.resolve().then(s.bind(s,67409)),Promise.resolve().then(s.bind(s,91173)),Promise.resolve().then(s.bind(s,44815)),Promise.resolve().then(s.bind(s,85972)),Promise.resolve().then(s.bind(s,64650)),Promise.resolve().then(s.bind(s,13033)),Promise.resolve().then(s.bind(s,70672)),Promise.resolve().then(s.bind(s,31147)),Promise.resolve().then(s.bind(s,54234)),Promise.resolve().then(s.bind(s,19055)),Promise.resolve().then(s.bind(s,63097)),Promise.resolve().then(s.bind(s,95963)),Promise.resolve().then(s.bind(s,8917)),Promise.resolve().then(s.bind(s,21452)),Promise.resolve().then(s.bind(s,43266)),Promise.resolve().then(s.bind(s,85993)),Promise.resolve().then(s.bind(s,14993)),Promise.resolve().then(s.bind(s,17466)),Promise.resolve().then(s.bind(s,37257)),Promise.resolve().then(s.bind(s,52761)),Promise.resolve().then(s.bind(s,61736)),Promise.resolve().then(s.bind(s,90020)),Promise.resolve().then(s.bind(s,67928)),Promise.resolve().then(s.bind(s,32617)),Promise.resolve().then(s.bind(s,82530)),Promise.resolve().then(s.bind(s,24537)),Promise.resolve().then(s.bind(s,27373)),Promise.resolve().then(s.bind(s,92845)),Promise.resolve().then(s.bind(s,22545)),Promise.resolve().then(s.bind(s,98615))},26645:function(e,t,s){"use strict";s.d(t,{Ud:function(){return m},hd:function(){return d},Ew:function(){return u},QB:function(){return h}});var l=s(91104),r=s(30027),i=s(83301),a={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo.a86b8f2b.svg",height:256,width:256,blurWidth:0,blurHeight:0},n=s(8748),o=s(51115),c=s(18159);let d=()=>(0,l.jsx)("div",{className:"flex h-16 select-none items-center justify-center lg:px-2 lg:text-left",children:(0,l.jsxs)(r.default,{href:"/home",children:[(0,l.jsxs)("div",{className:"hidden gap-1 items-center lg:flex",children:[(0,l.jsx)(h,{}),(0,l.jsx)(m,{})]}),(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(u,{})})]})}),u=()=>(0,l.jsx)(i.default,{src:a,alt:"".concat(o.jG," Icon"),"aria-label":"".concat(o.jG," - ").concat(o.vk),className:"h-10 w-full select-none"}),h=e=>{let{className:t="h-12 w-auto"}=e;return(0,l.jsx)(i.default,{priority:!0,src:n.Z,alt:"".concat(o.jG," Logo"),"aria-label":"".concat(o.jG," - ").concat(o.vk),className:t,draggable:!1})},m=()=>(0,l.jsx)(c.z,{size:"sm",color:"warning",classNames:{base:"mb-0.5 text-yellow-400 bg-yellow-50 border-1 border-yellow-400/10"},children:"Alpha"})},34260:function(e,t,s){"use strict";s.d(t,{h:function(){return i}});var l=s(91104),r=s(83301);let i=e=>{let{imageUrl:t,priorityLoadImage:s,alt:i="Meme"}=e;return(0,l.jsxs)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:[(0,l.jsx)(r.default,{className:"absolute z-0 inset-0 object-cover blur-lg scale-110 size-full",src:t,alt:"Meme blur",width:400,height:400,quality:1,priority:s}),(0,l.jsx)(r.default,{draggable:!1,className:"absolute z-1 inset-0 size-full object-contain",src:t,alt:i,width:640,height:640,sizes:"640px",quality:50,priority:s})]})}},20100:function(e,t,s){"use strict";s.r(t),s.d(t,{NewFeatures:function(){return d}});var l=s(91104),r=s(33968),i=s(49566),a=s(70127),n=s(57826),o=s(75161),c=s(63137);let d=()=>{let[e,t]=(0,c.useState)();if((0,c.useEffect)(()=>{r.P.getProductUpdates().then(e=>t(e))},[]),!e)return null;let s=new Date(e.date_formatted),d="".concat(s.getMonth()+1,"/").concat(s.getDate(),"/").concat(s.getFullYear());return e&&(0,l.jsxs)(a.w,{className:"border-white-400/5 w-full rounded-lg border pb-4 p-2 bg-[url('https://nextuipro.nyc3.cdn.digitaloceanspaces.com/components-images/abstract-dark-bg4.jpg')] bg-right-bottom",shadow:"sm",children:[(0,l.jsx)(n.A,{isIconOnly:!0,className:"absolute right-2 top-2 z-20",radius:"full",size:"sm",variant:"light",onClick:()=>{r.P.dismissProductUpdate(e.id),t(void 0)},children:(0,l.jsx)(i.JO,{className:"text-default-400",icon:"iconamoon:close-thin",width:24})}),(0,l.jsxs)(o.G,{className:"px-3 pb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,l.jsx)(i.JO,{icon:"ic:sharp-tips-and-updates",className:"size-7 my-2"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-small text-default-500/50",children:d}),(0,l.jsx)("h2",{className:"text-lg font-black",children:(null==e?void 0:e.title)||"Product Updates"})]})]}),(0,l.jsx)("ul",{className:"mt-3",children:Object.entries(null==e?void 0:e.details).sort((e,t)=>e[0]-t[0]).map(e=>(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.JO,{icon:"ic:sharp-check-circle",className:"size-4"}),(0,l.jsx)("p",{className:"text-small text-default-500",children:e[1]})]},"product-update-feature"+e[0].toString()))})]})]})}},9577:function(e,t,s){"use strict";s.r(t),s.d(t,{Page:function(){return m}});var l=s(91104),r=s(63137),i=s(26816),a=s(41116),n=s(33968),o=s(71668),c=s(41908),d={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0},u=s(83301);let h=()=>{let{isBatchUploading:e}=(0,o.useUpload)();return(0,l.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,l.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,l.jsx)(c.c,{}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,l.jsx)(u.default,{src:d,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,l.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})},m=e=>{let{children:t,isGated:s=!0,border:o="xs:border-0 sm:border-x border-white-400/15"}=e,c=(0,i.useRouter)(),{profile:d,setProfile:u,isHovering:m,isPostingMemes:x}=(0,a.useProfile)();return(0,r.useEffect)(()=>{s&&!d&&n.P.getMe().then(u).catch(e=>{console.error(e),c.push("/")})},[s,d,c,u]),(0,l.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(o),children:m&&!x?(0,l.jsx)(h,{}):t})}},69936:function(e,t,s){"use strict";s.r(t),s.d(t,{PeopleToFollow:function(){return c}});var l=s(91104),r=s(63137),i=s(30027),a=s(33968),n=s(41116),o=s(65511);let c=()=>{let{recommendedFollows:e,setRecommendedFollows:t}=(0,n.useProfile)(),[s,c]=(0,r.useState)(!0),d=(0,r.useCallback)(async()=>{t(await a.P.getRecommendedFollows()),c(!1)},[t]);return((0,r.useEffect)(()=>{0===e.length&&d()},[d,e.length]),s&&0===e.length)?(0,l.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3,4,5,6,7].map(e=>(0,l.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,l.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,l.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,l.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):(0,l.jsx)("div",{className:"flex flex-col gap-1",children:e.slice(0,7).map(e=>(0,l.jsxs)(i.default,{href:"/u/".concat(e.screen_name),className:"hover:bg-white-400/5 flex items-center gap-3 px-4 py-2 text-sm",children:[(0,l.jsx)("div",{id:"creator-avatar",className:"bg-black-400 size-10 rounded-full",children:(0,l.jsx)(o.R,{className:"rounded-full",src:e.profile_image_url_https,alt:e.screen_name,width:40,height:40})}),(0,l.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,l.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:e.name}),(0,l.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",e.screen_name]})]})]},e.screen_name))})}},35038:function(e,t,s){"use strict";s.r(t),s.d(t,{TrendingTopics:function(){return c}});var l=s(91104),r=s(63137),i=s(18159),a=s(33968),n=s(41116),o=s(37301);let c=e=>{let{limit:t,wrap:s="flex-wrap",onClickTag:c}=e,{trending:d,setTrending:u}=(0,n.useProfile)(),[h,m]=(0,r.useState)(!0),x=(0,r.useCallback)(async()=>{u(await a.P.getTrending(t)),m(!1)},[u,t]);return((0,r.useEffect)(()=>{let e=d.length;(0===e||e<t)&&x()},[x,t,d.length]),h&&0===d.length)?(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:[1,2,3].map(e=>(0,l.jsx)(i.z,{variant:"flat",className:"cursor-pointer select-none px-2 py-1 text-sm font-bold tracking-wide text-transparent",children:1===e?"abcdefg":"xyzw"},e))}):(0,l.jsx)(o.$,{wrap:s,tags:d.slice(0,t).map(e=>e.name),onClickTag:c})}},87221:function(e,t,s){"use strict";s.r(t),s.d(t,{SearchBar:function(){return n}});var l=s(91104),r=s(26816),i=s(26645),a=s(18262);let n=e=>{let{value:t,autofocus:s,initialSearch:n,responsiveness:o="",border:c="border-b border-white-400/15",placeholder:d,onSearch:u}=e,h=(0,r.useRouter)();return(0,l.jsxs)("div",{className:"sticky top-0 z-10 flex gap-3 h-16 w-full items-center bg-black-0 px-3 ".concat(o," ").concat(c),onClick:()=>{u||h.push("/explore")},children:[(0,l.jsx)("div",{className:"sm:hidden size-10 max-w-10",children:(0,l.jsx)(i.Ew,{})}),(0,l.jsx)(a.T,{value:t,autofocus:s,initialSearch:n,placeholder:d,onSearch:u})]})}},18262:function(e,t,s){"use strict";s.d(t,{T:function(){return o}});var l=s(91104),r=s(63137),i=s(83301),a=s(87091),n=s(20279);let o=e=>{let{value:t,autofocus:s,initialSearch:o,placeholder:c="Search for memes. (i.e. pepe)",onFocus:d,onSearch:u}=e,h=(0,r.useRef)(null);return(0,l.jsx)(a.Y,{isClearable:!0,onClear:()=>{null==u||u("")},radius:"full",classNames:{input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,l.jsx)(i.default,{priority:!0,src:n.Z,alt:"Dropdown",onClick:e=>{var t;e.preventDefault(),null===(t=h.current)||void 0===t||t.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:h,autoFocus:s,defaultValue:o,placeholder:c,className:"h-10 min-w-24 flex-1 rounded-full border border-white-400/5 bg-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",value:t,onFocus:d,onChange:e=>null==u?void 0:u(e.target.value)})}},91239:function(e,t,s){"use strict";s.r(t),s.d(t,{HomeFeed:function(){return A}});var l=s(91104),r=s(41908),i=s(33968),a=s(63137),n=s(83301),o=s(26816),c=s(36623),d=s(4180),u=s(49141);let h=e=>{let{avatar:t,handle:s,publishedAt:r,submissionCount:i=0,name:a,description:n,onProfileClick:o}=e;return(0,l.jsxs)("header",{className:"flex w-full flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-start gap-1.5 text-sm",children:[(0,l.jsx)(u.z,{classNames:{base:"text-white-400/80 hover:text-white-400/100"},name:s,avatarProps:{src:t,className:"w-5 h-5 text-tiny"},onClick:o}),(0,l.jsx)("div",{className:"text-stone-700 text-xs",children:"•"}),i>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"text-white-400/40",children:[i," contributor",i>1?"s":""]}),(0,l.jsx)("div",{className:"text-stone-700 text-xs",children:"•"})]}),(0,l.jsx)("div",{className:"text-white-400/40",children:(0,d.Po)(r)})]}),(a||n)&&(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("h2",{className:"truncate text-lg font-bold tracking-wide",children:a}),(0,l.jsx)("p",{className:"text-sm font-normal text-white-400/75",children:n})]})]})};var m=s(33120),x=s(95928),f=s(80196),v=s(57826),p=s(15849),g=s(25851),b=s(84597),w=s(4470),j=s(49566),y=s(41116),N=s(98127),k=s(34260),P=s(21612),C=s(98644);let z=e=>{var t,s,r,i,a,o,c,d,u,h;let{meme:m,priorityLoadImage:x}=e;return(0,l.jsxs)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:[(0,l.jsx)(n.default,{className:"absolute z-0 inset-0 object-cover blur-lg scale-110 size-full",src:m.url,alt:"Meme blur",width:400,height:400,priority:x,quality:1}),(0,l.jsx)(P.g,{type:(0,C.fJ)(null!==(r=m.source)&&void 0!==r?r:"generated"),src:m.url,alt:(null!==(i=m.tags)&&void 0!==i?i:["Meme"]).join(", "),topText:null!==(a=null===(t=m.text_overlay)||void 0===t?void 0:t.top_text)&&void 0!==a?a:null,bottomText:null!==(o=null===(s=m.text_overlay)||void 0===s?void 0:s.bottom_text)&&void 0!==o?o:null,centerText:null,className:"z-[1]",imageWidth:null!==(c=m.width)&&void 0!==c?c:1024,imageHeight:null!==(d=m.height)&&void 0!==d?d:1024,canvasWidth:null!==(u=m.width)&&void 0!==u?u:1024,canvasHeight:null!==(h=m.height)&&void 0!==h?h:1024})]})};var F=s(61281),_=s(49242);let S=e=>{var t,s;let{meme:r,by_avatar:d,by_handle:u,published_at:P,priorityLoadImage:C}=e,S=(0,o.useRouter)(),{isOpen:M,onOpen:D,onClose:E,onOpenChange:A}=(0,f.q)(),{profile:T}=(0,y.useProfile)(),{onOpenMeme:O}=(0,m.useMemeModal)(),{getMemeModalPath:R}=(0,N.T)(),[U,H]=(0,a.useState)(r.is_saved),[I,L]=(0,a.useState)(!1),B=()=>{H(!U),i.P.saveMeme(r.id,U).catch(()=>{H(U)})},J=()=>{let e=R(r.id),t="".concat(window.location.origin).concat(e);navigator.clipboard.writeText(t),E(),(0,c.yv)("Link copied to clipboard",{variant:"success",autoHideDuration:1500})},W=async()=>{try{L(!0);let e=await fetch(r.url);if(!e.ok)throw Error("Network response was not ok.");let t=await e.blob(),s=new File([t],"meme.png",{type:"image/png"});await navigator.share({title:"Share Meme",text:"Check out this meme on Memedeck",files:[s]})}catch(e){console.error("Error sharing:",e)}finally{L(!1)}E()},q=r.width>0&&r.height>0&&r.width<=r.height?r.width/r.height:1024/768;return(0,l.jsxs)("article",{className:"flex min-h-0 min-w-full max-w-full cursor-pointer flex-col items-start justify-start gap-2 overflow-hidden border-b border-white-400/15 p-3 transition-colors hover:bg-black-400",onClick:()=>O(r.id),children:[(0,l.jsx)(h,{avatar:d,handle:u,publishedAt:P,onProfileClick:e=>{e.preventDefault(),e.stopPropagation(),S.push("/u/".concat(u))}}),(0,l.jsx)("div",{className:"w-full",style:{aspectRatio:q},children:"generated"===r.source?(0,l.jsx)(z,{meme:r,priorityLoadImage:C}):(0,l.jsx)(k.h,{imageUrl:r.url,alt:null===(t=r.tags)||void 0===t?void 0:t.join(", "),priorityLoadImage:C})},"meme-".concat(r.id)),(0,l.jsxs)("footer",{className:"flex w-full flex-row items-center gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,l.jsx)(x.I,{itemId:r.id,userId:null!==(s=null==T?void 0:T.user.id)&&void 0!==s?s:"",addVoteApi:i.P.createMemeReaction,removeVoteApi:i.P.deleteMemeReaction}),(0,l.jsx)(v.A,{isIconOnly:!0,size:"sm",radius:"full",variant:"ghost",onClick:e=>{e.stopPropagation(),e.preventDefault(),B()},children:(0,l.jsx)(j.JO,{icon:U?"material-symbols:bookmark":"material-symbols:bookmark-outline",width:18})})]}),r.source&&_.F.includes(r.source)&&(0,l.jsx)(v.A,{size:"sm",variant:"bordered",startContent:(0,l.jsx)(n.default,{src:F.Z,alt:"Remix",className:"size-4"}),onClick:()=>{S.push("/studio?remix=".concat(r.id))},children:"Remix"}),(0,l.jsx)(v.A,{isIconOnly:!0,size:"sm",variant:"ghost",className:"flex sm:hidden",onClick:D,children:(0,l.jsx)(j.JO,{icon:"ri:share-2-line",width:18})})]}),(0,l.jsx)(p.R,{isOpen:M,placement:"bottom",hideCloseButton:!0,onOpenChange:A,children:(0,l.jsx)(g.A,{children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(b.I,{className:"flex gap-3 pt-4",children:[(0,l.jsx)(v.A,{variant:"light",className:"flex justify-start",startContent:(0,l.jsx)(j.JO,{icon:"tdesign:link",width:18}),onClick:J,children:"Copy link"}),!!navigator.share&&(0,l.jsx)(v.A,{variant:"light",className:"flex justify-start",startContent:(0,l.jsx)(j.JO,{icon:"ri:share-2-line",width:18}),isLoading:I,onClick:W,children:"Share post via..."})]}),(0,l.jsx)(w.R,{children:(0,l.jsx)(v.A,{variant:"bordered",fullWidth:!0,onPress:e,children:"Cancel"})})]})})})]})},M=e=>{let{index:t,post:s}=e;return"meme"===s.post_type?(0,l.jsx)(S,{...s,meme:s.post,priorityLoadImage:t<2},s.id):null};var D=s(64737),E=s(60402);let A=()=>{let{feed:e,setFeed:t,hasFetchedFeed:s,setHasFetchedFeed:a}=(0,E.useFeed)(),{isFetching:n}=(0,D.M)({feed:e,setFeed:t,hasFetched:s,setHasFetched:a,fetchFn:i.P.getFeed,pageSize:10});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"relative min-w-full max-w-full",children:e.map((e,t)=>(0,l.jsx)(M,{post:e,index:t},"feed--".concat(t)))}),n&&(0,l.jsx)("div",{className:"flex w-full justify-center px-3 py-6",children:(0,l.jsx)(r.c,{})})]})}},30977:function(e,t,s){"use strict";s.r(t),s.d(t,{FeedHeaderMobile:function(){return c}});var l=s(91104),r=s(30027),i=s(83301),a=s(57826),n=s(20279),o=s(26645);let c=()=>(0,l.jsx)("nav",{className:"h-16 border-b border-white-400/10 bg-black-500 sm:hidden xs:block px-3",children:(0,l.jsxs)("div",{className:"flex size-full w-full items-center justify-between gap-3",children:[(0,l.jsx)("div",{className:"size-[40px]"}),(0,l.jsx)("div",{className:"flex flex-1 justify-center items-center",children:(0,l.jsxs)(r.default,{href:"/home",className:"flex items-center gap-1",children:[(0,l.jsx)(o.QB,{className:"w-28"}),(0,l.jsx)(o.Ud,{})]})}),(0,l.jsx)(a.A,{as:r.default,href:"/explore",isIconOnly:!0,variant:"light",radius:"full",children:(0,l.jsx)(i.default,{src:n.Z,alt:"Search",className:"size-6"})})]})})},64737:function(e,t,s){"use strict";s.d(t,{M:function(){return i}});var l=s(63137),r=s(29125);let i=e=>{let{feed:t,setFeed:s,hasFetched:i,setHasFetched:a,searchQuery:n,setSearchQuery:o,fetchFn:c,initialQuery:d,fetchOnLoad:u=!0,pageSize:h=50,ignoreWindowScroll:m=!1,onFetchOnLoad:x}=e,[f,v]=(0,l.useState)(0),[p,g]=(0,l.useState)(!0),[b,w]=(0,l.useState)(!1),j=(0,l.useCallback)(async(e,t)=>{let l=await c(e,t);return s(t=>l.length>0&&Number(e.start)>0?[...t,...l]:l),w(!1),a(!0),g(l.length===h),l},[c,h,s,a]),y=(0,l.useMemo)(()=>(0,r.k)(j,1e3),[j]),N=(0,l.useCallback)(async(e,t)=>{var s,l,r;return w(!0),a(!1),y({search:null!==(s=e.search)&&void 0!==s?s:n,start:null!==(l=e.start)&&void 0!==l?l:f,limit:null!==(r=e.limit)&&void 0!==r?r:h},t)},[y,h,n,a,f]),k=(0,l.useCallback)(()=>{if(!i||!p||b)return;let e=f+h;v(e),N({start:e})},[i,p,b,f,h,N]),P=(0,l.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&k()},[k]),C=(0,l.useCallback)(e=>{let t=new URL(window.location.href);e.length>0?t.searchParams.set("query",e):t.searchParams.delete("query"),window.history.pushState({},"",t.toString())},[]),z=(0,l.useCallback)(async e=>{null==o||o(e),o&&C(e),v(0),g(!0),N({search:e,start:0,limit:h})},[N,h,o,C]);return(0,l.useEffect)(()=>{if(!m)return window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P)},[P,m]),(0,l.useEffect)(()=>{let e=new AbortController;if(!i&&!(t.length>0)&&u&&!b)return N({search:d,start:0,limit:h},e.signal).then(x),()=>{!e.signal.aborted&&b&&e.abort()}},[t.length,N,u,i,d,b,x,h]),{feed:t,setFeed:s,setHasMore:g,onSearch:z,isFetching:b,hasMore:p,setIsFetching:w,setHasFetched:a,onReachedEnd:k}}},71668:function(e,t,s){"use strict";s.r(t),s.d(t,{UploadProvider:function(){return p},useUpload:function(){return g}});var l=s(91104),r=s(36623),i=s(63137);let a=e=>{let t=new FileReader;return new Promise((s,l)=>{t.onload=e=>{var t;let r=null===(t=e.target)||void 0===t?void 0:t.result;if(!r){l(Error("Failed to read file"));return}s(new Uint8Array(r))},t.onerror=()=>l(t.error),t.readAsArrayBuffer(e)})};var n=s(57826);let o=e=>{let{text:t,textButton:s,onClick:r}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[t,s&&r&&(0,l.jsx)(n.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:r,children:s})]})};var c=s(29125),d=s(41116),u=s(26816),h=s(60402),m=s(33968),x=s(4180),f=s(98127);let v=(0,i.createContext)({}),p=e=>{let{children:t}=e,s=(0,u.useRouter)(),{openMemeModal:n}=(0,f.T)(),{isPostingMemes:p,setIsHovering:g}=(0,d.useProfile)(),{onUploadMeme:b}=(0,h.useFeed)(),[w,j]=(0,i.useState)([]),[y,N]=(0,i.useState)(),[k,P]=(0,i.useState)(!1),C=(0,i.useCallback)(async(e,t)=>{try{(0,r.sy)();let s=e.name.slice(0,20),i=(0,r.yv)("Uploading ".concat(s),{variant:"info",persist:!0});N(i);let c=await a(e),d="";if(void 0!==t){let s=await m.P.postDeckSubmission({deckId:t,filename:(0,x.Df)(e.name),filetype:e.type,bytes:c});if(!s)throw Error("Failed to upload");d=s.meme_id}else{let t=await m.P.postMeme({filename:(0,x.Df)(e.name),filetype:e.type,bytes:c});if(!t)throw Error("Failed to upload");d=t.id;let s={...t,votes:{up:[],down:[]}};j(e=>[s,...e]),b(s)}(0,r.sy)(y),N(void 0);let u=(0,r.yv)((0,l.jsx)(o,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,r.sy)(u),n(d)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),N(void 0),(0,r.sy)(),(0,r.yv)("Failed to upload some memes",{variant:"error"})}},[y,n,b,j]),z=(0,i.useCallback)(async e=>{try{let t=(0,x.Df)(e),s=t.slice(0,20),i=(0,r.yv)("Uploading ".concat(s),{variant:"info",persist:!0});N(i);let a=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!a)throw Error("Failed to paste link");j(e=>[a,...e]),b(a),(0,r.sy)(y),N(void 0);let c=(0,r.yv)((0,l.jsx)(o,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,r.sy)(c),n(a.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,r.yv)("Failed to paste link",{variant:"error"})}},[y,n,b]),F=(0,i.useMemo)(()=>(0,c.k)(C,1e3),[C]),_=(0,i.useCallback)(async(e,t)=>{if(void 0===y){if(e.size>33554432){(0,r.yv)("Please upload files 32MB or less",{variant:"error"});return}return F(e,t)}},[F,y]),S=(0,i.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let s=t[e];if(s.type.includes("image")){let e=s.getAsFile();e&&await _(e)}}}},[_]);(0,i.useEffect)(()=>(window.addEventListener("paste",S),()=>{window.removeEventListener("paste",S)}),[S]);let M=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),g(!1),P(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let s=t[e];s.type.includes("image")&&await _(s)}p||s.push("/library")}catch(e){console.error(e)}finally{P(!1)}};return(0,l.jsx)(v.Provider,{value:{uploads:w,setUploads:j,startUpload:_,pasteImageLink:z,isBatchUploading:k},children:(0,l.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&g(!0)},onDragLeave:()=>g(!1),onDrop:M,children:t})})},g=()=>(0,i.useContext)(v)},51115:function(e,t,s){"use strict";s.d(t,{K7:function(){return i},jG:function(){return r},vk:function(){return a}});var l=s(59458);let r="MemeDeck",i="Meme With Frens",a="Create & discover memes with AI.";"".concat(r," – ").concat(i),new URL(l.j7?"http://localhost:8080":"https://memedeck.xyz")},20279:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},8748:function(e,t){"use strict";t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[826,349,223,98,542,653,464,487,42,133,915,120,514,171,744],function(){return e(e.s=3040)}),_N_E=e.O()}]);