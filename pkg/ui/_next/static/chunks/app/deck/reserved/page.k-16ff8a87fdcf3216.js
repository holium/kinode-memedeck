(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8708],{39898:function(e,s,l){Promise.resolve().then(l.bind(l,97053))},97053:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return K}});var a=l(57348),t=l(15346),r=l(16189),c=l(5070),n=l(19935),i=l(52053);let d=e=>{let{category:s}=e,{label:l,color:t}="character"===s?{color:"default",label:"Character"}:{color:"secondary",label:"Page"};return(0,a.jsx)(i.z,{variant:"dot",size:"sm",color:t,children:l})};var o=l(89765),x=l(35878),m=l(41973),u=l(71402);let h=(0,t.createContext)(void 0),f=e=>{let{deckId:s,children:l}=e,{profile:r}=(0,u.useProfile)(),[c,n]=(0,t.useState)(!0),[i,d]=(0,t.useState)(null),o=(0,t.useMemo)(()=>(null==i?void 0:i.admins.findIndex(e=>e.id===(null==r?void 0:r.user.id)))!==-1,[i,r]),f=(0,t.useCallback)(async e=>{try{let s=await x.P.getDeck(e,{interval:m.u.AllTime});if(!s)return;d(s)}catch(e){console.error("Failed to fetch deck",e)}},[]);return(0,t.useEffect)(()=>{n(!0),f(s).then(()=>{n(!1)})},[s,f]),(0,a.jsx)(h.Provider,{value:{deck:i,isAdmin:o,isFetching:c},children:l})},p=()=>{let e=(0,t.useContext)(h);if(void 0===e)throw Error("useDeck must be used within EditDeckProvider");return e};var j=l(81727);let g=e=>{var s,l,t,i,x;let{deckId:m}=e,u=(0,r.useRouter)(),{deck:h,isAdmin:f,isFetching:g}=p();return g&&!h?(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-1 pb-3 px-5",children:[(0,a.jsx)("div",{className:"animate-pulse rounded-xl size-28 bg-gray-200 shadow-lg"}),(0,a.jsxs)("header",{className:"w-full flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-9 md:h-10 w-40"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-6 w-28"}),(0,a.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-6 w-28"}),(0,a.jsx)("div",{className:"animate-pulse rounded bg-gray-200 h-6 w-28"})]})]})]}):h?(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-1 pb-3 px-5",children:[(0,a.jsx)(c.h,{classNames:{base:"!size-28 !rounded-xl"},alt:h.title,src:null!==(s=h.cover_photo)&&void 0!==s?s:"",className:"object-cover object-center shadow-lg select-none bg-white-400/10 border-1 border-white-400/10"}),(0,a.jsx)("header",{className:"w-full flex flex-col",children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[(0,a.jsxs)("div",{className:"w-full flex gap-3 justify-between md:items-center",children:[(0,a.jsxs)("div",{className:"w-full flex gap-3 items-center truncate",children:[(0,a.jsxs)("h1",{className:"flex gap-3 items-center truncate text-2xl md:text-3xl",children:[(0,a.jsx)("span",{className:"text-white-400 font-bold truncate",children:h.title?h.title:"Untitled"}),h.rank&&(0,a.jsxs)("span",{className:"text-white-400/70 font-bold",children:["#",h.rank]})]}),(0,a.jsx)(d,{category:h.category})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 flex-1",children:[f&&(0,a.jsx)(o.g,{deckId:m,size:"md",variant:"bordered",onDelete:()=>u.push("/trending")}),(0,a.jsx)(n.F,{title:"Post",variant:"ghost",color:"default",size:"md",queryParam:"?deck=".concat(m),className:"w-auto rounded-xl lg:min-w-[100px]",iconSize:"size-5"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("p",{className:"flex gap-1.5 text-base",children:[(0,a.jsx)("span",{className:"font-bold",children:null!==(l=h.total_posted)&&void 0!==l?l:0}),(0,a.jsx)("span",{className:"text-white-400/75",children:(0,j._6)(null!==(t=h.total_posted)&&void 0!==t?t:0,"meme","memes")})]}),(0,a.jsxs)("p",{className:"flex gap-1.5 text-base",children:[(0,a.jsx)("span",{className:"font-bold",children:null!==(i=h.creator_count)&&void 0!==i?i:0}),(0,a.jsx)("span",{className:"text-white-400/75",children:(0,j._6)(null!==(x=h.creator_count)&&void 0!==x?x:0,"creator","posters")})]})]})]})})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-4 pt-1 pb-3 px-5",children:[(0,a.jsx)("div",{className:"rounded-xl size-28 bg-white-400/5 shadow-lg"}),(0,a.jsx)("header",{className:"w-full flex flex-col gap-3",children:(0,a.jsx)("h1",{className:"flex gap-3 items-end text-3xl md:text-4xl",children:(0,a.jsx)("span",{className:"text-white-400 font-bold",children:m})})})]})};var v=l(13881),b=l(15800);let N=()=>{let{deck:e,isFetching:s}=p();return s?(0,a.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3].map(e=>(0,a.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,a.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,a.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,a.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):e?(0,a.jsx)("div",{className:"flex flex-col gap-1",children:e.admins.slice(0,5).map(e=>(0,a.jsx)(v.default,{href:"/u/".concat(e.screen_name),"aria-label":"View @".concat(e.screen_name,"'s profile"),className:"hover:bg-white-400/10 rounded-md",children:(0,a.jsx)(b.W,{avatarSrc:e.profile_image_url_https,badgeSrc:e.badge_image_url,screenName:e.name,userHandle:e.screen_name})},e.screen_name))}):null},w=()=>{let{deck:e,isFetching:s}=p();return s?(0,a.jsx)("div",{className:"flex flex-col gap-1",children:[1,2,3].map(e=>(0,a.jsxs)("div",{style:{height:"60px"},className:"flex items-center gap-3 px-4 py-2 text-sm",children:[(0,a.jsx)("div",{className:"bg-white-400/10 size-10 rounded-full"}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,a.jsx)("div",{className:"bg-white-400/10 h-4 w-1/2 rounded-md"}),(0,a.jsx)("div",{className:"bg-white-400/5 h-3 w-1/4 rounded-md"})]})]},"skeleton-avatar-".concat(e)))}):e?0===e.posters.length?(0,a.jsx)("p",{className:"px-4 text-sm text-white-400/50 leading-normal line-clamp-3",children:"No posters yet"}):(0,a.jsx)("div",{className:"flex flex-col gap-1",children:e.posters.slice(0,5).map(e=>(0,a.jsx)(v.default,{href:"/u/".concat(e.screen_name),"aria-label":"View @".concat(e.screen_name,"'s profile"),className:"hover:bg-white-400/10 rounded-md",children:(0,a.jsx)(b.W,{avatarSrc:e.profile_image_url_https,badgeSrc:e.badge_image_url,screenName:e.name,userHandle:e.screen_name})},e.screen_name))}):null},y=()=>{let{deck:e}=p();return(0,a.jsx)("div",{className:"hidden flex-1 md:block max-w-full",children:(0,a.jsxs)("div",{className:"sticky right-0 top-0 flex flex-col gap-3 py-3",children:[(0,a.jsxs)("div",{className:"w-full rounded-lg pb-4",children:[(0,a.jsx)("h2",{className:"flex gap-1.5 items-center justify-between mb-2 px-4 pt-4 text-lg font-black",children:"About"}),e?(0,a.jsx)("p",{className:"px-4 text-sm text-white-400/50 leading-normal line-clamp-3",children:e.description?e.description:"No description"}):(0,a.jsx)("div",{className:"mx-4 animate-pulse rounded bg-gray-200 h-[21px] w-28"})]}),(0,a.jsxs)("div",{className:"w-full rounded-lg pb-4",children:[(0,a.jsx)("h2",{className:"flex gap-1.5 items-center justify-between mb-2 px-4 pt-4 text-lg font-black",children:"Admins"}),(0,a.jsx)(N,{})]}),(0,a.jsxs)("div",{className:"w-full rounded-lg pb-4",children:[(0,a.jsx)("h2",{className:"flex gap-1.5 items-center justify-between mb-2 px-4 pt-4 text-lg font-black",children:"Posters"}),(0,a.jsx)(w,{})]})]})})};var k=l(59602),_=l(8485),z=l(24605),S=l(52428),P=l(95967),C=l(6076),F=l(16818),R=l(53350),E=l(1718),I=l(88036);let O={[m.a.Hot]:"ph:fire",[m.a.Recent]:"ph:clock"},A=e=>{let{icon:s,label:l}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,a.jsx)(R.JO,{icon:s,className:"min-w-5 size-5"}),l&&l.charAt(0).toUpperCase()+l.slice(1)]})},D=e=>{let{sortBy:s,onSelect:l}=e;return(0,a.jsx)(E.g,{"aria-label":"Sort by",placeholder:"Sort by",size:"md",radius:"full",variant:"bordered",color:"primary",classNames:{trigger:"w-[128px] px-3"},value:s,selectedKeys:[s],renderValue:()=>(0,a.jsx)(A,{"aria-label":s,label:s,icon:O[s]}),onChange:e=>{l(e.target.value)},children:Object.values(m.a).map(e=>(0,a.jsx)(I.R,{"aria-label":e,children:(0,a.jsx)(A,{label:e,icon:O[e]})},e))})};var B=l(5265),H=l(35971);async function G(e,s,l){l(null);let a=Date.now(),t=await x.P.search(e,s),r=Date.now();return l({total_memes:t.total_memes,time_ms:r-a}),t.memes}let M=(0,l(74859).k)(G,500),W=e=>{let{deckId:s}=e,l=(0,r.useRouter)(),{profile:c,isSignupModalOpen:n,setIsSignupModalOpen:i}=(0,u.useProfile)(),[d,o]=(0,t.useState)(null),{deckQuery:x,setDeckQuery:m,deckResults:h,setDeckResults:f,hasFetchedDeckResults:p,setHasFetchedDeckResults:j}=(0,H.useFeed)(),{isFetching:v,onSearch:b,searchInterval:N,onSelectInterval:w,searchSortBy:R,onSelectSortBy:E}=(0,B.M)({feed:h,setFeed:f,hasFetched:p,setHasFetched:j,searchQuery:x,setSearchQuery:m,fetchOnLoad:!0,deckId:s,fetchFn:function(){for(var e=arguments.length,s=Array(e),l=0;l<e;l++)s[l]=arguments[l];return M(...s,o)}});return(0,a.jsx)("div",{className:"relative flex size-full flex-col gap-3",children:(0,a.jsxs)("div",{className:"flex size-full flex-row gap-2 xl:gap-4",children:[(0,a.jsxs)("div",{className:"min-h-full w-full border-white-400/15 pb-3 sm:border-x md:w-3/4 xs:border-0",children:[(0,a.jsx)(k.y,{title:"Deck",onGoBack:()=>l.push("/trending")}),(0,a.jsx)(g,{deckId:s}),(0,a.jsxs)("div",{className:"flex px-3 items-center justify-between border-t border-white-400/15 gap-2",children:[(0,a.jsx)(P.SearchBar,{hideLogo:!0,className:"px-0",border:"",placeholder:"Search by keyword",value:x,onSearch:b}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(F.m,{interval:N,onSelect:w}),(0,a.jsx)(D,{sortBy:R,onSelect:E})]})]}),d&&(0,a.jsx)(z.d,{isFetching:v,hasSearched:x.length>0,stats:d}),(0,a.jsx)(_.o,{memes:h,noResultsMessage:"",isFetching:v,hasFetched:p,hasSearched:x.length>0,renderItem:(e,s)=>(0,a.jsx)(C.P,{meme:e,onClick:c?void 0:()=>i(!0)},s)}),n&&(0,a.jsx)(S.c,{isOpen:n,onClose:()=>i(!1)})]}),(0,a.jsx)(y,{})]})})};var U=l(13108),V=l(95478);function K(e){let{params:s}=e,{id:l}=(0,V.u)({params:s,key:"id"}),r=(0,t.useMemo)(()=>decodeURIComponent(l).replace("deck:",""),[l]);return(0,a.jsx)(U.Page,{isGated:!1,border:"border-none",children:(0,a.jsx)(f,{deckId:r,children:(0,a.jsx)(W,{deckId:r})})})}},13343:function(e,s,l){"use strict";l.d(s,{E:function(){return c}});var a=l(57348),t=l(81015),r=l(54167);let c=e=>{let{children:s,...l}=e;return r.BB||r.cm?(0,a.jsx)(t.e,{...l,children:s}):(0,a.jsx)(a.Fragment,{children:s})}},15800:function(e,s,l){"use strict";l.d(s,{W:function(){return n}});var a=l(57348),t=l(45155),r=l(13343),c=l(80951);let n=e=>{let{avatarSrc:s,badgeSrc:l,screenName:n,userHandle:i,p:d="px-4 py-2"}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none ".concat(d),children:[(0,a.jsx)("div",{className:"bg-black-400 size-10 rounded-full",children:(0,a.jsx)(c.R,{className:"rounded-full",src:s,alt:i,width:40,height:40})}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 truncate",children:[(0,a.jsx)("div",{className:"max-w-48 truncate text-base font-semibold",children:n}),l&&(0,a.jsx)(r.E,{content:"Kinode user",children:(0,a.jsx)(t.default,{src:l,alt:i,className:"rounded-sm",width:14,height:14})})]}),(0,a.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",i]})]})]})}},19935:function(e,s,l){"use strict";l.d(s,{F:function(){return d}});var a=l(57348),t=l(67425),r=l(45155),c=l(16189),n=l(71402),i=l(73139);let d=e=>{let{title:s="Generate",variant:l="shadow",color:d="primary",size:o="lg",queryParam:x="",className:m="mt-3 md:w-full min-w-[50px] rounded-full",innerClassName:u="lg:px-4",iconSize:h="size-6"}=e,f=(0,c.useRouter)(),{profile:p,setIsSignupModalOpen:j}=(0,n.useProfile)();return(0,a.jsx)(t.A,{type:"button",variant:l,color:d,className:m,size:o,radius:"full",disableRipple:!0,isIconOnly:!0,onClick:()=>{if(!p){j(!0);return}f.push("/studio".concat(x))},children:(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-center w-full ".concat(u),children:[(0,a.jsx)(r.default,{src:i.Z,alt:"Generate",className:h}),(0,a.jsx)("h1",{className:"hidden lg:block text-base truncate",children:s})]})})}},59602:function(e,s,l){"use strict";l.d(s,{y:function(){return n}});var a=l(57348),t=l(37824),r=l(13582),c={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0};let n=e=>{let{title:s,subtitle:l,border:n="border-b border-transparent",isLoading:i=!1,endContent:d,onGoBack:o}=e,{goBack:x}=(0,r.useAppHistory)();return(0,a.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(n),children:[(0,a.jsx)(t.O,{src:c,alt:"Back",onClick:null!=o?o:x}),i?(0,a.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,a.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,a.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:s}),l]}),d]})}},95478:function(e,s,l){"use strict";l.d(s,{u:function(){return t}});var a=l(16189);let t=e=>{var s;let{key:l,index:t,params:r}=e,c=(0,a.usePathname)(),n=null!==(s=c&&c.split("/")[t||2])&&void 0!==s?s:"",i=r[l]||n;return{[l]:i}}}},function(e){e.O(0,[7398,2221,4175,454,2872,9154,3881,7686,1133,6440,312,4822,6378,9581,1718,9394,3520,5878,5073,3214,3108,474,937,7114,1744],function(){return e(e.s=39898)}),_N_E=e.O()}]);