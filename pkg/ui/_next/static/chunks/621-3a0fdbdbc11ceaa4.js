"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{72488:function(e,t,n){n.d(t,{N:function(){return l},e:function(){return u}});var r=n(28403),o=n(92449),i=n(25845),a=n(82258);let c=["/home","/trending"],l=e=>c.some(t=>e.startsWith(t)),u=()=>{let e=(0,o.useRouter)(),t=(0,r.usePathname)(),n=(0,r.useSearchParams)(),u=e=>{let r=!!e.postId,o=r?e.postId:e.imageId;if(!o)return t;let l=encodeURIComponent((0,i.eC)(o));if(c.includes(t)){let e=new URLSearchParams(n.toString()),r="".concat(t,"/").concat(l);return(0,a.wS)(r,e)}{let e=new URLSearchParams(n.toString());return r?(e.set("postId",l),e.delete("imageId")):(e.set("imageId",l),e.delete("postId")),(0,a.wS)(t,e)}},s=()=>{let e=t;l(t)&&(e=t.split("/").slice(0,-1).join("/"));let r=new URLSearchParams(n.toString());return r.delete("postId"),r.delete("imageId"),(0,a.wS)(e,r)};return{getOpenHref:u,openLightBox:t=>{if(!t.postId&&!t.imageId)return;let n=u(t);e.push(n,{scroll:!1})},closeLightBox:()=>{let t=s();e.push(t,{scroll:!1})}}}},77606:function(e,t,n){n.d(t,{$4:function(){return s},KS:function(){return g},Rs:function(){return u},Xq:function(){return _},et:function(){return f},it:function(){return l},lf:function(){return m},rP:function(){return c},s6:function(){return p},tK:function(){return a},yZ:function(){return d}});var r=n(77971),o=n(72363);let i={searchInterval:o.u.Week,searchSortBy:o.a.Hot,contestEntryIndex:0,isSignupModalOpen:!1,isNotificationsTrayOpen:!1,isHovering:!1},a=(0,r.oM)({name:"appSlice",initialState:i,reducers:e=>({setContestEntryIndex:e.reducer((e,t)=>{e.contestEntryIndex=t.payload}),openSignupModal:e.reducer(e=>{e.isSignupModalOpen=!0}),closeSignupModal:e.reducer(e=>{e.isSignupModalOpen=!1}),openNotificationsTray:e.reducer(e=>{e.isNotificationsTrayOpen=!0}),closeNotificationsTray:e.reducer(e=>{e.isNotificationsTrayOpen=!1}),setIsHovering:e.reducer((e,t)=>{e.isHovering=t.payload})}),selectors:{selectContestEntryIndex:e=>e.contestEntryIndex,selectIsSignupModalOpen:e=>e.isSignupModalOpen,selectIsNotificationsTrayOpen:e=>e.isNotificationsTrayOpen,selectIsHovering:e=>e.isHovering}}),{setContestEntryIndex:c,openSignupModal:l,closeSignupModal:u,openNotificationsTray:s,closeNotificationsTray:p,setIsHovering:d}=a.actions,{selectContestEntryIndex:f,selectIsSignupModalOpen:m,selectIsNotificationsTrayOpen:_,selectIsHovering:g}=a.selectors},96245:function(e,t,n){n.d(t,{CG:function(){return i},TL:function(){return o}});var r=n(12563);let o=r.I0.withTypes(),i=r.v9.withTypes();r.oR.withTypes()},1993:function(e,t,n){n.d(t,{StudioPanelsProvider:function(){return s},e:function(){return p}});var r=n(62284),o=n(59297),i=n(7441);let a=(e,t)=>{switch(t.action){case"new-project":return(0,i.$W)(t.layout);case"new-project-feed":{let t={};return Object.values(e).forEach(e=>{t[e.idx]={...e,local:(0,i.jt)(e.idx).local}}),t}case"update-panel":{var n,r,o,a,c,l,u,s;let{idx:p,...d}=t,f=e[p];f||(f=(0,i.jt)(p));let m=null!==(l=d.panel_type)&&void 0!==l?l:f.panel_type,_={idx:p,in:f.in,id:null!==(u=d.id)&&void 0!==u?u:f.id,panel_type:m,panel_config:{image:{...f.panel_config.image,...null===(n=d.panel_config)||void 0===n?void 0:n.image},prompt:{...f.panel_config.prompt,...null===(r=d.panel_config)||void 0===r?void 0:r.prompt},text_overlay:{...f.panel_config.text_overlay,...null===(o=d.panel_config)||void 0===o?void 0:o.text_overlay},text:null!==(s=null===(a=d.panel_config)||void 0===a?void 0:a.text)&&void 0!==s?s:f.panel_config.text,faceswap:{...f.panel_config.faceswap,...null===(c=d.panel_config)||void 0===c?void 0:c.faceswap}},local:{...f.local,...d.local}};return{...e,[p]:_}}default:return e}};var c=n(30778),l=n(96690);let u=(0,o.createContext)({}),s=e=>{var t;let{children:n}=e,[s,p]=(0,o.useState)(l.L.One),[d,f]=(0,o.useState)(0),[m,_]=(0,o.useReducer)(a,(0,i.$W)(s)),g=(0,o.useMemo)(()=>m[d],[m,d]),v=(0,o.useMemo)(()=>{var e,t;return null!==(t=null==g?void 0:null===(e=g.panel_config.prompt)||void 0===e?void 0:e.user_positive_prompt)&&void 0!==t?t:""},[null==g?void 0:null===(t=g.panel_config.prompt)||void 0===t?void 0:t.user_positive_prompt]),h=(0,o.useMemo)(()=>""===v.trim(),[v]),w=(0,o.useMemo)(()=>g.local.isGenerating,[g]),y=(0,o.useMemo)(()=>!!h||Object.values(m).some(e=>e.local.isGenerating),[h,m]),x=(0,o.useMemo)(()=>Object.values(m).slice(0,c.i4[s]).some(e=>"text"===e.panel_type?""===e.panel_config.text:"image"!==e.panel_type&&"faceswap"!==e.panel_type||""===e.local.src||e.local.isGenerating),[m,s]);return(0,r.jsx)(u.Provider,{value:{panels:m,dispatchPanelAction:_,activePanel:g,activePanelIdx:d,setActivePanelIdx:f,promptValue:v,isPromptEmpty:h,isGenerating:w,isGenerateDisabled:y,isPostDisabled:x,selectedLayout:s,setSelectedLayout:p},children:n})},p=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useStudioPanels must be used within StudioPanelsProvider");return e}},7441:function(e,t,n){n.d(t,{$7:function(){return c},$W:function(){return f},jt:function(){return d},xe:function(){return m}});var r=n(30778),o=n(56845),i=n(96690),a=n(10469);let c={default:3,min:2,max:5},l={id:"",by:{},caption:"",extracted_text:"",filename:"",filetype:"",height:1152,width:1152,source:"generated",source_url:"",url:"",prompt:null,is_nsfw:!1,created_at:"",updated_at:""},u={aspect_ratio:o.t.Square,cfg_scale:c.default,character:"ai_character:pepe",id:"image_prompt:default",negative_prompt:"",positive_prompt:"",quality:"fast",seed:378254695419,styler:"ai_image_style:photorealistic",user_negative_prompt:"",user_positive_prompt:"",workflow:"workflow:combined",additional_config:{},aesthetic:null,seed_type:"random",user:"",start_ts:"",end_ts:""},s={top_text:"",bottom_text:"",top_text_size:"md",bottom_text_size:"md",additional_config:null,by:"",created_at:0,updated_at:0},p={panel_idx:0,meme_id:"",base_height:1152,base_image:"",base_width:1152,face_image:"",faceswap_strength:.5};function d(e){return{idx:e,id:e.toString(),in:"",panel_type:"image",panel_config:{image:l,prompt:u,text:"",text_overlay:s,faceswap:p},local:{src:"",prevSrc:"",selectedAspectRatio:o.t.Square,isExpandedPrompt:!1,progress:0,isGenerating:!1}}}function f(e){let t=r.i4[e],n={};for(let e=0;e<t;e++){let t=d(e);n[t.idx]=t}return n}function m(e){let t=f(i.L.One);return Object.values(e).reduce((e,n)=>{let r=n.panel_config.image,i="",c=o.t.Square;return r&&(i=r.source_url&&r.source_url.length>0?r.source_url:r.url,c=(0,a.vO)(r.width,r.height)),e[n.idx]={id:n.id,idx:n.idx,in:n.in,panel_type:n.panel_type,panel_config:{...t[0].panel_config,...n.panel_config},local:{selectedAspectRatio:c,isExpandedPrompt:!1,progress:0,src:i,prevSrc:i,isGenerating:!1}},e},{})}},30778:function(e,t,n){n.d(t,{J2:function(){return a},WN:function(){return c},aN:function(){return l},i4:function(){return i}});var r=n(56845),o=n(96690);let i={[o.L.One]:1,[o.L.TwoHorizontal]:2,[o.L.TwoVertical]:2,[o.L.Four]:4},a={[o.L.One]:"grid-rows-1 h-fit w-fit",[o.L.TwoHorizontal]:"grid-cols-2 w-full h-fit",[o.L.TwoVertical]:"grid-rows-2 w-fit h-full",[o.L.Four]:"grid-cols-2 grid-rows-2"};o.L.One,o.L.TwoHorizontal,o.L.TwoVertical,o.L.Four;let c={[o.L.One]:"h-auto w-fit",[o.L.TwoHorizontal]:"w-full h-fit",[o.L.TwoVertical]:"w-fit h-full",[o.L.Four]:"h-auto w-fit"},l={[o.L.One]:r.t.Square,[o.L.TwoHorizontal]:r.t.Portrait,[o.L.TwoVertical]:r.t.Landscape,[o.L.Four]:r.t.Square}},56845:function(e,t,n){var r,o;n.d(t,{t:function(){return r}}),(o=r||(r={})).Square="square",o.Landscape="landscape",o.Portrait="portrait"},96690:function(e,t,n){var r,o;n.d(t,{L:function(){return r}}),(o=r||(r={})).One="one",o.TwoVertical="two-vertical",o.TwoHorizontal="two-horizontal",o.Four="four-square"},10469:function(e,t,n){n.d(t,{GJ:function(){return c},rf:function(){return a},vO:function(){return l}});var r=n(56845),o=n(96690);let i={[r.t.Square]:[1152,1152],[r.t.Landscape]:[1152,896],[r.t.Portrait]:[896,1152]};function a(e,t){let n=0,r=0;if(e||(e=o.L.One),e===o.L.One){let e=i[t];n=e[0],r=e[1]}else if(e===o.L.TwoVertical)n=1152,r=896;else if(e===o.L.TwoHorizontal)n=896,r=1152;else if(e===o.L.Four)n=1152,r=1152;else throw Error("Unsupported panel layout, ");return{paneWidth:n,paneHeight:r}}function c(e,t){let n=0,r=0;if(e===o.L.One&&t)n=t.paneWidth,r=t.paneHeight;else if(e===o.L.TwoVertical)n=1152,r=1792;else if(e===o.L.TwoHorizontal)n=1792,r=1152;else if(e===o.L.Four)n=2304,r=2304;else throw Error("Unsupported panel layout");return{canvasWidth:n,canvasHeight:r}}function l(e,t){return 10>Math.abs(e-t)?r.t.Square:e>t?r.t.Landscape:r.t.Portrait}},81255:function(e,t,n){n.d(t,{D:function(){return r},k:function(){return o}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...o);return n=null,t},t)}},o=(e,t)=>{let n=null;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return new Promise((r,i)=>{let a=async()=>{n&&clearTimeout(n);try{let t=await e(...o);r(t)}catch(e){i(e)}n=null};n&&clearTimeout(n),n=setTimeout(a,t)})}}},14751:function(e,t,n){n.d(t,{K7:function(){return i},VR:function(){return a},jG:function(){return o},sw:function(){return l},zD:function(){return u}});var r=n(71987);let o="MemeDeck",i="Meme With Frens",a="Create & discover memes with AI.";function c(e){return e.replace("ai_character:","").replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function l(e,t){var n,r,o;let i=e.prompt,a="AI Meme",l=t&&"object"==typeof t?"".concat(t.name," (@").concat(t.handle,")"):"",u=l?"View the AI-generated meme by ".concat(l," on MemeDeck.xyz"):"View the AI-generated meme on MemeDeck.xyz",s=null!==(n=e.source)&&void 0!==n?n:"image",p=e.url_watermarked||e.source_url||e.url||"";i?(a=c(i.character),u=i.user_positive_prompt):u=e.caption;let d=l?"".concat(a," by ").concat(l):a;return{title:a,description:u,titleWithAttribution:d,source:s,creator:e.by.name,url:p,width:null!==(r=e.width)&&void 0!==r?r:1152,height:null!==(o=e.height)&&void 0!==o?o:1152}}function u(e){let t="AI Meme",n="".concat(e.by.name," (@").concat(e.by.handle,")"),r="View the AI-generated meme by ".concat(n," on MemeDeck.xyz"),o="",i=1152,a=1152;if("image"===e.post_type&&e.image)return l(e.image,e.by);if("meme"===e.post_type&&e.meme){var u,s,p,d,f,m,_,g,v;let l=Object.values(e.meme.panels),h=l.find(e=>"image"===e.panel_type&&e.panel_config.prompt),w=l.find(e=>"image"===e.panel_type&&e.panel_config.image),y=h?h.panel_config.prompt:null,x=w?w.panel_config.image:null,L=l.find(e=>"faceswap"===e.panel_type&&e.panel_config.faceswap),S=L?L.panel_config.faceswap:null;if(y)t=c(y.character),r=y.user_positive_prompt;else if(x){let e=null!==(_=x.extracted_text)&&void 0!==_?_:"";t=e.length>50?"".concat(e.slice(0,50),"..."):e,r=x.search_text}else S&&(t="Face Swap",r="View the face swap meme by ".concat(n," on MemeDeck.xyz"));o=(null===(u=e.meme)||void 0===u?void 0:u.url)||(null===(s=e.image)||void 0===s?void 0:s.url_watermarked)||(null===(p=e.image)||void 0===p?void 0:p.source_url)||(null===(d=e.image)||void 0===d?void 0:d.url)||"",i=null!==(g=null===(f=e.meme)||void 0===f?void 0:f.width)&&void 0!==g?g:1152,a=null!==(v=null===(m=e.meme)||void 0===m?void 0:m.height)&&void 0!==v?v:1152}let h="".concat(t," by ").concat(n);return{title:t,titleWithAttribution:h,description:r,source:"image",creator:n,url:o,width:i,height:a}}"".concat(o," â€“ ").concat(i),new URL(r.j7?"http://localhost:8080":"https://memedeck.xyz")},82258:function(e,t,n){n.d(t,{CU:function(){return c},GY:function(){return a},LA:function(){return u},eT:function(){return l},o4:function(){return i},wS:function(){return o}});var r=n(71987);function o(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function i(e,t){let n=new URLSearchParams;(null==t?void 0:t.sort_by)&&n.set("sort_by",t.sort_by);let r=n.toString()?"?".concat(n.toString()):"";return"/deck/".concat(e.replace("deck:","")).concat(r)}function a(e){return"/home/".concat(e.replace("post:",""))}function c(e){let t=e.deck_id.replace("deck:",""),n=e.id.replace("contest:","");return"/deck/".concat(t,"/contest/").concat(n)}function l(e){let t=e.id.replace("contest:",""),n="/studio?contestId=".concat(t);if(e.matching_rules){let t=e.matching_rules.characters[0];n+="&characterId=".concat(t)}return n}function u(e){if(e.url_watermarked)return e.url_watermarked;if(e.source_url){if(!r.j7)return e.source_url;e.url.startsWith("<!doctype")&&e.source_url}return e.url}}}]);