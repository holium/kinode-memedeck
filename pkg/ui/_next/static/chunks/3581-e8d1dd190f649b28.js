"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3581],{13581:function(e,t,r){r.d(t,{Page:function(){return g}});var a=r(7590),A=r(14081),i=r(15866),l=r(27613),n=r(68908),s={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0};let c=()=>{let{isBatchUploading:e}=(0,n.V)();return(0,a.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,a.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,a.jsx)(i.c,{}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,a.jsx)(l.default,{src:s,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,a.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})};var o=r(17256),d=r(61784),u=r(3333),m=r(85183);(0,A.Cb)("local");let g=e=>{let{children:t,isGated:r=!0,border:A="xs:border-0 sm:border-x border-white-400/15"}=e,i=(0,u.iS)(),l=(0,m.CG)(d.KS);return!r||i.currentData||i.isFetching?(0,a.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(A),children:l?(0,a.jsx)(c,{}):t}):(0,a.jsx)(o.c,{isOpen:!0})}},17256:function(e,t,r){r.d(t,{c:function(){return h}});var a=r(7590),A=r(70244),i=r(27613),l=r(4763),n=r(82581);let s=[{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/1.8823d877.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAASFBMVEUwECpnToZJLk5PFTY7EjBlS3FfM2guDykqDCU8HEBhHUa5V4+zLXNuRnW+RJBNM1txXoiQKWLIXah7T3KBKVJsT4lFK2NZN3f/bKwsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAP0lEQVR4nCXGSRKAIAwAwUECSdjE/f8/tSz71Kjizke2sdcIWlob9RRUSu5HBMxzTwYqvqbF4H7yn3CFOYPbC0QLAfmn2m20AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},color:"#2E102A"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/2.185f5c03.png",height:1198,width:1162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEUgSH05V1qUgHw4VGq2hHFIYHpAWE5HNToZKy5APUUBHShDQlJlRkYfLTiQcWt3T04kP2N9dHlATGaiiH4pKjRASUNtT1UwLDULKz4vQzdcWmQnSXgpT3ijdXI2KjOJ1AnkAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAQklEQVR4nBXGRRLAMAwEsA3aDpe5/39mJjoJyt96cgBUpLJoAM4Q2R3A236yH4ZYbXlGWqoiM8wZcjrWDZ5DFuarA06dAn19AigzAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},color:"#21487D"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/3.43776601.png",height:880,width:880,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAS1BMVEUhGhFOSTrAvJ9yblw/OS3NxLo1MiwqIxrY1a/MyKdLTEtfW0x6cmDWzMTQzqehmI25s5Kjn4KRj3ivq45ZU0Ph3rqEg2+OnrTFwqOrsAGwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAP0lEQVR4nAXBhwHAIAzAMDOTsKHr/08rUUSA8pFFYqhkROL1WIA7VtU3bNSOqvcDt3WYLYfQbHmXaTP11NP8AUkWAiGbEG7EAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},color:"#D0CCA9"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/4.a25addea.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAclBMVEWxytHK0sjNycCCjIvtyKSrx9G61NrD0MzArqKfmI+4s8HPycliUkyuoak6NS4+QS+xlpVTdFibjpWIcWW9zcvX2M28x8E+JBOYk6tCWkDdtIyMgYt/cXtLlHD+1KfOrZLTspjKtKtMXkOej367tMKigGtkNwxvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARUlEQVR4nAXBhQGAMAADsI65G+76/4sk4BxCAEArJaU9kSCdDk6rBo1VM1PJwnjD9iu9GJf1OH0pcPFmT6gaw7TlHL/6A2CTA5qj0o+1AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},color:"#BDB9C3"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/5.622e0a3d.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAaVBMVEX+597hycD54tgDEQny3dQlMCdKTELq1MpXVkoTGxOMfnO1mH6ii2u0n5dGLxx8aVSwjnQqGxSRh3tBPSxXSTfGu6DSvLSLXjpyWDnJjoNVPydDIReaYDK1gUdlFg1tSSzdqH7x2bi2dVxKpx53AAAACXBIWXMAAAsTAAALEwEAmpwYAAAARElEQVR4nAXBBQLAIAwEsENbHOZu/3/kEkjBxlgCpFfOqQ7Q7NzQW4LkPIfIAkjL+Y6BoHU5njoRkFqO30rwbbvLftUfVrcDKlF8AaEAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#AF7A43"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/6.b62b0cfc.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAflBMVEWMrsd2lqCKqLq4urBZhqeGloNuoseLm5y5rYp5m7Gaqaaam462pHTRrHVUiLaMhE7BwcXVwamnq6d2tM2wwMyOp8GsvMeEjpK8rrpXcoO6r6WRh22Alaa8sJ+ql3JYYkJqmrSbi2WgnHmLoK+Uq7fImE5ugZFqfnI6b7RCeLfQLl+CAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARklEQVR4nAXBhQGAMAADsI654+7O/w+SgEvG9GkdwvfEyKHx3pf385ggcLepoQPWY19swwTMpPq20gmkojUleQppijIjAj+aCQP33BRGfAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#7197BD"}],c=e=>{let{index:t,avatar:r}=e;return(0,a.jsx)(i.default,{src:r.src,draggable:!1,priority:!0,quality:50,style:{background:r.color},alt:"avatar ".concat(t),className:"size-9 rounded-full border-2 border-white-400 ".concat(t>0?"-ml-1":""),width:38,height:38})};var o=r(62247);let d=e=>{let{children:t,isOpen:r,onClose:A}=e;return r?(0,a.jsx)("div",{className:(0,o.cn)("flex items-center justify-center","fixed inset-0 z-50","bg-white-100 size-full max-h-full min-h-0 overflow-y-auto overflow-x-hidden p-4"),onClick:A,children:(0,a.jsxs)("div",{className:"glow bg-black-400 relative flex w-full max-w-md flex-col items-center gap-6 rounded-lg px-6 pb-8 pt-6 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("header",{className:"relative flex w-full items-center justify-between"}),(0,a.jsx)("div",{children:t})]})}):null};var u=r(12173),m=r(92782),g=r(57031);let h=e=>{let{isOpen:t,onClose:r}=e,o=(0,n.useMemo)(()=>{let e=(0,m.bd)();return"".concat((0,m.bR)(),"/v2/auth/twitter/login?redirect_url=").concat(e)},[]);return(0,a.jsx)(d,{isOpen:t,onClose:r,children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{className:"mb-6 text-center text-3xl font-bold",children:g.K7}),(0,a.jsx)("p",{className:"text-center text-lg text-white-400/75",children:g.vk}),(0,a.jsx)("div",{className:"relative my-6 flex items-center justify-center select-none",children:s.map((e,t)=>(0,a.jsx)(c,{index:t,avatar:e},t))}),(0,a.jsxs)(A.A,{as:l.default,className:"my-6 flex items-center justify-center gap-2 rounded-2xl bg-blue-500 px-5 py-1 text-sm",href:o,children:[(0,a.jsx)("p",{className:"text-lg",children:"Login with"}),(0,a.jsx)(i.default,{src:u.Z,alt:"x",className:"w-5"})]})]})})}},61784:function(e,t,r){r.d(t,{HN:function(){return s},KS:function(){return p},Rs:function(){return d},TU:function(){return n},dZ:function(){return g},et:function(){return h},it:function(){return o},lf:function(){return f},rP:function(){return c},tK:function(){return l},uJ:function(){return m},yZ:function(){return u}});var a=r(4417),A=r(36572);let i={searchInterval:A.u.Week,searchSortBy:A.a.Hot,contestEntryIndex:0,isSignupModalOpen:!1,isHovering:!1},l=(0,a.oM)({name:"appSlice",initialState:i,reducers:e=>({setSearchInterval:e.reducer((e,t)=>{e.searchInterval=t.payload}),setSearchSortBy:e.reducer((e,t)=>{e.searchSortBy=t.payload}),setContestEntryIndex:e.reducer((e,t)=>{e.contestEntryIndex=t.payload}),openSignupModal:e.reducer(e=>{e.isSignupModalOpen=!0}),closeSignupModal:e.reducer(e=>{e.isSignupModalOpen=!1}),setIsHovering:e.reducer((e,t)=>{e.isHovering=t.payload})}),selectors:{selectSearchInterval:e=>e.searchInterval,selectSearchSortBy:e=>e.searchSortBy,selectContestEntryIndex:e=>e.contestEntryIndex,selectIsSignupModalOpen:e=>e.isSignupModalOpen,selectIsHovering:e=>e.isHovering}}),{setSearchInterval:n,setSearchSortBy:s,setContestEntryIndex:c,openSignupModal:o,closeSignupModal:d,setIsHovering:u}=l.actions,{selectSearchInterval:m,selectSearchSortBy:g,selectContestEntryIndex:h,selectIsSignupModalOpen:f,selectIsHovering:p}=l.selectors},85183:function(e,t,r){r.d(t,{CG:function(){return i},TL:function(){return A}});var a=r(24580);let A=a.I0.withTypes(),i=a.v9.withTypes();a.oR.withTypes()},68908:function(e,t,r){r.d(t,{UploadProvider:function(){return p},V:function(){return x}});var a=r(7590),A=r(23143),i=r(72655),l=r(82581),n=r(24580),s=r(70244);let c=e=>{let{text:t,textButton:r,onClick:A}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t,r&&A&&(0,a.jsx)(s.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:A,children:r})]})};var o=r(86960),d=r(61784),u=r(3333),m=r(32701);let g=e=>{let t=new FileReader;return new Promise((r,a)=>{t.onload=e=>{var t;let A=null===(t=e.target)||void 0===t?void 0:t.result;if(!A){a(Error("Failed to read file"));return}r(new Uint8Array(A))},t.onerror=()=>a(t.error),t.readAsArrayBuffer(e)})};var h=r(89405);let f=(0,l.createContext)({}),p=e=>{let{children:t}=e,r=(0,A.useRouter)(),{openLightBox:s}=(0,o.e)(),p=(0,n.I0)(),[x]=(0,u.V4)(),[w,v]=(0,l.useState)([]),[y,b]=(0,l.useState)(),[k,E]=(0,l.useState)(!1),S=(0,l.useCallback)(async e=>{try{(0,i.sy)();let t=e.name.slice(0,20),a=(0,i.yv)("Uploading ".concat(t),{variant:"info",persist:!0});b(a);let A=await g(e),l=Array.from(new Uint8Array(A)),n=(await x({filename:(0,h.Df)(e.name),filetype:e.type,bytes:l})).data;if(!n)throw Error("Failed to upload");n.id,(0,i.sy)(y),b(void 0),r.push("/library/uploads")}catch(e){console.error(e),b(void 0),(0,i.sy)(),(0,i.yv)("Failed to upload some memes",{variant:"error"})}},[y,x,r]),U=(0,l.useCallback)(async e=>{try{let t=(0,h.Df)(e),r=t.slice(0,20),A=(0,i.yv)("Uploading ".concat(r),{variant:"info",persist:!0});b(A);let l=(await x({filename:t,filetype:"image",source_url:e})).data;if(!l)throw Error("Failed to paste link");v(e=>[l,...e]),(0,i.sy)(y),b(void 0);let n=(0,i.yv)((0,a.jsx)(c,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,i.sy)(n),s({postId:l.id})}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,i.yv)("Failed to paste link",{variant:"error"})}},[y,s,x]),j=(0,l.useMemo)(()=>(0,m.k)(S,1e3),[S]),C=(0,l.useCallback)(async e=>{if(void 0===y){if(e.size>33554432){(0,i.yv)("Please upload files 32MB or less",{variant:"error"});return}return j(e)}},[j,y]),M=(0,l.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let r=t[e];if(r.type.includes("image")){let e=r.getAsFile();e&&await C(e)}}}},[C]);(0,l.useEffect)(()=>(window.addEventListener("paste",M),()=>{window.removeEventListener("paste",M)}),[M]);let B=(0,l.useCallback)(async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),p((0,d.yZ)(!1)),E(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let r=t[e];r.type.includes("image")&&await C(r)}}catch(e){console.error(e)}finally{E(!1)}},[p,C]);return(0,a.jsx)(f.Provider,{value:{uploads:w,setUploads:v,startUpload:C,pasteImageLink:U,isBatchUploading:k},children:(0,a.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&(0,d.yZ)(!0)},onDragLeave:()=>(0,d.yZ)(!1),onDrop:B,children:t})})},x=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}},12173:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAALVBMVEVMaXH+/v79/f3+/v79/f38/Pz8/Pz8/Pz9/f39/f39/f36+vr4+Pj9/f38/PwKLxeaAAAAD3RSTlMAS48j05o6aYO9pxgSs1uR71/vAAAACXBIWXMAABYlAAAWJQFJUiTwAAAANElEQVR4nBXBiRHAIAwEsT0/2AbSf7sZJJYcfNGR94SgzaYAt9w89pmAmso8KJyezXK40g8cqQDpZl1e6QAAAABJRU5ErkJggg==",blurWidth:7,blurHeight:8}}}]);