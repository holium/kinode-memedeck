(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{70591:function(e,t,n){Promise.resolve().then(n.bind(n,82597))},82597:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7590),o=n(47758),s=n(23216),l=n(55695),i=n(84187),a=n(61784),u=n(3333),c=n(85183);function d(e){var t;let{params:n}=e,{handle:d}=(0,i.d)({params:n,key:"handle"}),{data:m}=(0,u.iS)(),p=(0,c.TL)(),{isFetching:h,currentData:f}=(0,l.T)({user_handle:d});return(0,r.jsx)(o.o,{items:null!==(t=null==f?void 0:f.memes)&&void 0!==t?t:[],hasFetched:!!f,hasSearched:!1,isFetching:h,renderItem:e=>(0,r.jsx)(s.P,{post:e,onClick:m?void 0:()=>p((0,a.it)())},e.id)})}},47758:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(7590),o=n(15866),s=n(57839);let l={default:3,1100:3,700:2,500:1},i=e=>{let{items:t,isFetching:n,hasFetched:i,hasSearched:a,noResultsMessage:u="No memes",className:c="relative overflow-hidden pl-3 pt-3",breakpoints:d=l,renderItem:m}=e;return(0,r.jsxs)("div",{className:c,children:[!n&&0===t.length&&(i||a)?(0,r.jsx)("div",{className:"text-sm text-white-400/50",children:u}):null,n&&(0===t.length||a)&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3 ".concat(a?"absolute z-10":""),children:(0,r.jsx)(o.c,{})}),(0,r.jsx)(s.Z,{breakpointCols:d,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(m)}),n&&t.length>0&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(o.c,{})})]})}},7746:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(7590),o=n(70244),s=n(27613);let l=e=>{let{src:t,onClickShow:n}=e;return(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 z-2 bg-white-400/10",onClick:e=>{e.stopPropagation(),e.preventDefault()},onMouseEnter:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,r.jsx)(s.default,{src:t,alt:"NSFW",draggable:!1,className:"absolute z-0 inset-0 size-full object-cover blur-xl scale-[3]",width:640,height:640,sizes:"640px",quality:1,priority:!0}),(0,r.jsx)(o.A,{variant:"ghost",color:"danger",size:"sm",className:"p-1 font-medium z-3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 backdrop-blur-sm",onClick:n,children:"Show"})]})}},23216:function(e,t,n){"use strict";n.d(t,{P:function(){return y}});var r=n(7590),o=n(81662),s=n(18386),l=n(27613),i=n(82581),a=n(95642),u=n(7746),c=n(60516),d=n(5852),m=n(3333),p=n(27391),h=n(62247),f=n(57031),v=n(89405);let y=e=>{var t,n;let{post:y,deckId:b,priorityLoadImage:C,imageQuality:g,onClick:w}=e,{data:x}=(0,m.iS)(),j=(0,i.useMemo)(()=>{var e;return null!==(e=null==x?void 0:x.id)&&void 0!==e?e:""},[x]),O=(0,d.u)(j,y.votes),[N]=(0,m.NU)(),[S]=(0,m.Rp)(),k=(0,i.useMemo)(()=>!1,[]),[I,P]=(0,i.useState)(k),{description:E,creator:M,url:D,width:z,height:_}=(0,f.zD)(null!=y?y:{}),{src:A,onError:F}=(0,c.f)(null!==(n=null!==(t=y.meme)&&void 0!==t?t:y.image)&&void 0!==n?n:{}),{onOpenPost:T}=(0,p.h)(),H=(0,i.useCallback)(()=>{if(w){w();return}T(y.id)},[w,T,y.id]);(0,i.useEffect)(()=>()=>{P(k)},[k]);let L=(0,i.useMemo)(()=>null!=g?g:50,[g]),q=(0,i.useMemo)(()=>L/100*(null!=z?z:200),[z,L]),B=(0,i.useMemo)(()=>L/100*(null!=_?_:200),[_,L]);return(0,r.jsx)("article",{className:"relative w-full cursor-pointer",onClick:H,children:(0,r.jsxs)(o.w,{isFooterBlurred:!0,className:"group overflow-hidden rounded-md",children:[(0,r.jsx)(l.default,{className:"z-0 size-full rounded-md bg-white-400/5 sm:transition-transform sm:group-hover:scale-104",src:A,quality:L,priority:C,alt:E,width:q,height:B,onError:F}),(0,r.jsx)(s.i,{className:(0,h.cn)("absolute bottom-1 ml-1 py-2 z-1","justify-between bg-black-400/30 border-1 border-zinc-600/40 overflow-hidden before:rounded-lg rounded-xl w-[calc(100%_-_8px)] shadow-small","transition-opacity opacity-0",O.hasUpvoted||O.hasDownvoted?"sm:opacity-100":"sm:group-hover:opacity-100"),children:(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate text-sm font-semibold",children:[(0,r.jsx)(l.default,{src:y.by.avatar,alt:M,className:"rounded-full min-w-8",width:32,height:32,quality:50}),(0,r.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,r.jsx)("span",{className:"truncate",children:y.by.handle}),y.created_at&&(0,r.jsx)("span",{className:"text-tiny font-normal text-white-400/70",children:(0,v.Po)(new Date(y.created_at))})]})]}),(0,r.jsx)(a.I,{postId:y.id,user:x,deckId:b,initialVotes:y.votes,postVoteApi:N,deleteVoteApi:S,onClickOverride:w,border:"border-zinc-400/50"})]})}),I&&(0,r.jsx)(u.T,{src:D,onClickShow:()=>P(!1)})]})})}},55695:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(82581),o=n(3333);let s=e=>{let{search:t,...n}=e,[s,l]=(0,r.useState)(1),i=(0,o.t$)({...n,search:t,start:50*(s-1),limit:50}),a=(0,r.useCallback)(()=>{i.isFetching||i.isLoading||i.isError||l(e=>{var t,n;let r=!i.data||0===i.data.memes.length,o=(null!==(n=null===(t=i.data)||void 0===t?void 0:t.memes)&&void 0!==n?n:[]).length<50*e;return r||o?e:e+1})},[i.data,i.isError,i.isFetching,i.isLoading]),u=(0,r.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&a()},[a]);return(0,r.useEffect)(()=>(window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}),[u]),i}},61784:function(e,t,n){"use strict";n.d(t,{HN:function(){return a},KS:function(){return y},Rs:function(){return d},TU:function(){return i},dZ:function(){return h},et:function(){return f},it:function(){return c},lf:function(){return v},rP:function(){return u},tK:function(){return l},uJ:function(){return p},yZ:function(){return m}});var r=n(4417),o=n(36572);let s={searchInterval:o.u.Week,searchSortBy:o.a.Hot,contestEntryIndex:0,isSignupModalOpen:!1,isHovering:!1},l=(0,r.oM)({name:"appSlice",initialState:s,reducers:e=>({setSearchInterval:e.reducer((e,t)=>{e.searchInterval=t.payload}),setSearchSortBy:e.reducer((e,t)=>{e.searchSortBy=t.payload}),setContestEntryIndex:e.reducer((e,t)=>{e.contestEntryIndex=t.payload}),openSignupModal:e.reducer(e=>{e.isSignupModalOpen=!0}),closeSignupModal:e.reducer(e=>{e.isSignupModalOpen=!1}),setIsHovering:e.reducer((e,t)=>{e.isHovering=t.payload})}),selectors:{selectSearchInterval:e=>e.searchInterval,selectSearchSortBy:e=>e.searchSortBy,selectContestEntryIndex:e=>e.contestEntryIndex,selectIsSignupModalOpen:e=>e.isSignupModalOpen,selectIsHovering:e=>e.isHovering}}),{setSearchInterval:i,setSearchSortBy:a,setContestEntryIndex:u,openSignupModal:c,closeSignupModal:d,setIsHovering:m}=l.actions,{selectSearchInterval:p,selectSearchSortBy:h,selectContestEntryIndex:f,selectIsSignupModalOpen:v,selectIsHovering:y}=l.selectors},85183:function(e,t,n){"use strict";n.d(t,{CG:function(){return s},TL:function(){return o}});var r=n(24580);let o=r.I0.withTypes(),s=r.v9.withTypes();r.oR.withTypes()},57839:function(e,t,n){"use strict";var r=n(82581);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class i extends r.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let n=1/0,r=t.default||2;for(let o in t){let s=parseInt(o);s>0&&e<=s&&s<n&&(n=s,r=t[o])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),n=r.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){let o=r%e;t[o]||(t[o]=[]),t[o].push(n[r])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:n}=this.props,s=this.itemsInColumns(),i=`${100/s.length}%`,a=n;a&&"string"!=typeof a&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===a&&(a="my-masonry-grid_column"));let u=l(l(l({},e),t),{},{style:l(l({},t.style),{},{width:i}),className:a});return s.map((e,t)=>r.createElement("div",o({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:n,columnClassName:s,columnAttrs:l,column:i,className:a}=e,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=a;return"string"!=typeof a&&(this.logDeprecated('The property "className" requires a string'),void 0===a&&(c="my-masonry-grid")),r.createElement("div",o({},u,{className:c}),this.renderColumns())}}i.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=i},27391:function(e,t,n){"use strict";n.d(t,{PostModalProvider:function(){return c},h:function(){return d}});var r=n(7590),o=n(23143),s=n(82581),l=n(41612),i=n(86960),a=n(84187);let u=(0,s.createContext)({}),c=e=>{let{params:t,children:n}=e,{postId:s}=(0,a.d)({params:t,key:"postId"}),c=(0,o.useSearchParams)().get("postId"),d=s.length>0?s:c,{openLightBox:m,closeLightBox:p}=(0,i.e)();return(0,r.jsxs)(u.Provider,{value:{onOpenPost:e=>m({postId:e}),onClosePost:p},children:[n,d&&(0,r.jsx)(l.e,{postId:d,onClose:p})]})},d=()=>{let e=(0,s.useContext)(u);if(void 0===e)throw Error("usePostModal must be used within PostModalProvider");return e}},18386:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r=n(79252),o=n(38197),s=n(45899),l=n(46855),i=n(7590),a=(0,o.Gp)((e,t)=>{var n;let{as:o,className:a,children:u,...c}=e,d=(0,s.gy)(t),{slots:m,classNames:p}=(0,r.R)(),h=(0,l.W)(null==p?void 0:p.footer,a);return(0,i.jsx)(o||"div",{ref:d,className:null==(n=m.footer)?void 0:n.call(m,{class:h}),...c,children:u})});a.displayName="NextUI.CardFooter";var u=a}},function(e){e.O(0,[2138,244,116,7482,8236,9447,417,2305,9101,774,9738,7273,3333,3585,3998,7814,1744],function(){return e(e.s=70591)}),_N_E=e.O()}]);