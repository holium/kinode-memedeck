"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7761],{29492:function(e,t,r){r.d(t,{Ud:function(){return h},hd:function(){return c},Ew:function(){return d},QB:function(){return m}});var l=r(57348),a=r(52053),n=r(45155),s=r(13881),o={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo.a86b8f2b.svg",height:256,width:256,blurWidth:0,blurHeight:0},i=r(21008),u=r(62568);let c=()=>(0,l.jsx)("div",{className:"flex h-16 select-none items-center justify-center lg:px-2 lg:text-left",children:(0,l.jsxs)(s.default,{href:"/home",children:[(0,l.jsxs)("div",{className:"hidden gap-1 items-center lg:flex",children:[(0,l.jsx)(m,{}),(0,l.jsx)(h,{})]}),(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(d,{})})]})}),d=()=>(0,l.jsx)(n.default,{src:o,alt:"".concat(u.jG," Icon"),"aria-label":"".concat(u.jG," - ").concat(u.vk),className:"h-10 min-w-10 w-full select-none"}),m=e=>{let{className:t="h-12 w-auto"}=e;return(0,l.jsx)(n.default,{priority:!0,src:i.Z,alt:"".concat(u.jG," Logo"),"aria-label":"".concat(u.jG," - ").concat(u.vk),className:t,draggable:!1})},h=()=>(0,l.jsx)(a.z,{size:"sm",color:"warning",classNames:{base:"mb-0.5 text-yellow-400 bg-yellow-50 border-1 border-yellow-400/10"},children:"Alpha"})},8485:function(e,t,r){r.d(t,{o:function(){return o}});var l=r(57348),a=r(4930),n=r(82896);let s={default:3,1100:3,700:2,500:1},o=e=>{let{memes:t,isFetching:r,hasFetched:o,hasSearched:i,noResultsMessage:u="No memes",className:c="overflow-hidden pl-3 pt-3",breakpoints:d=s,renderItem:m}=e;return(0,l.jsxs)("div",{className:c,children:[!r&&0===t.length&&(o||i)?(0,l.jsx)("div",{className:"text-white-400/75",children:u}):null,r&&0===t.length&&(0,l.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,l.jsx)(a.c,{})}),(0,l.jsx)(n.Z,{breakpointCols:d,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(m)}),r&&t.length>0&&(0,l.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,l.jsx)(a.c,{})})]})}},24645:function(e,t,r){r.d(t,{Y:function(){return c}});var l=r(57348),a=r(45155),n=r(15346),s=r(18491),o=r(81254),i=r(96622),u=r(69467);let c=e=>{var t,r,c,d,m,h,f,p,v,b;let{meme:w,isSelected:g,showCreator:y=!1,onClick:x}=e,{onOpenMeme:C}=(0,i.useMemeModal)(),[j,k]=(0,n.useState)((0,u.kl)(w));return(0,l.jsx)("article",{className:"relative w-full cursor-pointer select-none overflow-hidden rounded-lg border-2 ".concat(g?"border-blue-500":"border-transparent"),onClick:()=>x?x():C(w.id),children:(0,l.jsxs)("div",{className:"group flex w-full flex-col",children:["generated"===w.source?(0,l.jsx)(o.g,{type:w.source,src:w.url,alt:w.id,canvasWidth:null!==(c=w.width)&&void 0!==c?c:1024,canvasHeight:null!==(d=w.height)&&void 0!==d?d:1024,imageWidth:null!==(m=w.width)&&void 0!==m?m:1024,imageHeight:null!==(h=w.height)&&void 0!==h?h:1024,topText:null!==(f=null===(t=w.text_overlay)||void 0===t?void 0:t.top_text)&&void 0!==f?f:null,bottomText:null!==(p=null===(r=w.text_overlay)||void 0===r?void 0:r.bottom_text)&&void 0!==p?p:null,centerText:null,className:"z-0 size-full rounded-lg bg-white-400/5 transition-transform group-hover:scale-105"}):(0,l.jsx)(a.default,{className:"z-0 size-full rounded-lg bg-white-400/5 transition-transform group-hover:scale-105",src:w.url,alt:w.id,width:null!==(v=w.width)&&void 0!==v?v:1024,height:null!==(b=w.height)&&void 0!==b?b:1024}),j&&(0,l.jsx)(s.T,{src:w.url,onClickShow:()=>k(!1)}),y&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 flex select-none items-end px-1.5 py-1 opacity-0 transition-opacity hover:opacity-100",children:(0,l.jsx)("div",{className:"flex flex-1 items-center gap-2",children:(0,l.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate p-1 text-sm font-semibold drop-shadow-[0.5px_0.5px_1px_rgba(0,0,0,80)]",children:[(0,l.jsx)(a.default,{src:w.creator_avatar||"",alt:w.creator_handle||"",className:"rounded-full hover:scale-105",width:24,height:24}),w.creator_handle]})})})]})})}},11735:function(e,t,r){r.d(t,{g:function(){return p}});var l=r(57348),a=r(53350),n=r(54144),s=r(20923),o=r(67425),i=r(13881),u=r(16189),c=r(15346),d=r(82033),m=r(81727),h=r(93276),f=r(8161);let p=()=>{let e=(0,u.useSearchParams)(),t=(0,u.usePathname)(),r=new URLSearchParams(e.toString()),[p,v]=(0,c.useState)(!1),{startUpload:b}=(0,d.useUpload)(),w=async e=>{if(e&&0!==e.length&&!p){v(!0);for(let t=0;t<e.length;t++){let r=e[t];await b(r)}v(!1)}};return(0,l.jsxs)("div",{className:"w-full flex px-3 border-b border-divider",children:[(0,l.jsx)(n.n,{color:"primary",variant:"underlined","aria-label":"Library tabs",radius:"full",selectedKey:t,classNames:{base:"flex-1",tabList:"gap-4 w-full relative rounded-none p-0",cursor:"w-full bg-blue-500",tab:"max-w-fit px-0 !h-12 select-none outline-none",tabContent:"group-data-[selected=true]:text-blue-500 text-white-400/75 px-1 font-semibold text-base md:text-base lg:text-base tracking-wide mb-1"},children:Object.values(f.$9).map(e=>{let t=(0,f.Zt)(e),a=(0,h.wS)(t,r);return(0,l.jsx)(s.r,{className:"!focus-visible:outline-none",title:(0,l.jsx)("h2",{children:e}),as:i.default,href:a},t)})}),(0,l.jsxs)(o.A,{size:"md",variant:"solid",color:"primary",disableRipple:!0,isLoading:p,startContent:!p&&(0,l.jsx)(a.JO,{icon:"material-symbols:upload",width:18}),children:["Upload",(0,l.jsx)("input",{type:"file",multiple:!0,accept:m.RL,className:"absolute inset-0 size-full cursor-pointer opacity-0",onChange:e=>w(e.target.files)})]})]})}},8161:function(e,t,r){r.d(t,{$9:function(){return a},DH:function(){return s},Zt:function(){return o}});var l,a,n=r(35878);(l=a||(a={})).All="All",l.Uploads="Uploads",l.Saved="Saved";let s=e=>{switch(e){case"Uploads":return n.P.getUploads;case"Saved":return n.P.getSavedMemes;default:return n.P.getLibrary}},o=e=>{switch(e){case"Saved":return"/library/saved";case"Uploads":return"/library/uploads";default:return"/library"}}},95967:function(e,t,r){r.r(t),r.d(t,{SearchBar:function(){return c}});var l=r(57348),a=r(16189),n=r(15346),s=r(29492),o=r(23136),i=r(16818),u=r(76808);let c=e=>{let{value:t,autofocus:r,initialSearch:c,className:d="px-3",responsiveness:m="",border:h="border-b border-white-400/15",placeholder:f,hideLogo:p=!1,onSearch:v,searchInterval:b,onSelectInterval:w}=e,g=(0,a.useRouter)(),{initialQuery:y}=(0,u.x)(),x=(0,n.useMemo)(()=>t.length>0,[t.length]),C=(0,n.useCallback)(()=>{v||g.push("/trending")},[v,g]);return(0,l.jsxs)("div",{className:"sticky top-0 z-10 flex gap-3 h-16 w-full items-center justify-between bg-black-0 ".concat(d," ").concat(m," ").concat(h),onClick:C,children:[!p&&(0,l.jsx)("div",{className:"sm:hidden size-10 max-w-10",children:(0,l.jsx)(s.Ew,{})}),(0,l.jsx)(o.T,{value:t,autofocus:r,initialSearch:y,placeholder:f,onSearch:v}),x&&b&&w&&(0,l.jsx)(i.m,{interval:b,onSelect:w})]})}},23136:function(e,t,r){r.d(t,{T:function(){return i}});var l=r(57348),a=r(46766),n=r(45155),s=r(15346),o=r(82739);let i=e=>{let{value:t,autofocus:r,initialSearch:i,placeholder:u="Search for memes. (i.e. pepe)",onFocus:c,onSearch:d}=e,m=(0,s.useRef)(null);return(0,l.jsx)(a.Y,{isClearable:!0,onClear:()=>{null==d||d("")},radius:"full",classNames:{base:"flex-1",input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,l.jsx)(n.default,{priority:!0,src:o.Z,alt:"Dropdown",onClick:e=>{var t;e.preventDefault(),null===(t=m.current)||void 0===t||t.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:m,autoFocus:r,defaultValue:i,placeholder:u,className:"h-10 min-w-24 flex-1 rounded-full border border-white-400/5 bg-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",value:t,onFocus:c,onChange:e=>null==d?void 0:d(e.target.value)})}},16818:function(e,t,r){r.d(t,{m:function(){return o}});var l=r(57348),a=r(1718),n=r(88036),s=r(41973);let o=e=>{let{interval:t,onSelect:r}=e;return(0,l.jsx)(a.g,{size:"md","aria-label":"Interval",radius:"full",variant:"bordered",color:"primary",placeholder:"Sort by",classNames:{base:"w-auto",trigger:"w-28",popoverContent:"w-28"},value:t,selectedKeys:[t],onChange:e=>{r(e.target.value)},children:Object.values(s.u).map(e=>(0,l.jsx)(n.R,{children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}},5265:function(e,t,r){r.d(t,{M:function(){return s}});var l=r(15346),a=r(74859),n=r(76808);let s=e=>{let{feed:t,setFeed:r,hasFetched:s,setHasFetched:o,searchQuery:i,setSearchQuery:u,fetchFn:c,deckId:d,fetchOnLoad:m=!0,pageSize:h=50,ignoreWindowScroll:f=!1,onFetchOnLoad:p}=e,{initialQuery:v,initialInterval:b,initialSortBy:w}=(0,n.x)(),[g,y]=(0,l.useState)(0),[x,C]=(0,l.useState)(!0),[j,k]=(0,l.useState)(!1),[S,N]=(0,l.useState)(b),[P,O]=(0,l.useState)(w),_=(0,l.useCallback)(async(e,t)=>{let l=await c(e,t);return r(t=>l.length>0&&Number(e.start)>0?[...t,...l]:l),k(!1),o(!0),C(l.length===h),l},[c,h,r,o]),D=(0,l.useMemo)(()=>(0,a.k)(_,1e3),[_]),F=(0,l.useCallback)(async(e,t)=>{var r,l,a,n,s;return k(!0),o(!1),D({search:null!==(r=e.search)&&void 0!==r?r:i,start:null!==(l=e.start)&&void 0!==l?l:g,limit:null!==(a=e.limit)&&void 0!==a?a:h,interval:null!==(n=e.interval)&&void 0!==n?n:S,sort_by:null!==(s=e.sort_by)&&void 0!==s?s:P,...d?{deck_id:d}:{}},t)},[D,d,h,S,i,P,o,g]),M=(0,l.useCallback)(e=>{if(!s||!x||j)return;let t=null!=e?e:g+h;y(t),F({start:t})},[s,x,j,g,h,F]),U=(0,l.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&M()},[M]),A=(0,l.useCallback)((e,t,r)=>{let l=new URL(window.location.href);e.length>0?l.searchParams.set("query",e):l.searchParams.delete("query"),t?l.searchParams.set("interval",t):l.searchParams.delete("interval"),r?l.searchParams.set("sort_by",r):l.searchParams.delete("sort_by"),window.history.pushState({},"",l.toString())},[]),E=(0,l.useCallback)(async(e,t,r)=>{null==u||u(e),u&&A(e,t,r),y(0),C(!0),F({search:e,start:0,limit:h,interval:t,sort_by:r})},[F,h,u,A]),z=(0,l.useCallback)(e=>{r([]),N(e),E("",e,P)},[E,P,r]),L=(0,l.useCallback)(e=>{r([]),O(e),E("",S,e)},[E,S,r]);return(0,l.useEffect)(()=>{if(!f)return window.addEventListener("scroll",U),()=>window.removeEventListener("scroll",U)},[U,f]),(0,l.useEffect)(()=>{let e=new AbortController;if(!s&&!(t.length>0)&&m&&!j)return F({search:v,start:0,limit:h,interval:b,sort_by:w},e.signal).then(p),()=>{!e.signal.aborted&&j&&e.abort()}},[t.length,F,m,s,v,b,j,p,h,w]),(0,l.useEffect)(()=>(v&&(null==u||u(v)),b&&N(b),w&&O(w),()=>{r([]),null==u||u(""),o(!1)}),[b,v,w,r,o,N,u,O]),{feed:t,setFeed:r,setHasMore:C,onSearch:E,searchInterval:S,onSelectInterval:z,searchSortBy:P,onSelectSortBy:L,isFetching:j,hasMore:x,setIsFetching:k,setHasFetched:o,onReachedEnd:M}}},76808:function(e,t,r){r.d(t,{x:function(){return n}});var l=r(16189),a=r(41973);let n=()=>{var e,t,r;let n=(0,l.useSearchParams)();return{initialQuery:null!==(e=n.get("query"))&&void 0!==e?e:"",initialInterval:null!==(t=n.get("interval"))&&void 0!==t?t:a.u.Week,initialSortBy:null!==(r=n.get("sort_by"))&&void 0!==r?r:a.a.Hot}}},57005:function(e,t,r){r.d(t,{y:function(){return o}});var l=r(15346),a=r(8161),n=r(5265),s=r(35971);let o=e=>{let{activeTab:t}=e,{librarySearchQuery:r,setLibrarySearchQuery:o,library:i,setLibrary:u,hasFetchedLibrary:c,setHasFetchedLibrary:d,uploads:m,hasFetchedUploads:h,setHasFetchedUploads:f,setUploads:p,saved:v,setSaved:b,hasFetchedSaved:w,setHasFetchedSaved:g}=(0,s.useFeed)(),{feed:y,setFeed:x,hasFetched:C,setHasFetched:j}=(0,l.useMemo)(()=>{switch(t){case a.$9.Uploads:return{feed:m,setFeed:p,hasFetched:h,setHasFetched:f};case a.$9.Saved:return{feed:v,setFeed:b,hasFetched:w,setHasFetched:g};default:return{feed:i,setFeed:u,hasFetched:c,setHasFetched:d}}},[t,c,w,h,i,v,d,g,f,u,b,p,m]),{isFetching:k,onSearch:S}=(0,n.M)({feed:y,setFeed:x,hasFetched:C,setHasFetched:j,searchQuery:r,setSearchQuery:o,fetchFn:(0,a.DH)(t)});return{feed:y,setFeed:x,hasFetched:C,isFetching:k,librarySearchQuery:r,onSearch:S}}},77623:function(e,t,r){r.d(t,{T:function(){return n}});var l=r(16189),a=r(93276);let n=()=>{let e=(0,l.useRouter)(),t=(0,l.usePathname)(),r=(0,l.useSearchParams)(),n=e=>{let l=encodeURIComponent(e.replace("meme:",""));if(["/home","/trending"].includes(t))return"".concat(t,"/").concat(l);{let e=new URLSearchParams(r.toString());return e.set("memeId",l),(0,a.wS)(t,e)}};return{openMemeModal:t=>{let r=n(t);e.push(r,{scroll:!1})},getMemeModalPath:n}}},82896:function(e,t,r){var l=r(15346);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,l)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var l;l=r[t],t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class o extends l.Component{componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let r=1/0,l=t.default||2;for(let a in t){let n=parseInt(a);n>0&&e<=n&&n<r&&(r=n,l=t[a])}l=Math.max(1,parseInt(l)||1),this.state.columnCount!==l&&this.setState({columnCount:l})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),r=l.Children.toArray(this.props.children);for(let l=0;l<r.length;l++){let a=l%e;t[a]||(t[a]=[]),t[a].push(r[l])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:r}=this.props,n=this.itemsInColumns(),o="".concat(100/n.length,"%"),i=r;i&&"string"!=typeof i&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===i&&(i="my-masonry-grid_column"));let u=s(s(s({},e),t),{},{style:s(s({},t.style),{},{width:o}),className:i});return n.map((e,t)=>l.createElement("div",a({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:r,columnClassName:n,columnAttrs:s,column:o,className:i}=e,u=function(e,t){if(null==e)return{};var r,l,a=function(e,t){if(null==e)return{};var r,l,a={},n=Object.keys(e);for(l=0;l<n.length;l++)r=n[l],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)r=n[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=i;return"string"!=typeof i&&(this.logDeprecated('The property "className" requires a string'),void 0===i&&(c="my-masonry-grid")),l.createElement("div",a({},u,{className:c}),this.renderColumns())}constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}}o.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=o},96622:function(e,t,r){r.r(t),r.d(t,{MemeModalProvider:function(){return c},useMemeModal:function(){return d}});var l=r(57348),a=r(16189),n=r(15346),s=r(13214),o=r(77623),i=r(93276);let u=(0,n.createContext)({}),c=e=>{var t;let{children:r}=e,n=(0,a.useRouter)(),c=(0,a.usePathname)(),d=(0,a.useSearchParams)();(0,a.useParams)();let m=0===c.search(/\/home\/[0-9a-zA-Z]{5,}_[0-9a-zA-Z_]{10,}/)?c.replace(/^\/home\//,"").split("/")[0].split("?")[0]:decodeURIComponent(null!==(t=d.get("memeId"))&&void 0!==t?t:""),h=new URLSearchParams(d.toString()),{openMemeModal:f}=(0,o.T)(),p=()=>{h.delete("memeId");let e=0===h.toString().length?"/".concat(c.split("/")[1]):(0,i.wS)(c,h);n.push(e,{scroll:!1})};return(0,l.jsxs)(u.Provider,{value:{onOpenMeme:f,onCloseMeme:p},children:[r,m&&(0,l.jsx)(s.k,{memeId:m,onClose:p})]})},d=()=>{let e=(0,n.useContext)(u);if(void 0===e)throw Error("useFeed must be used within MemeModalProvider");return e}},82033:function(e,t,r){r.r(t),r.d(t,{UploadProvider:function(){return b},useUpload:function(){return w}});var l=r(57348),a=r(16189),n=r(12465),s=r(15346),o=r(67425);let i=e=>{let{text:t,textButton:r,onClick:a}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[t,r&&a&&(0,l.jsx)(o.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:a,children:r})]})};var u=r(77623),c=r(35971),d=r(71402),m=r(35878),h=r(74859);let f=e=>{let t=new FileReader;return new Promise((r,l)=>{t.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;if(!a){l(Error("Failed to read file"));return}r(new Uint8Array(a))},t.onerror=()=>l(t.error),t.readAsArrayBuffer(e)})};var p=r(81727);let v=(0,s.createContext)({}),b=e=>{let{children:t}=e,r=(0,a.useRouter)(),{openMemeModal:o}=(0,u.T)(),{isPostingMemes:b,setIsHovering:w}=(0,d.useProfile)(),{onUploadMeme:g}=(0,c.useFeed)(),[y,x]=(0,s.useState)([]),[C,j]=(0,s.useState)(),[k,S]=(0,s.useState)(!1),N=(0,s.useCallback)(async e=>{try{(0,n.sy)();let t=e.name.slice(0,20),r=(0,n.yv)("Uploading ".concat(t),{variant:"info",persist:!0});j(r);let a=await f(e),s="",u=await m.P.postMeme({filename:(0,p.Df)(e.name),filetype:e.type,bytes:a});if(!u)throw Error("Failed to upload");s=u.id;let c={...u,votes:{up:[],down:[]}};x(e=>[c,...e]),g(c),(0,n.sy)(C),j(void 0);let d=(0,n.yv)((0,l.jsx)(i,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,n.sy)(d),o(s)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),j(void 0),(0,n.sy)(),(0,n.yv)("Failed to upload some memes",{variant:"error"})}},[C,o,g,x]),P=(0,s.useCallback)(async e=>{try{let t=(0,p.Df)(e),r=t.slice(0,20),a=(0,n.yv)("Uploading ".concat(r),{variant:"info",persist:!0});j(a);let s=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!s)throw Error("Failed to paste link");x(e=>[s,...e]),g(s),(0,n.sy)(C),j(void 0);let u=(0,n.yv)((0,l.jsx)(i,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,n.sy)(u),o(s.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,n.yv)("Failed to paste link",{variant:"error"})}},[C,o,g]),O=(0,s.useMemo)(()=>(0,h.k)(N,1e3),[N]),_=(0,s.useCallback)(async e=>{if(void 0===C){if(e.size>33554432){(0,n.yv)("Please upload files 32MB or less",{variant:"error"});return}return O(e)}},[O,C]),D=(0,s.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let r=t[e];if(r.type.includes("image")){let e=r.getAsFile();e&&await _(e)}}}},[_]);(0,s.useEffect)(()=>(window.addEventListener("paste",D),()=>{window.removeEventListener("paste",D)}),[D]);let F=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),w(!1),S(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let r=t[e];r.type.includes("image")&&await _(r)}b||r.push("/library")}catch(e){console.error(e)}finally{S(!1)}};return(0,l.jsx)(v.Provider,{value:{uploads:y,setUploads:x,startUpload:_,pasteImageLink:P,isBatchUploading:k},children:(0,l.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&w(!0)},onDragLeave:()=>w(!1),onDrop:F,children:t})})},w=()=>{let e=(0,s.useContext)(v);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}},62568:function(e,t,r){r.d(t,{K7:function(){return n},jG:function(){return a},vk:function(){return s}});var l=r(54167);let a="MemeDeck",n="Meme With Frens",s="Create & discover memes with AI.";"".concat(a," – ").concat(n),new URL(l.j7?"http://localhost:8080":"https://memedeck.xyz")},82739:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/search.3dc28276.svg",height:18,width:18,blurWidth:0,blurHeight:0}},21008:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/logo-wide.572ec4d3.svg",height:256,width:702,blurWidth:0,blurHeight:0}}}]);