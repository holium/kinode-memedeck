(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{43224:function(e,t,n){Promise.resolve().then(n.bind(n,93728))},93728:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(62284),s=n(12890),l=n(99053),o=n(91151),i=n(57837),a=n(94548),c=n(77606),u=n(15219),d=n(96245);function m(e){var t;let{params:n}=e,{handle:m}=(0,a.d)({params:n,key:"handle"}),{data:h}=(0,u.iS)(),p=(0,d.TL)(),{searchSortBy:f}=(0,i.K)(),{isFetching:v,isLoading:b,currentData:y}=(0,o.w)({sort_by:f,user_handle:m,exclude_active_contest:!0});return(0,r.jsx)(s.o,{items:null!==(t=null==y?void 0:y.memes)&&void 0!==t?t:[],hasFetched:!!y,hasSearched:!1,isFetching:v,isLoading:b,renderItem:e=>(0,r.jsx)(l.P,{post:e,profilePageHandle:m,onClick:h?void 0:()=>p((0,c.it)())},e.id)},"profile-memes-".concat(m,"-").concat(f))}},12890:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var r=n(62284),s=n(68880),l=n(44593),o=n(91151);let i={default:3,1100:3,700:2,500:1},a=e=>{let{items:t,isLoading:n,isFetching:a,hasFetched:c,hasSearched:u,noResultsMessage:d="No memes",className:m="relative overflow-hidden pl-3 pt-3",breakpoints:h=i,renderItem:p}=e;return(0,r.jsxs)("div",{className:m,children:[!a&&0===t.length&&(c||u)?(0,r.jsx)("div",{className:"text-sm text-white-400/50",children:d}):null,n?(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(s.c,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{breakpointCols:h,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:t.map(p)}),a&&t.length>=o.I&&(0,r.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,r.jsx)(s.c,{})})]})]})}},57204:function(e,t,n){"use strict";n.d(t,{F:function(){return f}});var r=n(62284),s=n(46231),l=n(81374),o=n(98314),i=n(68880),a=n(88938),c=n(33548),u=n(12967),d=n(5522),m=n(59297),h=n(7722),p=n(74651);let f=e=>{let{post:t,isLoading:n,isDisabled:f}=e,{onOpenPost:v}=(0,p.h)(),{deletePost:b,isDeleting:y}=(0,h.Z)(),C=(0,m.useCallback)(()=>v(t.id),[v,t]);return(0,r.jsxs)(l.F,{"aria-label":"Edit Post",classNames:{content:"min-w-0 w-auto"},children:[(0,r.jsx)(o.S,{children:y||n?(0,r.jsx)("div",{className:"flex items-center justify-center size-8",children:(0,r.jsx)(i.c,{size:"sm"})}):(0,r.jsx)(a.A,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:f,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,r.jsx)(s.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,r.jsx)(c.a,{children:(0,r.jsxs)(u.d,{title:"Post Actions",children:[(0,r.jsx)(d.W,{"aria-label":"Edit",textValue:"Edit",color:"default",startContent:(0,r.jsx)(s.JO,{className:"size-5",icon:"mdi:edit"}),onClick:C,children:"Edit"}),(0,r.jsx)(d.W,{"aria-label":"Delete",textValue:"Delete",color:"danger",startContent:(0,r.jsx)(s.JO,{className:"size-5",icon:"tabler:trash"}),onClick:()=>b({postId:t.id}),children:"Delete"})]})})]})}},14903:function(e,t,n){"use strict";n.d(t,{T:function(){return o}});var r=n(62284),s=n(88938),l=n(2793);let o=e=>{let{src:t,onClickShow:n}=e;return(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 z-2 bg-white-400/10",onClick:e=>{e.stopPropagation(),e.preventDefault()},onMouseEnter:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,r.jsx)(l.default,{src:t,alt:"NSFW",draggable:!1,className:"absolute z-0 inset-0 size-full object-cover blur-xl scale-[3]",width:640,height:640,sizes:"640px",quality:1,priority:!0}),(0,r.jsx)(s.A,{variant:"ghost",color:"danger",size:"sm",className:"p-1 font-medium z-3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 backdrop-blur-sm",onClick:n,children:"Show"})]})}},99053:function(e,t,n){"use strict";n.d(t,{P:function(){return g}});var r=n(62284),s=n(46231),l=n(46902),o=n(37630),i=n(88938),a=n(87335),c=n(23405),u=n(2793),d=n(59297),m=n(57204),h=n(45780),p=n(14903),f=n(56984),v=n(15219),b=n(74651),y=n(20102),C=n(14751),w=n(25845),x=n(82258);let g=e=>{var t,n;let{post:g,deckPageId:j,profilePageHandle:N,priorityLoadImage:k,imageQuality:O,onClick:P}=e,{data:S}=(0,v.iS)(),z=(0,d.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.id)&&void 0!==e?e:""},[S]),D=(0,f.u)(z,g.votes),[_]=(0,v.NU)(),[E]=(0,v.Rp)(),{description:I,titleWithAttribution:A,creator:F,url:M,width:L,height:q}=(0,C.zD)(g),U=(0,d.useMemo)(()=>{var e;return null!==(e=g.image)&&void 0!==e?e:g.meme},[g]),W=(0,d.useMemo)(()=>g.by.id===z,[g.by.id,z]),R=(0,d.useMemo)(()=>null==U?void 0:U.is_nsfw,[null==U?void 0:U.is_nsfw]),[H,J]=(0,d.useState)(R),{previousPostId:T,rawSrc:V}=(0,y.C)(),B=(0,d.useMemo)(()=>g.id===T?V:void 0,[g.id,T,V]),Q=(0,d.useMemo)(()=>U?(0,x.LA)(U):"",[U]),{onOpenPost:Z}=(0,b.h)(),K=(0,d.useCallback)(()=>{if(P){P();return}Z(g.id)},[P,Z,g.id]);(0,d.useEffect)(()=>()=>{J(R)},[R]);let $=(0,d.useMemo)(()=>null!=O?O:50,[O]),G=(0,d.useMemo)(()=>$/100*(null!=L?L:200),[L,$]),Y=(0,d.useMemo)(()=>$/100*(null!=q?q:200),[q,$]),X=(0,d.useMemo)(()=>{var e,t;return(null===(t=g.meme)||void 0===t?void 0:null===(e=t.contest)||void 0===e?void 0:e.status)==="active"},[null===(n=g.meme)||void 0===n?void 0:null===(t=n.contest)||void 0===t?void 0:t.status]);return U?(0,r.jsx)("article",{className:(0,c.cn)("relative w-full cursor-pointer overflow-hidden rounded-md",X?"border border-violet-500":"",g.is_contest_winner?"border border-yellow-400":""),onClick:K,children:(0,r.jsxs)(l.w,{isFooterBlurred:!0,radius:"none",className:"group",children:[W&&(0,r.jsx)(o.u,{className:(0,c.cn)("absolute top-0 inset-x-0 p-1 z-10","flex justify-end","transition-opacity opacity-0","sm:group-hover:opacity-100"),children:(0,r.jsx)(i.A,{size:"sm",color:"default",isIconOnly:!0,className:(0,c.cn)("shadow-small","bg-black-400/30 border-1 border-zinc-600/40 backdrop-blur-sm"),children:(0,r.jsx)(m.F,{post:g})})}),(0,r.jsx)(u.default,{className:"z-0 size-full bg-white-400/5 sm:transition-transform sm:group-hover:scale-104",src:Q,placeholder:B,quality:$,priority:k,alt:I||A,width:G,height:Y}),g.is_contest_winner&&(0,r.jsx)(s.JO,{icon:"mdi:prize",className:"absolute top-1 right-1 text-yellow-400 size-7"}),(0,r.jsx)(a.i,{className:(0,c.cn)("absolute bottom-1 inset-x-1 px-1 py-2 z-1 w-[calc(100%_-_8px)]","flex justify-between rounded-md shadow-small overflow-hidden","border-1 border-zinc-600/40 bg-black-400/30","transition-opacity opacity-0",D.hasUpvoted||D.hasDownvoted?"sm:opacity-100":"sm:group-hover:opacity-100"),children:(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate font-semibold",children:[X?(0,r.jsx)("div",{className:"size-8 flex items-center justify-center bg-white-400/10 rounded-full",children:(0,r.jsx)(s.JO,{icon:"ooui:user-anonymous",className:"size-5"})}):(0,r.jsx)(u.default,{src:g.by.avatar,alt:F,className:"rounded-full min-w-8",width:32,height:32,quality:50}),(0,r.jsxs)("div",{className:"flex flex-col flex-1 truncate",children:[(0,r.jsx)("span",{className:"truncate text-xs",children:X?"Contestant":g.by.handle}),g.created_at&&(0,r.jsx)("span",{className:"text-tiny font-normal text-white-400/70 truncate",children:(0,w.Po)(new Date(g.created_at))})]})]}),(0,r.jsx)(h.I,{postId:g.id,user:S,deckPageId:j,profilePageHandle:N,initialVotes:g.votes,postVoteApi:_,deleteVoteApi:E,onClickOverride:P,border:"border-zinc-400/50",isActiveContest:X})]})}),H&&(0,r.jsx)(p.T,{src:M,onClickShow:()=>J(!1)})]})}):null}},91151:function(e,t,n){"use strict";n.d(t,{I:function(){return l},w:function(){return o}});var r=n(59297),s=n(15219);let l=50,o=e=>{var t;let{search:n,...o}=e,[i,a]=(0,r.useState)(1),c=(0,s.t$)({...o,search:n,start:l*(i-1),limit:l}),u=(0,r.useCallback)(e=>{var t,n;return(null!==(n=null===(t=c.data)||void 0===t?void 0:t.memes)&&void 0!==n?n:[]).length<e*l},[null===(t=c.data)||void 0===t?void 0:t.memes]),d=(0,r.useCallback)(()=>{c.isFetching||c.isLoading||c.isError||a(e=>!c.data||0===c.data.memes.length||u(e)?e:e+1)},[u,c.data,c.isError,c.isFetching,c.isLoading]),m=(0,r.useCallback)(async()=>{let e=window.innerHeight;document.body.offsetHeight-window.scrollY<3*e&&d()},[d]);return(0,r.useEffect)(()=>(window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}),[m]),c}},57837:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var r=n(28403),s=n(92449),l=n(59297),o=n(75635),i=n(72363);let a=()=>{var e,t,n;let a=(0,s.useRouter)(),c=(0,r.usePathname)(),u=(0,r.useSearchParams)(),{search:d,searchDebounced:m,onSearch:h}=(0,o.U)(null!==(e=u.get("query"))&&void 0!==e?e:""),[p,f]=(0,l.useState)(null!==(t=u.get("interval"))&&void 0!==t?t:i.u.Week),[v,b]=(0,l.useState)(null!==(n=u.get("sort_by"))&&void 0!==n?n:i.a.Hot),y=(0,l.useCallback)((e,t)=>{let n=new URLSearchParams(u.toString());n.set(t,e),a.push(c+"?"+n.toString(),{scroll:!1})},[c,a,u]);return{searchQuery:d,searchQueryDebounced:m,searchInterval:p,searchSortBy:v,setSearchQuery:(0,l.useCallback)(e=>{h(e),y(e,"query")},[h,y]),setSearchInterval:(0,l.useCallback)(e=>{f(e),y(e,"interval")},[y]),setSearchSortBy:(0,l.useCallback)(e=>{b(e),y(e,"sort_by")},[y])}}},75635:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var r=n(59297),s=n(81255);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",[t,n]=(0,r.useState)(e),[l,o]=(0,r.useState)(e),i=(0,r.useMemo)(()=>(0,s.D)(o,500),[]);return{search:t,searchDebounced:l,onSearch:(0,r.useCallback)(e=>{n(e),i(e)},[i])}}},44593:function(e,t,n){"use strict";var r=n(59297);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class i extends r.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let n=1/0,r=t.default||2;for(let s in t){let l=parseInt(s);l>0&&e<=l&&l<n&&(n=l,r=t[s])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),n=r.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){let s=r%e;t[s]||(t[s]=[]),t[s].push(n[r])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:n}=this.props,l=this.itemsInColumns(),i=`${100/l.length}%`,a=n;a&&"string"!=typeof a&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===a&&(a="my-masonry-grid_column"));let c=o(o(o({},e),t),{},{style:o(o({},t.style),{},{width:i}),className:a});return l.map((e,t)=>r.createElement("div",s({},c,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:n,columnClassName:l,columnAttrs:o,column:i,className:a}=e,c=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),u=a;return"string"!=typeof a&&(this.logDeprecated('The property "className" requires a string'),void 0===a&&(u="my-masonry-grid")),r.createElement("div",s({},c,{className:u}),this.renderColumns())}}i.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=i},87335:function(e,t,n){"use strict";n.d(t,{i:function(){return c}});var r=n(26382),s=n(9710),l=n(88377),o=n(6213),i=n(62284),a=(0,s.Gp)((e,t)=>{var n;let{as:s,className:a,children:c,...u}=e,d=(0,l.gy)(t),{slots:m,classNames:h}=(0,r.R)(),p=(0,o.W)(null==h?void 0:h.footer,a);return(0,i.jsx)(s||"div",{ref:d,className:null==(n=m.footer)?void 0:n.call(m,{class:p}),...u,children:c})});a.displayName="NextUI.CardFooter";var c=a}},function(e){e.O(0,[2446,8938,9303,1271,4607,3453,322,1866,3316,6157,9675,5219,621,3746,102,4868,2046,1744],function(){return e(e.s=43224)}),_N_E=e.O()}]);