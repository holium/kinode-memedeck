(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2584],{83447:function(e,t,s){Promise.resolve().then(s.bind(s,13108)),Promise.resolve().then(s.bind(s,74913))},72320:function(e,t,s){"use strict";s.d(t,{B:function(){return o}});var a=s(57348),l=s(45155),r=s(13881),n=s(89765),c=s(81727),i=s(93276);let o=e=>{let{deckId:t,thumbnail:s,name:o,ranking:d,totalPosts:h,isAdmin:m,w:u="min-w-28 w-28 md:min-w-48 md:w-48"}=e;return(0,a.jsx)(r.default,{href:(0,i.o4)(t),className:"scale-img-on-hover select-none",children:(0,a.jsxs)("div",{className:"relative cursor-pointer overflow-hidden flex flex-col justify-center bg-black-400 hover:bg-black-200 rounded-lg shadow-lg hover:shadow-2xl ".concat(u),children:[(0,a.jsx)("div",{className:"size-full aspect-square overflow-hidden bg-black-100/25",children:s&&(0,a.jsx)(l.default,{src:s,alt:o,width:256,height:256,className:"size-full object-cover object-center"})}),(0,a.jsxs)("footer",{className:"flex flex-col gap-1 pl-3 pr-1 py-3",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-between truncate",children:[(0,a.jsxs)("h3",{className:"flex gap-2 font-semibold text-sm md:text-base tracking-wide w-full truncate",children:[(0,a.jsx)("span",{className:"text-white-400 truncate",children:o}),d&&(0,a.jsxs)("span",{className:"text-white-400/70",children:["#",d]})]}),m&&(0,a.jsx)(n.g,{deckId:t,onDelete:()=>{window.location.reload()}})]}),(0,a.jsxs)("span",{className:"flex gap-1 text-sm",children:[(0,a.jsx)("span",{className:"text-white-400 font-medium",children:h}),(0,a.jsx)("span",{className:"text-white-400/75",children:(0,c._6)(h,"meme","memes")})]})]})]})})}},74913:function(e,t,s){"use strict";s.r(t),s.d(t,{TrendingPageContent:function(){return y}});var a=s(57348),l=s(15346),r=s(8485),n=s(24605),c=s(52428),i=s(95967),o=s(6076),d=s(72320),h=s(35878);let m=e=>{let{interval:t}=e,[s,r]=(0,l.useState)([]),[n,c]=(0,l.useState)(!0),i=(0,l.useCallback)(async()=>{let e=await h.P.getTopDecks({interval:t,limit:20,category:"character"});e&&r(e)},[t]);return((0,l.useEffect)(()=>{c(!0),i().finally(()=>c(!1))},[i]),n)?(0,a.jsx)("div",{className:"flex px-3 gap-3 w-full overflow-x-auto scrollbar-hide",children:[1,2,3,4,5,6,7,8,9].map(e=>(0,a.jsxs)("div",{className:"min-w-[112px] w-[112px] h-[152px] md:min-w-48 md:h-[264px] bg-black-400 rounded-lg shadow-lg hover:shadow-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"w-full aspect-square bg-black-100/25"}),(0,a.jsx)("div",{className:"w-full h-10 px-3 flex items-center",children:(0,a.jsx)("div",{className:"w-1/2 h-5 bg-black-100/50 rounded-md"})})]},e))}):(0,a.jsx)("div",{className:"flex px-3 gap-3 w-full overflow-x-auto scrollbar-hide",children:s.map((e,t)=>(0,a.jsx)(d.B,{deckId:e.id,ranking:t+1,name:e.title,thumbnail:e.thumbnail,totalPosts:e.total_posted,isAdmin:!1},e.id))})};var u=s(67425),x=s(16189),f=s(12465),p=s(16818),w=s(71402);let g=e=>{let{interval:t,onSelectInterval:s}=e,r=(0,x.useRouter)(),{profile:n}=(0,w.useProfile)(),[c,i]=(0,l.useState)(!1),o=async()=>{try{i(!0);let e=await h.P.createDeck({title:"",description:"",auto_post:!1,require_approval:!1,cover_photo:null,admins:null,matching_rules:null,post_ids:null});if(!e)throw Error("Failed to create new deck");r.push("/deck/".concat(e.id.replace("deck:",""),"/edit"))}catch(e){console.error(e),i(!1),(0,f.yv)("Failed to create new deck",{variant:"error"})}};return(0,a.jsxs)("header",{className:"flex items-center justify-between p-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-white-400 font-bold text-3xl tracking-wide",children:"Trending"}),(0,a.jsx)(p.m,{interval:t,onSelect:s})]}),n&&(0,a.jsx)(u.A,{isLoading:c,variant:"bordered",onClick:o,children:"New Deck"})]})};var j=s(5265),v=s(35971),b=s(69467),k=s(74859),N=s(81727);async function _(e,t,s){s(null);let a=Date.now(),l=await h.P.search(e,t),r=Date.now();return s({total_memes:l.total_memes,time_ms:r-a}),l.memes}let F=(0,k.k)(_,500),y=()=>{let{profile:e,isSignupModalOpen:t,setIsSignupModalOpen:s}=(0,w.useProfile)(),[d,h]=(0,l.useState)(null),{searchQuery:u,setSearchQuery:x,searchResults:f,setSearchResults:p,hasFetchedSearchResults:k,setHasFetchedSearchResults:_}=(0,v.useFeed)(),{isFetching:y,onSearch:P,searchInterval:S,onSelectInterval:C}=(0,j.M)({feed:f,setFeed:p,hasFetched:k,setHasFetched:_,searchQuery:u,setSearchQuery:x,fetchOnLoad:!0,fetchFn:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return F(...t,h)}}),D=(0,l.useMemo)(()=>u.length>0,[u.length]),I=(0,l.useMemo)(()=>f.filter(e=>!(0,b.kl)(e)),[f]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.SearchBar,{autofocus:!0,border:"border-b border-transparent",value:u,onSearch:e=>P(e,S),searchInterval:S,onSelectInterval:C}),!D&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{interval:S,onSelectInterval:C}),(0,a.jsxs)("h4",{className:"p-3 text-white-400/70 tracking-wide font-bold uppercase text-sm",children:["Top Characters ",(0,N.qr)(S)]}),(0,a.jsx)(m,{interval:S}),(0,a.jsx)("h4",{className:"px-3 pt-6 pb-0 text-white-400/70 tracking-wide font-bold uppercase text-sm",children:"Trending Posts"})]}),d&&(0,a.jsx)(n.d,{isFetching:y,hasSearched:D,stats:d}),(0,a.jsx)(r.o,{memes:I,noResultsMessage:D?"":"No memes ".concat((0,N.qr)(S).toLowerCase()),isFetching:y,hasFetched:k,hasSearched:D,renderItem:(t,l)=>(0,a.jsx)(o.P,{meme:t,onClick:e?void 0:()=>s(!0)},l)}),t&&(0,a.jsx)(c.c,{isOpen:t,onClose:()=>s(!1)})]})}}},function(e){e.O(0,[7398,2221,4175,454,2872,9154,3881,7686,1133,6440,312,4822,6378,9581,1718,9394,3520,5878,412,3214,3108,474,937,7114,1744],function(){return e(e.s=83447)}),_N_E=e.O()}]);