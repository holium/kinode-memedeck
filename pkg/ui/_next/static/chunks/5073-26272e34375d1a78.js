"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5073],{37824:function(e,t,n){n.d(t,{O:function(){return a}});var r=n(57348),u=n(45155);let a=e=>{let{src:t,alt:n,id:a,margin:i="m-2",w:o="w-3.5",onClick:l}=e;return(0,r.jsx)("button",{id:a,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(i),onClick:l,children:(0,r.jsx)(u.default,{priority:!0,src:t,alt:n,className:"opacity-85 ".concat(o)})})}},13582:function(e,t,n){n.r(t),n.d(t,{AppHistoryProvider:function(){return l},useAppHistory:function(){return c}});var r=n(57348),u=n(16189),a=n(12465),i=n(15346);let o=(0,i.createContext)({}),l=e=>{let{children:t}=e,n=(0,u.usePathname)(),l=(0,u.useRouter)(),[c,d]=(0,i.useState)([]),s=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0;console.log("goBack",{defaultRoute:e,ignoreRouteBase:t});let n=e;c.length>1&&(n=c[c.length-2],void 0!==t&&n.includes(t)&&(n=e)),"string"!=typeof n&&(n="/home"),l.push(n,{scroll:!1})},[c,l]);return(0,i.useEffect)(()=>{d(e=>e[e.length-1]!==n?[...e,n]:e)},[n]),(0,r.jsxs)(o.Provider,{value:{goBack:s},children:[t,(0,r.jsx)(a.wT,{dense:!0,maxSnack:3})]})},c=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useFeed must be used within AppHistoryProvider");return e}},35971:function(e,t,n){n.r(t),n.d(t,{FeedProvider:function(){return o},useFeed:function(){return l}});var r=n(57348),u=n(15346),a=n(71402);let i=(0,u.createContext)(void 0),o=e=>{let{children:t}=e,[n,o]=(0,u.useState)([]),[l,c]=(0,u.useState)(!1),[d,s]=(0,u.useState)({}),[f,m]=(0,u.useState)(""),[h,p]=(0,u.useState)([]),[g,v]=(0,u.useState)(!1),[b,_]=(0,u.useState)(""),[S,w]=(0,u.useState)([]),[A,k]=(0,u.useState)(!1),{userMemes:y,setUserMemes:x}=(0,a.useProfile)(),[C,P]=(0,u.useState)(""),[j,I]=(0,u.useState)([]),[E,M]=(0,u.useState)(!1),[T,D]=(0,u.useState)([]),[F,R]=(0,u.useState)(!1),[U,H]=(0,u.useState)([]),[N,L]=(0,u.useState)(!1),O=(0,u.useCallback)(e=>n.find(t=>(t.post_type,t.post.id===e))||j.find(t=>t.id===e)||U.find(t=>t.id===e)||T.find(t=>t.id===e)||h.find(t=>t.id===e)||S.find(t=>t.id===e)||Object.values(y).reduce((t,n)=>n.find(t=>t.id===e)||t,void 0),[n,j,U,T,h,S,y]),z=(0,u.useCallback)((e,t,r,u)=>{let a=n.findIndex(e=>e.post.id===t),i=j.findIndex(e=>e.id===t),l=T.findIndex(e=>e.id===t),c=U.findIndex(e=>e.id===t),d=h.findIndex(e=>e.id===t),s=S.findIndex(e=>e.id===t),f=Object.values(y).reduce((e,n)=>{let r=n.findIndex(e=>e.id===t);return -1!==r?r:e},-1);if(-1===a&&-1===i&&-1===l&&-1===c&&-1===d&&-1===s&&-1===f)return;let m=(t,n)=>{let a={...n[t]},i={react:u,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===r?"upvote"===u?(a.votes.up.push(i),a.votes.down=a.votes.down.filter(t=>t.by!==e)):(a.votes.down.push(i),a.votes.up=a.votes.up.filter(t=>t.by!==e)):"upvote"===u?a.votes.up=a.votes.up.filter(t=>t.by!==e):a.votes.down=a.votes.down.filter(t=>t.by!==e),[...n.slice(0,t),a,...n.slice(t+1)]};-1!==a&&o(e=>m(a,e)),-1!==i&&I(e=>m(i,e)),-1!==l&&D(e=>m(l,e)),-1!==c&&H(e=>m(c,e)),-1!==d&&p(e=>m(d,e)),-1!==s&&w(e=>m(s,e)),-1!==f&&x(e=>{let n={...e},r=Object.keys(e).find(n=>e[n].some(e=>e.id===t));return r?(n[r]=m(f,n[r]),n):e})},[S,n,j,U,h,x,T,y]),G=(0,u.useCallback)((e,t)=>{o(n=>0===n.length?n:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...n])},[]),Q=(0,u.useCallback)((e,t)=>{o(n=>0===n.length?n:n.map(n=>{if("meme"in n&&n.post.id===e){let e=n.post;return{...n,post:{...e,...t}}}return n}))},[]),Z=(0,u.useCallback)(e=>{o(t=>t.filter(t=>t.post.id!==e))},[]),J=(0,u.useCallback)(e=>{j.length>0&&I(t=>[e,...t]),T.length>0&&D(t=>[e,...t])},[j.length,T.length]);return(0,r.jsx)(i.Provider,{value:{feed:n,setFeed:o,hasFetchedFeed:l,setHasFetchedFeed:c,feedActions:d,setFeedActions:s,appendMemesToFeed:G,removeItemFromFeed:Z,updateMemeInFeed:Q,searchQuery:f,setSearchQuery:m,searchResults:h,setSearchResults:p,hasFetchedSearchResults:g,setHasFetchedSearchResults:v,deckQuery:b,setDeckQuery:_,deckResults:S,setDeckResults:w,hasFetchedDeckResults:A,setHasFetchedDeckResults:k,librarySearchQuery:C,setLibrarySearchQuery:P,library:j,setLibrary:I,hasFetchedLibrary:E,setHasFetchedLibrary:M,uploads:T,setUploads:D,hasFetchedUploads:F,setHasFetchedUploads:R,saved:U,setSaved:H,hasFetchedSaved:N,setHasFetchedSaved:L,onUploadMeme:J,getItem:O,voteOnItem:z},children:t})},l=()=>{let e=(0,u.useContext)(i);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},71402:function(e,t,n){n.r(t),n.d(t,{ProfileProvider:function(){return i},useProfile:function(){return o}});var r=n(57348),u=n(15346);let a=(0,u.createContext)(void 0),i=e=>{let{children:t}=e,[n,i]=(0,u.useState)(null),[o,l]=(0,u.useState)({}),[c,d]=(0,u.useState)({}),[s,f]=(0,u.useState)([]),[m,h]=(0,u.useState)([]),[p,g]=(0,u.useState)([]),[v,b]=(0,u.useState)(!1),[_,S]=(0,u.useState)(!1),[w,A]=(0,u.useState)(!1);return(0,r.jsx)(a.Provider,{value:{profile:n,setProfile:i,userMemes:o,setUserMemes:l,userBookmarks:c,setUserBookmarks:d,topDecks:s,setTopDecks:f,topDecksWeekly:m,setTopDecksWeekly:h,recommendedFollows:p,setRecommendedFollows:g,isSignupModalOpen:v,setIsSignupModalOpen:b,isPostingMemes:_,setIsPostingMemes:S,isHovering:w,setIsHovering:A},children:t})},o=()=>{let e=(0,u.useContext)(a);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},74859:function(e,t,n){n.d(t,{D:function(){return r},k:function(){return u}});let r=(e,t)=>{let n=null;return function(){for(var r=arguments.length,u=Array(r),a=0;a<r;a++)u[a]=arguments[a];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...u);return n=null,t},t)}},u=(e,t)=>{let n=null;return function(){for(var r=arguments.length,u=Array(r),a=0;a<r;a++)u[a]=arguments[a];return new Promise((r,a)=>{let i=async()=>{n&&clearTimeout(n);try{let t=await e(...u);r(t)}catch(e){a(e)}n=null};n&&clearTimeout(n),n=setTimeout(i,t)})}}},81727:function(e,t,n){n.d(t,{Df:function(){return a},Po:function(){return u},RL:function(){return i},Wb:function(){return c},_6:function(){return l},uZ:function(){return o}});var r=n(97102);let u=e=>{let t=new Date(e/1e6),n=Math.round((new Date().getTime()-t.getTime())/1e3),r=Math.round(n/60),u=Math.round(r/60);return n<60?"".concat(n,"s ago"):r<60?"".concat(r,"m ago"):u<24?"".concat(u,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},a=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),i="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function o(){let e=(0,r.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function l(e,t,n){return 1===e?t:n}function c(e){return"/deck/".concat(e.id.replace("deck:",""))}},93276:function(e,t,n){function r(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function u(e){return"/deck/".concat(e.replace("deck:",""))}function a(e){return"/home/".concat(e.replace("meme:",""))}n.d(t,{Wi:function(){return a},o4:function(){return u},wS:function(){return r}})},94787:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},15667:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}}]);