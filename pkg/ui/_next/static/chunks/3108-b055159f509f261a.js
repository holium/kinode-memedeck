"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3108],{13108:function(e,t,r){r.r(t),r.d(t,{Page:function(){return g}});var a=r(57348),s=r(16189),l=r(15346),i=r(71402),n=r(35878),c=r(4930),o=r(45155),A=r(82033),d={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/cloud.c8336d47.svg",height:74,width:74,blurWidth:0,blurHeight:0};let m=()=>{let{isBatchUploading:e}=(0,A.useUpload)();return(0,a.jsx)("div",{className:"relative size-full min-w-0 p-3",children:(0,a.jsx)("div",{className:"relative flex size-full min-w-0 items-center justify-center rounded-xl border-3 border-dashed border-blue-400",children:e?(0,a.jsx)(c.c,{}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,a.jsx)(o.default,{src:d,width:64,height:64,alt:"cloud",loading:"eager",className:"size-24"}),(0,a.jsx)("h2",{className:"text-center text-xl font-semibold text-white-400",children:"Drop bangers to upload"})]})})})};var u=r(52428);let g=e=>{let{children:t,isGated:r=!0,border:c="xs:border-0 sm:border-x border-white-400/15"}=e,o=(0,s.useRouter)(),[A,d]=(0,l.useState)(!0),{profile:g,setProfile:h,isHovering:f,isPostingMemes:p}=(0,i.useProfile)();return((0,l.useEffect)(()=>{g||(d(!0),n.P.getMe().then(h).catch(console.error).finally(()=>d(!1)))},[r,g,o,h]),g||A||!r)?(0,a.jsx)("div",{className:"relative size-full min-w-0 xs:pb-16 ".concat(c),children:f&&!p?(0,a.jsx)(m,{}):t}):(0,a.jsx)(u.c,{isOpen:!0})}},52428:function(e,t,r){r.d(t,{c:function(){return u}});var a=r(57348),s=r(67425),l=r(45155),i=r(94787),n=r(35878),c=r(62568),o=r(15667);let A=e=>{let{title:t,children:r,isOpen:s,glow:i=!0,z:n="z-40",hideOnCloseButton:c=!1,onClose:A}=e;return s?(0,a.jsx)("div",{className:"bg-white-100 fixed inset-0 flex size-full max-h-full min-h-0 items-center justify-center overflow-y-auto overflow-x-hidden p-4 ".concat(n),onClick:A,children:(0,a.jsxs)("div",{className:"".concat(i?"glow":""," bg-black-400 relative flex w-full max-w-md flex-col items-center gap-6 rounded-lg px-6 pb-8 pt-6 shadow-lg"),onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("header",{className:"relative flex w-full items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:t}),A&&!c&&(0,a.jsx)("button",{onClick:A,className:"absolute right-0 translate-x-1/4 p-2",children:(0,a.jsx)(l.default,{src:o.Z,alt:"close",className:"w-3"})})]}),(0,a.jsx)("div",{children:r})]})}):null},d=[{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/1.8823d877.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAzklEQVR42mPQF9DS4NXgZ5bTVvVV1vRnYOBW41TVF9Bm0OXTchc3mGuac8J75rmkFXsz50RKWBoCJWTZVHI03HcYlmwzqdrn1n4qfnqnZbQ5txaDLr+WtZBeolJAvEFSjmtpTWhFqJyFHo8mg4GQriqnrJWUbbxJZp5XeWF4tSyjrL6gNoMWp5y5qKWjvJe3YVyKR0mQdaQGg6y+kA6Du352pHl5lElOsFV0SlBBsH28GoMMSCLZryfbrzPTu7kgpqUooSsnvNVBz12DQQ4Aeio0BOyoKu8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#2E102A"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/2.185f5c03.png",height:1198,width:1162,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA0UlEQVR42mNwiEywCgovzczfOKtvYV97dkY9g1ONqmctg3tSYkxsWKCl7Zym8q0zOqfWVYm51ih61DIEZ5a7hacGmVtH2Ntvas5tiYrR8ayRcq9lMAioZ7AsdNXTs1c3PdRdvLO5msGmSsWzhkHJo0reu8HNMro9NuTYhIqV1fkMLhUqXg0MCu61Mh4NGrbJOT6eDZEhiU72dg4+Xr6ZDM6xJTy6fgxikoY6Zml2tgaaxppqRs6edgyuMZ4KxsoMoopaZq6uLoGaino6lkYWvjYAC7g+Dfv8P9kAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},color:"#21487D"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/3.43776601.png",height:880,width:880,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AE1OTiciHykjGBcNBQAAAAAAAF5mbpGjuwA5NSg1LiMTAABMSDqOi3SDgGsJAAA+REwACgAABwAARUAwvbqb2te0z8yrjYpzAAAAAHNwW1xYS4OBbtXTrtTRrqKhiJKQe7SykwDY1a/Qzautq5DV063RzarJxqbHxKPT0KoAb2tWt7SU1tKq0c6nzcqnzMemwLqXY2JOABoPDQAAAJaQfM7Hq7y2lsW+qG1nWiklKwB/dWSqopfQx8HVy8PMwrbXzcbRyMCon5YdSl2c8L4tdAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#D0CCA9"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/4.a25addea.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AKnG0avG0bDJ0rbO1bnQ1bLK0LDIz7DIzwC9zcvAzszH0s+YpKKOnJu/y8XH0szE0MsAzM/E1NXJqqyiNhIAfV9Ls6qew7aszsq/AMzHwc3Jx8O3sOe+mfTKptG5qbSals/GxgC3tcazpa63sL7yzKz+1KbSurGqmKK7tcMAlpOsjoORhXqM3Lib37udtqSpmpKfpJmeAGpdZUZDQ1huTfPNpragjQABKqGJgbipowA6AABEZUhDkG1vg2d+h2kATCG3mISikoczn3nJIi6wxQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#BDB9C3"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/5.622e0a3d.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/APvi2OfQxmplWSkyKTA3LmtlW+zTyf7k2wD649ernJEAAAAiLCQABgoAAAC4ppz95tsA8tzRfHVqAAAACgAAgWpVbWBIdGxm8tvQAPPe1Ih/d1o3B5RnQcetjbamioZ2Z+vSygD549rLubGAYTeyfDzy4cPc0rbGraD33dMA79rS9d7Xm4h8mFgW26qFwaWF4svC9d3SAPfj2smzqzMZEGU1HcCkgsCaf9KrofDe1ACzn5lEMC9wUCx6TS2gh2prQzF3AADEpI9uLGl6mUkPuwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#AF7A43"},{src:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/6.b62b0cfc.png",height:400,width:400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAA00lEQVR42gHIADf/AIuZgJKgnWiGpViHsXeYtZirvaOkmbeogwBZiLpGebt6g4KQh1KWjV2Ml4yIqsmBorkAOnK2d4Sax5pP27R+za6Ar5x1gpaqjKvCAFiPuYmYk72pdK6XcMCvi6KUdV57ko6zyABpm7mPoLGnontscladnJSSmKBblLdvpsoAmqisw7OkwLWRvbKnv7G+kKfBfp64kqi6AJCepLqvj7++s627yru7t3iUoa+tqsLEywCRn6GfsKtutdG0wM/WxbB+mqV4oceVsc4HHXVkV3+NuQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},color:"#7197BD"}],m=e=>{let{index:t,avatar:r}=e;return(0,a.jsx)(l.default,{src:r.src,draggable:!1,priority:!0,quality:50,style:{background:r.color},alt:"avatar ".concat(t),className:"size-9 rounded-full border-2 border-white-400 ".concat(t>0?"-ml-1":""),width:38,height:38})},u=e=>{let{isOpen:t,onClose:r}=e;return(0,a.jsx)(A,{z:"z-50",isOpen:t,hideOnCloseButton:!0,onClose:r,children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{className:"mb-6 text-center text-3xl font-bold",children:c.K7}),(0,a.jsx)("p",{className:"text-center text-lg text-white-400/75",children:c.vk}),(0,a.jsx)("div",{className:"relative my-6 flex items-center justify-center select-none",children:d.map((e,t)=>(0,a.jsx)(m,{index:t,avatar:e},t))}),(0,a.jsxs)(s.A,{className:"my-6 flex items-center justify-center gap-2 rounded-2xl bg-blue-500 px-5 py-1 text-sm",onClick:()=>{let e=n.P.xGetRedirectUrl();window.location.href=e},children:[(0,a.jsx)("p",{className:"text-lg",children:"Login with"}),(0,a.jsx)(l.default,{src:i.Z,alt:"x",className:"w-5"})]})]})})}},77623:function(e,t,r){r.d(t,{T:function(){return l}});var a=r(16189),s=r(93276);let l=()=>{let e=(0,a.useRouter)(),t=(0,a.usePathname)(),r=(0,a.useSearchParams)(),l=e=>{let a=encodeURIComponent(e.replace("meme:",""));if(["/home","/trending"].includes(t))return"".concat(t,"/").concat(a);{let e=new URLSearchParams(r.toString());return e.set("memeId",a),(0,s.wS)(t,e)}};return{openMemeModal:t=>{let r=l(t);e.push(r,{scroll:!1})},getMemeModalPath:l}}},82033:function(e,t,r){r.r(t),r.d(t,{UploadProvider:function(){return p},useUpload:function(){return x}});var a=r(57348),s=r(16189),l=r(12465),i=r(15346),n=r(67425);let c=e=>{let{text:t,textButton:r,onClick:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t,r&&s&&(0,a.jsx)(n.A,{variant:"solid",color:"success",size:"sm",className:"text-white-400",onClick:s,children:r})]})};var o=r(77623),A=r(35971),d=r(71402),m=r(35878),u=r(74859);let g=e=>{let t=new FileReader;return new Promise((r,a)=>{t.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;if(!s){a(Error("Failed to read file"));return}r(new Uint8Array(s))},t.onerror=()=>a(t.error),t.readAsArrayBuffer(e)})};var h=r(81727);let f=(0,i.createContext)({}),p=e=>{let{children:t}=e,r=(0,s.useRouter)(),{openMemeModal:n}=(0,o.T)(),{isPostingMemes:p,setIsHovering:x}=(0,d.useProfile)(),{onUploadMeme:b}=(0,A.useFeed)(),[v,w]=(0,i.useState)([]),[y,k]=(0,i.useState)(),[j,C]=(0,i.useState)(!1),S=(0,i.useCallback)(async e=>{try{(0,l.sy)();let t=e.name.slice(0,20),r=(0,l.yv)("Uploading ".concat(t),{variant:"info",persist:!0});k(r);let s=await g(e),i="",o=await m.P.postMeme({filename:(0,h.Df)(e.name),filetype:e.type,bytes:s});if(!o)throw Error("Failed to upload");i=o.id;let A={...o,votes:{up:[],down:[]}};w(e=>[A,...e]),b(A),(0,l.sy)(y),k(void 0);let d=(0,l.yv)((0,a.jsx)(c,{text:"Successfully uploaded",textButton:"View",onClick:()=>{(0,l.sy)(d),n(i)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),k(void 0),(0,l.sy)(),(0,l.yv)("Failed to upload some memes",{variant:"error"})}},[y,n,b,w]),z=(0,i.useCallback)(async e=>{try{let t=(0,h.Df)(e),r=t.slice(0,20),s=(0,l.yv)("Uploading ".concat(r),{variant:"info",persist:!0});k(s);let i=await m.P.postMeme({filename:t,filetype:"image",source_url:e});if(!i)throw Error("Failed to paste link");w(e=>[i,...e]),b(i),(0,l.sy)(y),k(void 0);let o=(0,l.yv)((0,a.jsx)(c,{text:"Successfully pasted link",textButton:"View",onClick:()=>{(0,l.sy)(o),n(i.id)}}),{variant:"success",autoHideDuration:3e3})}catch(e){console.error(e),(0,l.yv)("Failed to paste link",{variant:"error"})}},[y,n,b]),D=(0,i.useMemo)(()=>(0,u.k)(S,1e3),[S]),B=(0,i.useCallback)(async e=>{if(void 0===y){if(e.size>33554432){(0,l.yv)("Please upload files 32MB or less",{variant:"error"});return}return D(e)}},[D,y]),R=(0,i.useCallback)(async e=>{if(e.clipboardData){let t=e.clipboardData.items;for(let e=0;e<t.length;e++){let r=t[e];if(r.type.includes("image")){let e=r.getAsFile();e&&await B(e)}}}},[B]);(0,i.useEffect)(()=>(window.addEventListener("paste",R),()=>{window.removeEventListener("paste",R)}),[R]);let U=async e=>{if(!(e.dataTransfer.items.length>0)||!e.dataTransfer.items[0].type.includes("image"))return!1;e.preventDefault(),x(!1),C(!0);let t=e.dataTransfer.files;try{for(let e=0;e<t.length;e++){let r=t[e];r.type.includes("image")&&await B(r)}p||r.push("/library")}catch(e){console.error(e)}finally{C(!1)}};return(0,a.jsx)(f.Provider,{value:{uploads:v,setUploads:w,startUpload:B,pasteImageLink:z,isBatchUploading:j},children:(0,a.jsx)("div",{className:"flex min-h-0 w-full min-w-0 flex-1",onDragOver:e=>{e.preventDefault(),e.dataTransfer.items.length>0&&e.dataTransfer.items[0].type.includes("image")&&x(!0)},onDragLeave:()=>x(!1),onDrop:U,children:t})})},x=()=>{let e=(0,i.useContext)(f);if(void 0===e)throw Error("useFeed must be used within UploadProvider");return e}},62568:function(e,t,r){r.d(t,{K7:function(){return l},jG:function(){return s},vk:function(){return i}});var a=r(54167);let s="MemeDeck",l="Meme With Frens",i="Create & discover memes with AI.";"".concat(s," â€“ ").concat(l),new URL(a.j7?"http://localhost:8080":"https://memedeck.xyz")}}]);