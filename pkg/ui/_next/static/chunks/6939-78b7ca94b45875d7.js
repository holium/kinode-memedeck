"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6939],{50327:function(e,l,t){t.d(l,{U:function(){return g}});var a=t(7590),s=t(69622),i=t(81662),n=t(67484),r=t(18386),c=t(15866),d=t(70244),o=t(72655),u=t(82581),h=t(79738),x=t(22890),m=t(80797);let f=async e=>new Promise((l,t)=>{let a=new Image,s=new FileReader;s.onload=()=>{a.src=s.result},a.onload=()=>{let t=(0,x.vO)(a.width,a.height),{paneWidth:s,paneHeight:i}=(0,x.rf)(h.L.One,t),n=document.createElement("canvas");n.width=s,n.height=i;let r=n.getContext("2d");if(!r)return;let c=a.width,d=a.height;(0,m.h)({ctx:r,image:a,targetWidth:s,targetHeight:i,imageWidth:c,imageHeight:d}),l({base64:n.toDataURL(e.type),aspectRatio:t,targetWidth:s,targetHeight:i})},s.onerror=e=>{t(e)},s.readAsDataURL(e)});var v=t(62247),p=t(89405);let g=e=>{let{initialSrc:l,imageRef:t,bgColor:h="bg-black-300",onParseImage:x,onClickDeleteMeme:m}=e,[g,j]=(0,u.useState)(l),[b,w]=(0,u.useState)(!1),[y,N]=(0,u.useState)(!1),k=(0,u.useCallback)(async e=>{if(e){if((0,o.sy)(),e.length>10){(0,o.yv)("Please upload 10 files or less",{variant:"error"});return}for(let l=0;l<e.length;l++)if(e[l].size>33554432){(0,o.yv)("Please upload files 32MB or less",{variant:"error"});return}w(!0);try{if(0===e.length)return;let l=e[0],{base64:t,aspectRatio:a,targetWidth:s,targetHeight:i}=await f(l),n=t.split(",")[1],r=Uint8Array.from(atob(n),e=>e.charCodeAt(0));await x(r,s,i,a),j(t)}catch(e){console.error("Error uploading files",e),(0,o.yv)("Error uploading files",{variant:"error"})}finally{w(!1)}}},[x]),C=(0,u.useCallback)(async()=>{N(!0);try{await m(),j(null)}catch(e){console.error("Error deleting meme",e)}finally{N(!1)}},[m]);return(0,a.jsxs)(i.w,{radius:"md",shadow:"none",className:(0,v.cn)(h,"border-1 border-transparent transition-all",g?"":"hover:border-orange-400"),children:[(0,a.jsx)("div",{className:"relative size-full max-h-full max-w-full aspect-square flex items-center justify-center ".concat(g?"":"cursor-pointer"),children:g?(0,a.jsx)(n.J,{ref:t,alt:"Image input",classNames:{wrapper:"size-full min-w-full min-h-full",img:"size-full object-cover rounded-none"},src:g}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.JO,{className:"size-8",icon:"hugeicons:image-upload-01"}),(0,a.jsx)("input",{type:"file",multiple:!1,accept:p.RL,className:"absolute inset-0 size-full cursor-pointer opacity-0",onChange:e=>k(e.target.files)})]})}),(0,a.jsxs)(r.i,{className:"gap-4 justify-end min-h-10 overflow-hidden absolute w-full z-10 -top-2.5 -right-2.5",children:[b?(0,a.jsx)(c.c,{size:"sm",color:"warning"}):null,g&&!b?(0,a.jsx)(d.A,{size:"sm",variant:"flat",radius:"full",className:"backdrop-blur-sm bg-red-900/70",isIconOnly:!0,color:"danger",isLoading:y,onClick:C,children:(0,a.jsx)(s.JO,{className:"size-5 !text-red-400",icon:"ic:baseline-close"})}):null]})]})}},10961:function(e,l,t){t.d(l,{E:function(){return n}});var a=t(7590),s=t(29908),i=t(92782);let n=e=>{let{children:l,...t}=e;return i.BB||i.cm?(0,a.jsx)(s.e,{...t,children:l}):(0,a.jsx)(a.Fragment,{children:l})}},55256:function(e,l,t){t.d(l,{W:function(){return n},y:function(){return r}});var a=t(7590),s=t(27613),i=t(10961);let n=e=>{let{avatarSrc:l,badgeSrc:t,screenName:n,userHandle:r,p:c="px-4 py-2"}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none ".concat(c),children:[(0,a.jsx)("div",{className:"bg-black-400 size-8 rounded-full",children:(0,a.jsx)(s.default,{className:"rounded-full",src:l,alt:r,width:40,height:40})}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 truncate",children:[(0,a.jsx)("div",{className:"max-w-48 truncate text-md font-semibold leading-tight",children:n}),t&&(0,a.jsx)(i.E,{content:"Kinode user",children:(0,a.jsx)(s.default,{src:t,alt:r,className:"rounded-sm",width:14,height:14})})]}),(0,a.jsxs)("div",{className:"text-white-400/50 text-sm",children:["@",r]})]})]})},r=()=>(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm select-none px-4 py-2 w-full",children:[(0,a.jsx)("div",{className:"bg-white-400/10 size-8 rounded-full"}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,a.jsx)("div",{className:"bg-white-400/10 w-24 h-[18px] rounded-md"}),(0,a.jsx)("div",{className:"bg-white-400/5 w-20 h-[20px] rounded-md"})]})]})},42145:function(e,l,t){t.d(l,{h:function(){return w}});var a=t(7590),s=t(81662),i=t(69622),n=t(15866),r=t(66011),c=t(82187),d=t(82581),o=t(55256),u=t(3333),h=t(7992),x=t(32701);let m=()=>{let{admins:e,onClickAddAdmin:l}=(0,h.z)(),[t,s]=(0,d.useState)(""),[m,f]=(0,d.useState)(""),{data:v,isFetching:p}=(0,u.fg)({search:m,start:0,limit:5}),g=(0,d.useCallback)((0,x.D)(e=>f(e),500),[]);(0,d.useEffect)(()=>{g(t)},[t,g]);let j=(0,d.useCallback)(e=>{s(e)},[]);return(0,a.jsx)("div",{className:"flex gap-3 p-3 justify-between",children:(0,a.jsxs)("div",{className:"flex gap-2 items-center flex-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-center size-8 bg-white-400/10 rounded-full",children:p?(0,a.jsx)(n.c,{size:"sm"}):(0,a.jsx)(i.JO,{icon:"tabler:plus",className:" size-4"})}),(0,a.jsx)(r.d,{items:v||[],placeholder:"Add admin",size:"sm",fullWidth:!0,classNames:{base:"flex-1 max-w-full"},value:t,onValueChange:j,onSelectionChange:e=>{let t=null==v?void 0:v.find(l=>l.id===e);t&&(l({id:t.id,name:t.name,handle:t.handle,avatar:t.avatar,badge_image_url:t.badge_image_url}),s(""))},children:l=>(0,a.jsx)(c.R,{value:l.id,isDisabled:e.some(e=>e.id===l.id),children:(0,a.jsx)(o.W,{avatarSrc:l.avatar,screenName:l.name,userHandle:l.handle,badgeSrc:l.badge_image_url,p:"p-0"},l.id)},l.id)})]})})};var f=t(21059),v=t(99395),p=t(70244),g=t(42739),j=t(60997);let b=e=>{let{admin:l}=e,{fetchedDeck:t,isAddingAdmin:s,isRemovingAdmin:n,onClickRemoveAdmin:r}=(0,h.z)(),c=(0,d.useMemo)(()=>(null==t?void 0:t.by.id.replace("user:",""))===l.id.replace("user:",""),[l.id,t]);return(0,a.jsxs)("div",{className:"flex gap-3 p-3 items-center justify-between border-b border-white-400/10",children:[(0,a.jsx)(o.W,{avatarSrc:l.avatar,badgeSrc:l.badge_image_url,screenName:l.name,userHandle:l.handle,p:"p-0"}),(0,a.jsx)("div",{className:"size-8 flex items-center justify-center",children:c?(0,a.jsx)("span",{className:"text-[10px] text-white-400/50",children:"Creator"}):(0,a.jsxs)(f.F,{children:[(0,a.jsx)(v.S,{children:(0,a.jsx)(p.A,{isIconOnly:!0,size:"sm",variant:"light",isLoading:s===l.id||n===l.id,children:(0,a.jsx)(i.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,a.jsx)(g.a,{children:(0,a.jsx)(j.W,{color:"danger",startContent:(0,a.jsx)(i.JO,{className:"size-5",icon:"tabler:trash"}),onClick:()=>r(l),children:"Remove admin"},"remove")})]})})]})},w=e=>{let{bg:l="bg-black-300"}=e,{admins:t}=(0,h.z)();return(0,a.jsx)(s.w,{className:l,shadow:"none",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[t.map(e=>(0,a.jsx)(b,{admin:e},e.id)),(0,a.jsx)(m,{})]})})}},65564:function(e,l,t){t.d(l,{G:function(){return d}});var a=t(7590),s=t(15866),i=t(14688),n=t(60453),r=t(50327),c=t(7992);let d=e=>{let{inputsBgColor:l="bg-black-300"}=e,{isFetching:t,name:d,onChangeName:o,description:u,onChangeDescription:h,coverPhoto:x,onUploadImage:m}=(0,c.z)();return t?(0,a.jsx)("div",{className:"w-full p-3 flex items-center justify-center",children:(0,a.jsx)(s.c,{})}):(0,a.jsxs)("section",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"size-[128px] sm:size-[168px]",children:(0,a.jsx)(r.U,{imageRef:void 0,bgColor:l,initialSrc:x,onParseImage:async e=>{m(e)},onClickDeleteMeme:async()=>{m(null)}})}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 flex-1",children:[(0,a.jsx)(i.Y,{isRequired:0===d.length,label:"Deck Name",fullWidth:!0,classNames:{inputWrapper:l},value:d,onValueChange:o}),(0,a.jsx)(n.Y,{isRequired:0===u.length,label:"Description",fullWidth:!0,classNames:{inputWrapper:l},value:u,onValueChange:h})]})]})}},28567:function(e,l,t){t.d(l,{F:function(){return r}});var a=t(7590),s=t(81662),i=t(33244),n=t(62247);let r=e=>{let{title:l,description:t,value:r,onValueChange:c,bg:d="bg-black-300",children:o}=e;return(0,a.jsxs)(s.w,{className:(0,n.cn)("flex flex-col gap-3 p-3 min-h-16 overflow-y-auto",d),shadow:"none",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-base font-semibold",children:l}),(0,a.jsx)("p",{className:"text-white-400/50 text-sm",children:t})]}),(0,a.jsx)(i.i,{color:"primary",classNames:{thumb:"bg-white-400",label:"text-white-400/75"},isSelected:r,onValueChange:c})]}),o]})}},24879:function(e,l,t){t.d(l,{D:function(){return n}});var a=t(7590),s=t(81750),i=t(22595);let n=e=>{let{isOpen:l,onClickClose:t,children:n}=e;return(0,a.jsx)(s.R,{size:"lg",classNames:{base:"overflow-hidden",header:"px-4 sm:px-6",body:"px-4 sm:px-6 min-h-96 max-h-96 overflow-hidden",footer:"px-4 sm:px-6"},hideCloseButton:!0,isOpen:l,onOpenChange:t,children:(0,a.jsx)(i.A,{children:n})})}},93741:function(e,l,t){t.d(l,{d:function(){return o}});var a=t(7590),s=t(21990),i=t(40774),n=t(10015),r=t(82581),c=t(81292);let d={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e<0?1e3:-1e3,opacity:0})},o=e=>{let{children:l}=e,{index:t}=(0,c.vT)(),[o,u]=(0,r.useState)(t),h=(0,r.useMemo)(()=>t>o?1:-1,[t,o]);return(0,r.useEffect)(()=>{u(t)},[t]),(0,a.jsx)(i.E.div,{className:"min-h-96",transition:{type:"spring",stiffness:300,damping:0},children:(0,a.jsx)(n.M,{initial:!1,custom:h,children:(0,a.jsx)(i.E.div,{custom:h,variants:d,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute size-full",children:(0,a.jsx)(s.I,{children:l})},t)})})}},20240:function(e,l,t){t.d(l,{Y:function(){return c}});var a=t(7590),s=t(89270),i=t(70244),n=t(82581),r=t(81292);let c=()=>{let{index:e,stepCount:l,isBackDisabled:t,isNextDisabled:c,goBack:d,goForward:o}=(0,r.vT)(),u=(0,n.useMemo)(()=>0===e,[e]),h=(0,n.useMemo)(()=>e===l-1,[e,l]),x=(0,n.useMemo)(()=>u?"Cancel":"Back",[u]),m=(0,n.useMemo)(()=>h?"Finish":"Next",[h]);return(0,a.jsx)(s.R,{children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-end gap-3",children:[(0,a.jsx)(i.A,{variant:"flat",isDisabled:t,onClick:d,children:x}),(0,a.jsx)(i.A,{variant:"solid",color:"primary",isDisabled:c,onClick:o,children:m})]})})}},83814:function(e,l,t){t.d(l,{e:function(){return c}});var a=t(7590),s=t(50695),i=t(81292);let n=e=>{let{text:l=""}=e;return(0,a.jsx)("h3",{className:"font-bold text-lg",children:l})},r=e=>{let{text:l=""}=e;return(0,a.jsx)("p",{className:"font-normal text-xs text-white-400/50",children:l})},c=e=>{let{title:l="",subtitle:t=""}=e,{index:c,stepCount:d}=(0,i.vT)();return(0,a.jsxs)(s.k,{className:"pt-6 flex flex-col gap-1",children:[(0,a.jsx)(n,{text:l}),(0,a.jsx)(r,{text:t}),(0,a.jsxs)("div",{className:"absolute top-1.5 right-2 text-white-400/25 text-sm leading-6 font-normal tracking-widest",children:[c+1,"/",d]})]})}},18095:function(e,l,t){t.d(l,{d:function(){return u}});var a=t(7590),s=t(69622),i=t(66011),n=t(70244),r=t(82187),c=t(82581),d=t(41781),o=t(3333);let u=e=>{var l,t;let{aestheticId:u,onSelect:h,hideDescription:x=!1,isMobile:m=!1,isSmall:f=!1,isDisabled:v=!1}=e,p=(0,o.iS)(),g=(0,c.useMemo)(()=>{var e;return null===(e=p.currentData)||void 0===e?void 0:e.studio_config},[null===(l=p.currentData)||void 0===l?void 0:l.studio_config]),j=(0,c.useMemo)(()=>g?g.aesthetics.find(e=>e.id===u):null,[u,g]),[b,w]=(0,c.useState)(!1),[y,N]=(0,c.useState)("No style");(0,d.y)({locked:b});let k=(0,c.useCallback)(e=>{if(e||h(null),!g)return;let l=g.aesthetics.find(l=>l.id===e);h(null!=l?l:null)},[g,h]);return g?(0,a.jsx)(i.d,{"aria-label":"aesthetic selector",label:f?null:"Style",placeholder:y,description:x?null:null!==(t=null==j?void 0:j.description)&&void 0!==t?t:"Applies a style to the prompt",classNames:{base:f?"min-w-0 w-auto max-w-32":"w-full",popoverContent:"min-w-[280px]"},inputProps:{classNames:{input:f?"!text-xs":"",inputWrapper:f?"bg-black-300":""}},selectedKey:u,size:f?"sm":"md",radius:f?"full":"md",onFocus:e=>{m&&e.preventDefault()},onOpenChange:e=>{w(e),e?N("Type to filter"):N("No style")},className:"z-0",isClearable:!1,isDisabled:v,endContent:j?(0,a.jsx)(n.A,{size:"sm",isIconOnly:!0,variant:"flat",className:f?"bg-black-300":"",onClick:()=>k(null),children:(0,a.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}):null,onSelectionChange:k,children:g.aesthetics.map(e=>(0,a.jsx)(r.R,{"aria-label":e.name,className:"flex flex-column justify-center gap-2",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.description})]})},e.id))}):null}},49682:function(e,l,t){t.d(l,{z:function(){return v}});var a=t(7590),s=t(69622),i=t(33151),n=t(70244),r=t(61594),c=t(82187),d=t(82581),o=t(41781),u=t(3333),h=t(62247);let x=e=>"base"===e?0:1,m=e=>{switch(e){case 0:return"Default Characters";case 1:return"Crypto Characters";default:return"Other"}},f=e=>{let l=-1,t=[];for(let a of e)a.section!==l&&(t.push({id:Math.random().toString(),section:a.section,isDivider:!0}),l=a.section),t.push(a);return t},v=e=>{var l;let{characterId:t,onSelect:v,isSmall:p,showClearButton:g=!0,isDisabled:j=!1}=e,b=(0,u.iS)(),w=(0,d.useMemo)(()=>{var e;return null===(e=b.currentData)||void 0===e?void 0:e.studio_config},[null===(l=b.currentData)||void 0===l?void 0:l.studio_config]),[y,N]=(0,d.useState)(!1);(0,o.y)({locked:y});let k=(0,d.useMemo)(()=>{var e;return null!==(e=null==w?void 0:w.characters)&&void 0!==e?e:[]},[null==w?void 0:w.characters]),C=(0,d.useMemo)(()=>f(k.slice().sort((e,l)=>"normal"===e.id?1:"normal"===l.id?-1:0).map(e=>{var l;return{...e,avatar:null!==(l=e.thumbnail)&&void 0!==l?l:"",section:x(e.grouping),isSelected:t===e.id,isDivider:!1}}).sort((e,l)=>e.section-l.section)),[k,t]),S=(0,d.useCallback)(e=>{let l=k.find(l=>l.id===e);l&&v(l)},[k,v]),z=(0,d.useMemo)(()=>C.filter(e=>0===e.section).length,[C]),_=(0,d.useMemo)(()=>C.filter(e=>1===e.section).length,[C]);return(0,a.jsx)(i.g,{items:C,isOpen:y,onOpenChange:N,placeholder:"Select a character","aria-label":"Character",classNames:{base:p?"w-auto min-w-32":"w-full",trigger:p?"min-h-0 h-8 px-1 bg-black-300":"h-[80px]",popoverContent:"bg-[#0F0F0F] border-1 border-black-100 min-w-[340px]",listbox:"h-fit selector-list-box",listboxWrapper:"min-h-[400px]"},radius:p?"full":"md",isDisabled:j,selectedKeys:[t.replace("ai_character:","")].filter(Boolean),onChange:e=>S(e.target.value),endContent:t&&g&&(0,a.jsx)(n.A,{size:"sm",isIconOnly:!0,variant:"flat",onClick:()=>v(null),children:(0,a.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}),renderValue:e=>e.map(e=>{var l,t,s,i,n;return(null===(l=e.data)||void 0===l?void 0:l.isDivider)?null:(0,a.jsxs)("div",{className:(0,h.cn)("flex items-center",p?"gap-2":"gap-4"),children:[(0,a.jsx)(r.h,{alt:(null===(t=e.data)||void 0===t?void 0:t.id)+"-avatar",className:(0,h.cn)("shrink-0",p?"size-4 max-w-6 max-h-6":""),radius:p?"full":"md",size:p?"sm":"lg",src:null===(s=e.data)||void 0===s?void 0:s.avatar}),p?(0,a.jsx)("div",{className:"font-semibold text-xs",children:null===(i=e.data)||void 0===i?void 0:i.name}):(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-tiny text-default-600",children:"Character"}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:null===(n=e.data)||void 0===n?void 0:n.name})]})]},e.key)}),children:e=>e.isDivider?(0,a.jsx)(c.R,{hideSelectedIcon:!0,isReadOnly:!0,"aria-disabled":!0,className:"col-span-full",classNames:{base:"bg-transparent hover:!bg-transparent cursor-default"},children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsxs)("h3",{className:"uppercase text-xs tracking-wide font-medium text-white-400/50 select-none",children:[m(e.section)," "]}),(0,a.jsx)("div",{className:"text-xs font-normal text-white-400/70 bg-white-400/10 rounded-full px-1 py-0.5 min-w-[20px] text-center",children:0===e.section?z:_}),(0,a.jsx)("hr",{className:"flex-1 opacity-10"},"divider-".concat(Math.random()))]})},null==e?void 0:e.id):(0,a.jsx)(c.R,{"aria-label":null==e?void 0:e.name,color:e.isSelected?"primary":"default",variant:"solid","data-hover":!0,hideSelectedIcon:!0,classNames:{base:"flex-1 flex flex-col gap-0 ".concat(e.isSelected?"bg-primary-400":""),wrapper:"flex flex-col"},children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,a.jsx)(r.h,{alt:(null==e?void 0:e.id)+"-avatar",radius:"md",size:"lg",src:null==e?void 0:e.avatar}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:null==e?void 0:e.name})})]})},null==e?void 0:e.id)})}},45673:function(e,l,t){t.d(l,{K:function(){return i}});var a=t(82581),s=t(32701);let i=e=>{let{sendUpdate:l}=e,t=(0,a.useRef)({}),[i,n]=(0,a.useState)(!1),r=(0,a.useMemo)(()=>(0,s.k)(l,500),[l]);return{hasUnsavedChanges:i,queueUpdate:(0,a.useCallback)(e=>{t.current={...t.current,...e},n(!0),r(t.current).finally(()=>{t.current={},n(!1)})},[r])}}},7992:function(e,l,t){t.d(l,{u:function(){return d},z:function(){return o}});var a=t(7590),s=t(72655),i=t(82581),n=t(45673),r=t(3333);let c=(0,i.createContext)(void 0),d=e=>{var l;let{deckId:t,children:d}=e,o=(0,i.useMemo)(()=>t.replace("deck:",""),[t]),[u]=(0,r.X2)(),[h,{isLoading:x}]=(0,r.zk)(),[m,f]=(0,i.useState)(!0),[v,p]=(0,i.useState)(null),[g,j]=(0,i.useState)(""),[b,w]=(0,i.useState)(""),[y,N]=(0,i.useState)(null),[k,C]=(0,i.useState)([]),[S,z]=(0,i.useState)(null),[_,D]=(0,i.useState)(null!==(l=null==v?void 0:v.admins)&&void 0!==l?l:[]),[I,O]=(0,i.useState)(null),[R,M]=(0,i.useState)(null),[E,F]=(0,i.useState)(!1),[A,P]=(0,i.useState)(!1),[U,W]=(0,i.useState)(null),{hasUnsavedChanges:L,queueUpdate:B}=(0,n.K)({sendUpdate:h}),q=(0,i.useCallback)(e=>B({id:o,...e}),[o,B]),J=(0,i.useCallback)(async e=>{var l,t;let a=await u(e);if(!a.data)return;let s=a.data;p(s),j(s.title),w(null!==(l=s.description)&&void 0!==l?l:""),N(s.cover_photo),C(null!==(t=s.external_links)&&void 0!==t?t:[]),D(s.admins),F(s.require_approval),P(s.auto_post),W(s.matching_rules)},[]),Y=(0,i.useCallback)(e=>{j(e),q({title:e})},[q]),V=(0,i.useCallback)(e=>{w(e),q({description:e})},[q]),K=(0,i.useCallback)(e=>{N(e?URL.createObjectURL(new Blob([e])):null),q({cover_photo:e?Array.from(e):null})},[q]),T=(0,i.useCallback)(e=>{let l=[...k,e];C(l),q({external_links:l})},[k,q]),H=(0,i.useCallback)(e=>{let l=k.filter(l=>l!==e);z(e),q({external_links:l}),C(l),z(null)},[k,q]),G=(0,i.useCallback)(e=>{try{O(e.id),D(l=>[...l,e]),q({add_admin:e.id})}catch(l){console.error("Failed to add admin",l),(0,s.yv)("Failed to add admin",{variant:"error"}),D(l=>l.filter(l=>l.id!==e.id))}finally{O(null)}},[q]),X=(0,i.useCallback)(e=>{try{M(e.id),q({remove_admin:e.id}),D(l=>l.filter(l=>l.id!==e.id))}catch(e){console.error("Failed to remove admin",e),(0,s.yv)("Failed to remove admin",{variant:"error"})}finally{M(null)}},[q]),Q=(0,i.useCallback)(e=>{F(e),q({require_approval:e})},[q]),Z=(0,i.useCallback)(e=>{P(e),q({auto_post:e})},[q]),$=(0,i.useCallback)(e=>{W(l=>{var t,a,s;let i={characters:void 0!==e.characters?e.characters:null!==(t=null==l?void 0:l.characters)&&void 0!==t?t:null,styles:void 0!==e.styles?e.styles:null!==(a=null==l?void 0:l.styles)&&void 0!==a?a:null,keywords:void 0!==e.keywords?e.keywords:null!==(s=null==l?void 0:l.keywords)&&void 0!==s?s:null};return q({matching_rules:i}),i})},[q]);return(0,i.useEffect)(()=>{f(!0),J(o).finally(()=>f(!1))},[J,o]),(0,a.jsx)(c.Provider,{value:{deckId:o,isFetching:m,fetchedDeck:v,name:g,onChangeName:Y,description:b,onChangeDescription:V,coverPhoto:y,onUploadImage:K,links:k,onClickAddLink:T,isRemovingLink:S,onClickRemoveLink:H,admins:_,isAddingAdmin:I,onClickAddAdmin:G,isRemovingAdmin:R,onClickRemoveAdmin:X,adminApproval:E,onChangeAdminApproval:Q,autoPost:A,onChangeAutoPost:Z,matchingRules:U,onChangeMatchingRules:$,isSaving:x,hasUnsavedChanges:L},children:d})},o=()=>{let e=(0,i.useContext)(c);if(void 0===e)throw Error("useEditDeck must be used within EditDeckProvider");return e}},52494:function(e,l,t){t.d(l,{NewDeckProvider:function(){return S},W:function(){return z}});var a=t(7590),s=t(23143),i=t(72655),n=t(82581),r=t(81292),c=t(42145),d=t(14688),o=t(28567),u=t(18095),h=t(49682),x=t(7992);let m=()=>{var e,l,t,s;let{autoPost:i,matchingRules:n,onChangeMatchingRules:r,onChangeAutoPost:c}=(0,x.z)();return(0,a.jsx)(o.F,{title:"Auto-post",description:"Any new generation that meets your constraints will be posted to your deck.",bg:"bg-white-400/5",value:i,onValueChange:c,children:i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.d,{aestheticId:null==n?void 0:null===(e=n.styles)||void 0===e?void 0:e[0],onSelect:e=>{r({styles:e?[e.id]:null})},hideDescription:!0}),(0,a.jsx)(h.z,{characterId:null!==(t=null==n?void 0:null===(l=n.characters)||void 0===l?void 0:l[0])&&void 0!==t?t:"",onSelect:e=>{r({characters:e?[e.id]:null})}}),(0,a.jsx)(d.Y,{label:"Keywords",placeholder:"happy",isClearable:!0,value:null!==(s=null==n?void 0:n.keywords)&&void 0!==s?s:"",onValueChange:e=>{r({keywords:e})}})]})})};var f=t(65564),v=t(24879),p=t(93741),g=t(20240),j=t(83814),b=t(96616);let w=e=>{let{deckId:l,onClickClose:t}=e;return(0,a.jsx)(v.D,{isOpen:!!l,onClickClose:t,children:l&&(0,a.jsx)(x.u,{deckId:l,children:(0,a.jsx)(y,{deckId:l,onClickClose:t})})})},y=e=>{let{deckId:l,onClickClose:t}=e,i=(0,s.useRouter)(),{name:d,description:o,coverPhoto:u}=(0,x.z)(),h=(0,n.useCallback)(e=>0===e&&(0===d.length||0===o.length||!u),[u,o.length,d.length]),v=(0,n.useCallback)(e=>{if(0===e)return t()},[t]),w=(0,n.useCallback)(e=>{if(l&&2===e){let e=(0,b.o4)(l);return i.push(e)}},[l,i]);return(0,a.jsxs)(r.H2,{stepCount:3,isNextDisabled:h,onBack:v,onNext:w,children:[(0,a.jsxs)(r.Cj,{index:0,children:[(0,a.jsx)(j.e,{title:"Tell Us About Your Deck",subtitle:"A deck is a collection of memes around a theme, style, or character."}),(0,a.jsx)(p.d,{children:(0,a.jsx)(f.G,{inputsBgColor:"bg-white-400/5"})}),(0,a.jsx)(g.Y,{})]}),(0,a.jsxs)(r.Cj,{index:1,children:[(0,a.jsx)(j.e,{title:"Invite Friends",subtitle:"Invite your friends to help manage your deck."}),(0,a.jsx)(p.d,{children:(0,a.jsx)(c.h,{bg:"bg-white-400/5"})}),(0,a.jsx)(g.Y,{})]}),(0,a.jsxs)(r.Cj,{index:2,children:[(0,a.jsx)(j.e,{title:"Post Settings",subtitle:"Set rules for how memes get posted into your deck."}),(0,a.jsx)(p.d,{children:(0,a.jsx)(m,{})}),(0,a.jsx)(g.Y,{})]})]})};var N=t(3333),k=t(89405);let C=(0,n.createContext)(void 0),S=e=>{let{children:l}=e,t=(0,s.useSearchParams)(),[r,{isLoading:c}]=(0,N.uG)(),d=(0,n.useMemo)(()=>t.get("newDeckId"),[t]),o=(0,n.useCallback)(async()=>{try{let e=await r({title:"",description:"",auto_post:!1,require_approval:!1,cover_photo:null,admins:null,matching_rules:null,post_ids:null});if(!e.data)throw Error();let l=e.data,t=(0,k.eC)(l.id),a=new URL(window.location.href);a.searchParams.delete("newContestId"),a.searchParams.set("newDeckId",t),window.history.pushState({},"",a.toString())}catch(e){console.error(e),(0,i.yv)("Failed to create new deck",{variant:"error"})}},[r]),u=(0,n.useCallback)(()=>{let e=new URL(window.location.href);e.searchParams.delete("newDeckId"),window.history.pushState({},"",e.toString())},[]);return(0,a.jsxs)(C.Provider,{value:{isCreating:c,onClickNewDeck:o},children:[l,(0,a.jsx)(w,{deckId:d,onClickClose:u})]})},z=()=>{let e=(0,n.useContext)(C);if(void 0===e)throw Error("useNewDeck must be used within NewDeckProvider");return e}}}]);