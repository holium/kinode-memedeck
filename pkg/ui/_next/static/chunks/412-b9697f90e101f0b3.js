"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[412],{35971:function(e,t,r){r.r(t),r.d(t,{FeedProvider:function(){return o},useFeed:function(){return l}});var n=r(57348),a=r(15346),u=r(71402);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,a.useState)([]),[l,d]=(0,a.useState)(!1),[c,s]=(0,a.useState)({}),[f,m]=(0,a.useState)(""),[h,g]=(0,a.useState)([]),[p,v]=(0,a.useState)(!1),[_,b]=(0,a.useState)(""),[S,w]=(0,a.useState)([]),[k,A]=(0,a.useState)(!1),{userMemes:y,setUserMemes:x}=(0,u.useProfile)(),[C,I]=(0,a.useState)(""),[T,M]=(0,a.useState)([]),[P,j]=(0,a.useState)(!1),[E,D]=(0,a.useState)([]),[R,U]=(0,a.useState)(!1),[F,L]=(0,a.useState)([]),[O,G]=(0,a.useState)(!1),N=(0,a.useCallback)(e=>r.find(t=>(t.post_type,t.post.id===e))||T.find(t=>t.id===e)||F.find(t=>t.id===e)||E.find(t=>t.id===e)||h.find(t=>t.id===e)||S.find(t=>t.id===e)||Object.values(y).reduce((t,r)=>r.find(t=>t.id===e)||t,void 0),[r,T,F,E,h,S,y]),Q=(0,a.useCallback)(e=>{let t=r.findIndex(t=>t.post.id===e),n=T.findIndex(t=>t.id===e),a=E.findIndex(t=>t.id===e),u=F.findIndex(t=>t.id===e);return{feedItemIndex:t,libraryItemIndex:n,uploadsItemIndex:a,savedItemIndex:u,searchResultsItemIndex:h.findIndex(t=>t.id===e),deckResultsItemIndex:S.findIndex(t=>t.id===e),userMemesItemIndex:Object.values(y).reduce((t,r)=>{let n=r.findIndex(t=>t.id===e);return -1!==n?n:t},-1)}},[S,r,T,F,h,E,y]),W=(0,a.useCallback)((e,t,r,n)=>{let{feedItemIndex:a,libraryItemIndex:u,uploadsItemIndex:i,savedItemIndex:l,searchResultsItemIndex:d,deckResultsItemIndex:c,userMemesItemIndex:s}=Q(t);if(-1===a&&-1===u&&-1===i&&-1===l&&-1===d&&-1===c&&-1===s)return;let f=(t,a)=>{let u={...a[t]},i={react:n,by:e,id:":irrelevant:"+Math.random(),avatar:":irrelevant:"+Math.random(),handle:":irrelevant:"+Math.random(),name:":irrelevant:"+Math.random()};return"add"===r?"upvote"===n?(u.votes.up.push(i),u.votes.down=u.votes.down.filter(t=>t.by!==e)):(u.votes.down.push(i),u.votes.up=u.votes.up.filter(t=>t.by!==e)):"upvote"===n?u.votes.up=u.votes.up.filter(t=>t.by!==e):u.votes.down=u.votes.down.filter(t=>t.by!==e),[...a.slice(0,t),u,...a.slice(t+1)]};-1!==a&&o(e=>f(a,e)),-1!==u&&M(e=>f(u,e)),-1!==i&&D(e=>f(i,e)),-1!==l&&L(e=>f(l,e)),-1!==d&&g(e=>f(d,e)),-1!==c&&w(e=>f(c,e)),-1!==s&&x(e=>{let r={...e},n=Object.keys(e).find(r=>e[r].some(e=>e.id===t));return n?(r[n]=f(s,r[n]),r):e})},[Q,x]),Y=(0,a.useCallback)((e,t)=>{o(r=>0===r.length?r:[...e.map(e=>({id:Math.random().toString(36).substring(2,15),post_type:"meme",by:t.twitter_profile.id,by_badge_image_url:t.user.badge_image_url,by_avatar:t.twitter_profile.profile_image_url_https,by_handle:t.twitter_profile.screen_name,by_name:t.twitter_profile.name,post:{...e,is_creator:!0,creator_name:e.creator_name,creator_handle:e.creator_handle,creator_avatar:e.creator_avatar},votes:{up:[],down:[]},created_at:1e6*Date.now(),updated_at:1e6*Date.now(),published_at:1e6*Date.now()})),...r])},[]),Z=(0,a.useCallback)((e,t)=>{o(r=>0===r.length?r:r.map(r=>{if("meme"in r&&r.post.id===e){let e=r.post;return{...r,post:{...e,...t}}}return r}))},[]),z=(0,a.useCallback)(e=>{let{feedItemIndex:t,libraryItemIndex:r,uploadsItemIndex:n,savedItemIndex:a,searchResultsItemIndex:u,deckResultsItemIndex:i,userMemesItemIndex:l}=Q(e);-1!==t&&o(t=>t.filter(t=>t.post.id!==e)),-1!==r&&M(t=>t.filter(t=>t.id!==e)),-1!==n&&D(t=>t.filter(t=>t.id!==e)),-1!==a&&L(t=>t.filter(t=>t.id!==e)),-1!==u&&g(t=>t.filter(t=>t.id!==e)),-1!==i&&w(t=>t.filter(t=>t.id!==e)),-1!==l&&x(t=>{let r={...t},n=Object.keys(t).find(r=>t[r].some(t=>t.id===e));return n?(r[n]=r[n].filter(t=>t.id!==e),r):t})},[Q,x]),H=(0,a.useCallback)(e=>{T.length>0&&M(t=>[e,...t]),E.length>0&&D(t=>[e,...t])},[T.length,E.length]);return(0,n.jsx)(i.Provider,{value:{feed:r,setFeed:o,hasFetchedFeed:l,setHasFetchedFeed:d,feedActions:c,setFeedActions:s,appendMemesToFeed:Y,removeItemFromFeed:z,updateMemeInFeed:Z,searchQuery:f,setSearchQuery:m,searchResults:h,setSearchResults:g,hasFetchedSearchResults:p,setHasFetchedSearchResults:v,deckQuery:_,setDeckQuery:b,deckResults:S,setDeckResults:w,hasFetchedDeckResults:k,setHasFetchedDeckResults:A,librarySearchQuery:C,setLibrarySearchQuery:I,library:T,setLibrary:M,hasFetchedLibrary:P,setHasFetchedLibrary:j,uploads:E,setUploads:D,hasFetchedUploads:R,setHasFetchedUploads:U,saved:F,setSaved:L,hasFetchedSaved:O,setHasFetchedSaved:G,onUploadMeme:H,getItem:N,voteOnItem:W},children:t})},l=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useFeed must be used within FeedProvider");return e}},71402:function(e,t,r){r.r(t),r.d(t,{ProfileProvider:function(){return i},useProfile:function(){return o}});var n=r(57348),a=r(15346);let u=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,a.useState)(null),[o,l]=(0,a.useState)({}),[d,c]=(0,a.useState)({}),[s,f]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[g,p]=(0,a.useState)([]),[v,_]=(0,a.useState)(!1),[b,S]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1);return(0,n.jsx)(u.Provider,{value:{profile:r,setProfile:i,userMemes:o,setUserMemes:l,userBookmarks:d,setUserBookmarks:c,topDecks:s,setTopDecks:f,topDecksWeekly:m,setTopDecksWeekly:h,recommendedFollows:g,setRecommendedFollows:p,isSignupModalOpen:v,setIsSignupModalOpen:_,isPostingMemes:b,setIsPostingMemes:S,isHovering:w,setIsHovering:k},children:t})},o=()=>{let e=(0,a.useContext)(u);if(void 0===e)throw Error("useProfile must be used within ProfileProvider");return e}},74859:function(e,t,r){r.d(t,{D:function(){return n},k:function(){return a}});let n=(e,t)=>{let r=null;return function(){for(var n=arguments.length,a=Array(n),u=0;u<n;u++)a[u]=arguments[u];r&&clearTimeout(r),r=setTimeout(()=>{r&&clearTimeout(r);let t=e(...a);return r=null,t},t)}},a=(e,t)=>{let r=null;return function(){for(var n=arguments.length,a=Array(n),u=0;u<n;u++)a[u]=arguments[u];return new Promise((n,u)=>{let i=async()=>{r&&clearTimeout(r);try{let t=await e(...a);n(t)}catch(e){u(e)}r=null};r&&clearTimeout(r),r=setTimeout(i,t)})}}},81727:function(e,t,r){r.d(t,{Df:function(){return i},Po:function(){return u},RL:function(){return o},Wb:function(){return c},_6:function(){return d},qr:function(){return s},uZ:function(){return l}});var n=r(97102),a=r(41973);let u=e=>{let t=new Date(e/1e6),r=Math.round((new Date().getTime()-t.getTime())/1e3),n=Math.round(r/60),a=Math.round(n/60);return r<60?"".concat(r,"s ago"):n<60?"".concat(n,"m ago"):a<24?"".concat(a,"h ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},i=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase(),o="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small";function l(){let e=(0,n.Z)().replace(/-/g,"_"),t="meme:".concat(e);return console.log("Generated new meme id",t),t}function d(e,t,r){return 1===e?t:r}function c(e){return"/deck/".concat(e.id.replace("deck:",""))}function s(e){switch(e){case a.u.Today:return"Today";case a.u.Week:return"This Week";case a.u.Month:return"This Month";case a.u.Year:return"This Year";case a.u.AllTime:return"of All Time"}}},93276:function(e,t,r){function n(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function a(e){return"/deck/".concat(e.replace("deck:",""))}function u(e){return"/home/".concat(e.replace("meme:",""))}r.d(t,{Wi:function(){return u},o4:function(){return a},wS:function(){return n}})},94787:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/x.493d8304.png",height:45,width:41,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAeElEQVR42h3JIQoCURiF0dtUEOwmMQlGnSKuYbAIbsFucAViGMFgE0b3YdRueUuxyH+/p8zEwxGLvGaMkCcUYkvy/dOJISlmkrz3hTMvStRw4IobNfr1lLtZHHm48tztljzZ+eqTpShIMQr5wJtaXsY0hL59Nl79AU07Rc3uyJI/AAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8}},15667:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}}]);