(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6148],{28119:function(e,a,s){Promise.resolve().then(s.bind(s,28618))},28618:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var t=s(91104),r=s(63137),l=s(26816),c=s(87221),n=s(61698),i=s(64737),d=s(33968),h=s(9051),o=s(60402),x=s(41116),m=s(83301),u=s(30027);let f=e=>{let{ranking:a,character:s}=e;return(0,t.jsx)(u.default,{href:"/character/".concat(s.character.replace("ai_character:","")),className:"scale-img-on-hover select-none",children:(0,t.jsxs)("div",{className:"relative cursor-pointer min-w-28 w-28 md:min-w-40 md:w-40 overflow-hidden flex flex-col justify-center bg-black-400 hover:bg-black-200 rounded-lg shadow-lg hover:shadow-2xl",children:[(0,t.jsx)("div",{className:"w-full overflow-hidden",children:(0,t.jsx)(m.default,{src:s.thumbnail,alt:s.name,width:256,height:256,className:"size-full aspect-square object-cover object-center bg-black-100/25"})}),(0,t.jsx)("div",{className:"flex px-3 h-10 items-center",children:(0,t.jsxs)("h3",{className:"flex gap-2 font-medium text-md tracking-wide w-full",children:[(0,t.jsx)("span",{className:"text-white-400/70",children:a}),(0,t.jsx)("span",{className:"text-white-400/95 truncate",children:s.name})]})})]})},s.character)},p=e=>{let{interval:a}=e,{topCharacters:s,setTopCharacters:l}=(0,x.useProfile)(),c=s.filter(e=>"ai_character:normal"!==e.character),[n,i]=(0,r.useState)(!0),h=(0,r.useCallback)(async e=>{i(!0),d.P.getTopCharacters({interval:e,limit:20}).then(l).finally(()=>i(!1))},[l]);return((0,r.useEffect)(()=>{h(a)},[h,a]),n&&0===s.length)?(0,t.jsx)("div",{className:"flex px-3 gap-3 w-full overflow-x-auto scrollbar-hide",children:[1,2,3,4,5,6,7,8,9].map(e=>(0,t.jsxs)("div",{className:"min-w-[112px] w-[112px] h-[152px] md:min-w-40 md:h-[200px] bg-black-400 rounded-lg shadow-lg hover:shadow-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"w-full aspect-square bg-black-100/25"}),(0,t.jsx)("div",{className:"w-full h-10 px-3 flex items-center",children:(0,t.jsx)("div",{className:"w-2/3 h-6 bg-black-100/50 rounded-md"})})]},e))}):(0,t.jsx)("div",{className:"flex px-3 gap-3 w-full overflow-x-auto scrollbar-hide",children:c.sort((e,a)=>a.total_generations-e.total_generations).map(e=>(0,t.jsx)(f,{ranking:e.rank,character:e},e.character))})};var w=s(21204),g=s(35650),j=s(59442);async function v(e,a){return(await d.P.search(e,a)).memes}function b(){var e;let a=null!==(e=(0,l.useSearchParams)().get("query"))&&void 0!==e?e:void 0,{profile:s,searchInterval:d,setSearchInterval:m,isSignupModalOpen:u,setIsSignupModalOpen:f}=(0,x.useProfile)(),{searchQuery:b,setSearchQuery:N,searchResults:k,setSearchResults:_,hasFetchedSearchResults:F,setHasFetchedSearchResults:S}=(0,o.useFeed)(),{isFetching:y,onSearch:C}=(0,i.M)({feed:k,setFeed:_,hasFetched:F,setHasFetched:S,searchQuery:b,setSearchQuery:N,initialQuery:a,fetchOnLoad:!0,interval:d,sortBy:w.a.Hot,fetchFn:v}),P=(0,r.useMemo)(()=>b.length>0,[b.length]);return(0,r.useEffect)(()=>(a&&N(a),()=>{N(""),_([]),S(!1)}),[a,N,_,S]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex pr-3 items-center justify-between",children:[(0,t.jsx)(c.SearchBar,{autofocus:!0,initialSearch:a,border:"border-b border-transparent",value:b,onSearch:e=>C(e,d)}),P&&(0,t.jsx)(g.m,{size:"md",interval:d,onSelect:e=>{_([]),m(e)}})]}),!P&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("header",{className:"flex items-end p-3 gap-4",children:[(0,t.jsx)("h1",{className:"text-white-400 font-bold text-3xl tracking-wide",children:"Explore"}),(0,t.jsx)(g.m,{interval:d,onSelect:e=>{_([]),m(e),C("",e)}})]}),(0,t.jsx)("h4",{className:"p-3 text-white-400/70 tracking-wide font-bold uppercase text-sm md:text-base",children:"Top Characters"}),(0,t.jsx)(p,{interval:d}),(0,t.jsx)("h4",{className:"px-3 pt-6 pb-0 text-white-400/70 tracking-wide font-bold uppercase text-sm md:text-base",children:"Trending Memes"})]}),(0,t.jsx)(n.o,{memes:k,isFetching:y,hasFetched:F,hasSearched:P,renderItem:(e,a)=>(0,t.jsx)(h.P,{meme:e,onClick:s?void 0:()=>f(!0)},a)}),u&&(0,t.jsx)(j.c,{isOpen:u,onClose:()=>f(!1)})]})}}},function(e){e.O(0,[3107,6557,2376,7826,9749,5981,27,330,9566,6593,1397,9697,1035,3968,8933,3634,6443,9514,5171,1744],function(){return e(e.s=28119)}),_N_E=e.O()}]);