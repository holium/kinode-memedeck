(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9650],{4361:function(e,l,a){Promise.resolve().then(a.bind(a,26758))},26758:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return eG}});var t=a(7590),s=a(23143),i=a(70244),n=a(15866),r=a(27613),c=a(4763),o=a(72655),d=a(82581),u=a(9899),m=a(69622),x=a(66011),h=a(61594),f=a(82187),p=a(3333);let g=e=>{var l,a;let{postId:s,selectedDeck:i,onSelectDeck:n,alreadySelected:r,maxW:c="max-w-64",isLoading:o=!1}=e,{data:d,isLoading:u}=(0,p.Ug)({start:0,limit:20,meme_id:s}),g=null!=d?d:[];return(0,t.jsx)("div",{className:"flex gap-3 justify-between ".concat(c),children:(0,t.jsx)("div",{className:"flex gap-1 items-center flex-1",children:(0,t.jsx)(x.d,{placeholder:"Add to deck",size:"lg",radius:"md",fullWidth:!0,classNames:{selectorButton:"h-10"},multiple:!0,isLoading:u||o,onSelectionChange:e=>{var l;n(e,null!==(l=g.find(l=>l.id===e))&&void 0!==l?l:null)},selectedKey:null!=i?i:null,startContent:i?(0,t.jsx)(h.h,{className:"min-w-8",src:null!==(a=null===(l=g.find(e=>e.id===i))||void 0===l?void 0:l.cover_photo)&&void 0!==a?a:void 0,size:"sm",radius:"sm"}):(0,t.jsx)("div",{className:"size-8 min-w-8 flex items-center justify-center",children:(0,t.jsx)(m.JO,{className:"size-5 text-white-400/50",icon:"tabler:plus"})}),children:g.map(e=>{var l;return(0,t.jsx)(f.R,{value:e.id,title:e.title,isReadOnly:null==r?void 0:r.some(l=>l.id===e.id),description:"by @".concat(e.by.handle),startContent:(0,t.jsx)(h.h,{src:null!==(l=e.cover_photo)&&void 0!==l?l:void 0,size:"sm",radius:"sm",className:"min-w-8"}),classNames:{title:"font-semibold"}},e.id)})})})})};var v=a(12173),j=a(92782),b=a(96616);let w=e=>{let{memeId:l}=e,a=async()=>{let e=encodeURIComponent("".concat((0,j.L)()).concat((0,b.Wi)(l)));window.open("https://x.com/intent/tweet?text=".concat(e),"_blank")};return(0,t.jsxs)(i.A,{fullWidth:!0,className:"flex items-center justify-center gap-2 rounded-md bg-blue-500 px-5 py-1 text-sm",onClick:a,children:[(0,t.jsx)("p",{className:"text-lg",children:"Share on"}),(0,t.jsx)(r.default,{src:v.Z,alt:"X",className:"w-5"})]})};var N=a(28986);let y=e=>{let{postId:l,memeId:a,memeUrl:s,onClose:m}=e,[x]=(0,p.X_)(),[h,f]=(0,d.useState)(null),[v,j]=(0,d.useState)(!1),y=async()=>{try{if(!h)throw Error("Deck ID is missing");if(!l)throw Error("Post ID is missing");j(!0),await x({deck_id:h,post_id:l})}catch(e){console.error(e),(0,o.yv)("Failed to add meme to deck",{variant:"error"})}finally{m(),j(!1)}};return(0,t.jsx)(u.Z,{onClick:m,children:(0,t.jsxs)("form",{className:"relative flex w-full min-w-0 max-w-lg flex-col gap-3 rounded-xl bg-black-400 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("header",{className:"relative flex w-full items-center justify-end px-3 pt-3",children:(0,t.jsx)(i.A,{isIconOnly:!0,className:"rounded-full",variant:"light",size:"sm",onClick:m,children:(0,t.jsx)(r.default,{src:N.Z,alt:"close",className:"w-3"})})}),(0,t.jsx)("main",{className:"min-h-72 gap-7 flex flex-col items-center justify-center",children:a&&s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"text-xl -mb-2",children:"Meme Posted to the Feed \uD83C\uDF89"}),(0,t.jsx)(c.default,{href:(0,b.Wi)(a),className:"size-40 md:size-52 z-40 rounded-md bg-black-100 object-contain",children:(0,t.jsx)("div",{className:"relative size-full select-none overflow-hidden rounded-xl bg-white-400/10",children:(0,t.jsx)(r.default,{draggable:!1,className:"absolute z-1 inset-0 size-full object-contain",src:s,alt:"Meme preview",width:640,height:640,sizes:"640px",quality:100})})}),(0,t.jsxs)("section",{className:"flex flex-col gap-5 p-3 items-center",children:[(0,t.jsx)(w,{memeId:a}),(0,t.jsxs)("div",{className:"flex w-1/2 items-center justify-center relative",children:[(0,t.jsx)("hr",{className:"w-full border-0.5 border-white-400/10"}),(0,t.jsx)("span",{className:"absolute px-2 bg-black-400 text-white-400/50",children:"or"})]}),(0,t.jsx)(g,{postId:a,selectedDeck:h,onSelectDeck:e=>{f(e)}})]})]}):(0,t.jsx)(n.c,{})}),(0,t.jsx)("footer",{className:"h-14 p-3 flex items-center justify-end",children:h&&(0,t.jsx)(i.A,{size:"sm",variant:"solid",color:"primary",isLoading:v,onClick:y,children:"Done"})})]})})};var k=a(25689),C=a(70817),z=a(78221),_=a(39659),D=a(34239),A=a(62247);let O=()=>{let{contest:e}=(0,D.C)();if(!(0,s.useSearchParams)().get("contestId")&&!e)return null;let l=(null==e?void 0:e.status)==="upcoming";return(0,t.jsx)("div",{className:"p-2 pt-0 md:p-3",children:(0,t.jsx)("footer",{className:(0,A.cn)("relative h-12 md:h-16 w-full overflow-hidden","flex items-center justify-center gap-3 md:gap-4","bg-black-400 rounded-2xl border border-violet-400","shadow-lg"),children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.U,{contest:e,h:"h-full",rounded:"rounded-none"}),(0,t.jsx)("div",{className:"flex flex-1 items-start min-w-0",children:(0,t.jsxs)(k.O,{className:"flex flex-col gap-0 items-start justify-center h-full max-w-full",href:(0,b.CU)(e),children:[(0,t.jsx)("h2",{className:"text-white-400 font-bold text-sm md:text-sm leading-5 max-w-full truncate",children:e.title}),(0,t.jsx)("p",{className:"text-white-400/75 font-light text-xs md:text-sm leading-4 max-w-full truncate ",children:e.description})]})}),(0,t.jsx)("div",{className:"hidden sm:block h-full z-0",children:(0,t.jsx)(z.s,{contest:e,startContent:(0,t.jsx)("div",{className:"text-white-400/75 text-xs pr-3",children:l?"Starts in:":"Ends in:"}),hideTrail:!0,bg:"bg-black-300",rounded:"rounded-none"})})]}):(0,t.jsx)(C.W,{size:"sm",isIndeterminate:!0,"aria-label":"Loading...",className:"w-full max-w-sm p-3",classNames:{indicator:"bg-violet-500"}})})})};var S=a(60453),I=a(89660),F=a(50327);let M=e=>{let{label:l,imageRef:a,isBaseImage:s=!1,initialSrc:i,setImage:n}=e,{composedMemeId:r,activePanelIdx:c,activePanel:o,dispatchPanelAction:u}=(0,D.C)(),[m]=(0,p.X5)(),[x]=(0,p.Jp)(),h=async(e,l,a,t)=>{var i;if(!r||!o)return;let d=await m({meme_id:r,panel_id:o.id,bytes:Array.from(e),width:l,height:a,filetype:"image/jpeg",is_face:!s});if(!d.data)return;let x=d.data.panel_config;if(!x)return;let h=s?x.faceswap.base_image:x.faceswap.face_image;h&&n(h),u({idx:c,action:"update-panel",panel_type:"faceswap",panel_config:{image:{url:"",width:s?l:x.faceswap.base_width,height:s?a:x.faceswap.base_height},faceswap:{face_image:x.faceswap.face_image,base_image:x.faceswap.base_image,faceswap_strength:null!==(i=x.faceswap.faceswap_strength)&&void 0!==i?i:1,base_width:s?l:x.faceswap.base_width,base_height:s?a:x.faceswap.base_height}},local:{selectedAspectRatio:s?t:o.local.selectedAspectRatio}})},f=(0,d.useCallback)(async()=>{r&&o&&(await x({meme_id:r,panel_id:o.id,is_face:!s}),n(void 0))},[o,r,x,s,n]);return(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("p",{className:"text-white-400 font-medium text-small",children:l}),(0,t.jsx)(F.U,{imageRef:a,initialSrc:i,onParseImage:h,onClickDeleteMeme:f})]})},L=()=>{var e;let{activePanel:l,activePanelIdx:a,onClickFaceswap:s,dispatchPanelAction:n}=(0,D.C)(),r=(0,d.useRef)(null),c=(0,d.useCallback)(e=>{n({idx:a,action:"update-panel",panel_config:{faceswap:{faceswap_strength:e}}})},[a,n]),o=(0,d.useCallback)(e=>{n({idx:a,action:"update-panel",panel_config:{faceswap:{face_image:e}}})},[a,n]),u=(0,d.useCallback)(e=>{n({idx:a,action:"update-panel",panel_config:{faceswap:{base_image:e}}})},[a,n]),x=null==l?void 0:l.panel_config.faceswap.base_image,h=null==l?void 0:l.panel_config.faceswap.face_image,f=null!==(e=null==l?void 0:l.panel_config.faceswap.faceswap_strength)&&void 0!==e?e:.5;return(0,t.jsxs)("div",{className:"flex size-full flex-col gap-3 justify-between",children:[(0,t.jsxs)("section",{className:" w-full flex-1 flex flex-col gap-4 overflow-hidden lg:overflow-y-scroll",children:[(0,t.jsx)(M,{imageRef:r,label:"Base Image",isBaseImage:!0,initialSrc:null!=x?x:null,setImage:u},"faceswap-base-image"),(0,t.jsx)(M,{label:"Face Image",initialSrc:null!=h?h:null,setImage:o},"faceswap-face-image"),(0,t.jsx)(I.L,{size:"md",step:.01,color:"warning",label:(0,t.jsx)("p",{className:"text-white-400 font-medium text-small",children:"Faceswap Strength"}),maxValue:1,minValue:.1,value:f,defaultValue:.5,onChange:e=>c(e),className:"w-full my-1"})]}),(0,t.jsx)("footer",{className:"w-full pb-3",children:l&&(0,t.jsx)(i.A,{fullWidth:!0,className:"text-md h-11 min-h-11",variant:"shadow",color:"primary",size:"md",isLoading:l.local.isGenerating,isDisabled:!h||!x,onClick:()=>{var e,a;if(!h||!x||!r.current)return;let t={width:null===(e=r.current)||void 0===e?void 0:e.naturalWidth,height:null===(a=r.current)||void 0===a?void 0:a.naturalHeight};s(l.idx,h,x,t)},children:(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(m.JO,{icon:"tabler:replace-filled",className:"fill-orange-400 size-5"}),(0,t.jsx)("h4",{children:"Swap Faces"})]})},"desktop-faceswap")})]},"faceswap-controls-".concat(a))};var E=a(57130),W=a(48119),P=a(99230),R=a(14688);let J=()=>{var e;let{activePanelIdx:l,activePanel:a,isGenerateDisabled:s,onChangeTextOverlay:i,onClickGenerate:n}=(0,D.C)();if(!a)return null;let{top_text:r,bottom_text:c}=null!==(e=a.panel_config.text_overlay)&&void 0!==e?e:{};return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(R.Y,{classNames:{input:"placeholder:text-white-400/25",inputWrapper:"!bg-black-400 rounded-lg"},fullWidth:!0,label:"Top text",placeholder:"Add top text",value:null!=r?r:"",onValueChange:e=>{i(l,"top_text",e)},maxLength:120,isClearable:!0,onKeyDown:e=>{"Enter"!==e.key||s||(e.preventDefault(),n(l,a))}},"desktop-top-text-overlay"),(0,t.jsx)(R.Y,{classNames:{input:"placeholder:text-white-400/25",inputWrapper:"!bg-black-400 rounded-lg"},fullWidth:!0,label:"Bottom text",placeholder:"Add bottom text",value:null!=c?c:"",onValueChange:e=>{i(l,"bottom_text",e)},maxLength:120,isClearable:!0,onKeyDown:e=>{"Enter"!==e.key||s||(e.preventDefault(),n(l,a))}},"desktop-bottom-text-overlay")]})};var T=a(7922);let V=e=>{var l;let{isMobile:a=!1}=e,{activePanelIdx:s,activePanel:n,isGenerateDisabled:r,onClickGenerate:c,dispatchPanelAction:o}=(0,D.C)();if(!n)return null;let{seed:d,seed_type:u,user_negative_prompt:m}=null!==(l=n.panel_config.prompt)&&void 0!==l?l:{};return(0,t.jsxs)(E.d,{variant:"shadow",className:"border-default-200 dark:border-default-100",children:[(0,t.jsx)(W.G,{classNames:{title:"text-base",content:"pt-0 pb-4 flex flex-col gap-6"},"aria-label":"Text",title:"Text",subtitle:"Add text to your image",children:(0,t.jsx)(J,{})},"1"),(0,t.jsxs)(W.G,{classNames:{title:"text-base",content:"pt-0 pb-4 flex flex-col gap-6"},"aria-label":"Advanced",title:"Advanced",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"inline-flex flex-row gap-2 justify-between",children:[(0,t.jsx)("label",{className:"text-white-400 font-medium text-small",children:"Seed"}),(0,t.jsxs)(P.g,{children:[(0,t.jsx)(i.A,{size:"sm",className:"h-5 px-0",color:"warning",variant:"fixed"===u?"solid":"bordered",onClick:()=>{o({idx:s,action:"update-panel",panel_config:{prompt:{seed_type:"fixed"}}})},children:"Fixed"}),(0,t.jsx)(i.A,{size:"sm",className:"h-5 px-0",color:"warning",variant:"random"===u?"solid":"bordered",onClick:()=>{o({idx:s,action:"update-panel",panel_config:{prompt:{seed:(0,T.qb)(),seed_type:"random"}}})},children:"Random"})]})]}),(0,t.jsx)(R.Y,{fullWidth:!0,type:"number",label:null,classNames:{input:"placeholder:text-white-400/30",inputWrapper:"!bg-black-400 rounded-lg"},value:(null!=d?d:"").toString(),onValueChange:e=>{let l=parseInt(e);isNaN(l)&&(l=void 0),o({idx:s,action:"update-panel",panel_config:{prompt:{seed:l}}})}})]}),!a&&(0,t.jsx)(S.Y,{className:"px-0",classNames:{input:"placeholder:text-white-400/30",inputWrapper:"!bg-black-400 rounded-lg"},fullWidth:!0,label:"Negative prompt",labelPlacement:"outside",placeholder:'What do you want the image NOT to look like? E.g. "no cats"',value:m,onValueChange:e=>{o({idx:s,action:"update-panel",panel_config:{prompt:{user_negative_prompt:e}}})},onKeyDown:e=>{"Enter"!==e.key||r||(e.preventDefault(),c(s,n))}},"desktop-negative-prompt")]},"2")]})},H=()=>{var e;let{activePanelIdx:l,activePanel:a,dispatchPanelAction:s}=(0,D.C)();return a?(0,t.jsxs)("div",{className:"w-full my-1 flex flex-col gap-2 px-0",children:[(0,t.jsx)(I.L,{size:"md",step:.1,color:"foreground",label:(0,t.jsxs)("div",{className:"flex flex-row gap-1.5 items-center",children:[(0,t.jsx)("p",{className:"text-white-400 font-medium text-small",children:"Guidance "}),(0,t.jsx)("p",{className:"text-default-500 font-normal text-tiny",children:"(cfg_scale)"})]}),showSteps:!0,maxValue:3,minValue:1.5,value:null===(e=a.panel_config.prompt)||void 0===e?void 0:e.cfg_scale,onChange:e=>{s({idx:l,action:"update-panel",panel_config:{prompt:{cfg_scale:e}}})}}),(0,t.jsx)("p",{className:"text-default-500 font-normal text-small",children:"How close the AI follows the prompt, lower is more creative."})]}):null};var U=a(64405),B=a(79604),K=a(72728),Y=a(35961),Z=a(30967),q=a(79738);let G={base:(0,K.cn)("inline-flex flex-col m-0 p-2 max-w-[100%] items-center justify-center","w-full cursor-pointer rounded-lg 3 !border-medium border-default-100","data-[selected=true]:border-warning bg-black-300 hover:border-white-400/10"),label:"inline-flex flex-col items-center",labelWrapper:"m-0 gap-1 min-w-0 max-w-full",description:"truncate text-center text-white-400/90 max-w-full",wrapper:"hidden"},X={square:"icon-park-twotone:square-small",landscape:"icon-park-twotone:rectangle-small",portrait:"icon-park-twotone:rectangle-small"},Q=()=>{(0,p.iS)();let{activePanel:e,activePanelIdx:l,selectedLayout:a,dispatchPanelAction:s}=(0,D.C)();if(!e)return null;let{selectedAspectRatio:i}=e.local;return a!==q.L.One?null:(0,t.jsx)(Y.X,{classNames:{wrapper:"flex-nowrap gap-2",label:"text-white-400 font-medium text-small"},defaultValue:"square",label:"Aspect Ratio",orientation:"horizontal",value:i,onValueChange:e=>{s({idx:l,action:"update-panel",local:{selectedAspectRatio:e}})},children:Object.entries(X).sort((e,l)=>{let[a]=e,[t]=l;return a.localeCompare(t)}).map(e=>{let[l]=e;return(0,t.jsxs)(Z.J,{classNames:G,value:l,children:[(0,t.jsx)("div",{className:"w-full flex justify-center",children:(0,t.jsx)(m.JO,{icon:X[l],className:"portrait"===l?"rotate-90":"",width:40})}),(0,t.jsx)("p",{className:"text-sm text-white-400/90 text-center",children:l.charAt(0).toUpperCase()+l.slice(1)})]},l)})})};var $=a(33244);let ee=()=>{let{activePanelIdx:e,activePanel:l,dispatchPanelAction:a}=(0,D.C)();if(!l)return null;let{isExpandedPrompt:s}=l.local;return(0,t.jsx)("div",{className:"flex flex-row gap-2 justify-start",children:(0,t.jsx)($.i,{size:"sm",color:"warning",classNames:{thumb:"bg-white-400",label:"text-white-400/75"},onValueChange:l=>{a({idx:e,action:"update-panel",local:{isExpandedPrompt:l}}),localStorage.setItem("isExpandedPrompt",JSON.stringify(l))},isSelected:s,children:"Expand details in your prompt with AI."})})},el=()=>{var e;let{activePanel:l,activePanelIdx:a,isGenerateDisabled:s,dispatchPanelAction:n,onClickGenerate:r}=(0,D.C)();if(!l)return null;let{user_positive_prompt:c}=null!==(e=l.panel_config.prompt)&&void 0!==e?e:{};return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(S.Y,{classNames:{input:"placeholder:text-white-400/25"},fullWidth:!0,label:"Prompt",endContent:(0,t.jsx)(i.A,{isIconOnly:!0,isDisabled:!c,style:{display:c?"flex":"none"},size:"sm",radius:"full",variant:"light",className:"absolute top-1 right-1",onClick:()=>{n({idx:a,action:"update-panel",panel_config:{prompt:{user_positive_prompt:""}}})},children:(0,t.jsx)(m.JO,{icon:"ic:baseline-clear",width:16,className:"text-white-400"})}),autoFocus:!0,isMultiline:!0,isRequired:!0,placeholder:"Describe the meme you want to generate",value:c,onValueChange:e=>{n({idx:a,action:"update-panel",panel_config:{prompt:{user_positive_prompt:e}}})},onKeyDown:e=>{s||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),r(a,l))}},"desktop-prompt"),(0,t.jsx)(ee,{})]})},ea=e=>{let{isMobile:l=!1}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.U,{}),(0,t.jsx)(U.Z,{isMobile:l}),!l&&(0,t.jsx)(el,{}),(0,t.jsx)(Q,{}),(0,t.jsx)(H,{}),(0,t.jsx)(V,{isMobile:l})]})};var et=a(38725);let es=()=>{let{contest:e,activePanelIdx:l,activePanel:a,isGenerateDisabled:s,onClickGenerate:n}=(0,D.C)();if(!a)return null;let{isGenerating:c}=a.local;return(0,t.jsx)("div",{className:"p-3",children:(0,t.jsx)(i.A,{fullWidth:!0,className:(0,A.cn)("text-md h-11",e?"bg-violet-500 shadow-violet-400/40":""),variant:"shadow",color:"primary",size:"md",isLoading:c,isDisabled:s,onClick:()=>{n(l,a)},children:(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[!c&&(0,t.jsx)(r.default,{src:et.Z,alt:"Generate",className:"size-5"}),(0,t.jsx)("h1",{children:"Generate"})]})},"desktop-generate")})};var ei=a(62179),en=a(47758),er=a(39858),ec=a(58563),eo=a(36572);let ed=()=>{let{activePanel:e,onClickLibrary:l}=(0,D.C)(),{search:a,searchDebounced:s,onSearch:i}=(0,ec.U)(),[n,r]=(0,d.useState)(1),{currentData:c,isLoading:o,isFetching:u,isError:m}=(0,p.FK)({start:0,limit:20*n,interval:eo.u.AllTime,search:s}),x=(0,d.useCallback)(()=>{u||o||m||r(e=>{let l=!c||0===c.length,a=(null!=c?c:[]).length<20*e;return l||a?e:e+1})},[c,m,u,o]),h=(0,d.useCallback)(e=>{let{scrollLeft:l,clientWidth:a,scrollWidth:t}=e.currentTarget;l+a>=t-400&&x()},[x]);return e?(0,t.jsxs)("div",{className:"flex size-full min-h-0 flex-col gap-3",children:[(0,t.jsx)("div",{children:(0,t.jsx)(er.T,{value:a,placeholder:"Search your library",onSearch:i})}),(0,t.jsx)("div",{className:"flex-1 w-full min-h-0 overflow-y-scroll overflow-x-hidden",onScroll:h,children:(0,t.jsx)(en.o,{items:null!=c?c:[],hasFetched:!!c,hasSearched:s.length>0,isFetching:u,className:"overflow-hidden -mr-3",breakpoints:{default:2},renderItem:(a,s)=>(0,t.jsx)(ei.Y,{item:a,isSelected:a.id===e.panel_config.image.id,onClick:()=>l(a)},"".concat(s,"-").concat(a.id))})})]}):null};var eu=a(10961);let em=()=>{let{activePanelIdx:e,selectedTab:l,onClickTab:a}=(0,D.C)();return(0,t.jsxs)("header",{className:"flex gap-3 p-3 items-center justify-between",children:[(0,t.jsxs)("h1",{className:"text-lg uppercase tracking-wide",children:["Panel ",e+1]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(eu.E,{content:"AI Generation",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsx)(i.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"generate"===l?"warning":"default",onClick:()=>a("generate"),children:(0,t.jsx)(m.JO,{icon:"ph:sparkle-fill",className:"fill-orange-400 size-5"})})}),(0,t.jsx)(eu.E,{content:"Text",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsx)(i.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"text"===l?"warning":"default",onClick:()=>a("text"),children:(0,t.jsx)(m.JO,{icon:"fluent:text-t-24-filled",className:"fill-orange-400 size-6"})})}),(0,t.jsx)(eu.E,{content:"Your Library",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsx)(i.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"library"===l?"warning":"default",onClick:()=>a("library"),children:(0,t.jsx)(m.JO,{icon:"fluent:emoji-meme-24-regular",className:"fill-orange-400 size-5"})})}),(0,t.jsx)(eu.E,{content:"Faceswap",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsx)(i.A,{size:"sm",isIconOnly:!0,variant:"flat",color:"faceswap"===l?"warning":"default",onClick:()=>a("faceswap"),children:(0,t.jsx)(m.JO,{icon:"tabler:replace-filled",className:"fill-orange-400 size-5"})})})]})]})},ex=()=>{let{activePanel:e,activePanelIdx:l,onChangeTextPanel:a}=(0,D.C)();return e?(0,t.jsx)("div",{children:(0,t.jsx)(R.Y,{classNames:{input:"placeholder:text-white-400/25",inputWrapper:"!bg-black-500 rounded-lg"},fullWidth:!0,label:"Panel text",placeholder:"Add panel text",value:e.panel_config.text,onValueChange:t=>{a(l,e.id,t)},maxLength:120,isClearable:!0},"desktop-panel-text")}):null},eh=e=>{let{isMobile:l}=e,{selectedTab:a,activePanel:s}=(0,D.C)();return s?(0,t.jsxs)("section",{className:"flex flex-1 flex-col size-full",children:[(0,t.jsx)(em,{}),(0,t.jsx)("div",{className:"flex flex-1 flex-col w-full min-h-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-4 px-3 overflow-y-auto",children:["generate"===a&&(0,t.jsx)(ea,{isMobile:l}),"text"===a&&(0,t.jsx)(ex,{}),"library"===a&&(0,t.jsx)(ed,{}),"faceswap"===a&&(0,t.jsx)(L,{})]})}),"generate"===a&&!l&&(0,t.jsx)(es,{})]}):null};var ef=a(95642),ep=a(56274),eg=a(43062),ev=a(62131);let ej=()=>{var e,l;let a;let{postId:s,activePanelIdx:i}=(0,D.C)(),{data:r}=(0,p.yD)(null!=s?s:""),[c]=(0,p.NU)(),[o]=(0,p.Rp)();if(!r)return(0,t.jsx)("div",{className:"size-full flex items-center justify-center",children:(0,t.jsx)(n.c,{})});let d=Object.values(null!==(l=null===(e=r.meme)||void 0===e?void 0:e.panels)&&void 0!==l?l:{}).find(e=>e.idx===i);(null==d?void 0:d.panel_type)==="faceswap"&&(a=d.panel_config);let u=null==d?void 0:d.panel_config,m=null==u?void 0:u.prompt;return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("header",{className:"my-2 flex flex-col gap-5",children:(0,t.jsx)(eg.s,{handle:r.by.handle,name:r.by.name,avatar:r.by.avatar,createdAt:r.created_at,publishedAt:r.updated_at})}),m&&(0,t.jsx)(ep.R,{prompt:m}),a&&(0,t.jsx)(ev.Z,{panelData:a}),(0,t.jsx)("div",{children:(0,t.jsx)(ef.I,{readOnly:!0,size:"md",postId:r.id,user:{id:""},deckId:"feed",initialVotes:r.votes,postVoteApi:c,deleteVoteApi:o})})]})},eb=()=>{var e;let{postId:l,activePanel:a,activePanelIdx:s,isGenerateDisabled:n,contest:c,dispatchPanelAction:o,onClickGenerate:d}=(0,D.C)();if(!a)return null;let{isGenerating:u}=a.local;return(0,t.jsx)("div",{className:(0,A.cn)("w-full flex flex-col lg:hidden","min-h-96 max-h-96 overflow-y-scroll","border-white-400/10 border-t bg-black-400"),children:l?(0,t.jsx)("section",{className:"w-full p-4 pb-24",children:(0,t.jsx)(ej,{},l)}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("section",{className:"w-full flex gap-3 p-4",children:[(0,t.jsx)(S.Y,{label:"Prompt",placeholder:"Describe the meme you want to generate",size:"lg",classNames:{base:"flex-1",input:"placeholder:text-white-400/25",label:"z-1"},fullWidth:!0,isRequired:!0,isMultiline:!0,value:null===(e=a.panel_config.prompt)||void 0===e?void 0:e.user_positive_prompt,onValueChange:e=>{o({idx:s,action:"update-panel",panel_config:{prompt:{user_positive_prompt:e}}})},onKeyDown:e=>{n||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d(s,a))}},"mobile-prompt"),(0,t.jsx)(i.A,{isIconOnly:!0,className:(0,A.cn)("text-md",c?"bg-violet-500":""),variant:"solid",color:"primary",radius:"full",isLoading:u,isDisabled:n,onClick:()=>{n||d(s,a)},children:(0,t.jsx)(r.default,{src:et.Z,alt:"Generate",className:"size-6"})},"mobile-generate")]}),(0,t.jsx)("section",{className:"w-full p-1 pb-24",children:(0,t.jsx)(eh,{isMobile:!0})})]})})};var ew=a(56597),eN=a(33151);let ey={[q.L.One]:{label:"One Pane",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/one-pane.2f9a7f4d.svg",height:30,width:30,blurWidth:0,blurHeight:0}},[q.L.TwoVertical]:{label:"Two Vertical",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/two-pane-vertical.bcad13c4.svg",height:30,width:30,blurWidth:0,blurHeight:0}},[q.L.TwoHorizontal]:{label:"Two Horizontal",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/two-pane-horizontal.ad349fa3.svg",height:30,width:30,blurWidth:0,blurHeight:0}},[q.L.Four]:{label:"Four Panes",icon:{src:"/memedeck:memedeck:meme-deck.os/_next/static/media/four-pane.09ada0ab.svg",height:30,width:30,blurWidth:0,blurHeight:0}}},ek=()=>{let{selectedLayout:e,onSelectPanelLayout:l,isCreatingProject:a,postId:s}=(0,D.C)();return(0,t.jsx)(eN.g,{size:"sm",value:e,isDisabled:a||!!s,selectedKeys:[e],defaultSelectedKeys:[q.L.One],startContent:(0,t.jsx)(r.default,{src:ey[e].icon,alt:ey[e].label,width:24,height:24}),classNames:{base:"min-w-20 max-w-20 sm:max-w-48",value:"hidden sm:block"},onChange:e=>{let a=e.target.value;a&&l(a)},"aria-label":"Panel Layout",children:Object.entries(ey).map(e=>{let[l,{label:a,icon:s}]=e;return(0,t.jsx)(f.R,{value:l,"aria-label":a,startContent:(0,t.jsx)(r.default,{src:s,alt:a,width:24,height:24}),classNames:{title:"hidden sm:block"},children:a},l)})})};var eC=a(51884),ez=a(99313),e_=a(50608),eD=a(64064),eA=a(8413),eO=a(89065);let eS=e=>{var l;let{meme:a}=e,s=(0,p.iS)(),i=(0,d.useMemo)(()=>{var e;return null===(e=s.currentData)||void 0===e?void 0:e.studio_config},[null===(l=s.currentData)||void 0===l?void 0:l.studio_config]),n=(0,d.useRef)(null);return(0,d.useEffect)(()=>{(async()=>{if(!i)return;let e=n.current;if(!e)return;let l=a.panels,t=a.panel_layout;if(!l||!t)return;let s=(0,eA.xe)(l)[0];s&&await (0,eO.mr)({canvas:e,studioPanels:l,studioLayout:t,paneAspectRatio:s.local.selectedAspectRatio})})()},[i,a.panel_layout,a.panels]),(0,t.jsx)("div",{className:"size-full flex items-center justify-center",children:(0,t.jsx)("canvas",{ref:n,className:"w-full max-h-full object-contain"})})},eI=e=>{let{meme:l,style:a}=e,{composedMemeId:s,onClickHistory:i}=(0,D.C)(),n=(0,d.useMemo)(()=>l.id===s,[s,l.id]),r=(0,d.useMemo)(()=>{var e;return(null!==(e=l.posts)&&void 0!==e?e:[]).length>0},[l.posts]);return(0,t.jsx)("div",{style:a,className:"w-full pb-3 cursor-pointer",onClick:()=>i(l),children:(0,t.jsxs)("div",{className:(0,K.cn)("size-full relative bg-black-0 rounded-md border-2 overflow-hidden",n?"border-blue-500":"border-white-400/10"),children:[(0,t.jsx)(eS,{meme:l}),!r&&(0,t.jsx)(eD.z,{size:"sm",variant:"solid",radius:"sm",color:"default",className:"absolute top-1.5 right-1 font-medium shadow-2xl",children:"Draft"})]})})};var eF=a(22890);let eM=()=>{var e;let l=(0,p.iS)(),[a,s]=(0,d.useState)(1),{data:i,isFetching:r,isError:c}=(0,p.sb)({start:20*(a-1),limit:20,sources:["generated"]}),o=(0,d.useMemo)(()=>(null!=i?i:[]).filter(e=>!e.is_saved),[i]),u=(0,d.useMemo)(()=>{var e;return null===(e=l.currentData)||void 0===e?void 0:e.studio_config},[null===(e=l.currentData)||void 0===e?void 0:e.studio_config]),{isSidebarMenuOpen:m,composedMemeId:x}=(0,D.C)(),h=(0,d.useCallback)(()=>{r||c||s(e=>{let l=!i||0===i.length,a=(null!=i?i:[]).length<20*e;return l||a?e:e+1})},[i,c,r]),f=(0,d.useCallback)(e=>{let{clientHeight:l,scrollHeight:a,scrollTop:t}=e;l+t>=a-400&&h()},[h]),g=(0,d.useCallback)(e=>{let{index:l}=e,t=(null!=i?i:[]).length<20*a;if(l===o.length)return t?0:64;let s=o[l],n=null==s?void 0:s.panels,r=null==s?void 0:s.panel_layout;if(n&&r&&u){let e=(0,eA.xe)(n)[0];if(!e)return console.error("Failed to find first panel"),178;let l=e.local.selectedAspectRatio,a=(0,eF.rf)(r,l),{canvasWidth:t,canvasHeight:s}=(0,eF.GJ)(r,a);return 269/(t/s)+12}return 178},[u,i,o,a]),v=(0,d.useCallback)(e=>{let{rowIndex:l,key:a,style:s}=e;if(l===o.length)return r?(0,t.jsx)("div",{style:s,className:"flex w-full justify-center px-3",children:(0,t.jsx)(n.c,{})},a):(0,t.jsx)("div",{},a);let i=o[l];return i?(0,t.jsx)(eI,{meme:i,style:s},a):(0,t.jsx)("div",{},a)},[o,r]);return m?(0,t.jsxs)("div",{className:"flex-1 flex-col gap-4 flex border-r-1 border-black-100 overflow-hidden",children:[0===o.length&&(0,t.jsx)("p",{className:"mx-3 text-white-400/50 text-sm",children:"No images generated yet"}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(ez.ZP,{children:e=>{let{height:l}=e;return(0,t.jsx)(e_.rj,{scrollDirection:"vertical",className:"px-3 overflow-x-hidden overflow-y-auto",width:293,height:l,rowCount:o.length+1,rowHeight:g,columnCount:1,columnWidth:269,overscanColumnCount:10,onScroll:f,cellRenderer:v})}})})]}):null},eL=()=>{let{data:e}=(0,p.iS)(),l=(0,d.useMemo)(()=>(0,eC.br)(eC.mQ.Home,!1),[]),{isSidebarMenuOpen:a,toggleIsSidebarMenuOpen:s,isCreatingProject:n,onClickNewProject:r}=(0,D.C)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{isOpen:a,onClick:s,children:(0,t.jsx)("div",{})}),(0,t.jsx)("aside",{className:(0,A.cn)("fixed top-0 left-0 h-full w-72 z-[100]","bg-black-300 shadow-2xl","transform transition-transform duration-200",{"translate-x-0":a,"-translate-x-full":!a}),children:(0,t.jsxs)("div",{className:"size-full flex flex-col gap-3 pb-3",children:[(0,t.jsx)("section",{className:"flex flex-col px-3",children:(0,t.jsxs)("header",{className:"h-14 min-h-14 flex items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"light",onClick:s,children:(0,t.jsx)(m.JO,{icon:"mdi:menu",className:"size-6"})}),(0,t.jsx)(ew.B,{keepStudio:!0})]}),e&&(0,t.jsx)(i.A,{as:c.default,isIconOnly:!0,size:"sm",variant:"light",href:"/u/".concat(e.handle),children:(0,t.jsx)(h.h,{size:"sm",name:e.handle,src:e.avatar})})]})}),(0,t.jsxs)("section",{className:"flex flex-col gap-3 pb-3 px-3",children:[(0,t.jsx)(i.A,{size:"md",variant:"flat",color:"warning",className:"min-w-0",isLoading:n,onClick:()=>r(),startContent:!n&&(0,t.jsx)(m.JO,{className:"size-4",icon:"akar-icons:plus"}),children:"New meme"}),(0,t.jsx)(i.A,{as:c.default,size:"md",variant:"flat",startContent:(0,t.jsx)(m.JO,{icon:l,className:"size-5"}),href:"/home",children:"Return home"})]}),(0,t.jsx)("div",{className:"border-b px-3 border-white-400/10",children:(0,t.jsx)("h3",{className:"text-sm text-white-400/50",children:"History"})}),(0,t.jsx)(eM,{})]})})]})},eE=()=>{let{toggleIsSidebarMenuOpen:e}=(0,D.C)();return(0,t.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"light",onClick:e,children:(0,t.jsx)(m.JO,{icon:"mdi:menu",className:"size-6"})})};var eW=a(85658),eP=a(5441),eR=a(77354),eJ=a(269),eT=a.n(eJ);let eV=()=>{let{panels:e,paneAspectRatio:l,selectedLayout:a,activePanel:s,postId:n,contest:r,isCreatingProject:c,isPosting:u,isPostDisabled:x,isGenerateDisabled:h,isDeleting:f,isUnpublishing:p,isDuplicating:g,onClickDuplicateProject:v,onClickDelete:j,onClickUnpublish:b,onClickPublish:w,onClickSubmitToContest:N,onClickUnsubmitFromContest:y}=(0,D.C)(),k=c||f||g||u||p||h,C=(0,d.useCallback)(async()=>{try{let t=await (0,eO.jt)(e,a,l),i=new Blob([t],{type:"image/jpeg"});eT().saveAs(i,"".concat(null==s?void 0:s.panel_config.image.id,".jpg"))}catch(l){console.error("Error downloading meme:",l);let e=(0,o.yv)((0,t.jsxs)("div",{className:"flex items-center gap-3",children:["Error downloading meme",(0,t.jsx)(i.A,{isIconOnly:!0,variant:"flat",color:"danger",size:"sm",className:"text-white-400",onClick:()=>{(0,o.sy)(e)},children:(0,t.jsx)(m.JO,{className:"size-5 ",icon:"mdi:close",color:"white"})})]}),{variant:"error",autoHideDuration:3e3})}},[null==s?void 0:s.panel_config.image.id,l,e,a]),z=l=>{let{showLabels:s=!1}=l;return(0,t.jsxs)(t.Fragment,{children:[!n&&(0,t.jsx)(eu.E,{content:"Delete meme",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsxs)(i.A,{size:"sm",variant:"flat",className:"w-full md:w-auto backdrop-blur-sm bg-red-500/20 md:justify-center justify-start",isIconOnly:!s,color:"danger",isLoading:f,isDisabled:k,onClick:j,children:[!f&&(0,t.jsx)(m.JO,{className:"size-5 !text-red-500",icon:"mdi:delete"}),s&&(0,t.jsx)("h3",{className:"text-sm",children:"Delete"})]})}),(0,t.jsx)(eu.E,{content:"Duplicate meme",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsxs)(i.A,{size:"sm",variant:"flat",isIconOnly:!s,className:"w-full md:w-autobackdrop-blur-sm md:justify-center justify-start",isLoading:g,isDisabled:k,onClick:()=>v(a,e),children:[!g&&(0,t.jsx)(m.JO,{className:"size-5",icon:"ion:duplicate-outline"}),s&&(0,t.jsx)("h3",{className:"text-sm",children:"Duplicate"})]})}),(0,t.jsx)(eu.E,{content:"Download",delay:500,showArrow:!0,closeDelay:200,children:(0,t.jsxs)(i.A,{size:"sm",variant:"flat",color:"default",className:"w-full md:w-autobackdrop-blur-sm md:justify-center justify-start",isDisabled:x||k,isIconOnly:!s,onClick:C,children:[(0,t.jsx)(m.JO,{className:"size-5",icon:"mingcute:download-line"}),s&&(0,t.jsx)("h3",{className:"text-sm",children:"Download"})]})})]})};return s?(0,t.jsxs)("div",{className:"flex gap-2.5 items-center z-1",children:[(0,t.jsx)("div",{className:"hidden md:flex gap-2.5 items-center",children:(0,t.jsx)(z,{})}),(0,t.jsx)("div",{className:"flex md:hidden",children:(0,t.jsxs)(eW.j,{children:[(0,t.jsx)(eP.b,{children:(0,t.jsx)(i.A,{isIconOnly:!0,className:"flex lg:hidden z-1",size:"sm",variant:"flat",children:(0,t.jsx)(m.JO,{className:"size-5",icon:"tabler:dots"})})}),(0,t.jsx)(eR.g,{className:"flex flex-col-reverse gap-3 p-3 bg-[#0F0F0F] border-1 border-black-100",children:(0,t.jsx)(z,{showLabels:!0})})]})}),r?(0,t.jsx)(i.A,{size:"sm",variant:"flat",isDisabled:x||k,isLoading:n?p:u,className:n?"":"bg-violet-500",onClick:n?y:N,children:(0,t.jsx)("h3",{className:"text-sm",children:n?"Unsubmit":"Submit"})}):(0,t.jsx)(i.A,{size:"sm",variant:"flat",isDisabled:!n&&(x||k),isLoading:n?p:u,onClick:n?b:w,children:(0,t.jsx)("h3",{className:"text-sm",children:n?"Unpublish":"Publish"})})]}):null},eH=()=>(0,t.jsx)("header",{className:"flex w-full flex-col justify-center gap-4 h-14 min-h-14 px-3 lg:flex-row lg:justify-between",children:(0,t.jsxs)("div",{className:"flex flex-row w-full items-center gap-2 justify-between",children:[(0,t.jsxs)("div",{className:"flex gap-1 items-center text-large font-medium select-none z-[1]",children:[(0,t.jsx)(eE,{}),(0,t.jsx)(eL,{}),(0,t.jsx)(ew.B,{})]}),(0,t.jsx)("div",{className:"sm:absolute inset-x-0 flex justify-center z-0 gap-2",children:(0,t.jsx)(ek,{})}),(0,t.jsx)(eV,{})]})}),eU=e=>{let{aspectRatio:l=1,children:a}=e;return(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{style:{aspectRatio:l},className:"square",children:a})})};var eB=a(33358),eK=a(16275);let eY=()=>{let{selectedLayout:e,canvasAspectRatio:l,activePanel:a}=(0,D.C)(),s=(0,d.useMemo)(()=>eK.i4[e],[e]);return(0,t.jsx)(eU,{aspectRatio:l,children:(0,t.jsx)("div",{className:"size-full flex items-center justify-center overflow-hidden max-h-full max-w-full min-h-0",children:a?(0,t.jsx)("div",{className:(0,A.cn)("max-h-full max-w-full grid",eK.J2[e]),children:Array.from({length:s}).map((e,l)=>(0,t.jsx)(eB.a,{index:l},l))}):(0,t.jsx)(n.c,{})})})},eZ=()=>{let{isPostModalOpen:e,postId:l,composedMemeId:a,composedMemeUrl:s,onClosePostModal:i}=(0,D.C)();return(0,t.jsxs)("div",{className:"fixed z-50 flex flex-row items-center justify-between h-screen overflow-y-auto dot-grid inset-x-0 min-h-screen max-h-screen t-0",children:[(0,t.jsxs)("div",{className:"relative flex flex-col flex-1 size-full min-h-0 overflow-hidden",children:[(0,t.jsx)(eH,{}),(0,t.jsx)("main",{className:"size-full relative flex justify-end flex-1 max-w-[100vw]",children:(0,t.jsxs)("div",{className:"flex flex-col size-full transition-all",children:[(0,t.jsx)("div",{className:"size-full min-h-44 overflow-hidden p-1 pb-3 sm:p-3 lg:px-6 lg:py-3 flex flex-row justify-center",children:(0,t.jsx)(eY,{})}),(0,t.jsx)(O,{}),(0,t.jsx)(eb,{})]})}),e&&a&&s&&(0,t.jsx)(y,{postId:null!=l?l:void 0,memeId:a,memeUrl:s,onClose:i})]}),l?(0,t.jsx)("div",{className:"p-3 pl-0 h-full hidden lg:flex",children:(0,t.jsx)("div",{className:"p-3 rounded-2xl bg-[#0F0F0F] border-1 border-black-100 w-96 max-h-full flex-none flex-col gap-4 lg:h-full",children:(0,t.jsx)(ej,{},l)})}):(0,t.jsx)("div",{className:"p-3 pl-0 h-full hidden lg:flex",children:(0,t.jsx)("div",{className:"rounded-2xl bg-[#0F0F0F] border-1 border-black-100 w-96 max-h-full flex-none flex-col gap-4 lg:h-full",children:(0,t.jsx)(eh,{})})})]})};var eq=a(41245);function eG(){var e,l,a,i;let n=(0,s.useSearchParams)(),r=null!==(e=n.get("remix"))&&void 0!==e?e:void 0,c=null!==(l=n.get("meme"))&&void 0!==l?l:void 0,o=null!==(a=n.get("character"))&&void 0!==a?a:void 0,d=null!==(i=n.get("contestId"))&&void 0!==i?i:void 0,{socket:u}=(0,eq.s)({showToast:!0}),{currentData:m}=(0,p.iS)(),{data:x}=(0,p.sb)({start:0,limit:20,sources:["generated"]});return u&&m&&m.studio_config&&window.localStorage?(0,t.jsx)(D.L,{socket:u,profile:m,config:m.studio_config,history:null!=x?x:[],isGeneratingFromFeed:!1,queryParams:{memeId:c,remixMemeId:r,characterId:o,contestId:d},children:(0,t.jsx)(eZ,{})}):null}},50327:function(e,l,a){"use strict";a.d(l,{U:function(){return v}});var t=a(7590),s=a(69622),i=a(81662),n=a(67484),r=a(18386),c=a(15866),o=a(70244),d=a(72655),u=a(82581),m=a(79738),x=a(22890),h=a(80797);let f=async e=>new Promise((l,a)=>{let t=new Image,s=new FileReader;s.onload=()=>{t.src=s.result},t.onload=()=>{let a=(0,x.vO)(t.width,t.height),{paneWidth:s,paneHeight:i}=(0,x.rf)(m.L.One,a),n=document.createElement("canvas");n.width=s,n.height=i;let r=n.getContext("2d");if(!r)return;let c=t.width,o=t.height;(0,h.h)({ctx:r,image:t,targetWidth:s,targetHeight:i,imageWidth:c,imageHeight:o}),l({base64:n.toDataURL(e.type),aspectRatio:a,targetWidth:s,targetHeight:i})},s.onerror=e=>{a(e)},s.readAsDataURL(e)});var p=a(62247),g=a(89405);let v=e=>{let{initialSrc:l,imageRef:a,bgColor:m="bg-black-300",onParseImage:x,onClickDeleteMeme:h}=e,[v,j]=(0,u.useState)(l),[b,w]=(0,u.useState)(!1),[N,y]=(0,u.useState)(!1),k=(0,u.useCallback)(async e=>{if(e){if((0,d.sy)(),e.length>10){(0,d.yv)("Please upload 10 files or less",{variant:"error"});return}for(let l=0;l<e.length;l++)if(e[l].size>33554432){(0,d.yv)("Please upload files 32MB or less",{variant:"error"});return}w(!0);try{if(0===e.length)return;let l=e[0],{base64:a,aspectRatio:t,targetWidth:s,targetHeight:i}=await f(l),n=a.split(",")[1],r=Uint8Array.from(atob(n),e=>e.charCodeAt(0));await x(r,s,i,t),j(a)}catch(e){console.error("Error uploading files",e),(0,d.yv)("Error uploading files",{variant:"error"})}finally{w(!1)}}},[x]),C=(0,u.useCallback)(async()=>{y(!0);try{await h(),j(null)}catch(e){console.error("Error deleting meme",e)}finally{y(!1)}},[h]);return(0,t.jsxs)(i.w,{radius:"md",shadow:"none",className:(0,p.cn)(m,"border-1 border-transparent transition-all",v?"":"hover:border-orange-400"),children:[(0,t.jsx)("div",{className:"relative size-full max-h-full max-w-full aspect-square flex items-center justify-center ".concat(v?"":"cursor-pointer"),children:v?(0,t.jsx)(n.J,{ref:a,alt:"Image input",classNames:{wrapper:"size-full min-w-full min-h-full",img:"size-full object-cover rounded-none"},src:v}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.JO,{className:"size-8",icon:"hugeicons:image-upload-01"}),(0,t.jsx)("input",{type:"file",multiple:!1,accept:g.RL,className:"absolute inset-0 size-full cursor-pointer opacity-0",onChange:e=>k(e.target.files)})]})}),(0,t.jsxs)(r.i,{className:"gap-4 justify-end min-h-10 overflow-hidden absolute w-full z-10 -top-2.5 -right-2.5",children:[b?(0,t.jsx)(c.c,{size:"sm",color:"warning"}):null,v&&!b?(0,t.jsx)(o.A,{size:"sm",variant:"flat",radius:"full",className:"backdrop-blur-sm bg-red-900/70",isIconOnly:!0,color:"danger",isLoading:N,onClick:C,children:(0,t.jsx)(s.JO,{className:"size-5 !text-red-400",icon:"ic:baseline-close"})}):null]})]})}},10961:function(e,l,a){"use strict";a.d(l,{E:function(){return n}});var t=a(7590),s=a(29908),i=a(92782);let n=e=>{let{children:l,...a}=e;return i.BB||i.cm?(0,t.jsx)(s.e,{...a,children:l}):(0,t.jsx)(t.Fragment,{children:l})}},47758:function(e,l,a){"use strict";a.d(l,{o:function(){return r}});var t=a(7590),s=a(15866),i=a(57839);let n={default:3,1100:3,700:2,500:1},r=e=>{let{items:l,isFetching:a,hasFetched:r,hasSearched:c,noResultsMessage:o="No memes",className:d="relative overflow-hidden pl-3 pt-3",breakpoints:u=n,renderItem:m}=e;return(0,t.jsxs)("div",{className:d,children:[!a&&0===l.length&&(r||c)?(0,t.jsx)("div",{className:"text-sm text-white-400/50",children:o}):null,a&&(0===l.length||c)&&(0,t.jsx)("div",{className:"flex w-full justify-center p-3 ".concat(c?"absolute z-10":""),children:(0,t.jsx)(s.c,{})}),(0,t.jsx)(i.Z,{breakpointCols:u,className:"my-masonry-grid min-w-full max-w-full",columnClassName:"my-masonry-grid_column",children:l.map(m)}),a&&l.length>0&&(0,t.jsx)("div",{className:"flex w-full justify-center p-3",children:(0,t.jsx)(s.c,{})})]})}},88222:function(e,l,a){"use strict";a.d(l,{B:function(){return i}});var t=a(7590),s=a(62247);let i=e=>{let{bg:l="bg-black-400",trailColor:a="#8B5CF6",trailWidth:i=500,staticBorderColor:n,rounded:r="rounded-2xl",hideTrail:c=!1,children:o,onClick:d}=e;return(0,t.jsxs)(t.Fragment,{children:[c?null:(0,t.jsx)("div",{className:(0,s.cn)("size-full box-border","absolute inset-0","border-2 border-transparent",r),children:(0,t.jsx)("div",{className:"trail",style:{width:i,"--trail-color":a}})}),(0,t.jsx)("div",{className:(0,s.cn)("size-full min-h-full box-border z-10","overflow-hidden","border-2 border-transparent",r,null!=n?n:""),onClick:d,children:(0,t.jsx)("div",{className:(0,s.cn)("size-full flex flex-col gap-1",l,r),children:o})})]})}},78221:function(e,l,a){"use strict";a.d(l,{s:function(){return c}});var t=a(7590),s=a(88222),i=a(82581),n=a(62247);function r(e){return e.toString().padStart(2,"0")}let c=e=>{let{contest:l,startContent:a,h:c="h-full",p:d="px-2 sm:px-3 md:px-4",bg:u="bg-black-300",rounded:m="rounded-2xl",hideTrail:x=!1}=e,{timeLeft:h}=function(e){let l=(0,i.useCallback)(()=>{let l=+new Date(e)-+new Date,a={days:0,hours:0,minutes:0,seconds:0};return l>0&&(a={days:Math.floor(l/864e5),hours:Math.floor(l/36e5%24),minutes:Math.floor(l/1e3/60%60),seconds:Math.floor(l/1e3%60)}),a},[e]),[a,t]=(0,i.useState)(l());return(0,i.useEffect)(()=>{let e=setTimeout(()=>{t(l())},1e3);return()=>clearTimeout(e)}),{timeLeft:a}}(new Date("upcoming"===l.status?l.start_time:l.end_time)),{days:f,hours:p,minutes:g,seconds:v}=h;return"ended"===l.status?null:(0,t.jsx)("div",{className:(0,n.cn)("relative overflow-hidden","flex items-center justify-center h-full",u,m,"h-full","min-h-full"),children:(0,t.jsx)(s.B,{staticBorderColor:x?"border-transparent":"border-white-400/10",trailWidth:220,trailColor:"active"===l.status?"#8B5CF6":"#006FEE",rounded:m,hideTrail:x,bg:u,children:(0,t.jsxs)("div",{className:(0,n.cn)("size-full flex items-center justify-between gap-3",a?"justify-between":"justify-center",d,c),children:[a,(0,t.jsxs)("div",{className:"flex-1 flex items-center justify-center gap-3",children:[(0,t.jsx)(o,{number:r(f),label:"day"}),(0,t.jsx)(o,{number:r(p),label:"hour"}),(0,t.jsx)(o,{number:r(g),label:"min"}),(0,t.jsx)(o,{number:r(v),label:"sec"})]})]})})})},o=e=>{let{number:l,label:a}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-0.5 text-center min-w-5",children:[(0,t.jsx)("p",{className:(0,n.cn)("w-6 text-center","font-semibold leading-5 md:leading-6 tracking-wide text-sm md:text-base","text-white-400 bg-black-400 rounded-md"),children:l}),(0,t.jsx)("p",{className:"text-white-400/60 font-normal leading-3 uppercase text-[11px] tracking-tight",children:(0,t.jsx)("span",{children:a})})]})}},39659:function(e,l,a){"use strict";a.d(l,{U:function(){return c}});var t=a(7590),s=a(69622),i=a(72728),n=a(61594),r=a(7922);let c=e=>{let{contest:l,h:a="h-12",p:c="p-3",rounded:o="rounded-2xl",isSmall:d=!0}=e,u="ended"===l.status,m=l.winner,x=u&&m;return(0,t.jsx)("div",{className:(0,i.cn)("flex relative truncate",a),children:(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 truncate",c,o,(()=>{switch(l.status){case"ended":return"bg-yellow-400";case"active":return"bg-violet-500";default:return"bg-black-300"}})()),children:[x?(0,t.jsx)(n.h,{src:m.contestant.avatar,size:"sm",classNames:{base:"border-2 border-black-0"}}):(0,t.jsx)(s.JO,{icon:"iconoir:coin",className:"size-5"}),l.prize?(0,t.jsxs)("div",{className:"flex flex-col truncate",children:[x&&(0,t.jsx)("span",{className:"text-white-400 font-bold leading-4 truncate",children:m.contestant.name}),(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1 truncate"),children:[(0,t.jsxs)("span",{className:(0,i.cn)("text-white-400",x?"font-semibold":"font-bold",d?x?"text-sm":"text-base":"text-lg"),children:[x?"+":"",(0,r.pw)(l.prize.token_amount)]}),(0,t.jsx)("span",{className:(0,i.cn)("text-white-400/75 font-medium truncate",d?"text-sm":"text-base",d?"":"mt-[1px]"),children:l.prize.ticker})]})]}):(0,t.jsx)("p",{className:"font-bold",children:"TBD"})]})})}},62179:function(e,l,a){"use strict";a.d(l,{Y:function(){return c}});var t=a(7590),s=a(27613),i=a(9769),n=a(51922),r=a(57031);let c=e=>{var l,a,c,o,d,u;let{item:m,isSelected:x,showCreator:h=!1,onClick:f}=e,{onOpenImage:p}=(0,n.g)(),g=void 0!==m.post_type?(0,r.zD)(m):(0,r.sw)(m);return(0,t.jsx)("article",{className:"relative w-full cursor-pointer select-none overflow-hidden rounded-lg border-2 ".concat(x?"border-blue-500":"border-transparent"),onClick:()=>f?f():p(m.id),children:(0,t.jsxs)("div",{className:"group flex w-full flex-col",children:["image"===g.source?(0,t.jsx)(i.g,{type:g.source,src:g.url,alt:m.id,canvasWidth:null!==(l=g.width)&&void 0!==l?l:1152,canvasHeight:null!==(a=g.height)&&void 0!==a?a:1152,imageWidth:null!==(c=g.width)&&void 0!==c?c:1152,imageHeight:null!==(o=g.height)&&void 0!==o?o:1152,topText:null,bottomText:null,centerText:null,className:"z-0 size-full rounded-lg bg-white-400/5"}):(0,t.jsx)(s.default,{className:"z-0 size-full rounded-lg bg-white-400/5",src:g.url,alt:m.id,width:null!==(d=g.width)&&void 0!==d?d:1152,height:null!==(u=g.height)&&void 0!==u?u:1152}),h&&(0,t.jsx)("div",{className:"absolute inset-0 z-1 flex select-none items-end px-1.5 py-1 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsx)("div",{className:"flex flex-1 items-center gap-2",children:(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2 truncate p-1 text-sm font-semibold drop-shadow-[0.5px_0.5px_1px_rgba(0,0,0,80)]",children:[(0,t.jsx)(s.default,{src:m.by.avatar,alt:m.by.handle,className:"rounded-full hover:scale-105",width:24,height:24}),m.by.handle]})})})]})})}},51884:function(e,l,a){"use strict";var t,s;function i(e){return"Trending"===e}a.d(l,{W1:function(){return i},br:function(){return n},c1:function(){return r},mQ:function(){return t}}),(0,a(14081).Cb)("all"),(s=t||(t={})).Home="Home",s.Trending="Trending",s.Library="My Library",s.Profile="Profile";let n=(e,l)=>{switch(e){case"Home":return l?"fluent:home-24-filled":"fluent:home-24-regular";case"Trending":return l?"ph:fire-fill":"ph-fire";case"My Library":return l?"fluent:emoji-meme-24-filled":"fluent:emoji-meme-24-regular";case"Profile":return l?"fluent:person-24-filled":"fluent:person-24-regular"}},r=(e,l)=>{switch(e){case"Home":return"/home";case"Trending":return"/trending";case"My Library":return"/library";case"Profile":return"/u/".concat(l)}}},18095:function(e,l,a){"use strict";a.d(l,{d:function(){return u}});var t=a(7590),s=a(69622),i=a(66011),n=a(70244),r=a(82187),c=a(82581),o=a(41781),d=a(3333);let u=e=>{var l,a;let{aestheticId:u,onSelect:m,hideDescription:x=!1,isMobile:h=!1,isSmall:f=!1,isDisabled:p=!1}=e,g=(0,d.iS)(),v=(0,c.useMemo)(()=>{var e;return null===(e=g.currentData)||void 0===e?void 0:e.studio_config},[null===(l=g.currentData)||void 0===l?void 0:l.studio_config]),j=(0,c.useMemo)(()=>v?v.aesthetics.find(e=>e.id===u):null,[u,v]),[b,w]=(0,c.useState)(!1),[N,y]=(0,c.useState)("No style");(0,o.y)({locked:b});let k=(0,c.useCallback)(e=>{if(e||m(null),!v)return;let l=v.aesthetics.find(l=>l.id===e);m(null!=l?l:null)},[v,m]);return v?(0,t.jsx)(i.d,{"aria-label":"aesthetic selector",label:f?null:"Style",placeholder:N,description:x?null:null!==(a=null==j?void 0:j.description)&&void 0!==a?a:"Applies a style to the prompt",classNames:{base:f?"min-w-0 w-auto max-w-32":"w-full",popoverContent:"min-w-[280px]"},inputProps:{classNames:{input:f?"!text-xs":"",inputWrapper:f?"bg-black-300":""}},selectedKey:u,size:f?"sm":"md",radius:f?"full":"md",onFocus:e=>{h&&e.preventDefault()},onOpenChange:e=>{w(e),e?y("Type to filter"):y("No style")},className:"z-0",isClearable:!1,isDisabled:p,endContent:j?(0,t.jsx)(n.A,{size:"sm",isIconOnly:!0,variant:"flat",className:f?"bg-black-300":"",onClick:()=>k(null),children:(0,t.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}):null,onSelectionChange:k,children:v.aesthetics.map(e=>(0,t.jsx)(r.R,{"aria-label":e.name,className:"flex flex-column justify-center gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.description})]})},e.id))}):null}},49682:function(e,l,a){"use strict";a.d(l,{z:function(){return p}});var t=a(7590),s=a(69622),i=a(33151),n=a(70244),r=a(61594),c=a(82187),o=a(82581),d=a(41781),u=a(3333),m=a(62247);let x=e=>"base"===e?0:1,h=e=>{switch(e){case 0:return"Default Characters";case 1:return"Crypto Characters";default:return"Other"}},f=e=>{let l=-1,a=[];for(let t of e)t.section!==l&&(a.push({id:Math.random().toString(),section:t.section,isDivider:!0}),l=t.section),a.push(t);return a},p=e=>{var l;let{characterId:a,onSelect:p,isSmall:g,showClearButton:v=!0,isDisabled:j=!1}=e,b=(0,u.iS)(),w=(0,o.useMemo)(()=>{var e;return null===(e=b.currentData)||void 0===e?void 0:e.studio_config},[null===(l=b.currentData)||void 0===l?void 0:l.studio_config]),[N,y]=(0,o.useState)(!1);(0,d.y)({locked:N});let k=(0,o.useMemo)(()=>{var e;return null!==(e=null==w?void 0:w.characters)&&void 0!==e?e:[]},[null==w?void 0:w.characters]),C=(0,o.useMemo)(()=>f(k.slice().sort((e,l)=>"normal"===e.id?1:"normal"===l.id?-1:0).map(e=>{var l;return{...e,avatar:null!==(l=e.thumbnail)&&void 0!==l?l:"",section:x(e.grouping),isSelected:a===e.id,isDivider:!1}}).sort((e,l)=>e.section-l.section)),[k,a]),z=(0,o.useCallback)(e=>{let l=k.find(l=>l.id===e);l&&p(l)},[k,p]),_=(0,o.useMemo)(()=>C.filter(e=>0===e.section).length,[C]),D=(0,o.useMemo)(()=>C.filter(e=>1===e.section).length,[C]);return(0,t.jsx)(i.g,{items:C,isOpen:N,onOpenChange:y,placeholder:"Select a character","aria-label":"Character",classNames:{base:g?"w-auto min-w-32":"w-full",trigger:g?"min-h-0 h-8 px-1 bg-black-300":"h-[80px]",popoverContent:"bg-[#0F0F0F] border-1 border-black-100 min-w-[340px]",listbox:"h-fit selector-list-box",listboxWrapper:"min-h-[400px]"},radius:g?"full":"md",isDisabled:j,selectedKeys:[a.replace("ai_character:","")].filter(Boolean),onChange:e=>z(e.target.value),endContent:a&&v&&(0,t.jsx)(n.A,{size:"sm",isIconOnly:!0,variant:"flat",onClick:()=>p(null),children:(0,t.jsx)(s.JO,{icon:"material-symbols-light:close",className:"size-4 text-white-400"})}),renderValue:e=>e.map(e=>{var l,a,s,i,n;return(null===(l=e.data)||void 0===l?void 0:l.isDivider)?null:(0,t.jsxs)("div",{className:(0,m.cn)("flex items-center",g?"gap-2":"gap-4"),children:[(0,t.jsx)(r.h,{alt:(null===(a=e.data)||void 0===a?void 0:a.id)+"-avatar",className:(0,m.cn)("shrink-0",g?"size-4 max-w-6 max-h-6":""),radius:g?"full":"md",size:g?"sm":"lg",src:null===(s=e.data)||void 0===s?void 0:s.avatar}),g?(0,t.jsx)("div",{className:"font-semibold text-xs",children:null===(i=e.data)||void 0===i?void 0:i.name}):(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-tiny text-default-600",children:"Character"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:null===(n=e.data)||void 0===n?void 0:n.name})]})]},e.key)}),children:e=>e.isDivider?(0,t.jsx)(c.R,{hideSelectedIcon:!0,isReadOnly:!0,"aria-disabled":!0,className:"col-span-full",classNames:{base:"bg-transparent hover:!bg-transparent cursor-default"},children:(0,t.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,t.jsxs)("h3",{className:"uppercase text-xs tracking-wide font-medium text-white-400/50 select-none",children:[h(e.section)," "]}),(0,t.jsx)("div",{className:"text-xs font-normal text-white-400/70 bg-white-400/10 rounded-full px-1 py-0.5 min-w-[20px] text-center",children:0===e.section?_:D}),(0,t.jsx)("hr",{className:"flex-1 opacity-10"},"divider-".concat(Math.random()))]})},null==e?void 0:e.id):(0,t.jsx)(c.R,{"aria-label":null==e?void 0:e.name,color:e.isSelected?"primary":"default",variant:"solid","data-hover":!0,hideSelectedIcon:!0,classNames:{base:"flex-1 flex flex-col gap-0 ".concat(e.isSelected?"bg-primary-400":""),wrapper:"flex flex-col"},children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,t.jsx)(r.h,{alt:(null==e?void 0:e.id)+"-avatar",radius:"md",size:"lg",src:null==e?void 0:e.avatar}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("span",{className:"text-sm font-medium",children:null==e?void 0:e.name})})]})},null==e?void 0:e.id)})}},39858:function(e,l,a){"use strict";a.d(l,{T:function(){return c}});var t=a(7590),s=a(14688),i=a(27613),n=a(82581),r=a(62300);let c=e=>{let{value:l,autofocus:a,initialSearch:c,placeholder:o="Search for memes. (i.e. pepe)",onFocus:d,onSearch:u}=e,m=(0,n.useRef)(null);return(0,t.jsx)(s.Y,{isClearable:!0,onClear:()=>{null==u||u("")},radius:"full",classNames:{base:"flex-1",input:"text-base placeholder:text-base placeholder:text-white-400/50"},startContent:(0,t.jsx)(i.default,{priority:!0,src:r.Z,alt:"Dropdown",onClick:e=>{var l;e.preventDefault(),null===(l=m.current)||void 0===l||l.focus()},className:"mr-1 size-5 cursor-text select-none opacity-75"}),ref:m,autoFocus:a,defaultValue:c,placeholder:o,className:"h-10 min-w-24 flex-1 rounded-full border border-white-400/5 bg-white-400/5 shadow-sm outline-none placeholder:text-xl placeholder:text-white-400/50",value:l,onFocus:d,onChange:e=>null==u?void 0:u(e.target.value)})}},58563:function(e,l,a){"use strict";a.d(l,{U:function(){return i}});var t=a(82581),s=a(32701);function i(){let[e,l]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),n=(0,t.useMemo)(()=>(0,s.D)(i,500),[]);return{search:e,searchDebounced:a,onSearch:(0,t.useCallback)(e=>{l(e),n(e)},[n])}}},51922:function(e,l,a){"use strict";a.d(l,{ImageModalProvider:function(){return d},g:function(){return u}});var t=a(7590),s=a(23143),i=a(82581),n=a(41612),r=a(86960),c=a(84187);let o=(0,i.createContext)({}),d=e=>{let{params:l,children:a}=e,{imageId:i}=(0,c.d)({params:l,key:"imageId"}),d=(0,s.useSearchParams)().get("imageId"),u=i.length>0?i:d,{openLightBox:m,closeLightBox:x}=(0,r.e)();return(0,t.jsxs)(o.Provider,{value:{onOpenImage:e=>m({imageId:e}),onCloseImage:x},children:[a,u&&(0,t.jsx)(n.e,{imageId:u,onClose:x})]})},u=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useImageModal must be used within ImageModalProvider");return e}}},function(e){e.O(0,[2138,244,116,7482,8236,9447,417,7847,2305,9101,774,4494,9738,7273,4483,4081,6244,6676,4974,6462,3333,3585,2526,3998,7814,1744],function(){return e(e.s=4361)}),_N_E=e.O()}]);