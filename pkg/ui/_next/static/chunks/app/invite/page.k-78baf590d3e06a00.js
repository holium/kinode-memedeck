(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7405],{47572:function(e,t,s){Promise.resolve().then(s.bind(s,74886))},74886:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var n=s(59547),l=s(30912),a=s(1463),i=s(54056),r=s(93078),c=s(35875),o=s(99854),u=s(82972),d=s(71904),h=s(56582),x=s(44399),f=s(81771),m=s(25957),p=s(88992),g=s(22083),j=s(10188),v=s(24449),w=s(73726),y=s(17432),b=s(39992),C=s(79886),k=s(67887),N=s(94667);let _=e=>{let{username:t}=e;return(0,n.jsxs)(C.default,{href:"https://twitter.com/".concat(t),target:"_blank",className:"flex flex-1 gap-2 sm:gap-3 items-center min-w-0 hover:underline",children:[(0,n.jsx)(k.h,{src:"https://unavatar.io/twitter/".concat(t),alt:t,name:t,showFallback:!0,size:"sm",className:"min-w-8"}),(0,n.jsxs)("p",{className:"flex tracking-wide",children:["@".concat(t),(0,n.jsx)(N.x,{})]})]})},D=e=>{let{columnKey:t,invite:s,isDeleting:l,onClickDelete:a}=e;if("created_at"===t)return(0,n.jsx)("p",{className:"flex-1 truncate text-xs sm:text-sm px-2 text-white-400/75",children:(0,b.Po)((0,w.sF)(s,t))});if("status"===t){let e=(0,w.sF)(s,t),i=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),c="ACCEPTED"===e;return(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsx)(y.z,{size:"sm",color:c?"success":"primary",children:i}),!c&&(0,n.jsx)(u.A,{size:"sm",isIconOnly:!0,variant:"light",isLoading:l,onClick:a,children:(0,n.jsx)(r.JO,{icon:"mdi:remove",className:"text-white-400/75",width:16})})]})}if("to"===t){let e=(0,w.sF)(s,t);return(0,n.jsx)(_,{username:e})}},A=[{key:"to",value:"To"},{key:"created_at",value:"Sent"},{key:"status",value:"Status"}],E=e=>{let{invites:t,isFetching:s,isDeleting:l,onClickDeleteInvite:a}=e;return(0,n.jsxs)(x.b,{classNames:{wrapper:"p-2 lg:p-3",table:"max-w-full min-w-full relative flex flex-col gap-3",thead:"flex flex-col gap-0",th:"flex flex-1 items-center truncate min-h-0 bg-black-400",tbody:"flex flex-col gap-3",tr:"flex max-w-full min-w-full",td:"flex flex-1 items-center truncate px-1 py-0",emptyWrapper:"flex flex-col items-center justify-center"},children:[(0,n.jsx)(f.J,{columns:A,children:e=>(0,n.jsx)(m.j,{children:e.value},e.key)}),(0,n.jsx)(p.y,{items:t,emptyContent:(0,n.jsx)("p",{className:"p-3",children:"No invites issued yet"}),children:s?(0,n.jsxs)(g.g,{children:[(0,n.jsx)(j.X,{children:""}),(0,n.jsx)(j.X,{children:(0,n.jsx)("div",{className:"w-full h-[160px] flex items-center justify-center",children:(0,n.jsx)(v.c,{})})}),(0,n.jsx)(j.X,{children:""})]}):t.sort((e,t)=>"ACCEPTED"===e.status&&"ACCEPTED"!==t.status?1:"ACCEPTED"!==e.status&&"ACCEPTED"===t.status?-1:new Date(t.created_at/1e6).getTime()-new Date(e.created_at/1e6).getTime()).map(e=>(0,n.jsx)(g.g,{children:t=>(0,n.jsx)(j.X,{children:(0,n.jsx)(D,{columnKey:t,invite:e,isDeleting:l===e.id,onClickDelete:()=>a(e.id)},t)})},e.id))})]})};function P(){var e;let{profile:t}=(0,h.O)(),s=null!==(e=null==t?void 0:t.user.invite_cap)&&void 0!==e?e:5,[x,f]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0),[g,j]=(0,l.useState)(""),[v,w]=(0,l.useState)(!1),[y,b]=(0,l.useState)(null),C=(0,l.useMemo)(()=>x.length>=s,[s,x.length]),k=(0,l.useCallback)(async()=>{f(await a.P.getInvites()),p(!1)},[]),N=(0,l.useCallback)(async()=>{if(v||C)return;let e=g.trim().replace(/^@/,"");if(x.some(t=>t.to.toLowerCase()===e.toLowerCase())){(0,d.yv)("User already invited",{variant:"info"});return}try{w(!0);try{if((await a.P.getProfileByHandle(e)).id){(0,d.yv)("User already exists",{variant:"info"});return}}catch(e){}await a.P.postInvite({x_handle:e})}catch(e){(0,d.yv)("Failed to send invite",{variant:"error"})}finally{await k(),j(""),w(!1)}},[v,C,g,x,k]),_=(0,l.useCallback)(async e=>{if(y!==e)try{b(e),await a.P.deleteInvite(e)}catch(e){(0,d.yv)("Failed to delete invite",{variant:"error"})}finally{await k(),b(null)}},[k,y]);return(0,l.useEffect)(()=>{k()},[k]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.y,{title:(0,n.jsxs)("span",{className:"flex items-center gap-1 justify-between",children:["Invite Friends from X",(0,n.jsx)(c.e,{content:(0,n.jsx)("p",{className:"max-w-48",children:"As a Memedeck user you can invite a friend from X which allows them to skip the waitlist."}),children:(0,n.jsx)("div",{className:"flex items-center justify-center size-12",children:(0,n.jsx)(r.JO,{icon:"mdi:information-outline",className:"text-white-400/75",width:16})})})]}),border:"border-b border-white-400/10"}),(0,n.jsxs)("div",{className:"flex flex-col p-3 gap-3 min-w-full max-w-full",children:[(0,n.jsx)(E,{invites:x,isFetching:m,isDeleting:y,onClickDeleteInvite:_}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(o.Y,{type:"text",size:"lg",classNames:{input:"placeholder:text-white-400/50"},placeholder:"elonmusk",value:g,onValueChange:j,startContent:(0,n.jsx)(r.JO,{icon:"mdi:at",className:"text-white-400",width:20}),endContent:(0,n.jsx)(u.A,{size:"sm",color:"primary",isLoading:v,isDisabled:C,onClick:N,children:"Invite"}),onKeyDown:e=>{"Enter"===e.key&&N()}}),(0,n.jsxs)("p",{className:"text-white-400/50 text-xs",children:["You have ",Number(s-x.length),"/",s," invites left. A DM will be sent to notify the user."]})]})]})]})}},54056:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var n=s(59547),l={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/arrow.left.37648ed6.svg",height:46,width:57,blurWidth:0,blurHeight:0},a=s(62350),i=s(89204);let r=e=>{let{title:t,border:s="border-b border-transparent",isLoading:r=!1,endContent:c,onGoBack:o}=e,{goBack:u}=(0,i.useAppHistory)();return(0,n.jsxs)("div",{className:"flex h-16 w-full items-center ".concat(s),children:[(0,n.jsx)(a.O,{src:l,alt:"Back",onClick:null!=o?o:u}),r?(0,n.jsx)("h1",{className:"h-6 w-24 animate-pulse rounded bg-gray-200"}):(0,n.jsx)("h1",{className:"flex-1 text-left text-lg font-bold truncate",children:t}),c]})}},62350:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var n=s(59547),l=s(15361);let a=e=>{let{src:t,alt:s,id:a,margin:i="m-2",onClick:r}=e;return(0,n.jsx)("button",{id:a,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(i),onClick:r,children:(0,n.jsx)(l.default,{priority:!0,src:t,alt:s,className:"w-3.5 opacity-85 xs:w-4"})})}},89204:function(e,t,s){"use strict";s.r(t),s.d(t,{AppHistoryProvider:function(){return r},useAppHistory:function(){return c}});var n=s(59547),l=s(74600),a=s(30912);let i=(0,a.createContext)({}),r=e=>{let{children:t}=e,s=(0,l.usePathname)(),r=(0,l.useRouter)(),[c,o]=(0,a.useState)([]),u=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",t=arguments.length>1?arguments[1]:void 0;console.log("goBack",{defaultRoute:e,ignoreRouteBase:t});let s=e;c.length>1&&(s=c[c.length-2],void 0!==t&&s.includes(t)&&(s=e)),"string"!=typeof s&&(s="/home"),r.push(s,{scroll:!1})},[c,r]);return(0,a.useEffect)(()=>{o(e=>e[e.length-1]!==s?[...e,s]:e)},[s]),(0,n.jsx)(i.Provider,{value:{goBack:u},children:t})},c=()=>(0,a.useContext)(i)},39992:function(e,t,s){"use strict";s.d(t,{Df:function(){return l},Po:function(){return n},RL:function(){return i},eh:function(){return a}});let n=e=>{let t=new Date(e/1e6),s=Math.round((new Date().getTime()-t.getTime())/1e3),n=Math.round(s/60),l=Math.round(n/60),a=Math.round(l/24);return s<60?"".concat(s,"s ago"):n<60?"".concat(n,"m ago"):l<24?"".concat(l,"h ago"):"".concat(a," day").concat(1===a?"":"s"," ago")},l=e=>e.replace(/[^a-z0-9]/gi,"_").toLowerCase();function a(e){let t=atob(e.split(",")[1]||e),s=Array(t.length);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return new Uint8Array(s)}let i="image/*,.jpg_large,.png_large,.jpeg_large,.jpg_small,.png_small,.jpeg_small"}},function(e){e.O(0,[2290,1904,2972,9886,8651,2974,545,8735,8723,5653,7714,7930,3957,1744],function(){return e(e.s=47572)}),_N_E=e.O()}]);