"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3585],{7219:function(e,t,n){n.d(t,{O:function(){return l}});var a=n(7590),i=n(27613);let l=e=>{let{src:t,alt:n,id:l,margin:r="m-2",w:o="w-3.5",onClick:s}=e;return(0,a.jsx)("button",{id:l,className:"flex size-9 items-center justify-center rounded-full hover:bg-black-100 ".concat(r),onClick:s,children:(0,a.jsx)(i.default,{priority:!0,src:t,alt:n,className:"opacity-85 ".concat(o)})})}},95642:function(e,t,n){n.d(t,{I:function(){return m}});var a=n(7590),i=n(69622),l=n(99230),r=n(70244),o=n(40774),s=n(82581),c=n(5852),d=n(62247),u=n(32701);let m=e=>{var t;let{postId:n,user:m,deckId:h,initialVotes:f,size:x="sm",border:p="",upvoteBg:g="bg-blue-600",upvoteBorder:w="",readOnly:v=!1,bindToKeyboard:y=!1,hideVoteCount:b=!1,postVoteApi:j,deleteVoteApi:N,onClickOverride:_}=e,{voteSum:k,hasUpvoted:I,hasDownvoted:L}=(0,c.u)(null!==(t=null==m?void 0:m.id)&&void 0!==t?t:"",f),C=(0,s.useMemo)(()=>(0,u.D)(N,100),[N]),T=(0,s.useMemo)(()=>(0,u.D)(j,100),[j]),z=(0,s.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),_)return _();m&&(I?C({postId:n,user:m,deckId:h}):T({postId:n,user:m,deckId:h,vote:!0}))},[h,C,I,_,n,T,m]),S=(0,s.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),_)return _();m&&(L?C({postId:n,user:m,deckId:h}):T({postId:n,user:m,deckId:h,vote:!1}))},[h,C,L,_,n,T,m]);return(0,s.useEffect)(()=>{if(!y)return;let e=e=>{"ArrowUp"===e.key?z(e):"ArrowDown"===e.key&&S(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[y,S,z]),(0,a.jsxs)(l.g,{size:x,isDisabled:v,children:[(0,a.jsxs)(r.A,{isIconOnly:0===k||b,onClick:z,className:(0,d.cn)(p,I?g:"",I?w:"","border-r-1"),variant:"ghost",color:I?"primary":"default",children:[(0,a.jsx)(i.JO,{icon:"majesticons:arrow-up",width:20,color:"white"}),0===k||b?null:(0,a.jsx)(o.E.div,{initial:{opacity:0,y:k<0?10:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:0,transition:{duration:.1}},transition:{duration:.2},children:(0,a.jsx)("span",{className:"text-base font-semibold text-white-400",children:k})},k)]}),(0,a.jsx)(r.A,{isIconOnly:!0,onClick:S,className:(0,d.cn)(L?"bg-warning-400":"",p,"border-l-1"),variant:"ghost",color:L?"warning":"default",children:(0,a.jsx)(i.JO,{icon:"majesticons:arrow-down",color:L?"black":"white",width:20})})]})}},41612:function(e,t,n){n.d(t,{e:function(){return Z}});var a=n(7590),i=n(82581),l=n(57130),r=n(48119);let o=e=>{let{meme:t,image:n,isExpanded:i}=e,o=(null==t?void 0:t.search_text)||(null==n?void 0:n.caption);return(0,a.jsx)(l.d,{defaultExpandedKeys:i?["2"]:[],itemClasses:{subtitle:"text-sm text-white-400/50",trigger:"text-base font-semibold",indicator:"text-lg",content:"pt-0 text-small"},variant:"shadow",selectionMode:"multiple",children:o?(0,a.jsx)(r.G,{title:"Extracted text",classNames:{base:"pb-2 pt-0",trigger:"pt-4 pb-2 text-base font-semibold",content:"pb-2 pt-0"},children:(0,a.jsx)("p",{className:"text-sm",children:o})},"2"):(0,a.jsx)(r.G,{title:"Extracted text",classNames:{base:"pb-2 pt-0",trigger:"pt-4 pb-2 text-base font-semibold",content:"pb-2 pt-0"},subtitle:"No text was extracted","aria-label":"No extracted text",hideIndicator:!0,isDisabled:!0},"2")})};var s=n(56274);let c=e=>{let{image:t}=e;return t.prompt?(0,a.jsx)("div",{className:"flex flex-col gap-3",children:(0,a.jsx)(s.R,{prompt:t.prompt})}):null};var d=n(43062),u=n(3333),m=n(69622),h=n(29908),f=n(70244);let x=e=>{let{image:t,onClose:n}=e,[i,{isLoading:l}]=(0,u.ug)();return(0,a.jsx)(h.e,{content:"Delete",placement:"bottom",motionProps:{variants:{exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}},enter:{opacity:1,transition:{duration:.15,ease:"easeOut"}}}},children:(0,a.jsx)(f.A,{isIconOnly:!0,size:"md",radius:"full",variant:"ghost",color:"danger",isLoading:l,onClick:()=>i(t.id).then(n),children:(0,a.jsx)(m.JO,{icon:"fluent:delete-24-regular",width:18})})})},p=e=>{let{imageId:t,onClose:n}=e,{data:i}=(0,u.BE)(t),{data:l}=(0,u.iS)();return i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"my-2 flex flex-col gap-5",children:(0,a.jsx)(d.s,{handle:i.by.handle,name:i.by.name,avatar:i.by.avatar,createdAt:i.created_at,publishedAt:i.updated_at})}),"uploaded"===i.source&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o,{image:i,isExpanded:!0})}),"generated"===i.source&&(0,a.jsx)(c,{image:i}),"faceswap"===i.source&&(0,a.jsx)("p",{children:"Faceswap image"}),(0,a.jsx)("footer",{className:"flex justify-between gap-2 md:gap-3 pb-6 md:p-0",children:i.by.id===(null==l?void 0:l.id)&&(0,a.jsx)(x,{image:i,onClose:n})})]}):null};var g=n(74659),w=n(27613),v=n(95642),y=n(81662),b=n(80250),j=n(64064),N=n(15597),_=n(72655),k=n(15659);let I=e=>{var t;let{post:n}=e,[l]=(0,u.X_)(),r=n.id,[o,s]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null!==(t=n.appears_in)&&void 0!==t?t:[]);return((0,i.useCallback)(async(e,t)=>{if(s(e),e&&t)try{if(!e)throw Error("Deck ID is missing");if(!r)throw Error("Post ID is missing");d(!0),await l({deck_id:e,post_id:r}),s(null),h(e=>[...e,t])}catch(e){console.error(e),(0,_.yv)("Failed to add meme to deck",{variant:"error"})}finally{d(!1)}},[r,l]),0===m.length)?null:(0,a.jsxs)(y.w,{classNames:{base:"pb-1"},children:[(0,a.jsxs)(b.u,{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Appears In"}),m.length>0&&(0,a.jsx)(j.z,{size:"sm",variant:"flat",children:m.length})]}),(0,a.jsx)(N.G,{className:"gap-3 pt-0",children:(0,a.jsx)("div",{className:"size-full flex flex-col gap-1.5 min-h-0 max-h-80 overflow-y-auto",children:0===m.length?(0,a.jsx)("p",{className:"text-sm text-white-400/50",children:"No decks yet"}):m.filter(e=>e.title.length>0).map(e=>(0,a.jsx)(k.D,{deck:e,hideActiveState:!0},e.id))})})]})};var L=n(60453),C={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/info.333102d7.svg",height:24,width:24,blurWidth:0,blurHeight:0},T=n(32701);let z=e=>{var t;let{meme:n,setMeme:l}=e,[r]=(0,u.KV)(),o=(0,i.useMemo)(()=>(0,T.k)(r,1e3),[r]),s=(0,i.useCallback)(async e=>{if(n){l({...n,extracted_text:e});try{await o({meme_id:n.id,extracted_text:e})}catch(e){l(n)}}},[n,l,o]);return n?(0,a.jsx)("div",{className:"flex flex-col gap-3",children:(0,a.jsx)(L.Y,{label:(0,a.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Extracted text"}),(0,a.jsx)(h.e,{placement:"bottom",content:(0,a.jsx)("div",{className:"w-52",children:"This is AI extracted text from the meme image. You can correct it if needed here."}),children:(0,a.jsx)(w.default,{src:C,width:19,height:19,alt:"Info"})})]}),placeholder:"This is AI extracted text from the meme image. You can correct it if needed here.",classNames:{base:"p-0 hover:outline-1 border-transparent",mainWrapper:"p-0",inputWrapper:"px-0 py-4 gap-2 bg-content1 hover:bg-content2",label:"flex px-4 text-lg !text-white-400 font-semibold",innerWrapper:"px-4",input:"text-white-400/50"},value:null!==(t=n.search_text)&&void 0!==t?t:"",onValueChange:s})}):null};var S=n(62131);let A=e=>{var t;let{meme:n}=e,i=Object.values(null!==(t=n.panels)&&void 0!==t?t:{}),l=i.filter(e=>"prompt"in e.panel_config).map(e=>({prompt:e.panel_config.prompt,index:e.idx})),r=i.filter(e=>"faceswap"===e.panel_type&&e.panel_config);return(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[r.map((e,t)=>(0,a.jsx)(S.Z,{panelData:e.panel_config},t)),l.map((e,t)=>prompt?(0,a.jsx)(s.R,{index:e.index,showPanel:i.length>1,prompt:e.prompt},t):null)]})},D=e=>{let{post:t,onClose:n}=e,[i,{isLoading:l}]=(0,u.jn)();return(0,a.jsx)(h.e,{content:"Delete",placement:"bottom",motionProps:{variants:{exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}},enter:{opacity:1,transition:{duration:.15,ease:"easeOut"}}}},children:(0,a.jsx)(f.A,{isIconOnly:!0,size:"md",radius:"full",variant:"ghost",color:"danger",isLoading:l,onClick:()=>i(t.id).then(n),children:(0,a.jsx)(m.JO,{icon:"fluent:delete-24-regular",width:18})})})};var P=n(22110),E=n(38725);let O=e=>{let{postId:t,onClose:n}=e,{data:l}=(0,u.iS)(),{data:r}=(0,u.yD)(t),[o]=(0,u.NU)(),[s]=(0,u.Rp)(),[m,h]=(0,i.useState)(!1),{isRemixing:x,onClickRemix:p}=(0,P.o)();return r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"my-2 flex flex-col gap-5",children:(0,a.jsx)(d.s,{handle:r.by.handle,name:r.by.name,avatar:r.by.avatar,createdAt:r.created_at,publishedAt:r.updated_at})}),(0,a.jsx)(I,{post:r}),r.meme&&(0,a.jsx)(a.Fragment,{children:m?(0,a.jsx)(z,{meme:r.meme,setMeme:()=>{}}):(0,a.jsx)(A,{meme:r.meme})}),r.image&&(0,a.jsx)(c,{image:r.image}),(0,a.jsxs)("footer",{className:"flex justify-between gap-2 md:gap-3 pb-6 md:p-0",children:[m?(0,a.jsx)(D,{post:r,onClose:n}):l&&(0,a.jsx)(v.I,{size:"md",postId:r.id,user:l,deckId:"feed",initialVotes:null==r?void 0:r.votes,postVoteApi:o,deleteVoteApi:s}),(0,a.jsxs)("div",{className:"flex gap-3",children:[r.is_creator&&m&&(0,a.jsx)(f.A,{variant:"solid",color:"primary",onClick:()=>h(!1),children:"Done"}),r.is_creator&&!m&&(0,a.jsx)(f.A,{variant:"solid",onClick:()=>h(!0),children:"Edit"}),!m&&(0,a.jsx)(f.A,{variant:"solid",color:"primary",startContent:(0,a.jsx)(w.default,{src:E.Z,alt:"Remix",className:"size-4"}),isDisabled:x,onClick:()=>p(r),children:"Remix"})]})]})]}):null},F=e=>{let{postId:t,imageId:n,onClose:i}=e;return(0,a.jsxs)(g.K,{children:[t&&(0,a.jsx)(O,{postId:t,onClose:i}),n&&(0,a.jsx)(p,{imageId:n,onClose:i})]})};var R=n(67338),W=n(15866),M=n(9769),H=n(60516),V=n(62247);let B=e=>{let{imageId:t}=e,{isFetching:n,data:i}=(0,u.BE)(t);return n?(0,a.jsx)(W.c,{}):i?(0,a.jsx)(U,{image:i}):null},U=e=>{var t,n,i,l,r,o,s;let{image:c}=e,{src:d}=(0,H.f)(c),u=null!==(t=c.extracted_text||c.caption)&&void 0!==t?t:"";return(0,a.jsx)("div",{style:{aspectRatio:c.width/c.height},className:(0,V.cn)("w-full max-w-full min-h-0 max-h-full","lg:w-[".concat(c.width,"px] lg:h-[").concat(c.height,"px]")),children:"generated"===c.source?(0,a.jsx)(M.g,{id:"meme-lightbox-image",type:"image",imageWidth:null!==(n=c.width)&&void 0!==n?n:1152,imageHeight:null!==(i=c.height)&&void 0!==i?i:1152,canvasWidth:null!==(l=c.width)&&void 0!==l?l:1152,canvasHeight:null!==(r=c.height)&&void 0!==r?r:1152,src:d,alt:u,topText:null,bottomText:null,centerText:null,className:"max-h-canvas"}):(0,a.jsx)("div",{id:"meme-lightbox-image",className:"size-full flex items-center justify-center",children:(0,a.jsx)(w.default,{style:{aspectRatio:c.width/c.height},width:null!==(o=c.width)&&void 0!==o?o:1152,height:null!==(s=c.height)&&void 0!==s?s:1152,src:d,alt:u,className:"size-full object-contain max-h-canvas"})})})};var G=n(7316);let J=e=>{let{postId:t,imageId:n,onClose:i}=e;return(0,a.jsx)(R.V,{onClose:i,children:(0,a.jsxs)("div",{className:(0,V.cn)("flex items-center justify-center","size-full max-h-full min-h-0 gap-3 overflow-hidden","px-0 lg:gap-6 lg:p-3"),children:[t&&(0,a.jsx)(G.z,{postId:t}),n&&(0,a.jsx)(B,{imageId:n})]})})};var q=n(41781);let Z=e=>{let{postId:t,imageId:n,onClose:l}=e;return(0,q.y)({locked:!0}),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[l]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex size-full items-center justify-center bg-black-400/75 sm:overflow-y-auto md:overflow-hidden xs:overflow-y-auto",onClick:e=>{let t=e.target;t.closest("#modal-aside")||t.closest("#modal-footer")||t.closest("#meme-lightbox-image")||l()},onDragOver:e=>(e.preventDefault(),e.stopPropagation(),!1),children:(0,a.jsxs)("div",{className:"flex size-full flex-1 flex-col sm:overflow-y-auto md:flex-row",children:[(0,a.jsx)(J,{postId:t,imageId:n,onClose:l}),(0,a.jsx)(F,{postId:t,imageId:n,onClose:l})]})})}},67338:function(e,t,n){n.d(t,{V:function(){return o}});var a=n(7590),i=n(7219),l=n(28986),r=n(62247);let o=e=>{let{maxWidth:t="max-w-4xl",children:n,footer:o,onClose:s}=e;return(0,a.jsxs)("main",{className:(0,r.cn)("bg-black-400 md:bg-transparent","relative flex max-h-full flex-1 flex-col md:min-h-full md:overflow-hidden lg:overflow-hidden"),children:[(0,a.jsx)(i.O,{src:l.Z,alt:"Close",onClick:s}),(0,a.jsx)("div",{className:"relative flex min-h-0 min-w-0 max-w-full flex-1 items-center justify-center md:m-3",children:(0,a.jsx)("div",{className:"relative flex size-full max-h-full min-h-0 min-w-0 items-center justify-center ".concat(t),children:n})}),o]})}},7316:function(e,t,n){n.d(t,{M:function(){return d},z:function(){return c}});var a=n(7590),i=n(15866),l=n(9769),r=n(3333),o=n(62247),s=n(57031);let c=e=>{let{postId:t}=e,{isFetching:n,data:l}=(0,r.yD)(t);if(n)return(0,a.jsx)(i.c,{});if(!l)return;let o=(0,s.zD)(l);return(0,a.jsx)(d,{src:o.url,alt:o.description,width:o.width,height:o.height})},d=e=>{let{src:t,alt:n,width:i,height:r}=e;return(0,a.jsx)("div",{style:{aspectRatio:i/r},className:(0,o.cn)("w-full max-w-full min-h-0 max-h-full","lg:w-[".concat(i,"px] lg:h-[").concat(r,"px]")),children:(0,a.jsx)(l.g,{id:"meme-lightbox-image",type:"image",imageWidth:i,imageHeight:r,canvasWidth:i,canvasHeight:r,src:t,alt:n,topText:null,bottomText:null,centerText:null,className:"max-h-canvas"})})}},74659:function(e,t,n){n.d(t,{K:function(){return l}});var a=n(7590),i=n(62247);let l=e=>{let{children:t,p:n="p-3"}=e;return(0,a.jsx)("aside",{id:"modal-aside",className:(0,i.cn)("max-w-full flex-1 flex flex-col gap-3","border-l border-white-400/10 bg-black-400","sm:min-w-96 md:min-h-full md:max-w-96 md:flex-none xs:h-auto",n),children:t})}},62131:function(e,t,n){var a=n(7590),i=n(81662),l=n(80250),r=n(15597),o=n(70817);n(82581),t.Z=e=>{let{panelData:t}=e,{faceswap:{base_image:n,face_image:s,faceswap_strength:c,base_width:d,base_height:u}}=t;return(0,a.jsxs)(i.w,{className:"w-full max-w-md mx-auto",children:[(0,a.jsx)(l.u,{children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"FaceSwap Details"})}),(0,a.jsx)(r.G,{className:"gap-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm text-white-400/50 font-medium mb-2",children:"Base Image"}),n?(0,a.jsx)("img",{src:n,width:d,height:u,alt:"Base",className:"w-full h-40 object-cover rounded"}):(0,a.jsx)("p",{className:"text-gray-500",children:"No base image uploaded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm text-white-400/50 font-medium mb-2",children:"Face Image"}),s?(0,a.jsx)("img",{src:s,alt:"Face",width:160,height:160,className:"w-full size-full object-cover rounded"}):(0,a.jsx)("p",{className:"text-gray-500",children:"No face image uploaded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm text-white-400/50 font-medium mb-2",children:"Faceswap Strength"}),(0,a.jsx)(o.W,{value:100*c,className:"w-full"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(100*c).toFixed(0),"%"]})]})]})})]})}},56274:function(e,t,n){n.d(t,{R:function(){return s}});var a=n(7590),i=n(81662),l=n(80250),r=n(15597),o=n(51208);let s=e=>{var t;let{prompt:n,index:o=0,showPanel:s=!1}=e;if(!n)return null;let d=n.character.replace("ai_character:",""),u=null===(t=n.aesthetic)||void 0===t?void 0:t.replace("aesthetic:","");return(0,a.jsxs)(i.w,{classNames:{base:"pb-1"},children:[(0,a.jsx)(l.u,{className:"text-lg font-semibold pb-1 z-1",children:s?"Panel ".concat(o+1," Generation Details"):"Generation Details"}),(0,a.jsxs)(r.G,{className:"gap-6",children:[(0,a.jsx)(c,{title:"Positive Prompt",content:n.user_positive_prompt}),(0,a.jsx)(c,{title:"Negative Prompt",content:n.user_negative_prompt}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(c,{title:"Aesthetic",content:u,hideCopyButton:!0}),(0,a.jsx)(c,{title:"Character",content:d,hideCopyButton:!0}),(0,a.jsx)(c,{title:"Aspect Ratio",content:n.aspect_ratio,hideCopyButton:!0}),(0,a.jsx)(c,{title:"Seed",content:n.seed.toString()}),(0,a.jsx)(c,{title:"CFG Scale",content:n.cfg_scale.toString(),hideCopyButton:!0})]})]})]})},c=e=>{let{title:t="",content:n="",hideCopyButton:i=!1}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"text-xs text-white-400/50 font-medium",children:t}),(0,a.jsx)(o.Z,{hideSymbol:!0,hideCopyButton:i||!n,classNames:{base:"bg-[#27292C] min-h-[44px]",pre:"whitespace-pre-wrap max-w-full"},children:n||(0,a.jsx)("span",{className:"text-white-400/50 select-none",children:"N/A"})})]})}},15659:function(e,t,n){n.d(t,{D:function(){return u},h:function(){return m}});var a=n(7590),i=n(61594),l=n(64064),r=n(23143),o=n(82581),s=n(36572),c=n(62247),d=n(96616);let u=e=>{var t;let{deck:n,newPosts:u=0,hideActiveState:m=!1}=e,h=(0,r.useRouter)(),f=(0,r.usePathname)(),x=(0,o.useMemo)(()=>(0,d.o4)(n.id),[n.id]),p=(0,o.useMemo)(()=>f.length>5&&x.startsWith(f),[x,f]),g=(0,o.useMemo)(()=>p&&!m?"bg-white-400/10":"",[m,p]),w=(0,o.useCallback)(()=>{if(0===u)return h.push(x);let e=(0,d.o4)(n.id,{sort_by:s.a.Recent});h.push(e)},[n.id,x,u,h]);return(0,a.jsxs)("div",{className:(0,c.cn)("flex items-center px-1.5 justify-between rounded-md gap-6 h-8 min-h-8 cursor-pointer",g,"tap-highlight-transparent outline-none data-[focus-visible=true]:z-10 data-[focus-visible=true]:outline-2 data-[focus-visible=true]:outline-focus data-[focus-visible=true]:outline-offset-2 text-medium text-primary no-underline hover:opacity-80 active:opacity-disabled transition-opacity"),onClick:w,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 truncate",children:[(0,a.jsx)(i.h,{size:"sm",radius:"sm",src:null!==(t=n.cover_photo)&&void 0!==t?t:"",className:"max-w-5 max-h-5 rounded-sm"}),(0,a.jsx)("span",{className:"flex-1 gap-1 justify-center truncate text-sm font-base text-white-400",children:n.title})]}),u>0?(0,a.jsxs)(l.z,{size:"sm",classNames:{base:"text-blue-300 bg-blue-100/25 border-1 border-blue-500/25"},children:["+",u]}):(0,a.jsx)("div",{className:"w-8"})]},n.id)},m=()=>(0,a.jsxs)("div",{className:"w-full h-8 flex items-center px-1.5 gap-2",children:[(0,a.jsx)("div",{className:"size-5 bg-white-400/10 rounded-sm"}),(0,a.jsx)("div",{className:"w-3/5 h-4 bg-white-400/5 rounded-lg"})]})},43062:function(e,t,n){n.d(t,{s:function(){return o}});var a=n(7590),i=n(27613),l=n(4763),r=n(89405);let o=e=>{let{handle:t,avatar:n,name:o,createdAt:s,publishedAt:c}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.default,{href:"/u/".concat(t),children:(0,a.jsx)(i.default,{src:null!=n?n:"https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png",alt:null!=t?t:"Anonymous",width:48,height:48,className:"size-10 rounded-full bg-black-300"})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-center",children:[(0,a.jsx)(l.default,{href:"/u/".concat(t),children:(0,a.jsx)("h2",{className:"text-sm font-bold",children:null!=o?o:"Anonymous"})}),(0,a.jsx)("h3",{className:"text-xs font-medium text-white-400/75",children:c?"Published ".concat((0,r.Po)(new Date(c))):"Created ".concat((0,r.Po)(new Date(s)))})]})]})}},9769:function(e,t,n){n.d(t,{g:function(){return s}});var a=n(7590),i=n(27613),l=n(82581),r=n(89065),o=n(62247);let s=e=>{let{type:t,src:n,topText:s,bottomText:c,centerText:d,id:u="image-canvas",imageWidth:m=1152,imageHeight:h=1152,canvasWidth:f=1152,canvasHeight:x=1152,alt:p="Generated Image",progress:g=100,className:w=""}=e,v=(0,l.useRef)(new Image),y=(0,l.useRef)(null),b=(0,l.useMemo)(()=>g&&g<100&&g>0,[g]);return(0,l.useEffect)(()=>{let e=v.current,a=y.current;if(a){if(n||d)"image"===t||"faceswap"===t?(e.onload=()=>{(0,r.el)({image:e,canvas:a,topText:s,bottomText:c,centerText:null,canvasWidth:f,canvasHeight:x,imageWidth:m,imageHeight:h})},e.height=h,e.width=m,e.src=n):"text"===t&&(e.height=h,e.width=m,(0,r.el)({image:e,canvas:a,topText:null,bottomText:null,centerText:d,canvasWidth:f,canvasHeight:x,imageWidth:m,imageHeight:h}));else{(0,r.el)({image:e,canvas:a,topText:null,bottomText:null,centerText:null,canvasWidth:1152,canvasHeight:1152,imageWidth:1152,imageHeight:1152});return}}},[c,x,f,d,h,m,n,s,t]),(0,a.jsx)("div",{id:u,className:"size-full transition-all flex items-center justify-center",children:b?(0,a.jsx)(i.default,{draggable:!1,priority:!0,src:n,alt:p,style:{borderRadius:"0px",filter:g<100?"blur(".concat(70/g,"px)"):"none",transition:"filter 0.5s"},className:(0,o.cn)("transition-all object-cover","w-[".concat(m,"px] h-[").concat(h,"px]"),w),width:m,height:h}):(0,a.jsx)("canvas",{ref:y,className:(0,o.cn)("size-full object-cover",w)})})}},41781:function(e,t,n){n.d(t,{y:function(){return i}});var a=n(82581);let i=e=>{let{locked:t=!0}=e;(0,a.useEffect)(()=>{if(t){if(window.innerWidth>1024){let e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=e}{let e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=e}}},[t])}},60516:function(e,t,n){n.d(t,{f:function(){return r}});var a=n(82581),i=n(92782);function l(e){return e.startsWith("<!doctype")}function r(e){let[t,n]=(0,a.useState)(l(e.url)?e.source_url||"":e.url.startsWith("/")?i.j7&&!l(e.url)?e.url:e.source_url||e.url:e.url);return{src:t,onError:(0,a.useCallback)(()=>{var t;console.warn("Error loading image (Kinode may be offline). Falling back to",e.source_url),n(null!==(t=e.source_url)&&void 0!==t?t:"")},[e])}}},86960:function(e,t,n){n.d(t,{N:function(){return o},e:function(){return s}});var a=n(23143),i=n(89405),l=n(96616);let r=["/home","/trending"],o=e=>r.some(t=>e.startsWith(t)),s=()=>{let e=(0,a.useRouter)(),t=(0,a.usePathname)(),n=(0,a.useSearchParams)(),s=e=>{let a=!!e.postId,o=a?e.postId:e.imageId;if(!o)return t;let s=encodeURIComponent((0,i.eC)(o));if(r.includes(t)){let e=new URLSearchParams(n.toString()),a="".concat(t,"/").concat(s);return(0,l.wS)(a,e)}{let e=new URLSearchParams(n.toString());return a?(e.set("postId",s),e.delete("imageId")):(e.set("imageId",s),e.delete("postId")),(0,l.wS)(t,e)}},c=()=>{let e=t;o(t)&&(e=t.split("/").slice(0,-1).join("/"));let a=new URLSearchParams(n.toString());return a.delete("postId"),a.delete("imageId"),(0,l.wS)(e,a)};return{getOpenHref:s,openLightBox:t=>{if(!t.postId&&!t.imageId)return;let n=s(t);e.push(n,{scroll:!1})},closeLightBox:()=>{let t=c();e.push(t,{scroll:!1})}}}},22110:function(e,t,n){n.d(t,{o:function(){return o}});var a=n(23143),i=n(82581),l=n(3333),r=n(79738);function o(){let e=(0,a.useRouter)(),[t,n]=(0,i.useState)(!1),[o]=(0,l.xY)();return{isRemixing:t,onClickRemix:(0,i.useCallback)(async t=>{t.meme,n(!0);try{if(t.meme)e.push("/studio?remix=".concat(t.meme.id.replace("meme:","")));else if(t.image){let{data:n}=await o({panel_layout:r.L.One,panels:[{index:0,panel_type:"image",panel_config:{},image_id:t.image.id}]});if(!n)throw Error("Failed to create meme");e.push("/studio?meme=".concat(n.id.replace("meme:","")))}}catch(e){n(!1)}},[o,e])}}},84187:function(e,t,n){n.d(t,{d:function(){return r}});var a=n(23143),i=n(82581),l=n(86960);let r=e=>{let{key:t,index:n,params:r}=e,o=(0,a.usePathname)(),s=(0,i.useMemo)(()=>{if("postId"===t&&!(0,l.N)(o))return r[t]||"";if("imageId"!==t){var e;let a=null!==(e=o&&o.split("/")[n||2])&&void 0!==e?e:"";return r[t]||a}},[n,t,r,o]);return{[t]:s?decodeURIComponent(s):""}}},5852:function(e,t,n){n.d(t,{u:function(){return i}});var a=n(82581);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{up:[],down:[]},n=(0,a.useMemo)(()=>t.up,[t.up,t.up.length]),i=(0,a.useMemo)(()=>t.down,[t.down,t.down.length]);return{voteSum:(0,a.useMemo)(()=>n.length-i.length,[n,i]),hasUpvoted:(0,a.useMemo)(()=>n.some(t=>t.by===e),[n,n.length,e]),hasDownvoted:(0,a.useMemo)(()=>i.some(t=>t.by===e),[i,i.length,e])}}},16275:function(e,t,n){n.d(t,{J2:function(){return r},WN:function(){return o},aN:function(){return s},i4:function(){return l}});var a=n(97032),i=n(79738);let l={[i.L.One]:1,[i.L.TwoHorizontal]:2,[i.L.TwoVertical]:2,[i.L.Four]:4},r={[i.L.One]:"grid-rows-1 h-fit w-fit",[i.L.TwoHorizontal]:"grid-cols-2 w-full h-fit",[i.L.TwoVertical]:"grid-rows-2 w-fit h-full",[i.L.Four]:"grid-cols-2 grid-rows-2"};i.L.One,i.L.TwoHorizontal,i.L.TwoVertical,i.L.Four;let o={[i.L.One]:"h-auto w-fit",[i.L.TwoHorizontal]:"w-full h-fit",[i.L.TwoVertical]:"w-fit h-full",[i.L.Four]:"h-auto w-fit"},s={[i.L.One]:a.t.Square,[i.L.TwoHorizontal]:a.t.Portrait,[i.L.TwoVertical]:a.t.Landscape,[i.L.Four]:a.t.Square}},97032:function(e,t,n){var a,i;n.d(t,{t:function(){return a}}),(i=a||(a={})).Square="square",i.Landscape="landscape",i.Portrait="portrait"},79738:function(e,t,n){var a,i;n.d(t,{L:function(){return a}}),(i=a||(a={})).One="one",i.TwoVertical="two-vertical",i.TwoHorizontal="two-horizontal",i.Four="four-square"},89065:function(e,t,n){n.d(t,{jt:function(){return g},el:function(){return f},mr:function(){return p}});var a=n(16275),i=n(79738);async function l(e){return await new Promise((t,n)=>{e.toBlob(e=>{if(!e){n(Error("Failed to create blob"));return}let a=new FileReader;a.onload=()=>{t(new Uint8Array(a.result))},a.readAsArrayBuffer(e)},"image/jpeg")})}var r=n(22890),o=n(80797);async function s(e){let{ctx:t,url:n,x:a,y:i,paneWidth:l,paneHeight:r}=e,s=new Image;s.crossOrigin="Anonymous",s.src=n,await new Promise((e,t)=>{s.onload=e,s.onerror=t}),await (0,o.h)({ctx:t,image:s,targetWidth:l,targetHeight:r,imageWidth:s.width,imageHeight:s.height,anchorX:a,anchorY:i})}var c=n(92782);async function d(e){let{ctx:t,content:n,placement:a,x:i,y:l,maxWidth:r}=e;return new Promise(e=>{for(var o=n.split(" "),s="",d=[],u=0;u<o.length;u++){var m=s+o[u]+" ";t.measureText(m).width>r&&u>0?(d.push({text:s,y:l}),s=o[u]+" ",l+=100):s=m}if(d.push({text:s.trim(),y:l}),"bottom"===a){let e=100*d.length;d=d.map(t=>({text:t.text,y:t.y-e+100}))}if("center"===a){let e=100*d.length;d=d.map(t=>({text:t.text,y:t.y-e/2+50}))}d.forEach(e=>{(0,c.Dt)()?(t.strokeText(e.text,i,e.y),t.fillText(e.text,i,e.y)):(t.fillText(e.text,i,e.y),t.strokeText(e.text,i,e.y))}),e()})}async function u(e){return new Promise((t,n)=>{let a=new Image;a.crossOrigin="Anonymous",a.src="/memedeck:memedeck:meme-deck.os/_next/static/media/logo.650a12fc.png";let i=e.canvas.width,l=e.canvas.height,r=32;i>1152&&l>1152?r=64:(i>1152||l>1152)&&(r=48),a.onload=()=>{let n=i-r-10,o=l-r-10;e.save(),e.globalAlpha=.4,e.drawImage(a,n,o,r,r),e.restore(),t()},a.onerror=e=>{n(e)}})}let m="bold ".concat(80,"px Impact");function h(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e.font=m,e.fillStyle=t?"white":"black",e.strokeStyle=t?"black":"white",e.lineWidth=3,e.lineJoin="round",e.textAlign="center",(0,c.Dt)()&&(e.shadowColor=t?"black":"white",e.shadowBlur=6,e.shadowOffsetX=0,e.shadowOffsetY=0)}async function f(e){let{image:t,canvas:n,topText:a,bottomText:i,centerText:l,canvasWidth:r,canvasHeight:s,imageWidth:c,imageHeight:u}=e,m=n.getContext("2d");if(!m||(t.width=c,t.height=u,n.width=r,n.height=s,l?(m.fillStyle="white",m.fillRect(0,0,n.width,n.height)):await (0,o.h)({ctx:m,image:t,targetWidth:r,targetHeight:s,imageWidth:c,imageHeight:u}),!a&&!i&&!l))return;h(m,!l);let f=n.width-40,x=n.width/2,p=n.height/2,g=n.height-64;a&&await d({ctx:m,content:a,placement:"top",x,y:120,maxWidth:f}),l&&await d({ctx:m,content:l,placement:"center",x,y:p,maxWidth:f}),i&&await d({ctx:m,content:i,placement:"bottom",x,y:g,maxWidth:f})}async function x(e,t,n,a,i){return new Promise(l=>{e.fillStyle="black",e.fillRect(t,n,a,i),l()})}async function p(e){let{canvas:t,studioPanels:n,studioLayout:l,paneAspectRatio:o}=e,c=t.getContext("2d");if(!c)throw Error("Failed to create canvas context");let{paneWidth:m,paneHeight:f}=(0,r.rf)(l,o),p=(0,r.rf)(l,o),{canvasWidth:g,canvasHeight:w}=(0,r.GJ)(l,p);t.width=g,t.height=w;let v=Object.values(n),y=v.map(e=>"image"===e.panel_type||"faceswap"===e.panel_type?e:null).filter(Boolean),b=v.map(e=>"text"===e.panel_type?e:null).filter(Boolean);for(let e=0;e<Math.min(a.i4[l],y.length+b.length);e++){let t=y.find(t=>(null==t?void 0:t.idx)===e),n=b.find(t=>(null==t?void 0:t.idx)===e);if(!t&&!n){console.error("No panel found for index ".concat(e));continue}let a=0,r=0;if(l===i.L.TwoHorizontal?(a=e%2==0?0:m,r=0):l===i.L.TwoVertical?(a=0,r=e%2==0?0:f):l===i.L.Four&&(a=e%2==0?0:m,r=e<2?0:f),t)try{var j,N,_,k;let e=(null==t?void 0:null===(j=t.panel_config.image)||void 0===j?void 0:j.source_url)||(null==t?void 0:null===(N=t.panel_config.image)||void 0===N?void 0:N.url)||(null==t?void 0:t.local.src);await s({ctx:c,url:e,x:a,y:r,paneWidth:m,paneHeight:f}),h(c);let n=null===(_=t.panel_config.text_overlay)||void 0===_?void 0:_.top_text,i=null===(k=t.panel_config.text_overlay)||void 0===k?void 0:k.bottom_text,l=m-40,o=a+m/2,u=r+120,x=r+f-64;n&&await d({ctx:c,content:n,placement:"top",x:o,y:u,maxWidth:l}),i&&await d({ctx:c,content:i,placement:"bottom",x:o,y:x,maxWidth:l})}catch(e){console.error("Failed to load image from meme source",e)}else if(n){c.fillStyle="white",c.fillRect(a,r,m,f),h(c,!1);let e=m-40,t=a+m/2,i=r+f/2;await d({ctx:c,content:n.panel_config.text,placement:"center",x:t,y:i,maxWidth:e})}}l===i.L.TwoHorizontal?await x(c,m,0,10,w):l===i.L.TwoVertical?await x(c,0,f,g,10):l===i.L.Four&&(await x(c,m,0,10,w),await x(c,0,f,g,10)),await u(c)}async function g(e,t,n){let a=document.createElement("canvas");return await p({canvas:a,studioPanels:e,studioLayout:t,paneAspectRatio:n}),l(a)}},22890:function(e,t,n){n.d(t,{GJ:function(){return o},rf:function(){return r},vO:function(){return s}});var a=n(97032),i=n(79738);let l={[a.t.Square]:[1152,1152],[a.t.Landscape]:[1152,896],[a.t.Portrait]:[896,1152]};function r(e,t){let n=0,a=0;if(e||(e=i.L.One),e===i.L.One){let e=l[t];n=e[0],a=e[1]}else if(e===i.L.TwoVertical)n=1152,a=896;else if(e===i.L.TwoHorizontal)n=896,a=1152;else if(e===i.L.Four)n=1152,a=1152;else throw console.log(e,t),Error("Unsupported panel layout, ");return{paneWidth:n,paneHeight:a}}function o(e,t){let n=0,a=0;if(e===i.L.One&&t)n=t.paneWidth,a=t.paneHeight;else if(e===i.L.TwoVertical)n=1152,a=1792;else if(e===i.L.TwoHorizontal)n=1792,a=1152;else if(e===i.L.Four)n=2304,a=2304;else throw Error("Unsupported panel layout");return{canvasWidth:n,canvasHeight:a}}function s(e,t){return 10>Math.abs(e-t)?a.t.Square:e>t?a.t.Landscape:a.t.Portrait}},80797:function(e,t,n){n.d(t,{h:function(){return a}});async function a(e){let{ctx:t,image:n,targetWidth:a,targetHeight:i,imageWidth:l,imageHeight:r,anchorX:o=0,anchorY:s=0}=e;return new Promise(e=>{let c=Math.max(a/l,i/r),d=l*c,u=r*c;t.save(),t.beginPath(),t.rect(o,s,a,i),t.clip(),t.drawImage(n,o+(a-d)/2,s+(i-u)/2,d,u),t.restore(),e()})}},62247:function(e,t,n){n.d(t,{cn:function(){return l}});var a=n(85701),i=n(85062);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,a.W)(t))}},32701:function(e,t,n){n.d(t,{D:function(){return a},k:function(){return i}});let a=(e,t)=>{let n=null;return function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];n&&clearTimeout(n),n=setTimeout(()=>{n&&clearTimeout(n);let t=e(...i);return n=null,t},t)}},i=(e,t)=>{let n=null;return function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return new Promise((a,l)=>{let r=async()=>{n&&clearTimeout(n);try{let t=await e(...i);a(t)}catch(e){l(e)}n=null};n&&clearTimeout(n),n=setTimeout(r,t)})}}},57031:function(e,t,n){n.d(t,{K7:function(){return l},jG:function(){return i},sw:function(){return s},vk:function(){return r},w:function(){return o},zD:function(){return c}});var a=n(92782);let i="MemeDeck",l="Meme With Frens",r="Create & discover memes with AI.",o={title:"".concat(i," â€“ ").concat(l),description:r,metadataBase:new URL(a.j7?"http://localhost:8080":"https://memedeck.xyz"),openGraph:{images:"/opengraph-image.png"}};function s(e){return{title:"AI Meme",description:"View the AI-generated meme on MemeDeck.xyz",titleWithAttribution:"AI Meme by ".concat(e.by.name," (@").concat(e.by.handle,")"),source:e.source,creator:e.by.name,url:e.source_url||e.url,width:e.width,height:e.height}}function c(e){var t,n,a,i,l,r,o,s,c,d,u,m,h,f,x,p,g,w;let v="".concat(e.by.name," (@").concat(e.by.handle,")"),y="AI Meme",b="View the AI-generated meme by ".concat(v," on MemeDeck.xyz"),j="",N=1152,_=1152,k="image";if("image"===e.post_type)k=null!==(r=null===(t=e.image)||void 0===t?void 0:t.source)&&void 0!==r?r:"image",j=(null===(n=e.image)||void 0===n?void 0:n.source_url)||(null===(a=e.image)||void 0===a?void 0:a.url)||"",N=null!==(o=null===(i=e.image)||void 0===i?void 0:i.width)&&void 0!==o?o:1152,_=null!==(s=null===(l=e.image)||void 0===l?void 0:l.height)&&void 0!==s?s:1152;else if("meme"===e.post_type){let t=Object.values(null!==(x=null===(c=e.meme)||void 0===c?void 0:c.panels)&&void 0!==x?x:{}),n=t.find(e=>"image"===e.panel_type&&e.panel_config.prompt),a=t.find(e=>"image"===e.panel_type&&e.panel_config.image),i=n?n.panel_config.prompt:null,l=a?a.panel_config.image:null,r=t.find(e=>"faceswap"===e.panel_type&&e.panel_config.faceswap),o=r?r.panel_config.faceswap:null;if(i)y=i.character.replace("ai_character:","").replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),b=i.user_positive_prompt;else if(l){let e=null!==(p=null==l?void 0:l.extracted_text)&&void 0!==p?p:"";y=e.length>50?"".concat(e.slice(0,50),"..."):e,b=l.search_text}else o&&(y="Face Swap",b="View the face swap meme by ".concat(v," on MemeDeck.xyz"));j=(null===(d=e.meme)||void 0===d?void 0:d.url)||(null===(u=e.image)||void 0===u?void 0:u.source_url)||(null===(m=e.image)||void 0===m?void 0:m.url)||"",N=null!==(g=null===(h=e.meme)||void 0===h?void 0:h.width)&&void 0!==g?g:1152,_=null!==(w=null===(f=e.meme)||void 0===f?void 0:f.height)&&void 0!==w?w:1152}let I="".concat(y," by ").concat(v);return{title:y,titleWithAttribution:I,description:b,source:k,creator:v,url:j,width:N,height:_}}},96616:function(e,t,n){function a(e,t){return t.toString().length?"".concat(e,"?").concat(t.toString()):e}function i(e,t){let n=new URLSearchParams;return(null==t?void 0:t.sort_by)&&n.set("sort_by",t.sort_by),"/deck/".concat(e.replace("deck:",""),"?").concat(n.toString())}function l(e){return"/home/".concat(e.replace("meme:",""))}function r(e){let t=e.deck_id.replace("deck:",""),n=e.id.replace("contest:","");return"/deck/".concat(t,"/contest/").concat(n)}function o(e){let t=e.id.replace("contest:",""),n="/studio?contestId=".concat(t);if(e.matching_rules){let t=e.matching_rules.characters[0];n+="&characterId=".concat(t)}return n}n.d(t,{CU:function(){return r},Wi:function(){return l},eT:function(){return o},o4:function(){return i},wS:function(){return a}})},38725:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/magic.8c74570a.svg",height:18,width:18,blurWidth:0,blurHeight:0}},28986:function(e,t){t.Z={src:"/memedeck:memedeck:meme-deck.os/_next/static/media/xmark.ac6fe3e8.svg",height:48,width:48,blurWidth:0,blurHeight:0}}}]);